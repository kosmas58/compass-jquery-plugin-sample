!!!
/
  A tabs control against data, using {{tmpl}}
%html{:xmlns => "http://www.w3.org/1999/xhtml"}
  %head
    %title A tabs control against data, using {{tmpl}}
    %link{:href => "resources/tabs.css", :rel => "stylesheet", :type => "text/css"}/
  %body
    %h1 Tabs
    #tabsView ..loading
    %script{:src => "http://code.jquery.com/jquery.js", :type => "text/javascript"}
    %script{:src => "../../../jquery.tmpl.js", :type => "text/javascript"}
    %script#tabsTmpl{:type => "text/x-jquery-tmpl"}
      %table.tabsView
        %tbody
          %tr {{tmpl(items) "#headerItemTmpl"}}
          %tr
            %td{:colspan => "${items.length}"}
              .body {{tmpl(activeDataItem) "#contentTmpl"}}
    %script#headerItemTmpl{:type => "text/x-jquery-tmpl"}
      %th{:class => "header_${$data === activeDataItem}"} ${name}
    %script#contentTmpl{:type => "text/x-jquery-tmpl"}
      %h3 ${title}
      %div {{html description}}
    :javascript
      // ******************** Data for categories and samples ********************

      var samples = {
      		title: "Templating samples",
      		items: [
      			{ name: "Inline", title: "Template inline in a script block",
      				description:"Rendering a template declared in script block" },
      			{ name: "String", title: "Template as string", 
      				description:"Rendering a template passed as a string" },
      			{ name: "Remote", title: "Render remote data", 
      				description:"Rendering remote data using templates" },
      			{ name: "TreeView", title: "Building a Tree View", 
      				description:"A tree view using recursive nested templates" },
      			{ name: "Tabs", title: "A Tabs control", 
      				description:"Create a tabs control using templates" }
      		]
      	},

      	activeDataItem = samples.items[0];

      // ******************** Load UI ********************

      $( "#tabsView" ).empty();
      $( "#tabsTmpl" ).tmpl( samples ).appendTo( "#tabsView" );

      // ******************** Events ********************

      $( "#tabsView" )
      	.delegate( ".header_false", "click", function() {
      		// Get the 'template item' for this tab
      		var activeHeaderTmplItem = $.tmplItem( this );
      		activeDataItem = activeHeaderTmplItem.data;

      		// Update the template item for the whole tabs control
      		activeHeaderTmplItem.parent.update();
      	})

!!!
/
  A tabs control against HTML markup, using imperative API to provide wrapped HTML content
%html{:xmlns => "http://www.w3.org/1999/xhtml"}
  %head
    %title A tabs control against HTML markup, using imperative API to provide wrapped HTML content
    %link{:href => "resources/tabs.css", :rel => "stylesheet", :type => "text/css"}/
  %body
    %h1 Tabs
    #tabsView ..loading
    %script{:src => "http://code.jquery.com/jquery.js", :type => "text/javascript"}
    %script{:src => "../../../jquery.tmpl.js", :type => "text/javascript"}
    #tabsContent{:style => "display:none"}
      %h3 Inline
      %div
        Rendering a
        %span.special template
        declared in script block
      %h3 String
      %div
        Rendering a
        %span.special template
        passed as a string
      %h3 Remote
      %div
        Rendering remote data using
        %span.special templates
    %script#tabsWrap{:type => "text/x-jquery-tmpl"}
      %table.tabsView
        %tbody
          %tr
            {{each $item.html("h3", true)}}
            %th{:class => "header_${$index === $item.state.activeIndex}"}
              ${$value}
            {{/each}}
          %tr
            %td{:colspan => "${$item.html(\"h3\").length}"}
              .body
                {{html $item.html("div")[$item.state.activeIndex]}}
    :javascript
      var state = { activeIndex: 0 };

      // ******************** Load UI ********************

      $( "#tabsView" ).empty();
      $( "#tabsWrap" ).tmpl( null, {state: state, wrapped: "#tabsContent"} ).appendTo( "#tabsView" );

      // ******************** Events ********************

      $( "#tabsView" )
      	.delegate( ".header_false", "click", function() {
      		var ti = $.tmplItem( this );
      		ti.state.activeIndex = $(this).index();
      		ti.update();
      	});


%link{:href => "/images/demo/mobile/homeicon.png", :rel => "apple-touch-icon"}/
  = stylesheet_link_tag "compiled/jquery/ui/#{session[:theme]}", :media => 'screen, projection'
  = javascript_include_tag :jquery_ui

:css
  .ui-datepicker-calendar th { padding-top: .3em; padding-bottom: .3em; }
  .ui-datepicker-calendar th span, .ui-datepicker-calendar span.ui-state-default { opacity: .3; }
  .ui-datepicker-calendar td a { padding-top: .5em; padding-bottom: .5em; }

:javascript
  $(function(){
  
    /*  datepicker workaround - update markup and classes for Mobile */
    var updateDatepicker = function(){
      $('.ui-datepicker-header').addClass('ui-body-c ui-corner-top').removeClass('ui-corner-all');
      $('.ui-datepicker-prev, .ui-datepicker-next').attr('href', '#');
      $('.ui-datepicker-prev').buttonMarkup({iconpos: 'notext', icon: 'arrow-l', shadow: true, corners: true});
      $('.ui-datepicker-next').buttonMarkup({iconpos: 'notext', icon: 'arrow-r', shadow: true, corners: true});
      $('.ui-datepicker-calendar th').addClass('ui-bar-c');
      $('.ui-datepicker-calendar td').addClass('ui-body-c');
      $('.ui-datepicker-calendar a').buttonMarkup({corners: false, shadow: false}); 
      $('.ui-datepicker-calendar a.ui-state-active').addClass('ui-btn-active'); // selected date
      $('.ui-datepicker-calendar a.ui-state-highlight').addClass('ui-btn-up-e'); // today's date
      $('.ui-datepicker-calendar .ui-btn').each(function(){
        var el = $(this), text = el.find('.ui-btn-text');
        el.html(text.text()); // remove extra button markup - necessary for date value to be interpreted correctly
      });
    };
      
    /* create the datepicker as usual */
    $('input[type=date]').after( $('').datepicker({ altField: '#date', showOtherMonths: true }) );
      
    /* update the datepicker when it loads, or whenever it's clicked (required because it's redrawn) */
    updateDatepicker(); // if you show the datepicker on input focus, call updateDatepicker on the focus event instead
    $('.ui-datepicker').click(updateDatepicker);
  });

-@title = "jQuery Mobile Framework - Grocery List"
-@manifest = "/manifest"

- content_for :content_head do
  = render(:partial => "index.js.haml", :format => :js)

#start{"data-role" => "page", "data-theme" => "a"}
  %div{"data-backbtn" => "false", "data-role" => "header"}
    %a.ui-btn-right{"data-icon" => "plus", "data-rel" => "dialog", "data-transition" => "pop", :href => "#add_item"} Add item
    %h1 Offline Shopping List
  %div{"data-role" => "content", "data-theme" => "a"}
    %ol#items{"data-inset"=> "true", "data-role" => "listview", "data-split-icon" => "delete", "data-theme" => "a"}
      - if @current_objects.empty?
        %li
          %em
            Loading items...
      - else
        - @current_objects.each do |item|
          %li
            -if item.checked
              %img#box.ui-icon-checkbox-off.ui-icon-checkbox-on{ :src => "/images/demo/empty.png" }
            -else
              %img#box.ui-icon-checkbox-off{ :src => "/images/demo/empty.png" }
            %a#item{ :value => item.id, :href => "#" }
              = item.name
            %a{"data-rel" => "dialog", "data-transition" => "slideup", :href => "#delete_item"} Delete item
#add_item{"data-role" => "page", "data-theme" => "a"}
  %div{"data-backbtn" => "false", "data-role" => "header", "data-theme" => "a"}
    %h1 Add item to list
  %div{"data-role" => "content", "data-theme" => "a"}
    %form{:action => :create, :method => :post, :format => :json}
      %fieldset
        %div{"data-role" => "fieldcontain"}
          %label{:for => "name"} Name:
          %input#item_name{:name => "name", :type => "text", :value => ""}
          %button#create_item{:type => "submit", "data-theme" => "b"} Add item
#delete_item{"data-role" => "page", "data-theme" => "a"}
  %div{"data-backbtn" => "false", "data-role" => "header", "data-theme" => "a"}
    %h1 Delete item from list
  %div{"data-role" => "content", "data-theme" => "a"}
    %form{:action => :destroy, :method => :delete, :format => :json}
  
  
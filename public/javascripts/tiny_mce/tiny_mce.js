(function(k){var n=/^\s*|\s*$/g,p="B".replace(/A(.)|B/,"$1")==="$1",m={majorVersion:"3",minorVersion:"4",releaseDate:"2011-03-10",_init:function(){function e(c){if(c.src&&/tiny_mce(|_gzip|_jquery|_prototype|_full)(_dev|_src)?.js/.test(c.src)){if(/_(src|dev)\.js/g.test(c.src))a.suffix="_src";if((g=c.src.indexOf("?"))!=-1)a.query=c.src.substring(g+1);a.baseURL=c.src.substring(0,c.src.lastIndexOf("/"));if(i&&a.baseURL.indexOf("://")==-1&&a.baseURL.indexOf("/")!==0)a.baseURL=i+a.baseURL;return a.baseURL}return null}
var a=this,f=document,b=navigator,d=b.userAgent,i,g,j;a.isOpera=k.opera&&opera.buildNumber;a.isWebKit=/WebKit/.test(d);a.isIE=!a.isWebKit&&!a.isOpera&&/MSIE/gi.test(d)&&/Explorer/gi.test(b.appName);a.isIE6=a.isIE&&/MSIE [56]/.test(d);a.isGecko=!a.isWebKit&&/Gecko/.test(d);a.isMac=d.indexOf("Mac")!=-1;a.isAir=/adobeair/i.test(d);a.isIDevice=/(iPad|iPhone)/.test(d);if(k.tinyMCEPreInit){a.suffix=tinyMCEPreInit.suffix;a.baseURL=tinyMCEPreInit.base;a.query=tinyMCEPreInit.query}else{a.suffix="";d=f.getElementsByTagName("base");
for(b=0;b<d.length;b++)if(j=d[b].href){if(/^https?:\/\/[^\/]+$/.test(j))j+="/";i=j?j.match(/.*\//)[0]:""}d=f.getElementsByTagName("script");for(b=0;b<d.length;b++)if(e(d[b]))return;if(f=f.getElementsByTagName("head")[0]){d=f.getElementsByTagName("script");for(b=0;b<d.length;b++)if(e(d[b]))break}}},is:function(e,a){if(!a)return e!==void 0;if(a=="array"&&e.hasOwnProperty&&e instanceof Array)return true;return typeof e==a},makeMap:function(e,a,f){e=e||[];a=a||",";if(typeof e=="string")e=e.split(a);f=
f||{};for(a=e.length;a--;)f[e[a]]={};return f},each:function(e,a,f){var b,d;if(!e)return 0;f=f||e;if(e.length!==void 0){b=0;for(d=e.length;b<d;b++)if(a.call(f,e[b],b,e)===false)return 0}else for(b in e)if(e.hasOwnProperty(b))if(a.call(f,e[b],b,e)===false)return 0;return 1},trim:function(e){return(e?""+e:"").replace(n,"")},create:function(e,a,f){var b,d,i,g,j,c=0;e=/^((static) )?([\w.]+)(:([\w.]+))?/.exec(e);i=e[3].match(/(^|\.)(\w+)$/i)[2];d=this.createNS(e[3].replace(/\.\w+$/,""),f);if(!d[i])if(e[2]==
"static"){d[i]=a;this.onCreate&&this.onCreate(e[2],e[3],d[i])}else{if(!a[i]){a[i]=function(){};c=1}d[i]=a[i];this.extend(d[i].prototype,a);if(e[5]){b=this.resolve(e[5]).prototype;g=e[5].match(/\.(\w+)$/i)[1];j=d[i];d[i]=c?function(){return b[g].apply(this,arguments)}:function(){this.parent=b[g];return j.apply(this,arguments)};d[i].prototype[i]=d[i];this.each(b,function(h,q){d[i].prototype[q]=b[q]});this.each(a,function(h,q){if(b[q])d[i].prototype[q]=function(){this.parent=b[q];return h.apply(this,
arguments)};else if(q!=i)d[i].prototype[q]=h})}this.each(a["static"],function(h,q){d[i][q]=h});this.onCreate&&this.onCreate(e[2],e[3],d[i].prototype)}},walk:function(e,a,f,b){b=b||this;if(e){if(f)e=e[f];m.each(e,function(d,i){if(a.call(b,d,i,f)===false)return false;m.walk(d,a,f,b)})}},createNS:function(e,a){var f,b;a=a||k;e=e.split(".");for(f=0;f<e.length;f++){b=e[f];a[b]||(a[b]={});a=a[b]}return a},resolve:function(e,a){var f,b;a=a||k;e=e.split(".");f=0;for(b=e.length;f<b;f++){a=a[e[f]];if(!a)break}return a},
addUnload:function(e,a){var f=this;e={func:e,scope:a||this};if(f.unloads)f.unloads.push(e);else{var b=function(){var i=f.unloads,g,j;if(i){for(j in i)(g=i[j])&&g.func&&g.func.call(g.scope,1);if(k.detachEvent){k.detachEvent("onbeforeunload",d);k.detachEvent("onunload",b)}else k.removeEventListener&&k.removeEventListener("unload",b,false);f.unloads=w=b=0;k.CollectGarbage&&CollectGarbage()}},d=function(){var i=document;if(i.readyState=="interactive"){var g=function(){i.detachEvent("onstop",g);b&&b();
i=0};i&&i.attachEvent("onstop",g);k.setTimeout(function(){i&&i.detachEvent("onstop",g)},0)}};if(k.attachEvent){k.attachEvent("onunload",b);k.attachEvent("onbeforeunload",d)}else k.addEventListener&&k.addEventListener("unload",b,false);f.unloads=[e]}return e},removeUnload:function(e){var a=this.unloads,f=null;m.each(a,function(b,d){if(b&&b.func==e){a.splice(d,1);f=e;return false}});return f},explode:function(e,a){return e?m.map(e.split(a||","),m.trim):e},_addVer:function(e){var a;if(!this.query)return e;
a=(e.indexOf("?")==-1?"?":"&")+this.query;if(e.indexOf("#")==-1)return e+a;return e.replace("#",a+"#")},_replace:function(e,a,f){if(p)return f.replace(e,function(){var b=a,d=arguments,i;for(i=0;i<d.length-2;i++)b=d[i]===void 0?b.replace(RegExp("\\$"+i,"g"),""):b.replace(RegExp("\\$"+i,"g"),d[i]);return b});return f.replace(e,a)}};m._init();k.tinymce=k.tinyMCE=m})(window);
(function(k,n){var p=/^(href|src|style)$/i;if(!k)return alert("Load jQuery first!");n.$=k;n.adapter={patchEditor:function(e){function a(g,j){j&&this.removeAttr("data-mce-style");return i.css.apply(this,arguments)}function f(g,j){if(p.test(g))if(j!==void 0){this.each(function(c,h){e.dom.setAttrib(h,g,j)});return this}else return this.attr("data-mce-"+g);return i.attr.apply(this,arguments)}function b(g){return function(j){if(j)j=e.dom.processHTML(j);return g.call(this,j)}}function d(g){if(g.css!==a){g.css=
a;g.attr=f;g.html=b(i.html);g.append=b(i.append);g.prepend=b(i.prepend);g.after=b(i.after);g.before=b(i.before);g.replaceWith=b(i.replaceWith);g.tinymce=e;g.pushStack=function(){return d(i.pushStack.apply(this,arguments))}}return g}var i=k.fn;e.$=function(g,j){var c=e.getDoc();return d(k(g||c,c||j))}}};n.extend=k.extend;n.extend(n,{map:k.map,grep:function(e,a){return k.grep(e,a||function(){return 1})},inArray:function(e,a){return k.inArray(a,e||[])}});var m={"tinymce.dom.DOMUtils":{select:function(e,
a){return k.find(e,this.get(a)||this.get(this.settings.root_element)||this.doc,[])},is:function(e,a){return k(this.get(e)).is(a)}}};n.onCreate=function(e,a,f){n.extend(f,m[a])}})(window.jQuery,tinymce);
tinymce.create("tinymce.util.Dispatcher",{scope:null,listeners:null,Dispatcher:function(k){this.scope=k||this;this.listeners=[]},add:function(k,n){this.listeners.push({cb:k,scope:n||this.scope});return k},addToTop:function(k,n){this.listeners.unshift({cb:k,scope:n||this.scope});return k},remove:function(k){var n=this.listeners,p=null;tinymce.each(n,function(m,e){if(k==m.cb){p=k;n.splice(e,1);return false}});return p},dispatch:function(){var k,n=arguments,p,m=this.listeners;for(p=0;p<m.length;p++){k=
m[p];k=k.cb.apply(k.scope,n);if(k===false)break}return k}});
(function(){var k=tinymce.each;tinymce.create("tinymce.util.URI",{URI:function(n,p){var m=this,e;n=tinymce.trim(n);p=m.settings=p||{};if(/^(mailto|tel|news|javascript|about|data):/i.test(n)||/^\s*#/.test(n))m.source=n;else{if(n.indexOf("/")===0&&n.indexOf("//")!==0)n=(p.base_uri?p.base_uri.protocol||"http":"http")+"://mce_host"+n;/^\w*:?\/\//.test(n)||(n=(p.base_uri.protocol||"http")+"://mce_host"+m.toAbsPath(p.base_uri.path,n));n=n.replace(/@@/g,"(mce_at)");n=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*):?([^:@]*))?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/.exec(n);
k(["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],function(a,f){var b=n[f];if(b)b=b.replace(/\(mce_at\)/g,"@@");m[a]=b});if(e=p.base_uri){if(!m.protocol)m.protocol=e.protocol;if(!m.userInfo)m.userInfo=e.userInfo;if(!m.port&&m.host=="mce_host")m.port=e.port;if(!m.host||m.host=="mce_host")m.host=e.host;m.source=""}}},setPath:function(n){n=/^(.*?)\/?(\w+)?$/.exec(n);this.path=n[0];this.directory=n[1];this.file=n[2];this.source=
"";this.getURI()},toRelative:function(n){var p;if(n==="./")return n;n=new tinymce.util.URI(n,{base_uri:this});if(n.host!="mce_host"&&this.host!=n.host&&n.host||this.port!=n.port||this.protocol!=n.protocol)return n.getURI();p=this.toRelPath(this.path,n.path);if(n.query)p+="?"+n.query;if(n.anchor)p+="#"+n.anchor;return p},toAbsolute:function(n,p){n=new tinymce.util.URI(n,{base_uri:this});return n.getURI(this.host==n.host&&this.protocol==n.protocol?p:0)},toRelPath:function(n,p){var m,e=0,a="",f,b;n=
n.substring(0,n.lastIndexOf("/"));n=n.split("/");m=p.split("/");if(n.length>=m.length){f=0;for(b=n.length;f<b;f++)if(f>=m.length||n[f]!=m[f]){e=f+1;break}}if(n.length<m.length){f=0;for(b=m.length;f<b;f++)if(f>=n.length||n[f]!=m[f]){e=f+1;break}}if(e==1)return p;f=0;for(b=n.length-(e-1);f<b;f++)a+="../";f=e-1;for(b=m.length;f<b;f++)a+=f!=e-1?"/"+m[f]:m[f];return a},toAbsPath:function(n,p){var m,e=0,a=[],f;f=/\/$/.test(p)?"/":"";n=n.split("/");p=p.split("/");k(n,function(b){b&&a.push(b)});n=a;m=p.length-
1;for(a=[];m>=0;m--)if(!(p[m].length==0||p[m]=="."))if(p[m]=="..")e++;else if(e>0)e--;else a.push(p[m]);m=n.length-e;m=m<=0?a.reverse().join("/"):n.slice(0,m).join("/")+"/"+a.reverse().join("/");if(m.indexOf("/")!==0)m="/"+m;if(f&&m.lastIndexOf("/")!==m.length-1)m+=f;return m},getURI:function(n){var p;if(!this.source||n){p="";if(!n){if(this.protocol)p+=this.protocol+"://";if(this.userInfo)p+=this.userInfo+"@";if(this.host)p+=this.host;if(this.port)p+=":"+this.port}if(this.path)p+=this.path;if(this.query)p+=
"?"+this.query;if(this.anchor)p+="#"+this.anchor;this.source=p}return this.source}})})();
(function(){var k=tinymce.each;tinymce.create("static tinymce.util.Cookie",{getHash:function(n){n=this.get(n);var p;n&&k(n.split("&"),function(m){m=m.split("=");p=p||{};p[unescape(m[0])]=unescape(m[1])});return p},setHash:function(n,p,m,e,a,f){var b="";k(p,function(d,i){b+=(!b?"":"&")+escape(i)+"="+escape(d)});this.set(n,b,m,e,a,f)},get:function(n){var p=document.cookie,m=n+"=",e;if(p){e=p.indexOf("; "+m);if(e==-1){e=p.indexOf(m);if(e!=0)return null}else e+=2;n=p.indexOf(";",e);if(n==-1)n=p.length;
return unescape(p.substring(e+m.length,n))}},set:function(n,p,m,e,a,f){document.cookie=n+"="+escape(p)+(m?"; expires="+m.toGMTString():"")+(e?"; path="+escape(e):"")+(a?"; domain="+a:"")+(f?"; secure":"")},remove:function(n,p){var m=new Date;m.setTime(m.getTime()-1E3);this.set(n,"",m,p,m)}})})();
(function(){function k(n,p){var m,e,a;p=p||'"';if(n==null)return"null";a=typeof n;if(a=="string"){e="b\tt\nnf\rr\"\"''\\\\";return p+n.replace(/([\u0080-\uFFFF\x00-\x1f\"\'])/g,function(f,b){if(p==='"'&&f==="'")return f;m=e.indexOf(b);if(m+1)return"\\"+e.charAt(m+1);f=b.charCodeAt().toString(16);return"\\u"+"0000".substring(f.length)+f})+p}if(a=="object"){if(n.hasOwnProperty&&n instanceof Array){m=0;for(e="[";m<n.length;m++)e+=(m>0?",":"")+k(n[m],p);return e+"]"}e="{";for(m in n)e+=typeof n[m]!=
"function"?(e.length>1?","+p:p)+m+p+":"+k(n[m],p):"";return e+"}"}return""+n}tinymce.util.JSON={serialize:k,parse:function(n){try{return eval("("+n+")")}catch(p){}}}})();
tinymce.create("static tinymce.util.XHR",{send:function(k){function n(f){p=0;try{p=new ActiveXObject(f)}catch(b){}return p}var p,m=window,e=0;k.scope=k.scope||this;k.success_scope=k.success_scope||k.scope;k.error_scope=k.error_scope||k.scope;k.async=k.async===false?false:true;k.data=k.data||"";if(p=m.XMLHttpRequest?new XMLHttpRequest:n("Microsoft.XMLHTTP")||n("Msxml2.XMLHTTP")){p.overrideMimeType&&p.overrideMimeType(k.content_type);p.open(k.type||(k.data?"POST":"GET"),k.url,k.async);k.content_type&&
p.setRequestHeader("Content-Type",k.content_type);p.setRequestHeader("X-Requested-With","XMLHttpRequest");p.send(k.data);var a=function(){if(!k.async||p.readyState==4||e++>1E4){if(k.success&&e<1E4&&p.status==200)k.success.call(k.success_scope,""+p.responseText,p,k);else if(k.error)k.error.call(k.error_scope,e>1E4?"TIMED_OUT":"GENERAL",p,k);p=null}else m.setTimeout(a,10)};if(!k.async)return a();m.setTimeout(a,10)}}});
(function(){var k=tinymce.extend,n=tinymce.util.JSON,p=tinymce.util.XHR;tinymce.create("tinymce.util.JSONRequest",{JSONRequest:function(m){this.settings=k({},m);this.count=0},send:function(m){var e=m.error,a=m.success;m=k(this.settings,m);m.success=function(f,b){f=n.parse(f);if(typeof f=="undefined")f={error:"JSON Parse error."};f.error?e.call(m.error_scope||m.scope,f.error,b):a.call(m.success_scope||m.scope,f.result)};m.error=function(f,b){if(e)e.call(m.error_scope||m.scope,f,b)};m.data=n.serialize({id:m.id||
"c"+this.count++,method:m.method,params:m.params});m.content_type="application/json";p.send(m)},"static":{sendRPC:function(m){return(new tinymce.util.JSONRequest).send(m)}}})})();
(function(k){function n(i,g){var j,c,h,q={};if(i){i=i.split(",");g=g||10;for(j=0;j<i.length;j+=2){c=String.fromCharCode(parseInt(i[j],g));if(!m[c]){h="&"+i[j+1]+";";q[c]=h;q[h]=c}}return q}}var p,m,e,a=/[&\"\u007E-\uFFFF]/g,f=/[<>&\u007E-\uFFFF]/g,b=/[<>&\"\']/g,d=/&(#)?([\w]+);/g;m={'"':"&quot;","'":"&#39;","<":"&lt;",">":"&gt;","&":"&amp;"};e={"&lt;":"<","&gt;":">","&amp;":"&","&quot;":'"',"&apos;":"'"};p=n("50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,t9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro",
32);k.html=k.html||{};k.html.Entities={encodeRaw:function(i,g){return i.replace(g?a:f,function(j){return m[j]||j})},encodeAllRaw:function(i){return(""+i).replace(b,function(g){return m[g]||g})},encodeNumeric:function(i,g){return i.replace(g?a:f,function(j){return m[j]||"&#"+j.charCodeAt(0)+";"})},encodeNamed:function(i,g,j){j=j||p;return i.replace(g?a:f,function(c){return m[c]||j[c]||c})},getEncodeFunc:function(i,g){function j(q,o){return q.replace(o?a:f,function(l){return m[l]||g[l]||"&#"+l.charCodeAt(0)+
";"||l})}function c(q,o){return h.encodeNamed(q,o,g)}var h=k.html.Entities;g=n(g)||p;i=k.makeMap(i.replace(/\+/g,","));if(i.named&&i.numeric)return j;if(i.named){if(g)return c;return h.encodeNamed}if(i.numeric)return h.encodeNumeric;return h.encodeRaw},decode:function(i){return i.replace(d,function(g,j,c){if(j)return String.fromCharCode(c);if(!(j=e[g])){if(!(j=p[g])){j=document.createElement("div");j.innerHTML=g;j=j.textContent||j.innerText||g}j=j}return j})}}})(tinymce);
tinymce.html.Styles=function(k,n){function p(g,j,c,h){function q(o){o=parseInt(o).toString(16);return o.length>1?o:"0"+o}return"#"+q(j)+q(c)+q(h)}var m=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*\)/gi,e=/(?:url(?:(?:\(\s*\"([^\"]+)\"\s*\))|(?:\(\s*\'([^\']+)\'\s*\))|(?:\(\s*([^)\s]+)\s*\))))|(?:\'([^\']+)\')|(?:\"([^\"]+)\")/gi,a=/\s*([^:]+):\s*([^;]+);?/g,f=/\s+$/,b,d={},i;k=k||{};i="\\\" \\' \\; \\: ; : _".split(" ");for(b=0;b<i.length;b++){d[i[b]]="_"+b;d["_"+b]=i[b]}return{toHex:function(g){return g.replace(m,
p)},parse:function(g){function j(x,u){var A,J;if(A=l[x+"-top"+u]){J=l[x+"-right"+u];if(A==J){A=l[x+"-bottom"+u];if(J==A){J=l[x+"-left"+u];if(A==J){l[x+u]=J;delete l[x+"-top"+u];delete l[x+"-right"+u];delete l[x+"-bottom"+u];delete l[x+"-left"+u]}}}}}function c(x){var u=l[x],A;if(!(!u||u.indexOf(" ")<0)){u=u.split(" ");for(A=u.length;A--;)if(u[A]!==u[0])return false;l[x]=u[0];return true}}function h(x,u,A,J){if(c(u))if(c(A))if(c(J)){l[x]=l[u]+" "+l[A]+" "+l[J];delete l[u];delete l[A];delete l[J]}}
function q(x){s=true;return d[x]}function o(x,u){if(s)x=x.replace(/_[0-9]/g,function(A){return d[A]});u||(x=x.replace(/\\([\'\";:])/g,"$1"));return x}var l={},r,v,t,s,z=k.url_converter,D=k.url_converter_scope||this;if(g){for(g=g.replace(/\\[\"\';:_]/g,q).replace(/\"[^\"]+\"|\'[^\']+\'/g,function(x){return x.replace(/[;:]/g,q)});r=a.exec(g);){v=r[1].replace(f,"").toLowerCase();t=r[2].replace(f,"");if(v&&t.length>0){if(v==="font-weight"&&t==="700")t="bold";else if(v==="color"||v==="background-color")t=
t.toLowerCase();t=t.replace(m,p);t=t.replace(e,function(x,u,A,J,Y,y){if(Y=Y||y){Y=o(Y);return"'"+Y.replace(/\'/g,"\\'")+"'"}u=o(u||A||J);if(z)u=z.call(D,u,"style");return"url('"+u.replace(/\'/g,"\\'")+"')"});l[v]=s?o(t,true):t}a.lastIndex=r.index+r[0].length}j("border","");j("border","-width");j("border","-color");j("border","-style");j("padding","");j("margin","");h("border","border-width","border-style","border-color");l.border==="medium none"&&delete l.border}return l},serialize:function(g,j){function c(l){var r,
v,t,s;if(r=n.styles[l]){v=0;for(t=r.length;v<t;v++){l=r[v];s=g[l];if(s!==void 0)h+=(h.length>0?" ":"")+l+": "+s+";"}}}var h="",q,o;if(j&&n&&n.styles){c("*");c(q)}else for(q in g){o=g[q];if(o!==void 0)h+=(h.length>0?" ":"")+q+": "+o+";"}return h}}};
(function(k){function n(j,c){return j.split(c||",")}var p={},m,e,a,f,b,d,i=k.makeMap,g=k.each;e="h1,h2,h3,h4,h5,h6,hr,p,div,address,pre,form,table,tbody,thead,tfoot,th,tr,td,li,ol,ul,caption,blockquote,center,dl,dt,dd,dir,fieldset,noscript,menu,isindex,samp,header,footer,article,section,hgroup";e=i(e,",",i(e.toUpperCase()));p=function(j,c){function h(l){return l.replace(/[A-Z]+/g,function(r){return h(j[r])})}var q,o={};for(q in j)if(j.hasOwnProperty(q))j[q]=h(j[q]);h(c).replace(/#/g,"#text").replace(/(\w+)\[([^\]]+)\]\[([^\]]*)\]/g,
function(l,r,v,t){v=n(v,"|");o[r]={attributes:i(v),attributesOrder:v,children:i(t,"|",{"#comment":{}})}});return o}({Z:"H|K|N|O|P",Y:"X|form|R|Q",ZG:"E|span|width|align|char|charoff|valign",X:"p|T|div|U|W|isindex|fieldset|table",ZF:"E|align|char|charoff|valign",W:"pre|hr|blockquote|address|center|noframes",ZE:"abbr|axis|headers|scope|rowspan|colspan|align|char|charoff|valign|nowrap|bgcolor|width|height",ZD:"[E][S]",U:"ul|ol|dl|menu|dir",ZC:"p|Y|div|U|W|table|br|span|bdo|object|applet|img|map|K|N|Q",
T:"h1|h2|h3|h4|h5|h6",ZB:"X|S|Q",S:"R|P",ZA:"a|G|J|M|O|P",R:"a|H|K|N|O",Q:"noscript|P",P:"ins|del|script",O:"input|select|textarea|label|button",N:"M|L",M:"em|strong|dfn|code|q|samp|kbd|var|cite|abbr|acronym",L:"sub|sup",K:"J|I",J:"tt|i|b|u|s|strike",I:"big|small|font|basefont",H:"G|F",G:"br|span|bdo",F:"object|applet|img|map|iframe",E:"A|B|C",D:"accesskey|tabindex|onfocus|onblur",C:"onclick|ondblclick|onmousedown|onmouseup|onmouseover|onmousemove|onmouseout|onkeypress|onkeydown|onkeyup",B:"lang|xml:lang|dir",
A:"id|class|style|title"},"script[id|charset|type|language|src|defer|xml:space][]style[B|id|type|media|title|xml:space][]object[E|declare|classid|codebase|data|type|codetype|archive|standby|width|height|usemap|name|tabindex|align|border|hspace|vspace][#|param|Y]param[id|name|value|valuetype|type][]p[E|align][#|S]a[E|D|charset|type|name|href|hreflang|rel|rev|shape|coords|target][#|Z]br[A|clear][]span[E][#|S]bdo[A|C|B][#|S]applet[A|codebase|archive|code|object|alt|name|width|height|align|hspace|vspace][#|param|Y]h1[E|align][#|S]img[E|src|alt|name|longdesc|width|height|usemap|ismap|align|border|hspace|vspace][]map[B|C|A|name][X|form|Q|area]h2[E|align][#|S]iframe[A|longdesc|name|src|frameborder|marginwidth|marginheight|scrolling|align|width|height][#|Y]h3[E|align][#|S]tt[E][#|S]i[E][#|S]b[E][#|S]u[E][#|S]s[E][#|S]strike[E][#|S]big[E][#|S]small[E][#|S]font[A|B|size|color|face][#|S]basefont[id|size|color|face][]em[E][#|S]strong[E][#|S]dfn[E][#|S]code[E][#|S]q[E|cite][#|S]samp[E][#|S]kbd[E][#|S]var[E][#|S]cite[E][#|S]abbr[E][#|S]acronym[E][#|S]sub[E][#|S]sup[E][#|S]input[E|D|type|name|value|checked|disabled|readonly|size|maxlength|src|alt|usemap|onselect|onchange|accept|align][]select[E|name|size|multiple|disabled|tabindex|onfocus|onblur|onchange][optgroup|option]optgroup[E|disabled|label][option]option[E|selected|disabled|label|value][]textarea[E|D|name|rows|cols|disabled|readonly|onselect|onchange][]label[E|for|accesskey|onfocus|onblur][#|S]button[E|D|name|value|type|disabled][#|p|T|div|U|W|table|G|object|applet|img|map|K|N|Q]h4[E|align][#|S]ins[E|cite|datetime][#|Y]h5[E|align][#|S]del[E|cite|datetime][#|Y]h6[E|align][#|S]div[E|align][#|Y]ul[E|type|compact][li]li[E|type|value][#|Y]ol[E|type|compact|start][li]dl[E|compact][dt|dd]dt[E][#|S]dd[E][#|Y]menu[E|compact][li]dir[E|compact][li]pre[E|width|xml:space][#|ZA]hr[E|align|noshade|size|width][]blockquote[E|cite][#|Y]address[E][#|S|p]center[E][#|Y]noframes[E][#|Y]isindex[A|B|prompt][]fieldset[E][#|legend|Y]legend[E|accesskey|align][#|S]table[E|summary|width|border|frame|rules|cellspacing|cellpadding|align|bgcolor][caption|col|colgroup|thead|tfoot|tbody|tr]caption[E|align][#|S]col[ZG][]colgroup[ZG][col]thead[ZF][tr]tr[ZF|bgcolor][th|td]th[E|ZE][#|Y]form[E|action|method|name|enctype|onsubmit|onreset|accept|accept-charset|target][#|X|R|Q]noscript[E][#|Y]td[E|ZE][#|Y]tfoot[ZF][tr]tbody[ZF][tr]area[E|D|shape|coords|href|nohref|alt|target][]base[id|href|target][]body[E|onload|onunload|background|bgcolor|text|link|vlink|alink][#|Y]");
m=i("checked,compact,declare,defer,disabled,ismap,multiple,nohref,noresize,noshade,nowrap,readonly,selected,preload,autoplay,loop,controls");a=i("area,base,basefont,br,col,frame,hr,img,input,isindex,link,meta,param,embed,source");f=k.extend(i("td,th,iframe,video,object"),a);b=i("pre,script,style");d=i("colgroup,dd,dt,li,options,p,td,tfoot,th,thead,tr");k.html.Schema=function(j){function c(s){var z,D,x,u,A,J,Y,y,B,C,I,H,R,aa,Z,V,ba,ca,E=/^([#+-])?([^\[\/]+)(?:\/([^\[]+))?(?:\[([^\]]+)\])?$/,F=/^([!\-])?(\w+::\w+|[^=:<]+)?(?:([=:<])(.*))?$/,
G=/[*?+]/;if(s){s=n(s);if(l["@"]){V=l["@"].attributes;ba=l["@"].attributesOrder}z=0;for(D=s.length;z<D;z++)if(A=E.exec(s[z])){aa=A[1];B=A[2];Z=A[3];y=A[4];H={};R=[];J={attributes:H,attributesOrder:R};if(aa==="#")J.paddEmpty=true;if(aa==="-")J.removeEmpty=true;if(V){for(ca in V)H[ca]=V[ca];R.push.apply(R,ba)}if(y){y=n(y,"|");x=0;for(u=y.length;x<u;x++)if(A=F.exec(y[x])){Y={};I=A[1];C=A[2].replace(/::/g,":");aa=A[3];A=A[4];if(I==="!"){J.attributesRequired=J.attributesRequired||[];J.attributesRequired.push(C);
Y.required=true}if(I==="-"){delete H[C];R.splice(k.inArray(R,C),1)}else{if(aa){if(aa==="="){J.attributesDefault=J.attributesDefault||[];J.attributesDefault.push({name:C,value:A});Y.defaultValue=A}if(aa===":"){J.attributesForced=J.attributesForced||[];J.attributesForced.push({name:C,value:A});Y.forcedValue=A}if(aa==="<")Y.validValues=i(A,"?")}if(G.test(C)){J.attributePatterns=J.attributePatterns||[];Y.pattern=RegExp("^"+C.replace(/([?+*])/g,".$1")+"$");J.attributePatterns.push(Y)}else{H[C]||R.push(C);
H[C]=Y}}}}if(!V&&B=="@"){V=H;ba=R}if(Z){J.outputName=B;l[Z]=J}if(G.test(B)){J.pattern=RegExp("^"+B.replace(/([?+*])/g,".$1")+"$");v.push(J)}else l[B]=J}}}function h(s){l={};v=[];c(s);g(p,function(z,D){r[D]=z.children})}function q(s){var z=/^(~)?(.+)$/;s&&g(n(s),function(D){D=z.exec(D);var x=D[1]==="~"?"span":"div",u=D[2];r[u]=r[x];g(r,function(A){if(A[x])A[u]=A[x]})})}function o(s){var z=/^([+\-]?)(\w+)\[([^\]]+)\]$/;s&&g(n(s),function(D){D=z.exec(D);var x,u;if(D){x=(u=D[1])?r[D[2]]:r[D[2]]={"#comment":{}};
x=r[D[2]];g(n(D[3],"|"),function(A){if(u==="-")delete x[A];else x[A]={}})}})}var l={},r={},v=[],t;j=j||{};if(j.verify_html===false)j.valid_elements="*[*]";if(j.valid_styles){t={};g(j.valid_styles,function(s,z){t[z]=k.explode(s)})}if(j.valid_elements)h(j.valid_elements);else{g(p,function(s,z){l[z]={attributes:s.attributes,attributesOrder:s.attributesOrder};r[z]=s.children});g(n("strong/b,em/i"),function(s){s=n(s,"/");l[s[1]].outputName=s[0]});l.img.attributesDefault=[{name:"alt",value:""}];g(n("ol,ul,li,sub,sup,blockquote,tr,div,span,font,a,table,tbody"),
function(s){l[s].removeEmpty=true});g(n("p,h1,h2,h3,h4,h5,h6,th,td,pre,div,address,caption"),function(s){l[s].paddEmpty=true})}q(j.custom_elements);o(j.valid_children);c(j.extended_valid_elements);o("+ol[ul|ol],+ul[ul|ol]");j.invalid_elements&&k.each(k.explode(j.invalid_elements),function(s){l[s]&&delete l[s]});this.children=r;this.styles=t;this.getBoolAttrs=function(){return m};this.getBlockElements=function(){return e};this.getShortEndedElements=function(){return a};this.getSelfClosingElements=
function(){return d};this.getNonEmptyElements=function(){return f};this.getWhiteSpaceElements=function(){return b};this.isValidChild=function(s,z){var D=r[s];return!!(D&&D[z])};this.getElementRule=function(s){var z=l[s],D;if(z)return z;for(D=v.length;D--;){z=v[D];if(z.pattern.test(s))return z}};this.addValidElements=c;this.setValidElements=h;this.addCustomElements=q;this.addValidChildren=o};k.html.Schema.boolAttrMap=m;k.html.Schema.blockElementsMap=e})(tinymce);
(function(k){k.html.SaxParser=function(n,p){var m=this,e=function(){};n=n||{};m.schema=p=p||new k.html.Schema;if(n.fix_self_closing!==false)n.fix_self_closing=true;k.each("comment cdata text start end pi doctype".split(" "),function(a){if(a)m[a]=n[a]||e});m.parse=function(a){function f(Z){var V,ba;for(V=c.length;V--;)if(c[V].name===Z)break;if(V>=0){for(ba=c.length-1;ba>=V;ba--){Z=c[ba];Z.valid&&b.end(Z.name)}c.length=V}}var b=this,d,i=0,g,j,c=[],h,q,o,l,r,v,t,s,z,D,x,u,A,J,Y,y,B,C,I,H=0,R=k.html.Entities.decode,
aa;B=RegExp("<(?:(?:!--([\\w\\W]*?)--\>)|(?:!\\[CDATA\\[([\\w\\W]*?)\\]\\]>)|(?:!DOCTYPE([\\w\\W]*?)>)|(?:\\?([^\\s\\/<>]+) ?([\\w\\W]*?)[?/]>)|(?:\\/([^>]+)>)|(?:([^\\s\\/<>]+)\\s*((?:[^\"'>]+(?:(?:\"[^\"]*\")|(?:'[^']*')|[^>]*))*)>))","g");C=/([\w:\-]+)(?:\s*=\s*(?:(?:\"((?:\\.|[^\"])*)\")|(?:\'((?:\\.|[^\'])*)\')|([^>\s]+)))?/g;I={script:/<\/script[^>]*>/gi,style:/<\/style[^>]*>/gi,noscript:/<\/noscript[^>]*>/gi};l=p.getShortEndedElements();y=p.getSelfClosingElements();r=p.getBoolAttrs();v=n.validate;
for(aa=n.fix_self_closing;d=B.exec(a);){i<d.index&&b.text(R(a.substr(i,d.index-i)));if(g=d[6])f(g.toLowerCase());else if(g=d[7]){g=g.toLowerCase();i=g in l;aa&&y[g]&&c.length>0&&c[c.length-1].name===g&&f(g);if(!v||(t=p.getElementRule(g))){s=true;if(v){x=t.attributes;u=t.attributePatterns}if(D=d[8]){h=[];h.map={};D.replace(C,function(Z,V,ba,ca,E){V=V.toLowerCase();ba=V in r?V:R(ba||ca||E||"");if(v&&V.indexOf("data-")!==0){Z=x[V];if(!Z&&u){for(ca=u.length;ca--;){Z=u[ca];if(Z.pattern.test(V))break}if(ca===
-1)Z=null}if(!Z)return;if(Z.validValues&&!(ba in Z.validValues))return}h.map[V]=ba;h.push({name:V,value:ba})})}else{h=[];h.map={}}if(v){A=t.attributesRequired;J=t.attributesDefault;if(Y=t.attributesForced)for(j=Y.length;j--;){z=Y[j];o=z.name;z=z.value;if(z==="{$uid}")z="mce_"+H++;h.map[o]=z;h.push({name:o,value:z})}if(J)for(j=J.length;j--;){z=J[j];o=z.name;if(!(o in h.map)){z=z.value;if(z==="{$uid}")z="mce_"+H++;h.map[o]=z;h.push({name:o,value:z})}}if(A){for(j=A.length;j--;)if(A[j]in h.map)break;
if(j===-1)s=false}if(h.map["data-mce-bogus"])s=false}s&&b.start(g,h,i)}else s=false;if(j=I[g]){j.lastIndex=i=d.index+d[0].length;if(d=j.exec(a)){if(s)q=a.substr(i,d.index-i);i=d.index+d[0].length}else{q=a.substr(i);i=a.length}s&&q.length>0&&b.text(q,true);s&&b.end(g);B.lastIndex=i;continue}if(!i)if(!D||D.indexOf("/")!=D.length-1)c.push({name:g,valid:s});else s&&b.end(g)}else if(g=d[1])b.comment(g);else if(g=d[2])b.cdata(g);else if(g=d[3])b.doctype(g);else if(g=d[4])b.pi(g,d[5]);i=d.index+d[0].length}i<
a.length&&b.text(R(a.substr(i)));for(j=c.length-1;j>=0;j--){g=c[j];g.valid&&b.end(g.name)}}}})(tinymce);
(function(k){function n(a,f,b){var d;d=b?"lastChild":"firstChild";b=b?"prev":"next";if(a[d])return a[d];if(a!==f){if(d=a[b])return d;for(a=a.parent;a&&a!==f;a=a.parent)if(d=a[b])return d}}function p(a,f){this.name=a;this.type=f;if(f===1){this.attributes=[];this.attributes.map={}}}var m=/^[ \t\r\n]*$/,e={"#text":3,"#comment":8,"#cdata":4,"#pi":7,"#doctype":10,"#document-fragment":11};k.extend(p.prototype,{replace:function(a){a.parent&&a.remove();this.insert(a,this);this.remove();return this},attr:function(a,
f){var b,d;if(typeof a!=="string"){for(d in a)this.attr(d,a[d]);return this}if(b=this.attributes)if(f!==void 0){if(f===null){if(a in b.map){delete b.map[a];for(d=b.length;d--;)if(b[d].name===a){b.splice(d,1);break}}return this}if(a in b.map)for(d=b.length;d--;){if(b[d].name===a){b[d].value=f;break}}else b.push({name:a,value:f});b.map[a]=f;return this}else return b.map[a]},clone:function(){var a=new p(this.name,this.type),f,b,d,i,g;if(d=this.attributes){g=[];g.map={};f=0;for(b=d.length;f<b;f++){i=
d[f];if(i.name!=="id"){g[g.length]={name:i.name,value:i.value};g.map[i.name]=i.value}}a.attributes=g}a.value=this.value;a.shortEnded=this.shortEnded;return a},wrap:function(a){this.parent.insert(a,this);a.append(this);return this},unwrap:function(){var a,f;for(a=this.firstChild;a;){f=a.next;this.insert(a,this,true);a=f}this.remove()},remove:function(){var a=this.parent,f=this.next,b=this.prev;if(a){if(a.firstChild===this){if(a.firstChild=f)f.prev=null}else b.next=f;if(a.lastChild===this){if(a.lastChild=
b)b.next=null}else f.prev=b;this.parent=this.next=this.prev=null}return this},append:function(a){var f;a.parent&&a.remove();if(f=this.lastChild){f.next=a;a.prev=f;this.lastChild=a}else this.lastChild=this.firstChild=a;a.parent=this;return a},insert:function(a,f,b){var d;a.parent&&a.remove();d=f.parent||this;if(b){if(f===d.firstChild)d.firstChild=a;else f.prev.next=a;a.prev=f.prev;a.next=f;f.prev=a}else{if(f===d.lastChild)d.lastChild=a;else f.next.prev=a;a.next=f.next;a.prev=f;f.next=a}a.parent=d;
return a},getAll:function(a){var f,b=[];for(f=this.firstChild;f;f=n(f,this))f.name===a&&b.push(f);return b},empty:function(){var a,f,b;if(this.firstChild){a=[];for(b=this.firstChild;b;b=n(b,this))a.push(b);for(f=a.length;f--;){b=a[f];b.parent=b.firstChild=b.lastChild=b.next=b.prev=null}}this.firstChild=this.lastChild=null;return this},isEmpty:function(a){var f=this.firstChild,b;if(f){do{if(f.type===1){if(f.attributes.map["data-mce-bogus"])continue;if(a[f.name])return false;for(b=f.attributes.length;b--;)if(f.attributes[b].name.indexOf("data-")===
0)return false}if(f.type===3&&!m.test(f.value))return false}while(f=n(f,this))}return true}});k.extend(p,{create:function(a,f){var b,d;b=new p(a,e[a]||1);if(f)for(d in f)b.attr(d,f[d]);return b}});k.html.Node=p})(tinymce);
(function(k){var n=k.html.Node;k.html.DomParser=function(p,m){function e(b){var d,i,g,j,c,h,q,o,l,r,v;r=k.makeMap("tr,td,th,tbody,thead,tfoot,table");l=m.getNonEmptyElements();for(d=0;d<b.length;d++){i=b[d];if(i.parent){j=[i];for(g=i.parent;g&&!m.isValidChild(g.name,i.name)&&!r[g.name];g=g.parent)j.push(g);if(g&&j.length>1){j.reverse();c=h=j[0].clone();for(o=0;o<j.length-1;o++){if(m.isValidChild(h.name,j[o].name)){q=j[o].clone();h.append(q)}else q=h;for(h=j[o].firstChild;h&&h!=j[o+1];){v=h.next;q.append(h);
h=v}h=q}if(c.isEmpty(l))g.insert(i,j[0],true);else{g.insert(c,j[0],true);g.insert(i,c)}j[0].isEmpty(l)&&j[0].empty().remove()}else if(i.parent)if(i.name==="li")if((g=i.prev)&&(g.name==="ul"||g.name==="ul"))g.append(i);else(g=i.next)&&(g.name==="ul"||g.name==="ul")?g.insert(i,g.firstChild,true):i.wrap(new n("ul",1));else if(m.isValidChild(i.parent.name,"div")&&m.isValidChild("div",i.name))i.wrap(new n("div",1));else i.name==="style"||i.name==="script"?i.empty().remove():i.unwrap()}}}var a={},f=[];
p=p||{};p.root_name=p.root_name||"body";this.schema=m=m||new k.html.Schema;this.addNodeFilter=function(b,d){k.each(k.explode(b),function(i){var g=a[i];g||(a[i]=g=[]);g.push(d)})};this.addAttributeFilter=function(b,d){k.each(k.explode(b),function(i){var g;for(g=0;g<f.length;g++)if(f[g].name===i){f[g].callbacks.push(d);return}f.push({name:i,callbacks:[d]})})};this.parse=function(b,d){function i(y,B){var C=new n(y,B),I;if(y in a)if(I=h[y])I.push(C);else h[y]=[C];return C}var g,j,c,h={},q={},o,l,r,v,
t,s,z,D=[],x,u,A,J,Y;d=d||{};s=k.extend(k.makeMap("script,style,head,title,meta,param"),m.getBlockElements());Y=m.getNonEmptyElements();J=m.children;A=m.getWhiteSpaceElements();z=/^[ \t\r\n]+/;x=/[ \t\r\n]+$/;u=/[ \t\r\n]+/g;g=new k.html.SaxParser({validate:p.validate,fix_self_closing:false,cdata:function(y){c.append(i("#cdata",4)).value=y},text:function(y,B){var C;if(!A[c.name]){y=y.replace(u," ");if(c.lastChild&&s[c.lastChild.name])y=y.replace(z,"")}if(y.length!==0){C=i("#text",3);C.raw=!!B;c.append(C).value=
y}},comment:function(y){c.append(i("#comment",8)).value=y},pi:function(y,B){c.append(i(y,7)).value=B},doctype:function(y){c.append(i("#doctype",10)).value=y},start:function(y,B,C){var I,H,R;if(I=m.getElementRule(y)){I=i(I.outputName||y,1);I.attributes=B;I.shortEnded=C;c.append(I);(H=J[c.name])&&J[I.name]&&!H[I.name]&&D.push(I);for(H=f.length;H--;){R=f[H].name;if(R in B.map)if(t=q[R])t.push(I);else q[R]=[I]}if(s[y])for(y=I.prev;y&&y.type===3;){B=y.value.replace(x,"");if(B.length>0){y.value=B;y=y.prev}else{B=
y.prev;y.remove();y=B}}C||(c=I)}},end:function(y){var B,C;if(B=m.getElementRule(y)){if(s[y]){if(!A[c.name]){for(y=c.firstChild;y&&y.type===3;){C=y.value.replace(z,"");if(C.length>0){y.value=C;y=y.next}else{C=y.next;y.remove();y=C}}for(y=c.lastChild;y&&y.type===3;){C=y.value.replace(x,"");if(C.length>0){y.value=C;y=y.prev}else{C=y.prev;y.remove();y=C}}}if((y=c.prev)&&y.type===3){C=y.value.replace(z,"");if(C.length>0)y.value=C;else y.remove()}}if(B.removeEmpty||B.paddEmpty)if(c.isEmpty(Y))if(B.paddEmpty)c.empty().append(new n("#text",
"3")).value=" ";else if(!c.attributes.map.name){B=c.parent;c.empty().remove();c=B;return}c=c.parent}}},m);j=c=new n(p.root_name,11);g.parse(b);e(D);for(v in h){t=a[v];g=h[v];for(r=g.length;r--;)g[r].parent||g.splice(r,1);o=0;for(l=t.length;o<l;o++)t[o](g,v,d)}o=0;for(l=f.length;o<l;o++){t=f[o];if(t.name in q){g=q[t.name];for(r=g.length;r--;)g[r].parent||g.splice(r,1);r=0;for(v=t.callbacks.length;r<v;r++)t.callbacks[r](g,t.name,d)}}return j};p.remove_trailing_brs&&this.addNodeFilter("br",function(b){var d,
i=b.length,g,j=m.getBlockElements(),c=m.getNonEmptyElements(),h,q,o;for(d=0;d<i;d++){g=b[d];h=g.parent;if(j[g.parent.name]&&g===h.lastChild){for(q=g.prev;q;){o=q.name;if(o!=="span"||q.attr("data-mce-type")!=="bookmark"){if(o!=="br")break;if(o==="br"){g=null;break}}q=q.prev}if(g){g.remove();if(h.isEmpty(c)){elementRule=m.getElementRule(h.name);if(elementRule.removeEmpty)h.remove();else if(elementRule.paddEmpty)h.empty().append(new k.html.Node("#text",3)).value=" "}}}}})}})(tinymce);
tinymce.html.Writer=function(k){var n=[],p,m,e,a,f;k=k||{};p=k.indent;m=tinymce.makeMap(k.indent_before||"");e=tinymce.makeMap(k.indent_after||"");a=tinymce.html.Entities.getEncodeFunc(k.entity_encoding||"raw",k.entities);f=k.element_format=="html";return{start:function(b,d,i){var g,j;if(p&&m[b]&&n.length>0){g=n[n.length-1];g.length>0&&g!=="\n"&&n.push("\n")}n.push("<",b);if(d){b=0;for(g=d.length;b<g;b++){j=d[b];n.push(" ",j.name,'="',a(j.value,true),'"')}}n[n.length]=!i||f?">":" />"},end:function(b){n.push("</",
b,">");if(p&&e[b]&&n.length>0){b=n[n.length-1];b.length>0&&b!=="\n"&&n.push("\n")}},text:function(b,d){if(b.length>0)n[n.length]=d?b:a(b)},cdata:function(b){n.push("<![CDATA[",b,"]]\>")},comment:function(b){n.push("<!--",b,"--\>")},pi:function(b,d){d?n.push("<?",b," ",d,"?>"):n.push("<?",b,"?>")},doctype:function(b){n.push("<!DOCTYPE",b,">")},reset:function(){n.length=0},getContent:function(){return n.join("").replace(/\n$/,"")}}};
(function(k){k.html.Serializer=function(n,p){var m=new k.html.Writer(n);n=n||{};n.validate="validate"in n?n.validate:true;this.schema=p=p||new k.html.Schema;this.writer=m;this.serialize=function(e){function a(d){var i=f[d.type],g,j,c,h,q,o,l,r;if(i)i(d);else{i=d.name;g=d.shortEnded;j=d.attributes;if(b&&j&&j.length>1){q=[];q.map={};r=p.getElementRule(d.name);o=0;for(l=r.attributesOrder.length;o<l;o++){c=r.attributesOrder[o];if(c in j.map){h=j.map[c];q.map[c]=h;q.push({name:c,value:h})}}o=0;for(l=j.length;o<
l;o++){c=j[o].name;if(!(c in q.map)){h=j.map[c];q.map[c]=h;q.push({name:c,value:h})}}j=q}m.start(d.name,j,g);if(!g){if(d=d.firstChild){do a(d);while(d=d.next)}m.end(i)}}}var f,b;b=n.validate;f={3:function(d){m.text(d.value,d.raw)},8:function(d){m.comment(d.value)},7:function(d){m.pi(d.name,d.value)},10:function(d){m.doctype(d.value)},4:function(d){m.cdata(d.value)},11:function(d){if(d=d.firstChild){do a(d);while(d=d.next)}}};m.reset();e.type==1&&!n.inner?a(e):f[11](e);return m.getContent()}}})(tinymce);
(function(k){var n=k.each,p=k.is,m=k.isWebKit,e=k.isIE,a=k.html.Entities,f=k.html.Schema.blockElementsMap;k.create("tinymce.dom.DOMUtils",{doc:null,root:null,files:null,pixelStyles:/^(top|left|bottom|right|width|height|borderWidth)$/,props:{"for":"htmlFor","class":"className",className:"className",checked:"checked",disabled:"disabled",maxlength:"maxLength",readonly:"readOnly",selected:"selected",value:"value",id:"id",name:"name",type:"type"},DOMUtils:function(b,d){this.doc=b;this.win=window;this.files=
{};this.cssFlicker=false;this.counter=0;this.stdMode=!k.isIE||b.documentMode>=8;this.boxModel=!k.isIE||b.compatMode=="CSS1Compat"||this.stdMode;this.hasOuterHTML="outerHTML"in b.createElement("a");this.settings=d=k.extend({keep_values:false,hex_colors:1},d);this.styles=new k.html.Styles({url_converter:d.url_converter,url_converter_scope:d.url_converter_scope},d.schema);if(k.isIE6)try{b.execCommand("BackgroundImageCache",false,true)}catch(i){this.cssFlicker=true}e&&"abbr article aside audio canvas details figcaption figure footer header hgroup mark menu meter nav output progress section summary time video".replace(/\w+/g,
function(g){b.createElement(g)});k.addUnload(this.destroy,this)},getRoot:function(){var b=this.settings;return b&&this.get(b.root_element)||this.doc.body},getViewPort:function(b){var d;b=!b?this.win:b;d=b.document;d=this.boxModel?d.documentElement:d.body;return{x:b.pageXOffset||d.scrollLeft,y:b.pageYOffset||d.scrollTop,w:b.innerWidth||d.clientWidth,h:b.innerHeight||d.clientHeight}},getRect:function(b){var d;b=this.get(b);d=this.getPos(b);b=this.getSize(b);return{x:d.x,y:d.y,w:b.w,h:b.h}},getSize:function(b){var d,
i;b=this.get(b);d=this.getStyle(b,"width");i=this.getStyle(b,"height");if(d.indexOf("px")===-1)d=0;if(i.indexOf("px")===-1)i=0;return{w:parseInt(d)||b.offsetWidth||b.clientWidth,h:parseInt(i)||b.offsetHeight||b.clientHeight}},getParent:function(b,d,i){return this.getParents(b,d,i,false)},getParents:function(b,d,i,g){var j=this,c,h=j.settings,q=[];b=j.get(b);g=g===undefined;if(h.strict_root)i=i||j.getRoot();if(p(d,"string")){c=d;d=d==="*"?function(o){return o.nodeType==1}:function(o){return j.is(o,
c)}}for(;b;){if(b==i||!b.nodeType||b.nodeType===9)break;if(!d||d(b))if(g)q.push(b);else return b;b=b.parentNode}return g?q:null},get:function(b){var d;if(b&&this.doc&&typeof b=="string"){d=b;if((b=this.doc.getElementById(b))&&b.id!==d)return this.doc.getElementsByName(d)[1]}return b},getNext:function(b,d){return this._findSib(b,d,"nextSibling")},getPrev:function(b,d){return this._findSib(b,d,"previousSibling")},add:function(b,d,i,g,j){var c=this;return this.run(b,function(h){var q;q=p(d,"string")?
c.doc.createElement(d):d;c.setAttribs(q,i);if(g)g.nodeType?q.appendChild(g):c.setHTML(q,g);return!j?h.appendChild(q):q})},create:function(b,d,i){return this.add(this.doc.createElement(b),b,d,i,1)},createHTML:function(b,d,i){var g="",j;g+="<"+b;for(j in d)if(d.hasOwnProperty(j))g+=" "+j+'="'+this.encode(d[j])+'"';if(typeof i!="undefined")return g+">"+i+"</"+b+">";return g+" />"},remove:function(b,d){return this.run(b,function(i){var g,j;g=i.parentNode;if(!g)return null;if(d)for(;j=i.firstChild;)!k.isIE||
j.nodeType!==3||j.nodeValue?g.insertBefore(j,i):i.removeChild(j);return g.removeChild(i)})},setStyle:function(b,d,i){var g=this;return g.run(b,function(j){var c;c=j.style;d=d.replace(/-(\D)/g,function(h,q){return q.toUpperCase()});if(g.pixelStyles.test(d)&&(k.is(i,"number")||/^[\-0-9\.]+$/.test(i)))i+="px";switch(d){case "opacity":if(e){c.filter=i===""?"":"alpha(opacity="+i*100+")";if(!b.currentStyle||!b.currentStyle.hasLayout)c.display="inline-block"}c[d]=c["-moz-opacity"]=c["-khtml-opacity"]=i||
"";break;case "float":e?c.styleFloat=i:c.cssFloat=i;break;default:c[d]=i||""}g.settings.update_styles&&g.setAttrib(j,"data-mce-style")})},getStyle:function(b,d,i){b=this.get(b);if(!b)return false;if(this.doc.defaultView&&i){d=d.replace(/[A-Z]/g,function(j){return"-"+j});try{return this.doc.defaultView.getComputedStyle(b,null).getPropertyValue(d)}catch(g){return null}}d=d.replace(/-(\D)/g,function(j,c){return c.toUpperCase()});if(d=="float")d=e?"styleFloat":"cssFloat";if(b.currentStyle&&i)return b.currentStyle[d];
return b.style[d]},setStyles:function(b,d){var i=this,g=i.settings,j;j=g.update_styles;g.update_styles=0;n(d,function(c,h){i.setStyle(b,h,c)});g.update_styles=j;g.update_styles&&i.setAttrib(b,g.cssText)},removeAllAttribs:function(b){return this.run(b,function(d){for(var i=d.attributes,g=i.length-1;g>=0;g--)d.removeAttributeNode(i.item(g))})},setAttrib:function(b,d,i){var g=this;if(b&&d){if(g.settings.strict)d=d.toLowerCase();return this.run(b,function(j){var c=g.settings;switch(d){case "style":if(!p(i,
"string")){n(i,function(h,q){g.setStyle(j,q,h)});return}if(c.keep_values)i&&!g._isRes(i)?j.setAttribute("data-mce-style",i,2):j.removeAttribute("data-mce-style",2);j.style.cssText=i;break;case "class":j.className=i||"";break;case "src":case "href":if(c.keep_values){if(c.url_converter)i=c.url_converter.call(c.url_converter_scope||g,i,d,j);g.setAttrib(j,"data-mce-"+d,i,2)}break;case "shape":j.setAttribute("data-mce-style",i)}p(i)&&i!==null&&i.length!==0?j.setAttribute(d,""+i,2):j.removeAttribute(d,
2)})}},setAttribs:function(b,d){var i=this;return this.run(b,function(g){n(d,function(j,c){i.setAttrib(g,c,j)})})},getAttrib:function(b,d,i){var g;b=this.get(b);if(!b||b.nodeType!==1)return false;p(i)||(i="");if(/^(src|href|style|coords|shape)$/.test(d))if(g=b.getAttribute("data-mce-"+d))return g;if(e&&this.props[d])g=(g=b[this.props[d]])&&g.nodeValue?g.nodeValue:g;g||(g=b.getAttribute(d,2));if(/^(checked|compact|declare|defer|disabled|ismap|multiple|nohref|noshade|nowrap|readonly|selected)$/.test(d)){if(b[this.props[d]]===
true&&g==="")return d;return g?d:""}if(b.nodeName==="FORM"&&b.getAttributeNode(d))return b.getAttributeNode(d).nodeValue;if(d==="style")if(g=g||b.style.cssText){g=this.serializeStyle(this.parseStyle(g),b.nodeName);this.settings.keep_values&&!this._isRes(g)&&b.setAttribute("data-mce-style",g)}if(m&&d==="class"&&g)g=g.replace(/(apple|webkit)\-[a-z\-]+/gi,"");if(e)switch(d){case "rowspan":case "colspan":if(g===1)g="";break;case "size":if(g==="+0"||g===20||g===0)g="";break;case "width":case "height":case "vspace":case "checked":case "disabled":case "readonly":if(g===
0)g="";break;case "hspace":if(g===-1)g="";break;case "maxlength":case "tabindex":if(g===32768||g===2147483647||g==="32768")g="";break;case "multiple":case "compact":case "noshade":case "nowrap":if(g===65535)return d;return i;case "shape":g=g.toLowerCase();break;default:if(d.indexOf("on")===0&&g)g=k._replace(/^function\s+\w+\(\)\s+\{\s+(.*)\s+\}$/,"$1",""+g)}return g!==undefined&&g!==null&&g!==""?""+g:i},getPos:function(b,d){var i=0,g=0,j=this.doc;b=this.get(b);d=d||j.body;if(b){if(e&&!this.stdMode){b=
b.getBoundingClientRect();g=this.boxModel?j.documentElement:j.body;i=this.getStyle(this.select("html")[0],"borderWidth");i=(i=="medium"||this.boxModel&&!this.isIE6)&&2||i;return{x:b.left+g.scrollLeft-i,y:b.top+g.scrollTop-i}}for(j=b;j&&j!=d&&j.nodeType;){i+=j.offsetLeft||0;g+=j.offsetTop||0;j=j.offsetParent}for(j=b.parentNode;j&&j!=d&&j.nodeType;){i-=j.scrollLeft||0;g-=j.scrollTop||0;j=j.parentNode}}return{x:i,y:g}},parseStyle:function(b){return this.styles.parse(b)},serializeStyle:function(b,d){return this.styles.serialize(b,
d)},loadCSS:function(b){var d=this,i=d.doc,g;b||(b="");g=d.select("head")[0];n(b.split(","),function(j){var c;if(!d.files[j]){d.files[j]=true;c=d.create("link",{rel:"stylesheet",href:k._addVer(j)});if(e&&i.documentMode&&i.recalc)c.onload=function(){i.recalc&&i.recalc();c.onload=null};g.appendChild(c)}})},addClass:function(b,d){return this.run(b,function(i){var g;if(!d)return 0;if(this.hasClass(i,d))return i.className;g=this.removeClass(i,d);return i.className=(g!=""?g+" ":"")+d})},removeClass:function(b,
d){var i=this,g;return i.run(b,function(j){var c;if(i.hasClass(j,d)){g||(g=RegExp("(^|\\s+)"+d+"(\\s+|$)","g"));c=j.className.replace(g," ");c=k.trim(c!=" "?c:"");j.className=c;if(!c){j.removeAttribute("class");j.removeAttribute("className")}return c}return j.className})},hasClass:function(b,d){b=this.get(b);if(!b||!d)return false;return(" "+b.className+" ").indexOf(" "+d+" ")!==-1},show:function(b){return this.setStyle(b,"display","block")},hide:function(b){return this.setStyle(b,"display","none")},
isHidden:function(b){b=this.get(b);return!b||b.style.display=="none"||this.getStyle(b,"display")=="none"},uniqueId:function(b){return(!b?"mce_":b)+this.counter++},setHTML:function(b,d){var i=this;return i.run(b,function(g){if(e){for(;g.firstChild;)g.removeChild(g.firstChild);try{g.innerHTML="<br />"+d;g.removeChild(g.firstChild)}catch(j){g=i.create("div");g.innerHTML="<br />"+d;n(g.childNodes,function(c,h){h&&g.appendChild(c)})}}else g.innerHTML=d;return d})},getOuterHTML:function(b){var d;b=this.get(b);
if(!b)return null;if(b.nodeType===1&&this.hasOuterHTML)return b.outerHTML;d=(b.ownerDocument||this.doc).createElement("body");d.appendChild(b.cloneNode(true));return d.innerHTML},setOuterHTML:function(b,d,i){function g(c,h,q){q=q.createElement("body");q.innerHTML=h;for(h=q.lastChild;h;){j.insertAfter(h.cloneNode(true),c);h=h.previousSibling}j.remove(c)}var j=this;return this.run(b,function(c){c=j.get(c);if(c.nodeType==1){i=i||c.ownerDocument||j.doc;if(e)try{if(e&&c.nodeType==1)c.outerHTML=d;else g(c,
d,i)}catch(h){g(c,d,i)}else g(c,d,i)}})},decode:a.decode,encode:a.encodeAllRaw,insertAfter:function(b,d){d=this.get(d);return this.run(b,function(i){var g,j;g=d.parentNode;(j=d.nextSibling)?g.insertBefore(i,j):g.appendChild(i);return i})},isBlock:function(b){var d=b.nodeType;if(d)return!!(d===1&&f[b.nodeName]);return!!f[b]},replace:function(b,d,i){if(p(d,"array"))b=b.cloneNode(true);return this.run(d,function(g){i&&n(k.grep(g.childNodes),function(j){b.appendChild(j)});return g.parentNode.replaceChild(b,
g)})},rename:function(b,d){var i=this,g;if(b.nodeName!=d.toUpperCase()){g=i.create(d);n(i.getAttribs(b),function(j){i.setAttrib(g,j.nodeName,i.getAttrib(b,j.nodeName))});i.replace(g,b,1)}return g||b},findCommonAncestor:function(b,d){for(var i=b,g;i;){for(g=d;g&&i!=g;)g=g.parentNode;if(i==g)break;i=i.parentNode}if(!i&&b.ownerDocument)return b.ownerDocument.documentElement;return i},toHex:function(b){function d(g){g=parseInt(g).toString(16);return g.length>1?g:"0"+g}var i=/^\s*rgb\s*?\(\s*?([0-9]+)\s*?,\s*?([0-9]+)\s*?,\s*?([0-9]+)\s*?\)\s*$/i.exec(b);
if(i)return b="#"+d(i[1])+d(i[2])+d(i[3]);return b},getClasses:function(){function b(h){n(h.imports,function(q){b(q)});n(h.cssRules||h.rules,function(q){switch(q.type||1){case 1:q.selectorText&&n(q.selectorText.split(","),function(o){o=o.replace(/^\s*|\s*$|^\s\./g,"");if(!(/\.mce/.test(o)||!/\.[\w\-]+$/.test(o))){j=o;o=k._replace(/.*\.([a-z0-9_\-]+).*/i,"$1",o);if(!(g&&!(o=g(o,j))))if(!i[o]){d.push({"class":o});i[o]=1}}});break;case 3:b(q.styleSheet)}})}var d=[],i={},g=this.settings.class_filter,
j;if(this.classes)return this.classes;try{n(this.doc.styleSheets,b)}catch(c){}if(d.length>0)this.classes=d;return d},run:function(b,d,i){var g=this,j;if(g.doc&&typeof b==="string")b=g.get(b);if(!b)return false;i=i||this;if(!b.nodeType&&(b.length||b.length===0)){j=[];n(b,function(c,h){if(c){if(typeof c=="string")c=g.doc.getElementById(c);j.push(d.call(i,c,h))}});return j}return d.call(i,b)},getAttribs:function(b){var d;b=this.get(b);if(!b)return[];if(e){d=[];if(b.nodeName=="OBJECT")return b.attributes;
b.nodeName==="OPTION"&&this.getAttrib(b,"selected")&&d.push({specified:1,nodeName:"selected"});b.cloneNode(false).outerHTML.replace(/<\/?[\w:\-]+ ?|=[\"][^\"]+\"|=\'[^\']+\'|=[\w\-]+|>/gi,"").replace(/[\w:\-]+/gi,function(i){d.push({specified:1,nodeName:i})});return d}return b.attributes},destroy:function(b){this.events&&this.events.destroy();this.win=this.doc=this.root=this.events=null;b||k.removeUnload(this.destroy)},createRng:function(){var b=this.doc;return b.createRange?b.createRange():new k.dom.Range(this)},
nodeIndex:function(b,d){var i=0,g;if(b)for(b=b.previousSibling;b;b=b.previousSibling){g=b.nodeType;d&&g==3||i++}return i},split:function(b,d,i){function g(o){var l,r=o.childNodes;if(!(o.nodeType==1&&o.getAttribute("data-mce-type")=="bookmark")){for(l=r.length-1;l>=0;l--)g(r[l]);if(o.nodeType!=9){if(o.nodeType==3&&o.nodeValue.length>0)if(!j.isBlock(o.parentNode)||k.trim(o.nodeValue).length>0)return;if(o.nodeType==1){r=o.childNodes;r.length==1&&r[0]&&r[0].nodeType==1&&r[0].getAttribute("data-mce-type")==
"bookmark"&&o.parentNode.insertBefore(r[0],o);if(r.length||/^(br|hr|input|img)$/i.test(o.nodeName))return}j.remove(o)}return o}}var j=this,c=j.createRng(),h,q;if(b&&d){c.setStart(b.parentNode,j.nodeIndex(b));c.setEnd(d.parentNode,j.nodeIndex(d));h=c.extractContents();c=j.createRng();c.setStart(d.parentNode,j.nodeIndex(d)+1);c.setEnd(b.parentNode,j.nodeIndex(b)+1);c=c.extractContents();q=b.parentNode;q.insertBefore(g(h),b);i?q.replaceChild(i,d):q.insertBefore(d,b);q.insertBefore(g(c),b);j.remove(b);
return i||d}},bind:function(b,d,i,g){if(!this.events)this.events=new k.dom.EventUtils;return this.events.add(b,d,i,g||this)},unbind:function(b,d,i){if(!this.events)this.events=new k.dom.EventUtils;return this.events.remove(b,d,i)},_findSib:function(b,d,i){var g=this,j=d;if(b){if(p(j,"string"))j=function(c){return g.is(c,d)};for(b=b[i];b;b=b[i])if(j(b))return b}return null},_isRes:function(b){return/^(top|left|bottom|right|width|height)/i.test(b)||/;\s*(top|left|bottom|right|width|height)/i.test(b)}});
k.DOM=new k.dom.DOMUtils(document,{process_html:0})})(tinymce);
(function(k){function n(p){function m(y,B){i(s,y,B)}function e(y,B){i(z,y,B)}function a(y){m(y.parentNode,Y(y))}function f(y){e(y.parentNode,Y(y)+1)}function b(y,B){var C;if(y.nodeType==3)return y;if(B<0)return y;for(C=y.firstChild;C&&B>0;){--B;C=C.nextSibling}if(C)return C;return y}function d(y,B,C,I){var H,R;if(y==C){if(B==I)return 0;if(B<I)return-1;return 1}for(H=C;H&&H.parentNode!=y;)H=H.parentNode;if(H){R=0;for(C=y.firstChild;C!=H&&R<B;){R++;C=C.nextSibling}if(B<=R)return-1;return 1}for(H=y;H&&
H.parentNode!=C;)H=H.parentNode;if(H){R=0;for(C=C.firstChild;C!=H&&R<I;){R++;C=C.nextSibling}if(R<I)return-1;return 1}B=p.findCommonAncestor(y,C);for(y=y;y&&y.parentNode!=B;)y=y.parentNode;y||(y=B);for(I=C;I&&I.parentNode!=B;)I=I.parentNode;I||(I=B);if(y==I)return 0;for(C=B.firstChild;C;){if(C==y)return-1;if(C==I)return 1;C=C.nextSibling}}function i(y,B,C){if(y){l[x]=B;l[D]=C}else{l[u]=B;l[A]=C}for(B=l[u];B.parentNode;)B=B.parentNode;for(C=l[x];C.parentNode;)C=C.parentNode;if(C==B)d(l[x],l[D],l[u],
l[A])>0&&l.collapse(y);else l.collapse(y);l.collapsed=l[x]==l[u]&&l[D]==l[A];l.commonAncestorContainer=p.findCommonAncestor(l[x],l[u])}function g(y){var B,C=0,I=0,H;if(l[x]==l[u])return j(y);B=l[u];for(H=B.parentNode;H;B=H,H=H.parentNode){if(H==l[x]){var R=B;y=y;B=void 0;H=void 0;C=void 0;I=void 0;H=void 0;if(y!=t)B=r.createDocumentFragment();H=c(R,y);B&&B.appendChild(H);C=Y(R)-l[D];if(!(C<=0))for(H=R.previousSibling;C>0;){I=H.previousSibling;H=o(H,y);B&&B.insertBefore(H,B.firstChild);--C;H=I}if(y!=
v){l.setEndBefore(R);l.collapse(z)}y=B;return y}++C}B=l[x];for(H=B.parentNode;H;B=H,H=H.parentNode){if(H==l[u]){R=B;y=y;B=void 0;C=void 0;H=void 0;C=void 0;I=void 0;H=void 0;if(y!=t)B=r.createDocumentFragment();H=h(R,y);B&&B.appendChild(H);C=Y(R);++C;C=l[A]-C;for(H=R.nextSibling;C>0;){I=H.nextSibling;H=o(H,y);B&&B.appendChild(H);--C;H=I}if(y!=v){l.setStartAfter(R);l.collapse(s)}return B}++I}I=I-C;for(B=l[x];I>0;){B=B.parentNode;I--}for(C=l[u];I<0;){C=C.parentNode;I++}I=B.parentNode;for(H=C.parentNode;I!=
H;I=I.parentNode,H=H.parentNode){B=I;C=H}B=B;C=C;var aa;if(y!=t)R=r.createDocumentFragment();aa=h(B,y);R&&R.appendChild(aa);I=Y(B);H=Y(C);++I;I=H-I;for(aa=B.nextSibling;I>0;){H=aa.nextSibling;aa=o(aa,y);R&&R.appendChild(aa);aa=H;--I}aa=c(C,y);R&&R.appendChild(aa);if(y!=v){l.setStartAfter(B);l.collapse(s)}return R}function j(y){var B,C,I,H;if(y!=t)B=r.createDocumentFragment();if(l[D]==l[A])return B;if(l[x].nodeType==3){C=l[x].nodeValue;C=C.substring(l[D],l[A]);if(y!=v){l[x].deleteData(l[D],l[A]-l[D]);
l.collapse(s)}if(y==t)return;B.appendChild(r.createTextNode(C));return B}I=b(l[x],l[D]);for(C=l[A]-l[D];C>0;){H=I.nextSibling;I=o(I,y);B&&B.appendChild(I);--C;I=H}y!=v&&l.collapse(s);return B}function c(y,B){var C=b(l[u],l[A]-1),I,H,R,aa=C!=l[u];if(C==y)return q(C,aa,z,B);I=C.parentNode;for(H=q(I,z,z,B);I;){for(;C;){R=C.previousSibling;C=q(C,aa,z,B);B!=t&&H.insertBefore(C,H.firstChild);aa=s;C=R}if(I==y)return H;C=I.previousSibling;I=I.parentNode;R=q(I,z,z,B);B!=t&&R.appendChild(H);H=R}}function h(y,
B){var C=b(l[x],l[D]),I=C!=l[x],H,R,aa;if(C==y)return q(C,I,s,B);H=C.parentNode;for(R=q(H,z,s,B);H;){for(;C;){aa=C.nextSibling;C=q(C,I,s,B);B!=t&&R.appendChild(C);I=s;C=aa}if(H==y)return R;C=H.nextSibling;H=H.parentNode;aa=q(H,z,s,B);B!=t&&aa.appendChild(R);R=aa}}function q(y,B,C,I){var H;if(B)return o(y,I);if(y.nodeType==3){B=y.nodeValue;if(C){H=l[D];C=B.substring(H);B=B.substring(0,H)}else{H=l[A];C=B.substring(0,H);B=B.substring(H)}if(I!=v)y.nodeValue=B;if(I==t)return;y=y.cloneNode(z);y.nodeValue=
C;return y}if(I!=t)return y.cloneNode(z)}function o(y,B){if(B!=t)return B==v?y.cloneNode(s):y;y.parentNode.removeChild(y)}var l=this,r=p.doc,v=1,t=2,s=true,z=false,D="startOffset",x="startContainer",u="endContainer",A="endOffset",J=tinymce.extend,Y=p.nodeIndex;J(l,{startContainer:r,startOffset:0,endContainer:r,endOffset:0,collapsed:s,commonAncestorContainer:r,START_TO_START:0,START_TO_END:1,END_TO_END:2,END_TO_START:3,setStart:m,setEnd:e,setStartBefore:a,setStartAfter:function(y){m(y.parentNode,Y(y)+
1)},setEndBefore:function(y){e(y.parentNode,Y(y))},setEndAfter:f,collapse:function(y){if(y){l[u]=l[x];l[A]=l[D]}else{l[x]=l[u];l[D]=l[A]}l.collapsed=s},selectNode:function(y){a(y);f(y)},selectNodeContents:function(y){m(y,0);e(y,y.nodeType===1?y.childNodes.length:y.nodeValue.length)},compareBoundaryPoints:function(y,B){var C=l[x],I=l[D],H=l[u],R=l[A],aa=B.startContainer,Z=B.startOffset,V=B.endContainer,ba=B.endOffset;if(y===0)return d(C,I,aa,Z);if(y===1)return d(H,R,aa,Z);if(y===2)return d(H,R,V,ba);
if(y===3)return d(C,I,V,ba)},deleteContents:function(){g(t)},extractContents:function(){return g(0)},cloneContents:function(){return g(v)},insertNode:function(y){var B=this[x],C=this[D],I;if((B.nodeType===3||B.nodeType===4)&&B.nodeValue)if(C)if(C>=B.nodeValue.length)p.insertAfter(y,B);else{C=B.splitText(C);B.parentNode.insertBefore(y,C)}else B.parentNode.insertBefore(y,B);else{if(B.childNodes.length>0)I=B.childNodes[C];I?B.insertBefore(y,I):B.appendChild(y)}},surroundContents:function(y){var B=l.extractContents();
l.insertNode(y);y.appendChild(B);l.selectNode(y)},cloneRange:function(){return J(new n(p),{startContainer:l[x],startOffset:l[D],endContainer:l[u],endOffset:l[A],collapsed:l.collapsed,commonAncestorContainer:l.commonAncestorContainer})}})}k.Range=n})(tinymce.dom);
(function(){tinymce.dom.TridentSelection=function(k){function n(){function b(c){var h,q,o,l=0,r,v,t,s;o=d.duplicate();o.collapse(c);h=a.create("a");t=o.parentElement();if(t.hasChildNodes()){t.appendChild(h);o.moveToElementText(h);s=d.compareEndPoints(c?"StartToStart":"EndToEnd",o);if(s>0){i[c?"setStartAfter":"setEndAfter"](t);a.remove(h)}else{q=tinymce.grep(t.childNodes);for(r=q.length-1;l<=r;){v=Math.floor((l+r)/2);t.insertBefore(h,q[v]);o.moveToElementText(h);s=d.compareEndPoints(c?"StartToStart":
"EndToEnd",o);if(s>0)l=v+1;else if(s<0)r=v-1;else{found=true;break}}q=s>0||v==0?h.nextSibling:h.previousSibling;if(q.nodeType==1){a.remove(h);o=a.nodeIndex(q);q=q.parentNode;if(!c||v>0)o++}else{if(s>0||v==0){o.setEndPoint(c?"StartToStart":"EndToEnd",d);o=o.text.length}else{o.setEndPoint(c?"StartToStart":"EndToEnd",d);o=q.nodeValue.length-o.text.length}a.remove(h)}i[c?"setStart":"setEnd"](q,o)}}else i[c?"setStart":"setEnd"](t,0)}var d=k.getRng(),i=a.createRng(),g,j;g=d.item?d.item(0):d.parentElement();
if(g.ownerDocument!=a.doc)return i;j=k.isCollapsed();if(d.item||!g.hasChildNodes()){if(j){i.setStart(g,0);i.setEnd(g,0)}else{i.setStart(g.parentNode,a.nodeIndex(g));i.setEnd(i.startContainer,i.startOffset+1)}return i}b(true);j||b();return i}var p="﻿",m,e,a=k.dom,f=true;this.addRange=function(b){function d(v){var t,s,z,D,x;z=a.create("a");t=v?j:h;s=v?c:q;D=i.duplicate();if(t==o||t==o.documentElement){t=l;s=0}if(t.nodeType==3){t.parentNode.insertBefore(z,t);D.moveToElementText(z);D.moveStart("character",
s);a.remove(z);i.setEndPoint(v?"StartToStart":"EndToEnd",D)}else{x=t.childNodes;if(x.length){s>=x.length?a.insertAfter(z,x[x.length-1]):t.insertBefore(z,x[s]);D.moveToElementText(z)}else{z=o.createTextNode(p);t.appendChild(z);D.moveToElementText(z.parentNode);D.collapse(f)}i.setEndPoint(v?"StartToStart":"EndToEnd",D);a.remove(z)}}var i,g,j,c,h,q,o=k.dom.doc,l=o.body;this.destroy();j=b.startContainer;c=b.startOffset;h=b.endContainer;q=b.endOffset;i=l.createTextRange();if(j==h&&j.nodeType==1&&c==q-
1)if(c==q-1)try{g=l.createControlRange();g.addElement(j.childNodes[c]);g.select();return}catch(r){}d(true);d();i.select()};this.getRangeAt=function(){if(!m||!tinymce.dom.RangeUtils.compareRanges(e,k.getRng())){m=n();e=k.getRng()}return m};this.destroy=function(){e=m=null}}})();
(function(k){var n=k.each,p=k.DOM,m=k.isIE,e;k.create("tinymce.dom.EventUtils",{EventUtils:function(){this.inits=[];this.events=[]},add:function(a,f,b,d){var i,g=this,j=g.events,c;if(f instanceof Array){c=[];n(f,function(h){c.push(g.add(a,h,b,d))});return c}if(a&&a.hasOwnProperty&&a instanceof Array){c=[];n(a,function(h){h=p.get(h);c.push(g.add(h,f,b,d))});return c}if(a=p.get(a)){i=function(h){if(!g.disabled){if((h=h||window.event)&&m){if(!h.target)h.target=h.srcElement;k.extend(h,g._stoppers)}if(!d)return b(h);
return b.call(d,h)}};if(f=="unload"){k.unloads.unshift({func:i});return i}if(f=="init"){g.domLoaded?i():g.inits.push(i);return i}j.push({obj:a,name:f,func:b,cfunc:i,scope:d});g._add(a,f,i);return b}},remove:function(a,f,b){var d=this,i=d.events,g=false,j;if(a&&a.hasOwnProperty&&a instanceof Array){j=[];n(a,function(c){c=p.get(c);j.push(d.remove(c,f,b))});return j}a=p.get(a);n(i,function(c,h){if(c.obj==a&&c.name==f&&(!b||c.func==b||c.cfunc==b)){i.splice(h,1);d._remove(a,f,c.cfunc);g=true;return false}});
return g},clear:function(a){var f=this.events,b,d;if(a){a=p.get(a);for(b=f.length-1;b>=0;b--){d=f[b];if(d.obj===a){this._remove(d.obj,d.name,d.cfunc);d.obj=d.cfunc=null;f.splice(b,1)}}}},cancel:function(a){if(!a)return false;this.stop(a);return this.prevent(a)},stop:function(a){if(a.stopPropagation)a.stopPropagation();else a.cancelBubble=true;return false},prevent:function(a){if(a.preventDefault)a.preventDefault();else a.returnValue=false;return false},destroy:function(){var a=this;n(a.events,function(f){a._remove(f.obj,
f.name,f.cfunc);f.obj=f.cfunc=null});a.events=[];a=null},_add:function(a,f,b){if(a.attachEvent)a.attachEvent("on"+f,b);else if(a.addEventListener)a.addEventListener(f,b,false);else a["on"+f]=b},_remove:function(a,f,b){if(a)try{if(a.detachEvent)a.detachEvent("on"+f,b);else if(a.removeEventListener)a.removeEventListener(f,b,false);else a["on"+f]=null}catch(d){}},_pageInit:function(){if(!this.domLoaded){this.domLoaded=true;n(this.inits,function(a){a()});this.inits=[]}},_wait:function(a){var f=this,b=
a.document;if(a.tinyMCE_GZ&&tinyMCE_GZ.loaded)f.domLoaded=1;else{if(b.attachEvent){b.attachEvent("onreadystatechange",function(){if(b.readyState==="complete"){b.detachEvent("onreadystatechange",arguments.callee);f._pageInit(a)}});b.documentElement.doScroll&&a==a.top&&function(){if(!f.domLoaded){try{b.documentElement.doScroll("left")}catch(d){setTimeout(arguments.callee,0);return}f._pageInit(a)}}()}else b.addEventListener&&f._add(a,"DOMContentLoaded",function(){f._pageInit(a)});f._add(a,"load",function(){f._pageInit(a)})}},
_stoppers:{preventDefault:function(){this.returnValue=false},stopPropagation:function(){this.cancelBubble=true}}});e=k.dom.Event=new k.dom.EventUtils;e._wait(window);k.addUnload(function(){e.destroy()})})(tinymce);
(function(k){k.dom.Element=function(n,p){var m=this,e;m.settings=p=p||{};m.id=n;m.dom=e=p.dom||k.DOM;k.isIE||e.get(m.id);k.each("getPos,getRect,getParent,add,setStyle,getStyle,setStyles,setAttrib,setAttribs,getAttrib,addClass,removeClass,hasClass,getOuterHTML,setOuterHTML,remove,show,hide,isHidden,setHTML,get".split(/,/),function(a){m[a]=function(){var f=[n],b;for(b=0;b<arguments.length;b++)f.push(arguments[b]);f=e[a].apply(e,f);m.update(a);return f}});k.extend(m,{on:function(a,f,b){return k.dom.Event.add(m.id,
a,f,b)},getXY:function(){return{x:parseInt(m.getStyle("left")),y:parseInt(m.getStyle("top"))}},getSize:function(){var a=e.get(m.id);return{w:parseInt(m.getStyle("width")||a.clientWidth),h:parseInt(m.getStyle("height")||a.clientHeight)}},moveTo:function(a,f){m.setStyles({left:a,top:f})},moveBy:function(a,f){var b=m.getXY();m.moveTo(b.x+a,b.y+f)},resizeTo:function(a,f){m.setStyles({width:a,height:f})},resizeBy:function(a,f){var b=m.getSize();m.resizeTo(b.w+a,b.h+f)},update:function(a){if(k.isIE6&&p.blocker){a=
a||"";if(!(a.indexOf("get")===0||a.indexOf("has")===0||a.indexOf("is")===0))if(a=="remove")e.remove(m.blocker);else{if(m.blocker)a=e.get(m.blocker);else{m.blocker=e.uniqueId();a=e.add(p.container||e.getRoot(),"iframe",{id:m.blocker,style:"position:absolute;",frameBorder:0,src:'javascript:""'});e.setStyle(a,"opacity",0)}e.setStyles(a,{left:m.getStyle("left",1),top:m.getStyle("top",1),width:m.getStyle("width",1),height:m.getStyle("height",1),display:m.getStyle("display",1),zIndex:parseInt(m.getStyle("zIndex",
1)||0)-1})}}}})}})(tinymce);
(function(k){var n=k.is,p=k.isIE,m=k.each;k.create("tinymce.dom.Selection",{Selection:function(e,a,f){var b=this;b.dom=e;b.win=a;b.serializer=f;m(["onBeforeSetContent","onBeforeGetContent","onSetContent","onGetContent"],function(d){b[d]=new k.util.Dispatcher(b)});if(!b.win.getSelection)b.tridentSel=new k.dom.TridentSelection(b);k.isIE&&e.boxModel&&this._fixIESelection();k.addUnload(b.destroy,b)},getContent:function(e){var a=this.getRng(),f=this.dom.create("body"),b=this.getSel(),d,i;e=e||{};d=i="";
e.get=true;e.format=e.format||"html";this.onBeforeGetContent.dispatch(this,e);if(e.format=="text")return this.isCollapsed()?"":a.text||(b.toString?b.toString():"");if(a.cloneContents)(a=a.cloneContents())&&f.appendChild(a);else f.innerHTML=n(a.item)||n(a.htmlText)?a.item?a.item(0).outerHTML:a.htmlText:a.toString();if(/^\s/.test(f.innerHTML))d=" ";if(/\s+$/.test(f.innerHTML))i=" ";e.getInner=true;e.content=this.isCollapsed()?"":d+this.serializer.serialize(f,e)+i;this.onGetContent.dispatch(this,e);
return e.content},setContent:function(e,a){var f=this.getRng(),b,d=this.win.document,i;a=a||{format:"html"};a.set=true;a.content=e;a.no_events||this.onBeforeSetContent.dispatch(this,a);e=a.content;if(f.insertNode){e+='<span id="__caret">_</span>';if(f.startContainer==d&&f.endContainer==d)d.body.innerHTML=e;else{f.deleteContents();if(d.body.childNodes.length==0)d.body.innerHTML=e;else if(f.createContextualFragment)f.insertNode(f.createContextualFragment(e));else{b=d.createDocumentFragment();i=d.createElement("div");
b.appendChild(i);i.outerHTML=e;f.insertNode(b)}}b=this.dom.get("__caret");f=d.createRange();f.setStartBefore(b);f.setEndBefore(b);this.setRng(f);this.dom.remove("__caret");this.setRng(f)}else{if(f.item){d.execCommand("Delete",false,null);f=this.getRng()}f.pasteHTML(e)}a.no_events||this.onSetContent.dispatch(this,a)},getStart:function(){var e=this.getRng(),a,f;if(e.duplicate||e.item){if(e.item)return e.item(0);a=e.duplicate();a.collapse(1);a=a.parentElement();for(e=f=e.parentElement();f=f.parentNode;)if(f==
a){a=e;break}}else{a=e.startContainer;if(a.nodeType==1&&a.hasChildNodes())a=a.childNodes[Math.min(a.childNodes.length-1,e.startOffset)];if(a&&a.nodeType==3)return a.parentNode}return a},getEnd:function(){var e=this.getRng(),a;if(e.duplicate||e.item){if(e.item)return e.item(0);e=e.duplicate();e.collapse(0);if((a=e.parentElement())&&a.nodeName=="BODY")return a.lastChild||a}else{a=e.endContainer;e=e.endOffset;if(a.nodeType==1&&a.hasChildNodes())a=a.childNodes[e>0?e-1:e];if(a&&a.nodeType==3)return a.parentNode}return a},
getBookmark:function(e,a){function f(o,l){var r=0;m(d.select(o),function(v,t){if(v==l)r=t});return r}var b=this,d=b.dom,i,g,j,c,h;if(e==2)return function(){function o(t,s){var z=t[s?"startContainer":"endContainer"],D=t[s?"startOffset":"endOffset"],x=[],u,A=0;if(z.nodeType==3){if(a)for(u=z.previousSibling;u&&u.nodeType==3;u=u.previousSibling)D+=u.nodeValue.length;x.push(D)}else{u=z.childNodes;if(D>=u.length&&u.length){A=1;D=Math.max(0,u.length-1)}x.push(b.dom.nodeIndex(u[D],a)+A)}for(;z&&z!=r;z=z.parentNode)x.push(b.dom.nodeIndex(z,
a));return x}var l=b.getRng(true),r=d.getRoot(),v={};v.start=o(l,true);if(!b.isCollapsed())v.end=o(l);return v}();if(e)return{rng:b.getRng()};i=b.getRng();j=d.uniqueId();c=tinyMCE.activeEditor.selection.isCollapsed();if(i.duplicate||i.item)if(i.item){h=i.item(0);g=h.nodeName;return{name:g,index:f(g,h)}}else{g=i.duplicate();try{i.collapse();i.pasteHTML('<span data-mce-type="bookmark" id="'+j+'_start" style="overflow:hidden;line-height:0px">﻿</span>');if(!c){g.collapse(false);g.pasteHTML('<span data-mce-type="bookmark" id="'+
j+'_end" style="overflow:hidden;line-height:0px">﻿</span>')}}catch(q){return null}}else{h=b.getNode();g=h.nodeName;if(g=="IMG")return{name:g,index:f(g,h)};g=i.cloneRange();if(!c){g.collapse(false);g.insertNode(d.create("span",{"data-mce-type":"bookmark",id:j+"_end",style:"overflow:hidden;line-height:0px"},"﻿"))}i.collapse(true);i.insertNode(d.create("span",{"data-mce-type":"bookmark",id:j+"_start",style:"overflow:hidden;line-height:0px"},"﻿"))}b.moveToBookmark({id:j,keep:1});return{id:j}},moveToBookmark:function(e){var a=
this.dom,f,b,d,i,g,j;this.tridentSel&&this.tridentSel.destroy();if(e)if(e.start){f=a.createRng();b=a.getRoot();var c=function(q){var o=e[q?"start":"end"],l,r,v;if(o){r=b;for(l=o.length-1;l>=1;l--){v=r.childNodes;if(v.length){r=v[o[l]];if(!r)return}}if(r.nodeType===3&&o[0]>r.nodeValue.length-1)return;else if(r.nodeType===1&&o[0]>r.childNodes.length)return;q?f.setStart(r,o[0]):f.setEnd(r,o[0])}return true};c(true)&&c()&&this.setRng(f)}else if(e.id){c=function(q){var o=a.get(e.id+"_"+q),l,r,v;v=e.keep;
if(o){l=o.parentNode;if(q=="start"){if(v){l=o.firstChild;r=1}else r=a.nodeIndex(o);d=i=l;g=j=r}else{if(v){l=o.firstChild;r=1}else r=a.nodeIndex(o);i=l;j=r}if(!v){v=o.previousSibling;l=o.nextSibling;for(m(k.grep(o.childNodes),function(t){if(t.nodeType==3)t.nodeValue=t.nodeValue.replace(/\uFEFF/g,"")});o=a.get(e.id+"_"+q);)a.remove(o,1);if(v&&l&&v.nodeType==l.nodeType&&v.nodeType==3&&!k.isOpera){r=v.nodeValue.length;v.appendData(l.nodeValue);a.remove(l);if(q=="start"){d=i=v;g=j=r}else{i=v;j=r}}}}};
var h=function(q){if(a.isBlock(q)&&!q.innerHTML)q.innerHTML=!p?'<br data-mce-bogus="1" />':" ";return q};c("start");c("end");if(d){f=a.createRng();f.setStart(h(d),g);f.setEnd(h(i),j);this.setRng(f)}}else if(e.name)this.select(a.select(e.name)[e.index]);else e.rng&&this.setRng(e.rng)},select:function(e,a){var f=this.dom,b=f.createRng();if(e){f=f.nodeIndex(e);b.setStart(e.parentNode,f);b.setEnd(e.parentNode,f+1);if(a){f=function(d,i){var g=new k.dom.TreeWalker(d,d);do{if(d.nodeType==3&&k.trim(d.nodeValue).length!=
0){i?b.setStart(d,0):b.setEnd(d,d.nodeValue.length);break}if(d.nodeName=="BR"){i?b.setStartBefore(d):b.setEndBefore(d);break}}while(d=i?g.next():g.prev())};f(e,1);f(e)}this.setRng(b)}return e},isCollapsed:function(){var e=this.getRng(),a=this.getSel();if(!e||e.item)return false;if(e.compareEndPoints)return e.compareEndPoints("StartToEnd",e)===0;return!a||e.collapsed},collapse:function(e){var a=this.getRng(),f;if(a.item){f=a.item(0);a=this.win.document.body.createTextRange();a.moveToElementText(f)}a.collapse(!!e);
this.setRng(a)},getSel:function(){var e=this.win;return e.getSelection?e.getSelection():e.document.selection},getRng:function(e){var a,f,b=this.win.document;if(e&&this.tridentSel)return this.tridentSel.getRangeAt(0);try{if(a=this.getSel())f=a.rangeCount>0?a.getRangeAt(0):a.createRange?a.createRange():b.createRange()}catch(d){}if(k.isIE&&f.setStart&&b.selection.createRange().item){e=b.selection.createRange().item(0);f=b.createRange();f.setStartBefore(e);f.setEndAfter(e)}f||(f=b.createRange?b.createRange():
b.body.createTextRange());if(this.selectedRange&&this.explicitRange)if(f.compareBoundaryPoints(f.START_TO_START,this.selectedRange)===0&&f.compareBoundaryPoints(f.END_TO_END,this.selectedRange)===0)f=this.explicitRange;else this.explicitRange=this.selectedRange=null;return f},setRng:function(e){var a;if(this.tridentSel)if(e.cloneRange)this.tridentSel.addRange(e);else try{e.select()}catch(f){}else if(a=this.getSel()){this.explicitRange=e;a.removeAllRanges();a.addRange(e);this.selectedRange=a.getRangeAt(0)}},
setNode:function(e){this.setContent(this.dom.getOuterHTML(e));return e},getNode:function(){var e=this.getRng();this.getSel();var a,f=e.startContainer,b=e.endContainer;if(!e)return this.dom.getRoot();if(e.setStart){a=e.commonAncestorContainer;if(!e.collapsed){if(e.startContainer==e.endContainer)if(e.endOffset-e.startOffset<2)if(e.startContainer.hasChildNodes())a=e.startContainer.childNodes[e.startOffset];if(f.nodeType===3&&b.nodeType===3){var d=function(i,g){for(var j=i;i&&i.nodeType===3&&i.length===
0;)i=g?i.nextSibling:i.previousSibling;return i||j};f=f.length===e.startOffset?d(f.nextSibling,true):f.parentNode;b=e.endOffset===0?d(b.previousSibling,false):b.parentNode;if(f&&f===b)return f}}if(a&&a.nodeType==3)return a.parentNode;return a}return e.item?e.item(0):e.parentElement()},getSelectedBlocks:function(e,a){var f=this.dom,b,d,i,g=[];b=f.getParent(e||this.getStart(),f.isBlock);d=f.getParent(a||this.getEnd(),f.isBlock);b&&g.push(b);if(b&&d&&b!=d)for(i=b;(i=i.nextSibling)&&i!=d;)f.isBlock(i)&&
g.push(i);d&&b!=d&&g.push(d);return g},destroy:function(e){this.win=null;this.tridentSel&&this.tridentSel.destroy();e||k.removeUnload(this.destroy)},_fixIESelection:function(){function e(h,q){var o=i.createTextRange();try{o.moveToPoint(h,q)}catch(l){o=null}return o}function a(h){if(h.button){if(h=e(h.x,h.y)){h.compareEndPoints("StartToStart",j)>0?h.setEndPoint("StartToStart",j):h.setEndPoint("EndToEnd",j);h.select()}}else f()}function f(){var h=d.selection.createRange();j&&!h.item&&h.compareEndPoints("StartToEnd",
h)===0&&j.select();b.unbind(d,"mouseup",f);b.unbind(d,"mousemove",a);j=g=0}var b=this.dom,d=b.doc,i=d.body,g,j,c;d.documentElement.unselectable=true;b.bind(d,["mousedown","contextmenu"],function(h){if(h.target.nodeName==="HTML"){g&&f();c=d.documentElement;if(!(c.scrollHeight>c.clientHeight)){g=1;if(j=e(h.x,h.y)){b.bind(d,"mouseup",f);b.bind(d,"mousemove",a);b.win.focus();j.select()}}}})}})})(tinymce);
(function(k){k.dom.Serializer=function(n,p,m){var e,a,f=k.isIE,b=k.each,d;if(!n.apply_source_formatting)n.indent=false;n.remove_trailing_brs=true;p=p||k.DOM;m=m||new k.html.Schema(n);n.entity_encoding=n.entity_encoding||"named";e=new k.util.Dispatcher(self);a=new k.util.Dispatcher(self);d=new k.html.DomParser(n,m);d.addAttributeFilter("src,href,style",function(i,g){for(var j=i.length,c,h,q="data-mce-"+g,o=n.url_converter,l=n.url_converter_scope;j--;){c=i[j];h=c.attributes.map[q];if(h!==void 0){c.attr(g,
h.length>0?h:null);c.attr(q,null)}else{h=c.attributes.map[g];if(g==="style")h=p.serializeStyle(p.parseStyle(h),c.name);else if(o)h=o.call(l,h,g,c.name);c.attr(g,h.length>0?h:null)}}});d.addAttributeFilter("class",function(i){for(var g=i.length,j,c;g--;){j=i[g];c=j.attr("class").replace(/\s*mceItem\w+\s*/g,"");j.attr("class",c.length>0?c:null)}});d.addAttributeFilter("data-mce-type",function(i,g,j){g=i.length;for(var c;g--;){c=i[g];c.attributes.map["data-mce-type"]==="bookmark"&&!j.cleanup&&c.remove()}});
d.addNodeFilter("script,style",function(i,g){function j(o){return o.replace(/(<!--\[CDATA\[|\]\]--\>)/g,"\n").replace(/^[\r\n]*|[\r\n]*$/g,"").replace(/^\s*(\/\/\s*<!--|\/\/\s*<!\[CDATA\[|<!--|<!\[CDATA\[)[\r\n]*/g,"").replace(/\s*(\/\/\s*\]\]>|\/\/\s*--\>|\]\]>|--\>|\]\]--\>)\s*$/g,"")}for(var c=i.length,h,q;c--;){h=i[c];q=h.firstChild?h.firstChild.value:"";if(g==="script"){h.attr("type",(h.attr("type")||"text/javascript").replace(/^mce\-/,""));if(q.length>0)h.firstChild.value="// <![CDATA[\n"+j(q)+
"\n// ]]\>"}else if(q.length>0)h.firstChild.value="<!--\n"+j(q)+"\n--\>"}});d.addNodeFilter("#comment",function(i){for(var g=i.length,j;g--;){j=i[g];if(j.value.indexOf("[CDATA[")===0){j.name="#cdata";j.type=4;j.value=j.value.replace(/^\[CDATA\[|\]\]$/g,"")}else if(j.value.indexOf("mce:protected ")===0){j.name="#text";j.type=3;j.raw=true;j.value=unescape(j.value).substr(14)}}});d.addNodeFilter("xml:namespace,input",function(i,g){for(var j=i.length,c;j--;){c=i[j];if(c.type===7)c.remove();else c.type===
1&&g==="input"&&!("type"in c.attributes.map)&&c.attr("type","text")}});n.fix_list_elements&&d.addNodeFilter("ul,ol",function(i){for(var g=i.length,j,c;g--;){j=i[g];c=j.parent;if(c.name==="ul"||c.name==="ol")j.prev&&j.prev.name==="li"&&j.prev.append(j)}});d.addAttributeFilter("data-mce-src,data-mce-href,data-mce-style",function(i,g){for(var j=i.length;j--;)i[j].attr(g,null)});return{schema:m,addNodeFilter:d.addNodeFilter,addAttributeFilter:d.addAttributeFilter,onPreProcess:e,onPostProcess:a,serialize:function(i,
g){var j,c,h;if(f&&p.select("script,style,select").length>0){j=i.innerHTML;i=i.cloneNode(false);p.setHTML(i,j)}else i=i.cloneNode(true);j=i.ownerDocument.implementation;if(j.createHTMLDocument){c=j.createHTMLDocument("");b(i.nodeName=="BODY"?i.childNodes:[i],function(q){c.body.appendChild(c.importNode(q,true))});i=i.nodeName!="BODY"?c.body.firstChild:c.body;h=p.doc;p.doc=c}g=g||{};g.format=g.format||"html";if(!g.no_events){g.node=i;e.dispatch(self,g)}j=new k.html.Serializer(n,m);g.content=j.serialize(d.parse(g.getInner?
i.innerHTML:k.trim(p.getOuterHTML(i),g),g));g.no_events||a.dispatch(self,g);if(h)p.doc=h;g.node=null;return g.content},addRules:function(i){m.addValidElements(i)},setRules:function(i){m.setValidElements(i)}}}})(tinymce);
(function(k){k.dom.ScriptLoader=function(){function n(b,d){function i(){g.remove(q);if(j)j.onreadystatechange=j.onload=j=null;d()}var g=k.DOM,j,c,h,q;q=g.uniqueId();if(k.isIE6){c=new k.util.URI(b);h=location;if(c.host==h.hostname&&c.port==h.port&&c.protocol+":"==h.protocol){k.util.XHR.send({url:k._addVer(c.getURI()),success:function(o){var l=g.create("script",{type:"text/javascript"});l.text=o;document.getElementsByTagName("head")[0].appendChild(l);g.remove(l);i()}});return}}j=g.create("script",{id:q,
type:"text/javascript",src:k._addVer(b)});if(!k.isIE)j.onload=i;if(!k.isOpera)j.onreadystatechange=function(){var o=j.readyState;if(o=="complete"||o=="loaded")i()};(document.getElementsByTagName("head")[0]||document.body).appendChild(j)}var p={},m=[],e={},a=[],f=0;this.isDone=function(b){return p[b]==2};this.markDone=function(b){p[b]=2};this.add=this.load=function(b,d,i){if(p[b]==void 0){m.push(b);p[b]=0}if(d){e[b]||(e[b]=[]);e[b].push({func:d,scope:i||this})}};this.loadQueue=function(b,d){this.loadScripts(m,
b,d)};this.loadScripts=function(b,d,i){function g(c){k.each(e[c],function(h){h.func.call(h.scope)});e[c]=void 0}var j;a.push({func:d,scope:i||this});j=function(){var c=k.grep(b);b.length=0;k.each(c,function(h){if(p[h]==2)g(h);else if(p[h]!=1){p[h]=1;f++;n(h,function(){p[h]=2;f--;g(h);j()})}});if(!f){k.each(a,function(h){h.func.call(h.scope)});a.length=0}};j()}};k.ScriptLoader=new k.dom.ScriptLoader})(tinymce);
tinymce.dom.TreeWalker=function(k,n){function p(e,a,f,b){if(e){if(!b&&e[a])return e[a];if(e!=n){if(a=e[f])return a;for(e=e.parentNode;e&&e!=n;e=e.parentNode)if(a=e[f])return a}}}var m=k;this.current=function(){return m};this.next=function(e){return m=p(m,"firstChild","nextSibling",e)};this.prev=function(e){return m=p(m,"lastChild","previousSibling",e)}};
(function(k){k.dom.RangeUtils=function(n){this.walk=function(p,m){function e(o,l,r){for(var v=[];o&&o!=r;o=o[l])v.push(o);return v}function a(o,l){do{if(o.parentNode==l)return o;o=o.parentNode}while(o)}function f(o,l,r){var v=r?"nextSibling":"previousSibling";j=o;for(c=j.parentNode;j&&j!=l;j=c){c=j.parentNode;h=e(j==o?j:j[v],v);if(h.length){r||h.reverse();m(h)}}}var b=p.startContainer,d=p.startOffset,i=p.endContainer,g=p.endOffset,j,c,h,q;q=n.select("td.mceSelected,th.mceSelected");if(q.length>0)k.each(q,
function(o){m([o])});else{if(b.nodeType==1&&b.hasChildNodes())b=b.childNodes[d];if(i.nodeType==1&&i.hasChildNodes())i=i.childNodes[Math.min(g-1,i.childNodes.length-1)];g=n.findCommonAncestor(b,i);if(b==i)return m([b]);for(j=b;j;j=j.parentNode){if(j==i)return f(b,g,true);if(j==g)break}for(j=i;j;j=j.parentNode){if(j==b)return f(i,g);if(j==g)break}d=a(b,g)||b;g=a(i,g)||i;f(b,d,true);h=e(d==b?d:d.nextSibling,"nextSibling",g==i?g.nextSibling:g);h.length&&m(h);f(i,g)}}};k.dom.RangeUtils.compareRanges=function(n,
p){if(n&&p)if(n.item||n.duplicate){if(n.item&&p.item&&n.item(0)===p.item(0))return true;if(n.isEqual&&p.isEqual&&p.isEqual(n))return true}else return n.startContainer==p.startContainer&&n.startOffset==p.startOffset;return false}})(tinymce);
(function(k){var n=k.dom.Event,p=k.each;k.create("tinymce.ui.KeyboardNavigation",{KeyboardNavigation:function(m,e){var a=this,f=m.root,b=m.items,d=m.enableUpDown,i=m.enableLeftRight||!m.enableUpDown,g=m.excludeFromTabOrder,j,c,h,q,o;e=e||k.DOM;j=function(l){o=l.target.id};c=function(l){e.setAttrib(l.target.id,"tabindex","-1")};q=function(){var l=e.get(o);e.setAttrib(l,"tabindex","0");l.focus()};a.focus=function(){e.get(o).focus()};a.destroy=function(){p(b,function(l){e.unbind(e.get(l.id),"focus",
j);e.unbind(e.get(l.id),"blur",c)});e.unbind(e.get(f),"focus",q);e.unbind(e.get(f),"keydown",h);b=e=f=a.focus=j=c=h=q=null;a.destroy=function(){}};a.moveFocus=function(l,r){var v=-1,t;if(o){p(b,function(s,z){if(s.id===o){v=z;return false}});v+=l;if(v<0)v=b.length-1;else if(v>=b.length)v=0;t=b[v];e.setAttrib(o,"tabindex","-1");e.setAttrib(t.id,"tabindex","0");e.get(t.id).focus();m.actOnFocus&&m.onAction(t.id);r&&n.cancel(r)}};h=function(l){switch(l.keyCode){case 37:i&&a.moveFocus(-1);break;case 39:i&&
a.moveFocus(1);break;case 38:d&&a.moveFocus(-1);break;case 40:d&&a.moveFocus(1);break;case 27:if(m.onCancel){m.onCancel();n.cancel(l)}break;case 14:case 13:case 32:if(m.onAction){m.onAction(o);n.cancel(l)}}};p(b,function(l,r){var v;if(!l.id)l.id=e.uniqueId("_mce_item_");if(g){e.bind(l.id,"blur",c);v="-1"}else v=r===0?"0":"-1";e.setAttrib(l.id,"tabindex",v);e.bind(e.get(l.id),"focus",j)});if(b[0])o=b[0].id;e.setAttrib(f,"tabindex","-1");e.bind(e.get(f),"focus",q);e.bind(e.get(f),"keydown",h)}})})(tinymce);
(function(k){var n=k.DOM,p=k.is;k.create("tinymce.ui.Control",{Control:function(m,e,a){this.id=m;this.settings=e=e||{};this.rendered=false;this.onRender=new k.util.Dispatcher(this);this.classPrefix="";this.scope=e.scope||this;this.active=this.disabled=0;this.editor=a},setAriaProperty:function(m,e){var a=n.get(this.id+"_aria")||n.get(this.id);a&&n.setAttrib(a,"aria-"+m,!!e)},focus:function(){n.get(this.id).focus()},setDisabled:function(m){if(m!=this.disabled){this.setAriaProperty("disabled",m);this.setState("Disabled",
m);this.setState("Enabled",!m);this.disabled=m}},isDisabled:function(){return this.disabled},setActive:function(m){if(m!=this.active){this.setState("Active",m);this.active=m;this.setAriaProperty("pressed",m)}},isActive:function(){return this.active},setState:function(m,e){var a=n.get(this.id);m=this.classPrefix+m;e?n.addClass(a,m):n.removeClass(a,m)},isRendered:function(){return this.rendered},renderHTML:function(){},renderTo:function(m){n.setHTML(m,this.renderHTML())},postRender:function(){var m;
if(p(this.disabled)){m=this.disabled;this.disabled=-1;this.setDisabled(m)}if(p(this.active)){m=this.active;this.active=-1;this.setActive(m)}},remove:function(){n.remove(this.id);this.destroy()},destroy:function(){k.dom.Event.clear(this.id)}})})(tinymce);tinymce.create("tinymce.ui.Container:tinymce.ui.Control",{Container:function(k,n,p){this.parent(k,n,p);this.controls=[];this.lookup={}},add:function(k){this.lookup[k.id]=k;this.controls.push(k);return k},get:function(k){return this.lookup[k]}});
tinymce.create("tinymce.ui.Separator:tinymce.ui.Control",{Separator:function(k,n){this.parent(k,n);this.classPrefix="mceSeparator";this.setDisabled(true)},renderHTML:function(){return tinymce.DOM.createHTML("span",{"class":this.classPrefix,role:"separator","aria-orientation":"vertical",tabindex:"-1"})}});
(function(k){var n=k.is;k.create("tinymce.ui.MenuItem:tinymce.ui.Control",{MenuItem:function(p,m){this.parent(p,m);this.classPrefix="mceMenuItem"},setSelected:function(p){this.setState("Selected",p);this.setAriaProperty("checked",!!p);this.selected=p},isSelected:function(){return this.selected},postRender:function(){this.parent();n(this.selected)&&this.setSelected(this.selected)}})})(tinymce);
(function(k){var n=k.DOM,p=k.walk;k.create("tinymce.ui.Menu:tinymce.ui.MenuItem",{Menu:function(m,e){this.parent(m,e);this.items={};this.collapsed=false;this.menuCount=0;this.onAddItem=new k.util.Dispatcher(this)},expand:function(m){m&&p(this,function(e){e.expand&&e.expand()},"items",this);this.collapsed=false},collapse:function(m){m&&p(this,function(e){e.collapse&&e.collapse()},"items",this);this.collapsed=true},isCollapsed:function(){return this.collapsed},add:function(m){m.settings||(m=new k.ui.MenuItem(m.id||
n.uniqueId(),m));this.onAddItem.dispatch(this,m);return this.items[m.id]=m},addSeparator:function(){return this.add({separator:true})},addMenu:function(m){m.collapse||(m=this.createMenu(m));this.menuCount++;return this.add(m)},hasMenus:function(){return this.menuCount!==0},remove:function(m){delete this.items[m.id]},removeAll:function(){p(this,function(m){m.removeAll?m.removeAll():m.remove();m.destroy()},"items",this);this.items={}},createMenu:function(m){m=new k.ui.Menu(m.id||n.uniqueId(),m);m.onAddItem.add(this.onAddItem.dispatch,
this.onAddItem);return m}})})(tinymce);
(function(k){var n=k.is,p=k.DOM,m=k.each,e=k.dom.Event,a=k.dom.Element;k.create("tinymce.ui.DropMenu:tinymce.ui.Menu",{DropMenu:function(f,b){b=b||{};b.container=b.container||p.doc.body;b.offset_x=b.offset_x||0;b.offset_y=b.offset_y||0;b.vp_offset_x=b.vp_offset_x||0;b.vp_offset_y=b.vp_offset_y||0;if(n(b.icons)&&!b.icons)b["class"]+=" mceNoIcons";this.parent(f,b);this.onShowMenu=new k.util.Dispatcher(this);this.onHideMenu=new k.util.Dispatcher(this);this.classPrefix="mceMenu"},createMenu:function(f){var b=
this.settings;f.container=f.container||b.container;f.parent=this;f.constrain=f.constrain||b.constrain;f["class"]=f["class"]||b["class"];f.vp_offset_x=f.vp_offset_x||b.vp_offset_x;f.vp_offset_y=f.vp_offset_y||b.vp_offset_y;f.keyboard_focus=b.keyboard_focus;f=new k.ui.DropMenu(f.id||p.uniqueId(),f);f.onAddItem.add(this.onAddItem.dispatch,this.onAddItem);return f},focus:function(){this.keyboardNav&&this.keyboardNav.focus()},update:function(){var f=this.settings,b=p.get("menu_"+this.id+"_tbl"),d=p.get("menu_"+
this.id+"_co"),i,g;i=f.max_width?Math.min(b.clientWidth,f.max_width):b.clientWidth;g=f.max_height?Math.min(b.clientHeight,f.max_height):b.clientHeight;p.boxModel?this.element.setStyles({width:i,height:g}):this.element.setStyles({width:i+2,height:g+2});f.max_width&&p.setStyle(d,"width",i);if(f.max_height){p.setStyle(d,"height",g);b.clientHeight<f.max_height&&p.setStyle(d,"overflow","hidden")}},showMenu:function(f,b,d){var i=this,g=i.settings,j,c=p.getViewPort(),h,q,o,l,r=i.classPrefix;i.collapse(1);
if(!i.isMenuVisible){if(i.rendered)j=p.get("menu_"+i.id);else{j=p.add(i.settings.container,i.renderNode());m(i.items,function(v){v.postRender()});i.element=new a("menu_"+i.id,{blocker:1,container:g.container})}k.isOpera||p.setStyles(j,{left:-65535,top:-65535});p.show(j);i.update();f+=g.offset_x||0;b+=g.offset_y||0;c.w-=4;c.h-=4;if(g.constrain){h=j.clientWidth-2;q=j.clientHeight-2;o=c.x+c.w;c=c.y+c.h;if(f+g.vp_offset_x+h>o)f=d?d-h:Math.max(0,o-g.vp_offset_x-h);if(b+g.vp_offset_y+q>c)b=Math.max(0,c-
g.vp_offset_y-q)}p.setStyles(j,{left:f,top:b});i.element.update();i.isMenuVisible=1;i.mouseClickFunc=e.add(j,"click",function(v){var t;if((v=v.target)&&(v=p.getParent(v,"tr"))&&!p.hasClass(v,r+"ItemSub")){t=i.items[v.id];if(!t.isDisabled()){for(l=i;l;){l.hideMenu&&l.hideMenu();l=l.settings.parent}t.settings.onclick&&t.settings.onclick(v);return e.cancel(v)}}});if(i.hasMenus())i.mouseOverFunc=e.add(j,"mouseover",function(v){var t;if((v=v.target)&&(v=p.getParent(v,"tr"))){t=i.items[v.id];i.lastMenu&&
i.lastMenu.collapse(1);if(!t.isDisabled())if(v&&p.hasClass(v,r+"ItemSub")){v=p.getRect(v);t.showMenu(v.x+v.w-2,v.y-2,v.x);i.lastMenu=t;p.addClass(p.get(t.id).firstChild,r+"ItemActive")}}});e.add(j,"keydown",i._keyHandler,i);i.onShowMenu.dispatch(i);g.keyboard_focus&&i._setupKeyboardNav()}},hideMenu:function(f){var b=p.get("menu_"+this.id);if(this.isMenuVisible){this.keyboardNav&&this.keyboardNav.destroy();e.remove(b,"mouseover",this.mouseOverFunc);e.remove(b,"click",this.mouseClickFunc);e.remove(b,
"keydown",this._keyHandler);p.hide(b);this.isMenuVisible=0;f||this.collapse(1);this.element&&this.element.hide();if(f=p.get(this.id))p.removeClass(f.firstChild,this.classPrefix+"ItemActive");this.onHideMenu.dispatch(this)}},add:function(f){var b;f=this.parent(f);if(this.isRendered&&(b=p.get("menu_"+this.id)))this._add(p.select("tbody",b)[0],f);return f},collapse:function(f){this.parent(f);this.hideMenu(1)},remove:function(f){p.remove(f.id);this.destroy();return this.parent(f)},destroy:function(){var f=
p.get("menu_"+this.id);this.keyboardNav&&this.keyboardNav.destroy();e.remove(f,"mouseover",this.mouseOverFunc);e.remove(p.select("a",f),"focus",this.mouseOverFunc);e.remove(f,"click",this.mouseClickFunc);e.remove(f,"keydown",this._keyHandler);this.element&&this.element.remove();p.remove(f)},renderNode:function(){var f=this,b=f.settings,d,i,g;g=p.create("div",{role:"listbox",id:"menu_"+f.id,"class":b["class"],style:"position:absolute;left:0;top:0;z-index:200000;outline:0"});f.settings.parent&&p.setAttrib(g,
"aria-parent","menu_"+f.settings.parent.id);i=p.add(g,"div",{role:"presentation",id:"menu_"+f.id+"_co","class":f.classPrefix+(b["class"]?" "+b["class"]:"")});f.element=new a("menu_"+f.id,{blocker:1,container:b.container});b.menu_line&&p.add(i,"span",{"class":f.classPrefix+"Line"});b=p.add(i,"table",{role:"presentation",id:"menu_"+f.id+"_tbl",border:0,cellPadding:0,cellSpacing:0});d=p.add(b,"tbody");m(f.items,function(j){f._add(d,j)});f.rendered=true;return g},_setupKeyboardNav:function(){var f,b,
d=this;f=p.select("#menu_"+d.id)[0];b=p.select("a[role=option]","menu_"+d.id);b.splice(0,0,f);d.keyboardNav=new k.ui.KeyboardNavigation({root:"menu_"+d.id,items:b,onCancel:function(){d.hideMenu()},enableUpDown:true});f.focus()},_keyHandler:function(f){switch(f.keyCode){case 37:if(this.settings.parent){this.hideMenu();this.settings.parent.focus();e.cancel(f)}break;case 39:this.mouseOverFunc&&this.mouseOverFunc(f)}},_add:function(f,b){var d,i=b.settings,g,j,c,h=this.classPrefix;if(i.separator){j=p.add(f,
"tr",{id:b.id,"class":h+"ItemSeparator"});p.add(j,"td",{"class":h+"ItemSeparator"});if(d=j.previousSibling)p.addClass(d,"mceLast")}else{d=j=p.add(f,"tr",{id:b.id,"class":h+"Item "+h+"ItemEnabled"});d=c=p.add(d,i.titleItem?"th":"td");d=g=p.add(d,"a",{id:b.id+"_aria",role:i.titleItem?"presentation":"option",href:"javascript:;",onclick:"return false;",onmousedown:"return false;"});if(i.parent){p.setAttrib(g,"aria-haspopup","true");p.setAttrib(g,"aria-owns","menu_"+b.id)}p.addClass(c,i["class"]);g=p.add(d,
"span",{"class":"mceIcon"+(i.icon?" mce_"+i.icon:"")});i.icon_src&&p.add(g,"img",{src:i.icon_src});d=p.add(d,i.element||"span",{"class":"mceText",title:b.settings.title},b.settings.title);b.settings.style&&p.setAttrib(d,"style",b.settings.style);f.childNodes.length==1&&p.addClass(j,"mceFirst");if((d=j.previousSibling)&&p.hasClass(d,h+"ItemSeparator"))p.addClass(j,"mceFirst");b.collapse&&p.addClass(j,h+"ItemSub");if(d=j.previousSibling)p.removeClass(d,"mceLast");p.addClass(j,"mceLast")}}})})(tinymce);
(function(k){var n=k.DOM;k.create("tinymce.ui.Button:tinymce.ui.Control",{Button:function(p,m,e){this.parent(p,m,e);this.classPrefix="mceButton"},renderHTML:function(){var p=this.classPrefix,m=this.settings,e,a;a=n.encode(m.label||"");e='<a role="button" id="'+this.id+'" href="javascript:;" class="'+p+" "+p+"Enabled "+m["class"]+(a?" "+p+"Labeled":"")+'" onmousedown="return false;" onclick="return false;" aria-labelledby="'+this.id+'_voice" title="'+n.encode(m.title)+'">';e+=m.image?'<img class="mceIcon" src="'+
m.image+'" alt="'+n.encode(m.title)+'" />'+a:'<span class="mceIcon '+m["class"]+'"></span>'+(a?'<span class="'+p+'Label">'+a+"</span>":"");e+='<span class="mceVoiceLabel mceIconOnly" style="display: none;" id="'+this.id+'_voice">'+m.title+"</span>";e+="</a>";return e},postRender:function(){var p=this,m=p.settings;k.dom.Event.add(p.id,"click",function(e){if(!p.isDisabled())return m.onclick.call(m.scope,e)})}})})(tinymce);
(function(k){var n=k.DOM,p=k.dom.Event,m=k.each,e=k.util.Dispatcher;k.create("tinymce.ui.ListBox:tinymce.ui.Control",{ListBox:function(a,f,b){this.parent(a,f,b);this.items=[];this.onChange=new e(this);this.onPostRender=new e(this);this.onAdd=new e(this);this.onRenderMenu=new k.util.Dispatcher(this);this.classPrefix="mceListBox"},select:function(a){var f=this,b,d;if(a==undefined)return f.selectByIndex(-1);d=a&&a.call?a:function(i){return i==a};if(a!=f.selectedValue){m(f.items,function(i,g){if(d(i.value)){b=
1;f.selectByIndex(g);return false}});b||f.selectByIndex(-1)}},selectByIndex:function(a){var f,b;if(a!=this.selectedIndex){f=n.get(this.id+"_text");if(b=this.items[a]){this.selectedValue=b.value;this.selectedIndex=a;n.setHTML(f,n.encode(b.title));n.removeClass(f,"mceTitle");n.setAttrib(this.id,"aria-valuenow",b.title)}else{n.setHTML(f,n.encode(this.settings.title));n.addClass(f,"mceTitle");this.selectedValue=this.selectedIndex=null;n.setAttrib(this.id,"aria-valuenow",this.settings.title)}}},add:function(a,
f,b){b=b||{};b=k.extend(b,{title:a,value:f});this.items.push(b);this.onAdd.dispatch(this,b)},getLength:function(){return this.items.length},renderHTML:function(){var a="";a=this.settings;var f=this.classPrefix;a='<span role="button" aria-haspopup="true" aria-labelledby="'+this.id+'_text" aria-describedby="'+this.id+'_voiceDesc"><table role="presentation" tabindex="0" id="'+this.id+'" cellpadding="0" cellspacing="0" class="'+f+" "+f+"Enabled"+(a["class"]?" "+a["class"]:"")+'"><tbody><tr>';a+="<td>"+
n.createHTML("span",{id:this.id+"_voiceDesc","class":"voiceLabel",style:"display:none;"},this.settings.title);a+=n.createHTML("a",{id:this.id+"_text",tabindex:-1,href:"javascript:;","class":"mceText",onclick:"return false;",onmousedown:"return false;"},n.encode(this.settings.title))+"</td>";a+="<td>"+n.createHTML("a",{id:this.id+"_open",tabindex:-1,href:"javascript:;","class":"mceOpen",onclick:"return false;",onmousedown:"return false;"},'<span><span style="display:none;" class="mceIconOnly" aria-hidden="true">▼</span></span>')+
"</td>";a+="</tr></tbody></table></span>";return a},showMenu:function(){var a=this,f,b=n.get(this.id),d;if(!(a.isDisabled()||a.items.length==0)){if(a.menu&&a.menu.isMenuVisible)return a.hideMenu();if(!a.isMenuRendered){a.renderMenu();a.isMenuRendered=true}n.getPos(this.settings.menu_container);f=n.getPos(b);d=a.menu;d.settings.offset_x=f.x;d.settings.offset_y=f.y;d.settings.keyboard_focus=!k.isOpera;a.oldID&&d.items[a.oldID].setSelected(0);m(a.items,function(i){if(i.value===a.selectedValue){d.items[i.id].setSelected(1);
a.oldID=i.id}});d.showMenu(0,b.clientHeight);p.add(n.doc,"mousedown",a.hideMenu,a);n.addClass(a.id,a.classPrefix+"Selected")}},hideMenu:function(a){if(this.menu&&this.menu.isMenuVisible){n.removeClass(this.id,this.classPrefix+"Selected");if(!(a&&a.type=="mousedown"&&(a.target.id==this.id+"_text"||a.target.id==this.id+"_open")))if(!a||!n.getParent(a.target,".mceMenu")){n.removeClass(this.id,this.classPrefix+"Selected");p.remove(n.doc,"mousedown",this.hideMenu,this);this.menu.hideMenu()}}},renderMenu:function(){var a=
this,f;f=a.settings.control_manager.createDropMenu(a.id+"_menu",{menu_line:1,"class":a.classPrefix+"Menu mceNoIcons",max_width:150,max_height:150});f.onHideMenu.add(function(){a.hideMenu();a.focus()});f.add({title:a.settings.title,"class":"mceMenuItemTitle",onclick:function(){a.settings.onselect("")!==false&&a.select("")}});m(a.items,function(b){if(b.value===undefined)f.add({title:b.title,"class":"mceMenuItemTitle",onclick:function(){a.settings.onselect("")!==false&&a.select("")}});else{b.id=n.uniqueId();
b.onclick=function(){a.settings.onselect(b.value)!==false&&a.select(b.value)};f.add(b)}});a.onRenderMenu.dispatch(a,f);a.menu=f},postRender:function(){var a=this,f=a.classPrefix;p.add(a.id,"click",a.showMenu,a);p.add(a.id,"keydown",function(b){if(b.keyCode==32){a.showMenu(b);p.cancel(b)}});p.add(a.id,"focus",function(){if(!a._focused){a.keyDownHandler=p.add(a.id,"keydown",function(b){if(b.keyCode==40){a.showMenu();p.cancel(b)}});a.keyPressHandler=p.add(a.id,"keypress",function(b){var d;if(b.keyCode==
13){d=a.selectedValue;a.selectedValue=null;p.cancel(b);a.settings.onselect(d)}})}a._focused=1});p.add(a.id,"blur",function(){p.remove(a.id,"keydown",a.keyDownHandler);p.remove(a.id,"keypress",a.keyPressHandler);a._focused=0});if(k.isIE6||!n.boxModel){p.add(a.id,"mouseover",function(){n.hasClass(a.id,f+"Disabled")||n.addClass(a.id,f+"Hover")});p.add(a.id,"mouseout",function(){n.hasClass(a.id,f+"Disabled")||n.removeClass(a.id,f+"Hover")})}a.onPostRender.dispatch(a,n.get(a.id))},destroy:function(){this.parent();
p.clear(this.id+"_text");p.clear(this.id+"_open")}})})(tinymce);
(function(k){var n=k.DOM,p=k.dom.Event,m=k.each;k.create("tinymce.ui.NativeListBox:tinymce.ui.ListBox",{NativeListBox:function(e,a){this.parent(e,a);this.classPrefix="mceNativeListBox"},setDisabled:function(e){n.get(this.id).disabled=e;this.setAriaProperty("disabled",e)},isDisabled:function(){return n.get(this.id).disabled},select:function(e){var a=this,f,b;if(e==undefined)return a.selectByIndex(-1);b=e&&e.call?e:function(d){return d==e};if(e!=a.selectedValue){m(a.items,function(d,i){if(b(d.value)){f=
1;a.selectByIndex(i);return false}});f||a.selectByIndex(-1)}},selectByIndex:function(e){n.get(this.id).selectedIndex=e+1;this.selectedValue=this.items[e]?this.items[e].value:null},add:function(e,a,f){f=f||{};f.value=a;this.isRendered()&&n.add(n.get(this.id),"option",f,e);e={title:e,value:a,attribs:f};this.items.push(e);this.onAdd.dispatch(this,e)},getLength:function(){return this.items.length},renderHTML:function(){var e;e=n.createHTML("option",{value:""},"-- "+this.settings.title+" --");m(this.items,
function(a){e+=n.createHTML("option",{value:a.value},a.title)});e=n.createHTML("select",{id:this.id,"class":"mceNativeListBox","aria-labelledby":this.id+"_aria"},e);e+=n.createHTML("span",{id:this.id+"_aria",style:"display: none"},this.settings.title);return e},postRender:function(){function e(b){if((b=a.items[b.target.selectedIndex-1])&&(b=b.value)){a.onChange.dispatch(a,b);a.settings.onselect&&a.settings.onselect(b)}}var a=this,f=true;a.rendered=true;p.add(a.id,"change",e);p.add(a.id,"keydown",
function(b){var d;p.remove(a.id,"change",void 0);f=false;d=p.add(a.id,"blur",function(){if(!f){f=true;p.add(a.id,"change",e);p.remove(a.id,"blur",d)}});if(b.keyCode==13||b.keyCode==32){e(b);return p.cancel(b)}});a.onPostRender.dispatch(a,n.get(a.id))}})})(tinymce);
(function(k){var n=k.DOM,p=k.dom.Event;k.create("tinymce.ui.MenuButton:tinymce.ui.Button",{MenuButton:function(m,e,a){this.parent(m,e,a);this.onRenderMenu=new k.util.Dispatcher(this);e.menu_container=e.menu_container||n.doc.body},showMenu:function(){var m,e=n.get(this.id),a;if(!this.isDisabled()){if(!this.isMenuRendered){this.renderMenu();this.isMenuRendered=true}if(this.isMenuVisible)return this.hideMenu();n.getPos(this.settings.menu_container);m=n.getPos(e);a=this.menu;a.settings.offset_x=m.x;a.settings.offset_y=
m.y;a.settings.vp_offset_x=m.x;a.settings.vp_offset_y=m.y;a.settings.keyboard_focus=this._focused;a.showMenu(0,e.clientHeight);p.add(n.doc,"mousedown",this.hideMenu,this);this.setState("Selected",1);this.isMenuVisible=1}},renderMenu:function(){var m=this,e;e=m.settings.control_manager.createDropMenu(m.id+"_menu",{menu_line:1,"class":this.classPrefix+"Menu",icons:m.settings.icons});e.onHideMenu.add(function(){m.hideMenu();m.focus()});m.onRenderMenu.dispatch(m,e);m.menu=e},hideMenu:function(m){var e=
this;if(!(m&&m.type=="mousedown"&&n.getParent(m.target,function(a){return a.id===e.id||a.id===e.id+"_open"}))){if(!m||!n.getParent(m.target,".mceMenu")){e.setState("Selected",0);p.remove(n.doc,"mousedown",e.hideMenu,e);e.menu&&e.menu.hideMenu()}e.isMenuVisible=0}},postRender:function(){var m=this,e=m.settings;p.add(m.id,"click",function(){if(!m.isDisabled()){e.onclick&&e.onclick(m.value);m.showMenu()}})}})})(tinymce);
(function(k){var n=k.DOM,p=k.dom.Event;k.create("tinymce.ui.SplitButton:tinymce.ui.MenuButton",{SplitButton:function(m,e,a){this.parent(m,e,a);this.classPrefix="mceSplitButton"},renderHTML:function(){var m,e=this.settings,a;m="<tbody><tr>";a=e.image?n.createHTML("img ",{src:e.image,role:"presentation","class":"mceAction "+e["class"]}):n.createHTML("span",{"class":"mceAction "+e["class"]},"");a+=n.createHTML("span",{"class":"mceVoiceLabel mceIconOnly",id:this.id+"_voice",style:"display:none;"},e.title);
m+="<td >"+n.createHTML("a",{role:"button",id:this.id+"_action",tabindex:"-1",href:"javascript:;","class":"mceAction "+e["class"],onclick:"return false;",onmousedown:"return false;",title:e.title},a)+"</td>";a=n.createHTML("span",{"class":"mceOpen "+e["class"]},'<span style="display:none;" class="mceIconOnly" aria-hidden="true">▼</span>');m+="<td >"+n.createHTML("a",{role:"button",id:this.id+"_open",tabindex:"-1",href:"javascript:;","class":"mceOpen "+e["class"],onclick:"return false;",onmousedown:"return false;",
title:e.title},a)+"</td>";m+="</tr></tbody>";m=n.createHTML("table",{id:this.id,role:"presentation",tabindex:"0","class":"mceSplitButton mceSplitButtonEnabled "+e["class"],cellpadding:"0",cellspacing:"0",title:e.title},m);return n.createHTML("span",{role:"button","aria-labelledby":this.id+"_voice","aria-haspopup":"true"},m)},postRender:function(){var m=this,e=m.settings,a;if(e.onclick){a=function(f){if(!m.isDisabled()){e.onclick(m.value);p.cancel(f)}};p.add(m.id+"_action","click",a);p.add(m.id,["click",
"keydown"],function(f){if((f.keyCode===32||f.keyCode===13||f.keyCode===14)&&!f.altKey&&!f.ctrlKey&&!f.metaKey){a();p.cancel(f)}else if(f.type==="click"||f.keyCode===40){m.showMenu();p.cancel(f)}})}p.add(m.id+"_open","click",function(f){m.showMenu();p.cancel(f)});p.add([m.id,m.id+"_open"],"focus",function(){m._focused=1});p.add([m.id,m.id+"_open"],"blur",function(){m._focused=0});if(k.isIE6||!n.boxModel){p.add(m.id,"mouseover",function(){n.hasClass(m.id,"mceSplitButtonDisabled")||n.addClass(m.id,"mceSplitButtonHover")});
p.add(m.id,"mouseout",function(){n.hasClass(m.id,"mceSplitButtonDisabled")||n.removeClass(m.id,"mceSplitButtonHover")})}},destroy:function(){this.parent();p.clear(this.id+"_action");p.clear(this.id+"_open");p.clear(this.id)}})})(tinymce);
(function(k){var n=k.DOM,p=k.dom.Event,m=k.is,e=k.each;k.create("tinymce.ui.ColorSplitButton:tinymce.ui.SplitButton",{ColorSplitButton:function(a,f,b){this.parent(a,f,b);this.settings=f=k.extend({colors:"000000,993300,333300,003300,003366,000080,333399,333333,800000,FF6600,808000,008000,008080,0000FF,666699,808080,FF0000,FF9900,99CC00,339966,33CCCC,3366FF,800080,999999,FF00FF,FFCC00,FFFF00,00FF00,00FFFF,00CCFF,993366,C0C0C0,FF99CC,FFCC99,FFFF99,CCFFCC,CCFFFF,99CCFF,CC99FF,FFFFFF",grid_width:8,default_color:"#888888"},
this.settings);this.onShowMenu=new k.util.Dispatcher(this);this.onHideMenu=new k.util.Dispatcher(this);this.value=f.default_color},showMenu:function(){var a=this,f,b;if(!a.isDisabled()){if(!a.isMenuRendered){a.renderMenu();a.isMenuRendered=true}if(a.isMenuVisible)return a.hideMenu();f=n.get(a.id);n.show(a.id+"_menu");n.addClass(f,"mceSplitButtonSelected");b=n.getPos(f);n.setStyles(a.id+"_menu",{left:b.x,top:b.y+f.clientHeight,zIndex:2E5});f=0;p.add(n.doc,"mousedown",a.hideMenu,a);a.onShowMenu.dispatch(a);
if(a._focused){a._keyHandler=p.add(a.id+"_menu","keydown",function(d){d.keyCode==27&&a.hideMenu()});n.select("a",a.id+"_menu")[0].focus()}a.isMenuVisible=1}},hideMenu:function(a){var f=this;if(!(a&&a.type=="mousedown"&&n.getParent(a.target,function(b){return b.id===f.id+"_open"}))){if(!a||!n.getParent(a.target,".mceSplitButtonMenu")){n.removeClass(f.id,"mceSplitButtonSelected");p.remove(n.doc,"mousedown",f.hideMenu,f);p.remove(f.id+"_menu","keydown",f._keyHandler);n.hide(f.id+"_menu")}f.onHideMenu.dispatch(f);
f.isMenuVisible=0;f.editor.focus()}},renderMenu:function(){var a=this,f,b=0,d=a.settings,i,g,j,c,h;c=n.add(d.menu_container,"div",{role:"listbox",id:a.id+"_menu","class":d.menu_class+" "+d["class"],style:"position:absolute;left:0;top:-1000px;"});f=n.add(c,"div",{"class":d["class"]+" mceSplitButtonMenu"});n.add(f,"span",{"class":"mceMenuLine"});i=n.add(f,"table",{role:"presentation","class":"mceColorSplitMenu"});g=n.add(i,"tbody");b=0;e(m(d.colors,"array")?d.colors:d.colors.split(","),function(q){q=
q.replace(/^#/,"");if(!b--){j=n.add(g,"tr");b=d.grid_width-1}i=n.add(j,"td");i=n.add(i,"a",{role:"option",href:"javascript:;",style:{backgroundColor:"#"+q},title:a.editor.getLang("colors."+q,q),"data-mce-color":"#"+q});if(a.editor.forcedHighContrastMode){i=n.add(i,"canvas",{width:16,height:16,"aria-hidden":"true"});if(i.getContext&&(h=i.getContext("2d"))){h.fillStyle="#"+q;h.fillRect(0,0,16,16)}else n.remove(i)}});if(d.more_colors_func){i=n.add(g,"tr");i=n.add(i,"td",{colspan:d.grid_width,"class":"mceMoreColors"});
i=n.add(i,"a",{role:"option",id:a.id+"_more",href:"javascript:;",onclick:"return false;","class":"mceMoreColors"},d.more_colors_title);p.add(i,"click",function(q){d.more_colors_func.call(d.more_colors_scope||this);return p.cancel(q)})}n.addClass(f,"mceColorSplitMenu");new k.ui.KeyboardNavigation({root:a.id+"_menu",items:n.select("a",a.id+"_menu"),onCancel:function(){a.hideMenu();a.focus()}});p.add(a.id+"_menu","mousedown",function(q){return p.cancel(q)});p.add(a.id+"_menu","click",function(q){var o;
if((q=n.getParent(q.target,"a",g))&&q.nodeName.toLowerCase()=="a"&&(o=q.getAttribute("data-mce-color")))a.setColor(o);return p.cancel(q)});return c},setColor:function(a){this.displayColor(a);this.hideMenu();this.settings.onselect(a)},displayColor:function(a){n.setStyle(this.id+"_preview","backgroundColor",a);this.value=a},postRender:function(){var a=this.id;this.parent();n.add(a+"_action","div",{id:a+"_preview","class":"mceColorPreview"});n.setStyle(this.id+"_preview","backgroundColor",this.value)},
destroy:function(){this.parent();p.clear(this.id+"_menu");p.clear(this.id+"_more");n.remove(this.id+"_menu")}})})(tinymce);
(function(k){var n=k.DOM,p=k.each,m=k.dom.Event;k.create("tinymce.ui.ToolbarGroup:tinymce.ui.Container",{renderHTML:function(){var e=[],a=this.controls,f=k.each,b=this.settings;e.push('<div id="'+this.id+'" role="group" aria-labelledby="'+this.id+'_voice">');e.push("<span role='application'>");e.push('<span id="'+this.id+'_voice" class="mceVoiceLabel" style="display:none;">'+n.encode(b.name)+"</span>");f(a,function(d){e.push(d.renderHTML())});e.push("</span>");e.push("</div>");return e.join("")},
focus:function(){this.keyNav.focus()},postRender:function(){var e=this,a=[];p(e.controls,function(f){p(f.controls,function(b){b.id&&a.push(b)})});e.keyNav=new k.ui.KeyboardNavigation({root:e.id,items:a,onCancel:function(){e.editor.focus()},excludeFromTabOrder:!e.settings.tab_focus_toolbar})},destroy:function(){this.parent();this.keyNav.destroy();m.clear(this.id)}})})(tinymce);
(function(k){var n=k.DOM;k.create("tinymce.ui.Toolbar:tinymce.ui.Container",{renderHTML:function(){var p="",m,e,a=this.settings,f,b,d,i;i=this.controls;for(f=0;f<i.length;f++){e=i[f];b=i[f-1];d=i[f+1];if(f===0){m="mceToolbarStart";if(e.Button)m+=" mceToolbarStartButton";else if(e.SplitButton)m+=" mceToolbarStartSplitButton";else if(e.ListBox)m+=" mceToolbarStartListBox";p+=n.createHTML("td",{"class":m},n.createHTML("span",null,"<!-- IE --\>"))}if(b&&e.ListBox)if(b.Button||b.SplitButton)p+=n.createHTML("td",
{"class":"mceToolbarEnd"},n.createHTML("span",null,"<!-- IE --\>"));p+=n.stdMode?'<td style="position: relative">'+e.renderHTML()+"</td>":"<td>"+e.renderHTML()+"</td>";if(d&&e.ListBox)if(d.Button||d.SplitButton)p+=n.createHTML("td",{"class":"mceToolbarStart"},n.createHTML("span",null,"<!-- IE --\>"))}m="mceToolbarEnd";if(e.Button)m+=" mceToolbarEndButton";else if(e.SplitButton)m+=" mceToolbarEndSplitButton";else if(e.ListBox)m+=" mceToolbarEndListBox";p+=n.createHTML("td",{"class":m},n.createHTML("span",
null,"<!-- IE --\>"));return n.createHTML("table",{id:this.id,"class":"mceToolbar"+(a["class"]?" "+a["class"]:""),cellpadding:"0",cellspacing:"0",align:this.settings.align||"",role:"presentation",tabindex:"-1"},"<tbody><tr>"+p+"</tr></tbody>")}})})(tinymce);
(function(k){var n=k.util.Dispatcher;k.create("tinymce.AddOnManager",{AddOnManager:function(){this.items=[];this.urls={};this.lookup={};this.onAdd=new n(this)},get:function(p){return this.lookup[p]},requireLangPack:function(p){var m=k.settings;m&&m.language&&m.language_load!==false&&k.ScriptLoader.add(this.urls[p]+"/langs/"+m.language+".js")},add:function(p,m){this.items.push(m);this.lookup[p]=m;this.onAdd.dispatch(this,p,m);return m},load:function(p,m,e,a){if(!this.urls[p]){if(m.indexOf("/")!=0&&
m.indexOf("://")==-1)m=k.baseURL+"/"+m;this.urls[p]=m.substring(0,m.lastIndexOf("/"));this.lookup[p]||k.ScriptLoader.add(m,e,a)}}});k.PluginManager=new k.AddOnManager;k.ThemeManager=new k.AddOnManager})(tinymce);
(function(k){var n=k.each,p=k.extend,m=k.DOM,e=k.dom.Event,a=k.explode,f=k.util.Dispatcher,b=0;k.documentBaseURL=window.location.href.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,"");/[\/\\]$/.test(k.documentBaseURL)||(k.documentBaseURL+="/");k.baseURL=(new k.util.URI(k.documentBaseURL)).toAbsolute(k.baseURL);k.baseURI=new k.util.URI(k.baseURL);k.onBeforeUnload=new f(k);e.add(window,"beforeunload",function(d){k.onBeforeUnload.dispatch(k,d)});k.onAddEditor=new f(k);k.onRemoveEditor=new f(k);k.EditorManager=
p(k,{editors:[],i18n:{},activeEditor:null,init:function(d){function i(q,o,l){var r=q[o];if(r){if(k.is(r,"string")){l=(l=r.replace(/\.\w+$/,""))?k.resolve(l):0;r=k.resolve(r)}return r.apply(l||this,Array.prototype.slice.call(arguments,2))}}var g=this,j,c=[],h;d=p({theme:"simple",language:"en"},d);g.settings=d;e.add(document,"init",function(){var q,o;i(d,"onpageload");switch(d.mode){case "exact":q=d.elements||"";q.length>0&&n(a(q),function(l){if(m.get(l)){h=new k.Editor(l,d);c.push(h);h.render(1)}else n(document.forms,
function(r){n(r.elements,function(v){if(v.name===l){l="mce_editor_"+b++;m.setAttrib(v,"id",l);h=new k.Editor(l,d);c.push(h);h.render(1)}})})});break;case "textareas":case "specific_textareas":n(m.select("textarea"),function(l){if(!(d.editor_deselector&&(d.editor_deselector.constructor===RegExp?d.editor_deselector.test(l.className):m.hasClass(l,d.editor_deselector))))if(!d.editor_selector||(d.editor_selector.constructor===RegExp?d.editor_selector.test(l.className):m.hasClass(l,d.editor_selector))){j=
m.get(l.name);if(!l.id&&!j)l.id=l.name;if(!l.id||g.get(l.id))l.id=m.uniqueId();h=new k.Editor(l.id,d);c.push(h);h.render(1)}})}if(d.oninit){q=o=0;n(c,function(l){o++;if(l.initialized)q++;else l.onInit.add(function(){q++;q==o&&i(d,"oninit")});q==o&&i(d,"oninit")})}})},get:function(d){if(d===void 0)return this.editors;return this.editors[d]},getInstanceById:function(d){return this.get(d)},add:function(d){var i=this.editors;i[d.id]=d;i.push(d);this._setActive(d);this.onAddEditor.dispatch(this,d);k.adapter&&
k.adapter.patchEditor(d);return d},remove:function(d){var i,g=this.editors;if(!g[d.id])return null;delete g[d.id];for(i=0;i<g.length;i++)if(g[i]==d){g.splice(i,1);break}this.activeEditor==d&&this._setActive(g[0]);d.destroy();this.onRemoveEditor.dispatch(this,d);return d},execCommand:function(d,i,g){var j=this.get(g),c;switch(d){case "mceFocus":j.focus();return true;case "mceAddEditor":case "mceAddControl":this.get(g)||(new k.Editor(g,this.settings)).render();return true;case "mceAddFrameControl":c=
g.window;c.tinyMCE=tinyMCE;c.tinymce=k;k.DOM.doc=c.document;k.DOM.win=c;j=new k.Editor(g.element_id,g);j.render();if(k.isIE){var h=function(){j.destroy();c.detachEvent("onunload",h);c=c.tinyMCE=c.tinymce=null};c.attachEvent("onunload",h)}g.page_window=null;return true;case "mceRemoveEditor":case "mceRemoveControl":j&&j.remove();return true;case "mceToggleEditor":if(!j){this.execCommand("mceAddControl",0,g);return true}j.isHidden()?j.show():j.hide();return true}if(this.activeEditor)return this.activeEditor.execCommand(d,
i,g);return false},execInstanceCommand:function(d,i,g,j){if(d=this.get(d))return d.execCommand(i,g,j);return false},triggerSave:function(){n(this.editors,function(d){d.save()})},addI18n:function(d,i){var g=this.i18n;k.is(d,"string")?n(i,function(j,c){g[d+"."+c]=j}):n(d,function(j,c){n(j,function(h,q){n(h,function(o,l){if(q==="common")g[c+"."+l]=o;else g[c+"."+q+"."+l]=o})})})},_setActive:function(d){this.selectedInstance=this.activeEditor=d}})})(tinymce);
(function(k){var n=k.DOM,p=k.dom.Event,m=k.extend,e=k.util.Dispatcher,a=k.each,f=k.isGecko,b=k.isIE,d=k.is,i=k.ThemeManager,g=k.PluginManager,j=k.explode;k.create("tinymce.Editor",{Editor:function(c,h){var q=this;q.id=q.editorId=c;q.execCommands={};q.queryStateCommands={};q.queryValueCommands={};q.isNotDirty=false;q.plugins={};a(["onPreInit","onBeforeRenderUI","onPostRender","onInit","onRemove","onActivate","onDeactivate","onClick","onEvent","onMouseUp","onMouseDown","onDblClick","onKeyDown","onKeyUp",
"onKeyPress","onContextMenu","onSubmit","onReset","onPaste","onPreProcess","onPostProcess","onBeforeSetContent","onBeforeGetContent","onSetContent","onGetContent","onLoadContent","onSaveContent","onNodeChange","onChange","onBeforeExecCommand","onExecCommand","onUndo","onRedo","onVisualAid","onSetProgressState"],function(o){q[o]=new e(q)});q.settings=h=m({id:c,language:"en",docs_language:"en",theme:"simple",skin:"default",delta_width:0,delta_height:0,popup_css:"",plugins:"",document_base_url:k.documentBaseURL,
add_form_submit_trigger:1,submit_patch:1,add_unload_trigger:1,convert_urls:1,relative_urls:1,remove_script_host:1,table_inline_editing:0,object_resizing:1,cleanup:1,accessibility_focus:1,custom_shortcuts:1,custom_undo_redo_keyboard_shortcuts:1,custom_undo_redo_restore_selection:1,custom_undo_redo:1,doctype:k.isIE6?'<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">':"<!DOCTYPE>",visual_table_class:"mceItemTable",visual:1,font_size_style_values:"xx-small,x-small,small,medium,large,x-large,xx-large",
apply_source_formatting:1,directionality:"ltr",forced_root_block:"p",hidden_input:1,padd_empty_editor:1,render_ui:1,init_theme:1,force_p_newlines:1,indentation:"30px",keep_styles:1,fix_table_elements:1,inline_styles:1,convert_fonts_to_spans:true,indent:"simple",indent_before:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,ul,li,area,table,thead,tfoot,tbody,tr",indent_after:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,ul,li,area,table,thead,tfoot,tbody,tr",validate:true,
entity_encoding:"named",url_converter:q.convertURL,url_converter_scope:q,ie7_compat:true},h);q.documentBaseURI=new k.util.URI(h.document_base_url||k.documentBaseURL,{base_uri:tinyMCE.baseURI});q.baseURI=k.baseURI;q.contentCSS=[];q.execCallback("setup",q)},render:function(){var c=this,h=c.settings,q=c.id,o=k.ScriptLoader;if(p.domLoaded){tinyMCE.settings=h;if(c.getElement())if(!k.isIDevice){!/TEXTAREA|INPUT/i.test(c.getElement().nodeName)&&h.hidden_input&&n.getParent(q,"form")&&n.insertAfter(n.create("input",
{type:"hidden",name:q}),q);if(k.WindowManager)c.windowManager=new k.WindowManager(c);h.encoding=="xml"&&c.onGetContent.add(function(l,r){if(r.save)r.content=n.encode(r.content)});h.add_form_submit_trigger&&c.onSubmit.addToTop(function(){if(c.initialized){c.save();c.isNotDirty=1}});if(h.add_unload_trigger)c._beforeUnload=tinyMCE.onBeforeUnload.add(function(){c.initialized&&!c.destroyed&&!c.isHidden()&&c.save({format:"raw",no_events:true})});k.addUnload(c.destroy,c);h.submit_patch&&c.onBeforeRenderUI.add(function(){var l=
c.getElement().form;if(l)if(!l._mceOldSubmit){if(!l.submit.nodeType&&!l.submit.length){c.formElement=l;l._mceOldSubmit=l.submit;l.submit=function(){k.triggerSave();c.isNotDirty=1;return c.formElement._mceOldSubmit(c.formElement)}}l=null}});(function(){h.language&&h.language_load!==false&&o.add(k.baseURL+"/langs/"+h.language+".js");h.theme&&h.theme.charAt(0)!="-"&&!i.urls[h.theme]&&i.load(h.theme,"themes/"+h.theme+"/editor_template"+k.suffix+".js");a(j(h.plugins),function(l){l&&l.charAt(0)!="-"&&!g.urls[l]&&
l!="safari"&&g.load(l,"plugins/"+l+"/editor_plugin"+k.suffix+".js")});o.loadQueue(function(){c.removed||c.init()})})()}}else p.add(document,"init",function(){c.render()})},init:function(){var c=this,h=c.settings,q,o,l=c.getElement(),r,v,t;k.add(c);h.aria_label=h.aria_label||n.getAttrib(l,"aria-label",c.getLang("aria.rich_text_area"));if(h.theme){h.theme=h.theme.replace(/-/,"");r=i.get(h.theme);c.theme=new r;if(c.theme.init&&h.init_theme)c.theme.init(c,i.urls[h.theme]||k.documentBaseURL.replace(/\/$/,
""))}a(j(h.plugins.replace(/\-/g,"")),function(s){var z=g.get(s),D=g.urls[s]||k.documentBaseURL.replace(/\/$/,"");if(z){z=new z(c,D);c.plugins[s]=z;z.init&&z.init(c,D)}});if(h.popup_css!==false)h.popup_css=h.popup_css?c.documentBaseURI.toAbsolute(h.popup_css):c.baseURI.toAbsolute("themes/"+h.theme+"/skins/"+h.skin+"/dialog.css");if(h.popup_css_add)h.popup_css+=","+c.documentBaseURI.toAbsolute(h.popup_css_add);c.controlManager=new k.ControlManager(c);h.custom_undo_redo&&c.onExecCommand.add(function(s,
z,D,x,u){if(z!="Undo"&&z!="Redo"&&z!="mceRepaint"&&(!u||!u.skip_undo))c.undoManager.add()});c.onExecCommand.add(function(s,z){/^(FontName|FontSize)$/.test(z)||c.nodeChanged()});if(f){t=function(s,z){if(!z||!z.initial)c.execCommand("mceRepaint")};c.onUndo.add(t);c.onRedo.add(t);c.onSetContent.add(t)}c.onBeforeRenderUI.dispatch(c,c.controlManager);if(h.render_ui){q=h.width||l.style.width||l.offsetWidth;o=h.height||l.style.height||l.offsetHeight;c.orgDisplay=l.style.display;t=/^[0-9\.]+(|px)$/i;if(t.test(""+
q))q=Math.max(parseInt(q)+(r.deltaWidth||0),100);if(t.test(""+o))o=Math.max(parseInt(o)+(r.deltaHeight||0),100);r=c.theme.renderUI({targetNode:l,width:q,height:o,deltaWidth:h.delta_width,deltaHeight:h.delta_height});c.editorContainer=r.editorContainer}if(document.domain&&location.hostname!=document.domain)k.relaxedDomain=document.domain;n.setStyles(r.sizeContainer||r.editorContainer,{width:q,height:o});h.content_css&&k.each(j(h.content_css),function(s){c.contentCSS.push(c.documentBaseURI.toAbsolute(s))});
o=(r.iframeHeight||o)+(typeof o=="number"?r.deltaHeight||0:"");if(o<100)o=100;c.iframeHTML=h.doctype+'<html><head xmlns="http://www.w3.org/1999/xhtml">';if(h.document_base_url!=k.documentBaseURL)c.iframeHTML+='<base href="'+c.documentBaseURI.getURI()+'" />';c.iframeHTML+=h.ie7_compat?'<meta http-equiv="X-UA-Compatible" content="IE=7" />':'<meta http-equiv="X-UA-Compatible" content="IE=edge" />';c.iframeHTML+='<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />';if(!f||!/Firefox\/2/.test(navigator.userAgent)){for(q=
0;q<c.contentCSS.length;q++)c.iframeHTML+='<link type="text/css" rel="stylesheet" href="'+c.contentCSS[q]+'" />';c.contentCSS=[]}q=h.body_id||"tinymce";if(q.indexOf("=")!=-1){q=c.getParam("body_id","","hash");q=q[c.id]||q}l=h.body_class||"";if(l.indexOf("=")!=-1){l=c.getParam("body_class","","hash");l=l[c.id]||""}c.iframeHTML+='</head><body id="'+q+'" class="mceContentBody '+l+'"></body></html>';if(k.relaxedDomain&&(b||k.isOpera&&parseFloat(opera.version())<11))v='javascript:(function(){document.open();document.domain="'+
document.domain+'";var ed = window.parent.tinyMCE.get("'+c.id+'");document.write(ed.iframeHTML);document.close();ed.setupIframe();})()';n.add(r.iframeContainer,"iframe",{id:c.id+"_ifr",src:v||'javascript:""',frameBorder:"0",title:h.aria_label,style:{width:"100%",height:o}});c.contentAreaContainer=r.iframeContainer;n.get(r.editorContainer).style.display=c.orgDisplay;n.get(c.id).style.display="none";n.setAttrib(c.id,"aria-hidden",true);if(!k.relaxedDomain||!v)c.setupIframe();l=r=null},setupIframe:function(){var c=
this,h=c.settings;n.get(c.id);var q=c.getDoc(),o;if(!b||!k.relaxedDomain){q.open();q.write(c.iframeHTML);q.close();if(k.relaxedDomain)q.domain=k.relaxedDomain}if(!b)try{if(!h.readonly)q.designMode="On"}catch(l){}if(b){o=c.getBody();n.hide(o);if(!h.readonly)o.contentEditable=true;n.show(o)}c.schema=new k.html.Schema(h);c.dom=new k.dom.DOMUtils(c.getDoc(),{keep_values:true,url_converter:c.convertURL,url_converter_scope:c,hex_colors:h.force_hex_style_colors,class_filter:h.class_filter,update_styles:1,
fix_ie_paragraphs:1,schema:c.schema});c.parser=new k.html.DomParser(h,c.schema);c.parser.addAttributeFilter("name",function(t){for(var s=t.length,z,D,x,u;s--;){u=t[s];if(u.name==="a"&&u.firstChild){x=u.parent;z=u.lastChild;do{D=z.prev;x.insert(z,u);z=D}while(z)}}});c.parser.addAttributeFilter("src,href,style",function(t,s){for(var z=t.length,D,x=c.dom,u;z--;){D=t[z];u=D.attr(s);s==="style"?D.attr("data-mce-style",x.serializeStyle(x.parseStyle(u),D.name)):D.attr("data-mce-"+s,c.convertURL(u,s,D.name))}});
c.parser.addNodeFilter("script",function(t){for(var s=t.length;s--;)t[s].attr("type","mce-text/javascript")});c.parser.addNodeFilter("#cdata",function(t){for(var s=t.length,z;s--;){z=t[s];z.type=8;z.name="#comment";z.value="[CDATA["+z.value+"]]"}});c.parser.addNodeFilter("p,h1,h2,h3,h4,h5,h6,div",function(t){for(var s=t.length,z,D=c.schema.getNonEmptyElements();s--;){z=t[s];if(z.isEmpty(D))z.empty().append(new k.html.Node("br",1)).shortEnded=true}});c.serializer=new k.dom.Serializer(h,c.dom,c.schema);
c.selection=new k.dom.Selection(c.dom,c.getWin(),c.serializer);c.formatter=new k.Formatter(this);c.formatter.register({alignleft:[{selector:"p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li",styles:{textAlign:"left"}},{selector:"img,table",collapsed:false,styles:{"float":"left"}}],aligncenter:[{selector:"p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li",styles:{textAlign:"center"}},{selector:"img",collapsed:false,styles:{display:"block",marginLeft:"auto",marginRight:"auto"}},{selector:"table",collapsed:false,styles:{marginLeft:"auto",
marginRight:"auto"}}],alignright:[{selector:"p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li",styles:{textAlign:"right"}},{selector:"img,table",collapsed:false,styles:{"float":"right"}}],alignfull:[{selector:"p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li",styles:{textAlign:"justify"}}],bold:[{inline:"strong",remove:"all"},{inline:"span",styles:{fontWeight:"bold"}},{inline:"b",remove:"all"}],italic:[{inline:"em",remove:"all"},{inline:"span",styles:{fontStyle:"italic"}},{inline:"i",remove:"all"}],underline:[{inline:"span",
styles:{textDecoration:"underline"},exact:true},{inline:"u",remove:"all"}],strikethrough:[{inline:"span",styles:{textDecoration:"line-through"},exact:true},{inline:"strike",remove:"all"}],forecolor:{inline:"span",styles:{color:"%value"},wrap_links:false},hilitecolor:{inline:"span",styles:{backgroundColor:"%value"},wrap_links:false},fontname:{inline:"span",styles:{fontFamily:"%value"}},fontsize:{inline:"span",styles:{fontSize:"%value"}},fontsize_class:{inline:"span",attributes:{"class":"%value"}},
blockquote:{block:"blockquote",wrapper:1,remove:"all"},removeformat:[{selector:"b,strong,em,i,font,u,strike",remove:"all",split:true,expand:false,block_expand:true,deep:true},{selector:"span",attributes:["style","class"],remove:"empty",split:true,expand:false,deep:true},{selector:"*",attributes:["style","class"],split:false,expand:false,deep:true}]});a("p h1 h2 h3 h4 h5 h6 div address pre div code dt dd samp".split(/\s/),function(t){c.formatter.register(t,{block:t,remove:"all"})});c.formatter.register(c.settings.formats);
c.undoManager=new k.UndoManager(c);c.undoManager.onAdd.add(function(t,s){if(!s.initial)return c.onChange.dispatch(c,s,t)});c.undoManager.onUndo.add(function(t,s){return c.onUndo.dispatch(c,s,t)});c.undoManager.onRedo.add(function(t,s){return c.onRedo.dispatch(c,s,t)});c.forceBlocks=new k.ForceBlocks(c,{forced_root_block:h.forced_root_block});c.editorCommands=new k.EditorCommands(c);c.serializer.onPreProcess.add(function(t,s){return c.onPreProcess.dispatch(c,s,t)});c.serializer.onPostProcess.add(function(t,
s){return c.onPostProcess.dispatch(c,s,t)});c.onPreInit.dispatch(c);if(!h.gecko_spellcheck)c.getBody().spellcheck=0;h.readonly||c._addEvents();c.controlManager.onPostRender.dispatch(c,c.controlManager);c.onPostRender.dispatch(c);if(h.directionality)c.getBody().dir=h.directionality;if(h.nowrap)c.getBody().style.whiteSpace="nowrap";h.handle_node_change_callback&&c.onNodeChange.add(function(t,s,z){c.execCallback("handle_node_change_callback",c.id,z,-1,-1,true,c.selection.isCollapsed())});h.save_callback&&
c.onSaveContent.add(function(t,s){var z=c.execCallback("save_callback",c.id,s.content,c.getBody());if(z)s.content=z});h.onchange_callback&&c.onChange.add(function(t,s){c.execCallback("onchange_callback",c,s)});h.protect&&c.onBeforeSetContent.add(function(t,s){h.protect&&a(h.protect,function(z){s.content=s.content.replace(z,function(D){return"<!--mce:protected "+escape(D)+"--\>"})})});h.convert_newlines_to_brs&&c.onBeforeSetContent.add(function(t,s){if(s.initial)s.content=s.content.replace(/\r?\n/g,
"<br />")});h.preformatted&&c.onPostProcess.add(function(t,s){s.content=s.content.replace(/^\s*<pre.*?>/,"");s.content=s.content.replace(/<\/pre>\s*$/,"");if(s.set)s.content='<pre class="mceItemHidden">'+s.content+"</pre>"});if(h.verify_css_classes)c.serializer.attribValueFilter=function(t,s){var z,D;if(t=="class"){if(!c.classesRE){D=c.dom.getClasses();if(D.length>0){z="";a(D,function(x){z+=(z?"|":"")+x["class"]});c.classesRE=RegExp("("+z+")","gi")}}return!c.classesRE||/(\bmceItem\w+\b|\bmceTemp\w+\b)/g.test(s)||
c.classesRE.test(s)?s:""}return s};if(h.cleanup_callback){c.onBeforeSetContent.add(function(t,s){s.content=c.execCallback("cleanup_callback","insert_to_editor",s.content,s)});c.onPreProcess.add(function(t,s){s.set&&c.execCallback("cleanup_callback","insert_to_editor_dom",s.node,s);s.get&&c.execCallback("cleanup_callback","get_from_editor_dom",s.node,s)});c.onPostProcess.add(function(t,s){if(s.set)s.content=c.execCallback("cleanup_callback","insert_to_editor",s.content,s);if(s.get)s.content=c.execCallback("cleanup_callback",
"get_from_editor",s.content,s)})}h.save_callback&&c.onGetContent.add(function(t,s){if(s.save)s.content=c.execCallback("save_callback",c.id,s.content,c.getBody())});h.handle_event_callback&&c.onEvent.add(function(t,s,z){c.execCallback("handle_event_callback",s,t,z)===false&&p.cancel(s)});c.onSetContent.add(function(){c.addVisual(c.getBody())});h.padd_empty_editor&&c.onPostProcess.add(function(t,s){s.content=s.content.replace(/^(<p[^>]*>(&nbsp;|&#160;|\s|\u00a0|)<\/p>[\r\n]*|<br \/>[\r\n]*)$/,"")});
if(f){var r=function(t){a(t.dom.select("a"),function(s){var z=s.parentNode;t.dom.isBlock(z)&&z.lastChild===s&&t.dom.add(z,"br",{"data-mce-bogus":1})})};c.onExecCommand.add(function(t,s){s==="CreateLink"&&r(t)});c.onSetContent.add(c.selection.onSetContent.add(r));if(!h.readonly)try{q.designMode="Off";q.designMode="On"}catch(v){}}setTimeout(function(){if(!c.removed){c.load({initial:true,format:"html"});c.startContent=c.getContent({format:"raw"});c.undoManager.add();c.initialized=true;c.onInit.dispatch(c);
c.execCallback("setupcontent_callback",c.id,c.getBody(),c.getDoc());c.execCallback("init_instance_callback",c);c.focus(true);c.nodeChanged({initial:1});a(c.contentCSS,function(t){c.dom.loadCSS(t)});h.auto_focus&&setTimeout(function(){var t=k.get(h.auto_focus);t.selection.select(t.getBody(),1);t.selection.collapse(1);t.getWin().focus()},100)}},1)},focus:function(c){var h;h=this.settings.content_editable;var q,o=this.getDoc();if(!c){c=this.selection.getRng();if(c.item)q=c.item(0);h||this.getWin().focus();
if(q&&q.ownerDocument==o){c=o.body.createControlRange();c.addElement(q);c.select()}}if(k.activeEditor!=this){if((h=k.activeEditor)!=null)h.onDeactivate.dispatch(h,this);this.onActivate.dispatch(this,h)}k._setActive(this)},execCallback:function(c){var h=this.settings[c],q;if(h){if(this.callbackLookup&&(q=this.callbackLookup[c])){h=q.func;q=q.scope}if(d(h,"string")){q=(q=h.replace(/\.\w+$/,""))?k.resolve(q):0;h=k.resolve(h);this.callbackLookup=this.callbackLookup||{};this.callbackLookup[c]={func:h,
scope:q}}return h.apply(q||this,Array.prototype.slice.call(arguments,1))}},translate:function(c){var h=this.settings.language||"en",q=k.i18n;if(!c)return"";return q[h+"."+c]||c.replace(/{\#([^}]+)\}/g,function(o,l){return q[h+"."+l]||"{#"+l+"}"})},getLang:function(c,h){return k.i18n[(this.settings.language||"en")+"."+c]||(d(h)?h:"{#"+c+"}")},getParam:function(c,h,q){var o=k.trim;c=d(this.settings[c])?this.settings[c]:h;var l;if(q==="hash"){l={};if(d(c,"string"))a(c.indexOf("=")>0?c.split(/[;,](?![^=;,]*(?:[;,]|$))/):
c.split(","),function(r){r=r.split("=");if(r.length>1)l[o(r[0])]=o(r[1]);else l[o(r[0])]=o(r)});else l=c;return l}return c},nodeChanged:function(c){var h=this.selection,q=(b?h.getNode():h.getStart())||this.getBody();if(this.initialized){c=c||{};q=b&&q.ownerDocument!=this.getDoc()?this.getBody():q;c.parents=[];this.dom.getParent(q,function(o){if(o.nodeName=="BODY")return true;c.parents.push(o)});this.onNodeChange.dispatch(this,c?c.controlManager||this.controlManager:this.controlManager,q,h.isCollapsed(),
c)}},addButton:function(c,h){this.buttons=this.buttons||{};this.buttons[c]=h},addCommand:function(c,h,q){this.execCommands[c]={func:h,scope:q||this}},addQueryStateHandler:function(c,h,q){this.queryStateCommands[c]={func:h,scope:q||this}},addQueryValueHandler:function(c,h,q){this.queryValueCommands[c]={func:h,scope:q||this}},addShortcut:function(c,h,q,o){var l=this,r;if(!l.settings.custom_shortcuts)return false;l.shortcuts=l.shortcuts||{};if(d(q,"string")){r=q;q=function(){l.execCommand(r,false,null)}}if(d(q,
"object")){r=q;q=function(){l.execCommand(r[0],r[1],r[2])}}a(j(c),function(v){var t={func:q,scope:o||this,desc:h,alt:false,ctrl:false,shift:false};a(j(v,"+"),function(s){switch(s){case "alt":case "ctrl":case "shift":t[s]=true;break;default:t.charCode=s.charCodeAt(0);t.keyCode=s.toUpperCase().charCodeAt(0)}});l.shortcuts[(t.ctrl?"ctrl":"")+","+(t.alt?"alt":"")+","+(t.shift?"shift":"")+","+t.keyCode]=t});return true},execCommand:function(c,h,q,o){var l=this,r=0,v;if(!/^(mceAddUndoLevel|mceEndUndoLevel|mceBeginUndoLevel|mceRepaint|SelectAll)$/.test(c)&&
(!o||!o.skip_focus))l.focus();v={};l.onBeforeExecCommand.dispatch(l,c,h,q,v);if(v.terminate)return false;if(l.execCallback("execcommand_callback",l.id,l.selection.getNode(),c,h,q)){l.onExecCommand.dispatch(l,c,h,q,o);return true}if(v=l.execCommands[c]){v=v.func.call(v.scope,h,q);if(v!==true){l.onExecCommand.dispatch(l,c,h,q,o);return v}}a(l.plugins,function(t){if(t.execCommand&&t.execCommand(c,h,q)){l.onExecCommand.dispatch(l,c,h,q,o);r=1;return false}});if(r)return true;if(l.theme&&l.theme.execCommand&&
l.theme.execCommand(c,h,q)){l.onExecCommand.dispatch(l,c,h,q,o);return true}if(l.editorCommands.execCommand(c,h,q)){l.onExecCommand.dispatch(l,c,h,q,o);return true}l.getDoc().execCommand(c,h,q);l.onExecCommand.dispatch(l,c,h,q,o)},queryCommandState:function(c){var h;if(!this._isHidden()){if(h=this.queryStateCommands[c]){h=h.func.call(h.scope);if(h!==true)return h}h=this.editorCommands.queryCommandState(c);if(h!==-1)return h;try{return this.getDoc().queryCommandState(c)}catch(q){}}},queryCommandValue:function(c){var h;
if(!this._isHidden()){if(h=this.queryValueCommands[c]){h=h.func.call(h.scope);if(h!==true)return h}h=this.editorCommands.queryCommandValue(c);if(d(h))return h;try{return this.getDoc().queryCommandValue(c)}catch(q){}}},show:function(){n.show(this.getContainer());n.hide(this.id);this.load()},hide:function(){var c=this.getDoc();b&&c&&c.execCommand("SelectAll");this.save();n.hide(this.getContainer());n.setStyle(this.id,"display",this.orgDisplay)},isHidden:function(){return!n.isHidden(this.id)},setProgressState:function(c,
h,q){this.onSetProgressState.dispatch(this,c,h,q);return c},load:function(c){var h=this.getElement(),q;if(h){c=c||{};c.load=true;q=this.setContent(d(h.value)?h.value:h.innerHTML,c);c.element=h;c.no_events||this.onLoadContent.dispatch(this,c);c.element=null;return q}},save:function(c){var h=this,q=h.getElement(),o;if(q&&h.initialized){c=c||{};c.save=true;if(!c.no_events){h.undoManager.typing=false;h.undoManager.add()}c.element=q;o=c.content=h.getContent(c);c.no_events||h.onSaveContent.dispatch(h,c);
o=c.content;if(/TEXTAREA|INPUT/i.test(q.nodeName))q.value=o;else{q.innerHTML=o;if(q=n.getParent(h.id,"form"))a(q.elements,function(l){if(l.name==h.id){l.value=o;return false}})}c.element=q=null;return o}},setContent:function(c,h){var q=this.getBody();h=h||{};h.format=h.format||"html";h.set=true;h.content=c;h.no_events||this.onBeforeSetContent.dispatch(this,h);if(!k.isIE&&(c.length===0||/^\s+$/.test(c)))q.innerHTML='<br data-mce-bogus="1" />';else{if(h.format!=="raw")h.content=(new k.html.Serializer({},
this.schema)).serialize(this.parser.parse(h.content));q.innerHTML=k.trim(h.content);h.no_events||this.onSetContent.dispatch(this,h);return h.content}},getContent:function(c){var h;c=c||{};c.format=c.format||"html";c.get=true;c.no_events||this.onBeforeGetContent.dispatch(this,c);h=c.format=="raw"?this.getBody().innerHTML:this.serializer.serialize(this.getBody(),c);c.content=k.trim(h);c.no_events||this.onGetContent.dispatch(this,c);return c.content},isDirty:function(){return k.trim(this.startContent)!=
k.trim(this.getContent({format:"raw",no_events:1}))&&!this.isNotDirty},getContainer:function(){if(!this.container)this.container=n.get(this.editorContainer||this.id+"_parent");return this.container},getContentAreaContainer:function(){return this.contentAreaContainer},getElement:function(){return n.get(this.settings.content_element||this.id)},getWin:function(){var c;if(!this.contentWindow)if(c=n.get(this.id+"_ifr"))this.contentWindow=c.contentWindow;return this.contentWindow},getDoc:function(){var c;
if(!this.contentDocument)if(c=this.getWin())this.contentDocument=c.document;return this.contentDocument},getBody:function(){return this.bodyElement||this.getDoc().body},convertURL:function(c,h,q){var o=this.settings;if(o.urlconverter_callback)return this.execCallback("urlconverter_callback",c,q,true,h);if(!o.convert_urls||q&&q.nodeName=="LINK"||c.indexOf("file:")===0)return c;if(o.relative_urls)return this.documentBaseURI.toRelative(c);return c=this.documentBaseURI.toAbsolute(c,o.remove_script_host)},
addVisual:function(c){var h=this,q=h.settings;c=c||h.getBody();if(!d(h.hasVisual))h.hasVisual=q.visual;a(h.dom.select("table,a",c),function(o){var l;switch(o.nodeName){case "TABLE":l=h.dom.getAttrib(o,"border");if(!l||l=="0")h.hasVisual?h.dom.addClass(o,q.visual_table_class):h.dom.removeClass(o,q.visual_table_class);break;case "A":if(l=h.dom.getAttrib(o,"name"))h.hasVisual?h.dom.addClass(o,"mceItemAnchor"):h.dom.removeClass(o,"mceItemAnchor")}});h.onVisualAid.dispatch(h,c,h.hasVisual)},remove:function(){var c=
this.getContainer();this.removed=1;this.hide();this.execCallback("remove_instance_callback",this);this.onRemove.dispatch(this);this.onExecCommand.listeners=[];k.remove(this);n.remove(c)},destroy:function(c){if(!this.destroyed){if(!c){k.removeUnload(this.destroy);tinyMCE.onBeforeUnload.remove(this._beforeUnload);this.theme&&this.theme.destroy&&this.theme.destroy();this.controlManager.destroy();this.selection.destroy();this.dom.destroy();if(!this.settings.content_editable){p.clear(this.getWin());p.clear(this.getDoc())}p.clear(this.getBody());
p.clear(this.formElement)}if(this.formElement){this.formElement.submit=this.formElement._mceOldSubmit;this.formElement._mceOldSubmit=null}this.contentAreaContainer=this.formElement=this.container=this.settings.content_element=this.bodyElement=this.contentDocument=this.contentWindow=null;if(this.selection)this.selection=this.selection.win=this.selection.dom=this.selection.dom.doc=null;this.destroyed=1}},_addEvents:function(){function c(D,x){if(!h.removed)if(h.onEvent.dispatch(h,D,x)!==false)h[r[D.fakeType||
D.type]].dispatch(h,D,x)}var h=this,q,o=h.settings,l=h.dom,r={mouseup:"onMouseUp",mousedown:"onMouseDown",click:"onClick",keyup:"onKeyUp",keydown:"onKeyDown",keypress:"onKeyPress",submit:"onSubmit",reset:"onReset",contextmenu:"onContextMenu",dblclick:"onDblClick",paste:"onPaste"};a(r,function(D,x){switch(x){case "contextmenu":l.bind(h.getDoc(),x,c);break;case "paste":l.bind(h.getBody(),x,function(u){c(u)});break;case "submit":case "reset":l.bind(h.getElement().form||n.getParent(h.id,"form"),x,c);
break;default:l.bind(o.content_editable?h.getBody():h.getDoc(),x,c)}});l.bind(o.content_editable?h.getBody():f?h.getDoc():h.getWin(),"focus",function(){h.focus(true)});k.isGecko&&l.bind(h.getDoc(),"DOMNodeInserted",function(D){var x;D=D.target;if(D.nodeType===1&&D.nodeName==="IMG"&&(x=D.getAttribute("data-mce-src")))D.src=h.documentBaseURI.toAbsolute(x)});if(f){q=function(){var D=this.getDoc(),x=this.settings;if(f&&!x.readonly){if(this._isHidden())try{if(!x.content_editable)D.designMode="On"}catch(u){}try{D.execCommand("styleWithCSS",
0,false)}catch(A){if(!this._isHidden())try{D.execCommand("useCSS",0,true)}catch(J){}}if(!x.table_inline_editing)try{D.execCommand("enableInlineTableEditing",false,false)}catch(Y){}if(!x.object_resizing)try{D.execCommand("enableObjectResizing",false,false)}catch(y){}}};h.onBeforeExecCommand.add(q);h.onMouseDown.add(q)}k.isWebKit&&h.onClick.add(function(D,x){x=x.target;if(x.nodeName=="IMG"||x.nodeName=="A"&&l.hasClass(x,"mceItemAnchor")){h.selection.getSel().setBaseAndExtent(x,0,x,1);h.nodeChanged()}});
h.onMouseUp.add(h.nodeChanged);h.onKeyUp.add(function(D,x){var u=x.keyCode;if(u>=33&&u<=36||u>=37&&u<=40||u==13||u==45||u==46||u==8||k.isMac&&(u==91||u==93)||x.ctrlKey)h.nodeChanged()});h.onReset.add(function(){h.setContent(h.startContent,{format:"raw"})});if(o.custom_shortcuts){if(o.custom_undo_redo_keyboard_shortcuts){h.addShortcut("ctrl+z",h.getLang("undo_desc"),"Undo");h.addShortcut("ctrl+y",h.getLang("redo_desc"),"Redo")}h.addShortcut("ctrl+b",h.getLang("bold_desc"),"Bold");h.addShortcut("ctrl+i",
h.getLang("italic_desc"),"Italic");h.addShortcut("ctrl+u",h.getLang("underline_desc"),"Underline");for(q=1;q<=6;q++)h.addShortcut("ctrl+"+q,"",["FormatBlock",false,"h"+q]);h.addShortcut("ctrl+7","",["FormatBlock",false,"<p>"]);h.addShortcut("ctrl+8","",["FormatBlock",false,"<div>"]);h.addShortcut("ctrl+9","",["FormatBlock",false,"<address>"]);var v=function(D){var x=null;if(!D.altKey&&!D.ctrlKey&&!D.metaKey)return x;a(h.shortcuts,function(u){if(!(k.isMac&&u.ctrl!=D.metaKey))if(!(!k.isMac&&u.ctrl!=
D.ctrlKey))if(u.alt==D.altKey)if(u.shift==D.shiftKey)if(D.keyCode==u.keyCode||D.charCode&&D.charCode==u.charCode){x=u;return false}});return x};h.onKeyUp.add(function(D,x){if(v(x))return p.cancel(x)});h.onKeyPress.add(function(D,x){if(v(x))return p.cancel(x)});h.onKeyDown.add(function(D,x){var u=v(x);if(u){u.func.call(u.scope);return p.cancel(x)}})}if(k.isIE){l.bind(h.getDoc(),"controlselect",function(D){var x=h.resizeInfo;D=D.target;if(D.nodeName==="IMG"){x&&l.unbind(x.node,x.ev,x.cb);if(l.hasClass(D,
"mceItemNoResize")){ev="resizestart";x=l.bind(D,"resizestart",p.cancel,p)}else{ev="resizeend";x=l.bind(D,ev,function(u){var A;u=u.target;if(A=l.getStyle(u,"width")){l.setAttrib(u,"width",A.replace(/[^0-9%]+/g,""));l.setStyle(u,"width","")}if(A=l.getStyle(u,"height")){l.setAttrib(u,"height",A.replace(/[^0-9%]+/g,""));l.setStyle(u,"height","")}})}x=h.resizeInfo={node:D,ev:ev,cb:x}}});h.onKeyDown.add(function(D,x){var u;switch(x.keyCode){case 8:u=h.getDoc().selection;if(u.createRange&&u.createRange().item){D.dom.remove(u.createRange().item(0));
return p.cancel(x)}}})}k.isOpera&&h.onClick.add(function(D,x){p.prevent(x)});if(o.custom_undo_redo){var t=function(){h.undoManager.typing=false;h.undoManager.add()};l.bind(h.getDoc(),"focusout",function(){!h.removed&&h.undoManager.typing&&t()});h.onKeyUp.add(function(D,x){var u,A;if(b&&x.keyCode==8){u=h.selection.getRng();if(u.parentElement){u=u.parentElement();A=h.selection.getBookmark();u.innerHTML=u.innerHTML;h.selection.moveToBookmark(A)}}if(x.keyCode>=33&&x.keyCode<=36||x.keyCode>=37&&x.keyCode<=
40||x.keyCode==13||x.keyCode==45||x.ctrlKey)t()});h.onKeyDown.add(function(D,x){var u,A;if(b&&x.keyCode==46){u=h.selection.getRng();if(u.parentElement){A=u.parentElement();if(x.ctrlKey){u.moveEnd("word",1);u.select()}h.selection.getSel().clear();if(u.parentElement()==A){u=h.selection.getBookmark();try{A.innerHTML=A.innerHTML}catch(J){}h.selection.moveToBookmark(u)}x.preventDefault();return}}if(x.keyCode>=33&&x.keyCode<=36||x.keyCode>=37&&x.keyCode<=40||x.keyCode==13||x.keyCode==45)h.undoManager.typing&&
t();else if(!h.undoManager.typing){h.undoManager.add();h.undoManager.typing=true}});h.onMouseDown.add(function(){h.undoManager.typing&&t()})}if(k.isGecko){var s=function(){h.undoManager.typing=false;h.undoManager.add();var D=h.dom.getAttribs(h.selection.getStart().cloneNode(false));return function(){var x=h.selection.getStart();h.dom.removeAllAttribs(x);a(D,function(u){x.setAttributeNode(u.cloneNode(true))});h.undoManager.typing=false;h.undoManager.add()}},z=function(){var D=h.selection;return!D.isCollapsed()&&
D.getStart()!=D.getEnd()};h.onKeyPress.add(function(D,x){if((x.keyCode==8||x.keyCode==46)&&z()){var u=s();h.getDoc().execCommand("delete",false,null);u();return p.cancel(x)}});h.dom.bind(h.getDoc(),"cut",function(){if(z()){var D=s();h.onKeyUp.addToTop(p.cancel,p);setTimeout(function(){D();h.onKeyUp.remove(p.cancel,p)},0)}})}},_isHidden:function(){var c;if(!f)return 0;c=this.selection.getSel();return!c||!c.rangeCount||c.rangeCount==0}})})(tinymce);
(function(k){var n=k.each,p=true,m=false;k.EditorCommands=function(e){function a(o,l,r){var v;o=o.toLowerCase();if(v=c.exec[o]){v(o,l,r);return p}return m}function f(o){var l;o=o.toLowerCase();if(l=c.state[o])return l(o);return-1}function b(o,l){l=l||"exec";n(o,function(r,v){n(v.toLowerCase().split(","),function(t){c[l][t]=r})})}function d(o,l,r){if(l===void 0)l=m;if(r===void 0)r=null;return e.getDoc().execCommand(o,l,r)}function i(o,l){e.formatter.toggle(o,l?{value:l}:void 0)}var g=e.dom,j=e.selection,
c={state:{},exec:{},value:{}},h=e.settings,q;k.extend(this,{execCommand:a,queryCommandState:f,queryCommandValue:function(o){var l;o=o.toLowerCase();if(l=c.value[o])return l(o);return m},addCommands:b});b({"mceResetDesignMode,mceBeginUndoLevel":function(){},"mceEndUndoLevel,mceAddUndoLevel":function(){e.undoManager.add()},"Cut,Copy,Paste":function(o){var l=e.getDoc(),r;try{d(o)}catch(v){r=p}if(r||!l.queryCommandSupported(o))k.isGecko?e.windowManager.confirm(e.getLang("clipboard_msg"),function(t){t&&
open("http://www.mozilla.org/editor/midasdemo/securityprefs.html","_blank")}):e.windowManager.alert(e.getLang("clipboard_no_support"))},unlink:function(o){j.isCollapsed()&&j.select(j.getNode());d(o);j.collapse(m)},"JustifyLeft,JustifyCenter,JustifyRight,JustifyFull":function(o){var l=o.substring(7);n("left,center,right,full".split(","),function(r){l!=r&&e.formatter.remove("align"+r)});i("align"+l);a("mceRepaint")},"InsertUnorderedList,InsertOrderedList":function(o){var l;d(o);if(o=g.getParent(j.getNode(),
"ol,ul")){l=o.parentNode;if(/^(H[1-6]|P|ADDRESS|PRE)$/.test(l.nodeName)){q=j.getBookmark(void 0);g.split(l,o);j.moveToBookmark(q)}}},"Bold,Italic,Underline,Strikethrough":function(o){i(o)},"ForeColor,HiliteColor,FontName":function(o,l,r){i(o,r)},FontSize:function(o,l,r){var v;if(r>=1&&r<=7){v=k.explode(h.font_size_style_values);r=(l=k.explode(h.font_size_classes))?l[r-1]||r:v[r-1]||r}i(o,r)},RemoveFormat:function(o){e.formatter.remove(o)},mceBlockQuote:function(){i("blockquote")},FormatBlock:function(o,
l,r){return i(r||"p")},mceCleanup:function(){var o=j.getBookmark();e.setContent(e.getContent({cleanup:p}),{cleanup:p});j.moveToBookmark(o)},mceRemoveNode:function(o,l,r){o=r||j.getNode();if(o!=e.getBody()){q=j.getBookmark(void 0);e.dom.remove(o,p);j.moveToBookmark(q)}},mceSelectNodeDepth:function(o,l,r){var v=0;g.getParent(j.getNode(),function(t){if(t.nodeType==1&&v++==r){j.select(t);return m}},e.getBody())},mceSelectNode:function(o,l,r){j.select(r)},mceInsertContent:function(o,l,r){function v(z,
D){for(var x,u=new k.dom.TreeWalker(z,D);x=u.current();){if(x.nodeType==3&&k.trim(x.nodeValue).length||x.nodeName=="BR"||x.nodeName=="IMG")return x;u.prev()}}var t,s;o={content:r,format:"html"};j.onBeforeSetContent.dispatch(j,o);r=o.content;if(r.indexOf("{$caret}")==-1)r+="{$caret}";j.setContent('<span id="__mce">﻿</span>',{no_events:false});g.setOuterHTML("__mce",r.replace(/\{\$caret\}/,'<span data-mce-type="bookmark" id="__mce">﻿</span>'));l=g.select("#__mce")[0];s=g.getRoot();if(l.previousSibling&&
g.isBlock(l.previousSibling)||l.parentNode==s)if(r=v(l.previousSibling,s))r.nodeName=="BR"?r.parentNode.insertBefore(l,r):g.insertAfter(l,r);for(;l;){if(l===s){g.setOuterHTML(t,(new k.html.Serializer({},e.schema)).serialize((new k.html.DomParser({remove_trailing_brs:true},e.schema)).parse(g.getOuterHTML(t))));break}t=l;l=l.parentNode}if(l=g.select("#__mce")[0]){r=v(l.previousSibling,s);g.remove(l);if(r){t=g.createRng();if(r.nodeType==3){t.setStart(r,r.length);t.setEnd(r,r.length)}else if(r.nodeName==
"BR"){t.setStartBefore(r);t.setEndBefore(r)}else{t.setStartAfter(r);t.setEndAfter(r)}j.setRng(t);if(!k.isIE){r=g.create("span",null," ");t.insertNode(r);t=g.getRect(r);l=g.getViewPort(e.getWin());if(t.y>l.y+l.h||t.y<l.y||t.x>l.x+l.w||t.x<l.x){e.getBody().scrollLeft=t.x;e.getBody().scrollTop=t.y}g.remove(r)}}}j.onSetContent.dispatch(j,o);e.addVisual()},mceInsertRawHTML:function(o,l,r){j.setContent("tiny_mce_marker");e.setContent(e.getContent().replace(/tiny_mce_marker/g,function(){return r}))},mceSetContent:function(o,
l,r){e.setContent(r)},"Indent,Outdent":function(o){var l,r,v;l=h.indentation;r=/[a-z%]+$/i.exec(l);l=parseInt(l);!f("InsertUnorderedList")&&!f("InsertOrderedList")?n(j.getSelectedBlocks(),function(t){if(o=="outdent"){v=Math.max(0,parseInt(t.style.paddingLeft||0)-l);g.setStyle(t,"paddingLeft",v?v+r:"")}else g.setStyle(t,"paddingLeft",parseInt(t.style.paddingLeft||0)+l+r)}):d(o)},mceRepaint:function(){if(k.isGecko)try{q=j.getBookmark(p);j.getSel()&&j.getSel().selectAllChildren(e.getBody());j.collapse(p);
j.moveToBookmark(q)}catch(o){}},mceToggleFormat:function(o,l,r){e.formatter.toggle(r)},InsertHorizontalRule:function(){j.setContent("<hr />")},mceToggleVisualAid:function(){e.hasVisual=!e.hasVisual;e.addVisual()},mceReplaceContent:function(o,l,r){e.execCommand("mceInsertContent",false,j.setContent(r.replace(/\{\$selection\}/g,j.getContent({format:"text"}))))},mceInsertLink:function(o,l,r){o=g.getParent(j.getNode(),"a");var v,t;if(k.is(r,"string"))r={href:r};r.href=r.href.replace(" ","%20");if(o)r.href?
g.setAttribs(o,r):e.dom.remove(o,p);else{if(k.isWebKit)if(v=g.getParent(j.getNode(),"img")){t=v.style.cssFloat;v.style.cssFloat=null}d("CreateLink",m,"javascript:mctmp(0);");if(t)v.style.cssFloat=t;n(g.select("a[href='javascript:mctmp(0);']"),function(s){g.setAttribs(s,r)})}},selectAll:function(){var o=g.getRoot(),l=g.createRng();l.setStart(o,0);l.setEnd(o,o.childNodes.length);e.selection.setRng(l)}});b({"JustifyLeft,JustifyCenter,JustifyRight,JustifyFull":function(o){o="align"+o.substring(7);return e.formatter.match(o)},
"Bold,Italic,Underline,Strikethrough":function(o){return e.formatter.match(o)},mceBlockQuote:function(){return e.formatter.match("blockquote")},Outdent:function(){var o;if(h.inline_styles){if((o=g.getParent(j.getStart(),g.isBlock))&&parseInt(o.style.paddingLeft)>0)return p;if((o=g.getParent(j.getEnd(),g.isBlock))&&parseInt(o.style.paddingLeft)>0)return p}return f("InsertUnorderedList")||f("InsertOrderedList")||!h.inline_styles&&!!g.getParent(j.getNode(),"BLOCKQUOTE")},"InsertUnorderedList,InsertOrderedList":function(o){return g.getParent(j.getNode(),
o=="insertunorderedlist"?"UL":"OL")}},"state");b({"FontSize,FontName":function(o){var l=0,r;if(r=g.getParent(j.getNode(),"span"))l=o=="fontsize"?r.style.fontSize:r.style.fontFamily.replace(/, /g,",").replace(/[\'\"]/g,"").toLowerCase();return l}},"value");h.custom_undo_redo&&b({Undo:function(){e.undoManager.undo()},Redo:function(){e.undoManager.redo()}})}})(tinymce);
(function(k){var n=k.util.Dispatcher;k.UndoManager=function(p){var m,e=0,a=[];return m={typing:false,onAdd:new n(m),onUndo:new n(m),onRedo:new n(m),add:function(f){var b;b=p.settings;var d;f=f||{};f.content=k.trim(p.getContent({format:"raw",no_events:1}));if((d=a[e])&&d.content==f.content)if(e>0||a.length==1)return null;if(b.custom_undo_redo_levels)if(a.length>b.custom_undo_redo_levels){for(b=0;b<a.length-1;b++)a[b]=a[b+1];a.length--;e=a.length}f.bookmark=p.selection.getBookmark(2,true);if(e<a.length-
1)a.length=e+1;a.push(f);e=a.length-1;m.onAdd.dispatch(m,f);p.isNotDirty=0;return f},undo:function(){var f;if(m.typing){m.add();m.typing=false}if(e>0){f=a[--e];p.setContent(f.content,{format:"raw"});p.selection.moveToBookmark(f.bookmark);m.onUndo.dispatch(m,f)}return f},redo:function(){var f;if(e<a.length-1){f=a[++e];p.setContent(f.content,{format:"raw"});p.selection.moveToBookmark(f.bookmark);m.onRedo.dispatch(m,f)}return f},clear:function(){a=[];e=0;m.typing=false},hasUndo:function(){return e>0||
m.typing},hasRedo:function(){return e<a.length-1}}}})(tinymce);
(function(k){function n(g,j){var c=j.ownerDocument.createRange();c.setStart(g.endContainer,g.endOffset);c.setEndAfter(j);return c.cloneContents().textContent.length==0}function p(g){g=g.innerHTML;g=g.replace(/<(img|hr|table|input|select|textarea)[ \>]/gi,"-");g=g.replace(/<[^>]+>/g,"");return g.replace(/[ \u00a0\t\r\n]+/g,"")==""}function m(g,j,c){var h;if(p(c)){h=j.getParent(c,"ul,ol");if(!j.getParent(h.parentNode,"ul,ol")){j.split(h,c);h=j.create("p",0,'<br data-mce-bogus="1" />');j.replace(h,c);
g.select(h,1)}return i}return d}var e=k.dom.Event,a=k.isIE,f=k.isGecko,b=k.isOpera,d=true,i=false;k.create("tinymce.ForceBlocks",{ForceBlocks:function(g){var j=this,c=g.settings,h;j.editor=g;j.dom=g.dom;h=(c.forced_root_block||"p").toLowerCase();c.element=h.toUpperCase();g.onPreInit.add(j.setup,j);if(c.forced_root_block){g.onInit.add(j.forceRoots,j);g.onSetContent.add(j.forceRoots,j);g.onBeforeGetContent.add(j.forceRoots,j);g.onExecCommand.add(function(q,o){if(o=="mceInsertContent"){j.forceRoots();
q.nodeChanged()}})}},setup:function(){var g=this,j=g.editor,c=j.settings,h=j.dom,q=j.selection;if(c.forced_root_block){j.onBeforeExecCommand.add(g.forceRoots,g);j.onKeyUp.add(g.forceRoots,g);j.onPreProcess.add(g.forceRoots,g)}c.force_br_newlines&&a&&j.onKeyPress.add(function(o,l){var r;if(l.keyCode==13&&q.getNode().nodeName!="LI"){q.setContent('<br id="__" /> ',{format:"raw"});r=h.get("__");r.removeAttribute("id");q.select(r);q.collapse();return e.cancel(l)}});if(c.force_p_newlines){if(a){k.addUnload(function(){g._previousFormats=
0});j.onKeyPress.add(function(o,l){g._previousFormats=0;if(l.keyCode==13&&!l.shiftKey&&o.selection.isCollapsed()&&c.keep_styles){var r;var v=o.selection.getStart(),t,s,z;do if(/^(SPAN|STRONG|B|EM|I|FONT|STRIKE|U)$/.test(v.nodeName)){if(t){s=v.cloneNode(false);s.appendChild(t);t=s}else t=z=v.cloneNode(false);t.removeAttribute("id")}while(v=v.parentNode);if(t)r={wrapper:t,inner:z};g._previousFormats=r}});j.onKeyUp.add(function(o,l){if(l.keyCode==13&&!l.shiftKey){var r=o.selection.getStart(),v=g._previousFormats;
if(!r.hasChildNodes()&&v)if((r=h.getParent(r,h.isBlock))&&r.nodeName!="LI"){r.innerHTML="";if(g._previousFormats){r.appendChild(v.wrapper);v.inner.innerHTML="﻿"}else r.innerHTML="﻿";q.select(r,1);q.collapse(true);o.getDoc().execCommand("Delete",false,null);g._previousFormats=0}}})}else j.onKeyPress.add(function(o,l){l.keyCode==13&&!l.shiftKey&&!g.insertPara(l)&&e.cancel(l)});f&&j.onKeyDown.add(function(o,l){if((l.keyCode==8||l.keyCode==46)&&!l.shiftKey)g.backspaceDelete(l,l.keyCode==8)})}k.isWebKit&&
j.onKeyPress.add(function(o,l){if(l.keyCode==13&&(l.shiftKey||c.force_br_newlines&&!h.getParent(q.getNode(),"h1,h2,h3,h4,h5,h6,ol,ul"))){var r=q.getRng(),v,t=h.create("div",null," "),s=h.getViewPort(o.getWin()).h;r.insertNode(v=h.create("br"));r.setStartAfter(v);r.setEndAfter(v);q.setRng(r);if(q.getSel().focusNode==v.previousSibling){q.select(h.insertAfter(h.doc.createTextNode(" "),v));q.collapse(d)}h.insertAfter(t,v);r=h.getPos(t).y;h.remove(t);r>s&&o.getWin().scrollTo(0,r);e.cancel(l)}});if(a)if(c.element!=
"P"){j.onKeyPress.add(function(){g.lastElm=q.getNode().nodeName});j.onKeyUp.add(function(o,l){var r;r=q.getNode();if(o.getBody().childNodes.length===1&&r.nodeName=="P"){r=h.rename(r,c.element);q.select(r);q.collapse();o.nodeChanged()}else if(l.keyCode==13&&!l.shiftKey&&g.lastElm!="P")if(r=h.getParent(r,"p")){h.rename(r,c.element);o.nodeChanged()}})}},find:function(g,j,c){for(var h=this.editor.getDoc().createTreeWalker(g,4,null,i),q=-1;g=h.nextNode();){q++;if(j==0&&g==c)return q;if(j==1&&q==c)return g}return-1},
forceRoots:function(g){g=this.editor;var j=g.getBody(),c=g.getDoc(),h=g.selection,q=h.getSel(),o=h.getRng(),l=-2,r,v,t,s,z,D=j.childNodes,x,u,A;for(x=D.length-1;x>=0;x--){z=D[x];if(z.nodeType===1&&z.getAttribute("data-mce-type"))s=null;else if(z.nodeType===3||!this.dom.isBlock(z)&&z.nodeType!==8&&!/^(script|mce:script|style|mce:style)$/i.test(z.nodeName))if(s)s.hasChildNodes()?s.insertBefore(z,s.firstChild):s.appendChild(z);else{if(z.nodeType!=3||/[^\s]/g.test(z.nodeValue)){if(l==-2&&o)if(!a||o.setStart)if(o.startContainer.nodeType==
1&&(u=o.startContainer.childNodes[o.startOffset])&&u.nodeType==1){A=u.getAttribute("id");u.setAttribute("id","__mce")}else{if(g.dom.getParent(o.startContainer,function(Y){return Y===j})){v=o.startOffset;t=o.endOffset;l=this.find(j,0,o.startContainer);r=this.find(j,0,o.endContainer)}}else{if(o.item){s=c.body.createTextRange();s.moveToElementText(o.item(0));o=s}s=c.body.createTextRange();s.moveToElementText(j);s.collapse(1);l=s.move("character",-16777215)*-1;s=o.duplicate();s.collapse(1);r=s.move("character",
-16777215)*-1;s=o.duplicate();s.collapse(0);s=s.move("character",-16777215)*-1-r;l=r-l;r=s}s=g.dom.create(g.settings.forced_root_block);z.parentNode.replaceChild(s,z);s.appendChild(z)}}else s=null}if(l!=-2)if(!a||o.setStart){s=j.getElementsByTagName(g.settings.element)[0];o=c.createRange();l!=-1?o.setStart(this.find(j,1,l),v):o.setStart(s,0);r!=-1?o.setEnd(this.find(j,1,r),t):o.setEnd(s,0);if(q){q.removeAllRanges();q.addRange(o)}}else try{o=q.createRange();o.moveToElementText(j);o.collapse(1);o.moveStart("character",
l);o.moveEnd("character",r);o.select()}catch(J){}else if((!a||o.setStart)&&(u=g.dom.get("__mce"))){A?u.setAttribute("id",A):u.removeAttribute("id");o=c.createRange();o.setStartBefore(u);o.setEndBefore(u);h.setRng(o)}},getParentBlock:function(g){var j=this.dom;return j.getParent(g,j.isBlock)},insertPara:function(){function g(R,aa){var Z=[],V,ba;R.innerHTML="";if(q.keep_styles){ba=aa;do if(/^(SPAN|STRONG|B|EM|I|FONT|STRIKE|U)$/.test(ba.nodeName)){V=ba.cloneNode(i);c.setAttrib(V,"id","");Z.push(V)}while(ba=
ba.parentNode)}if(Z.length>0){ba=Z.length-1;for(V=R;ba>=0;ba--)V=V.appendChild(Z[ba]);Z[0].innerHTML=b?" ":"<br />";return Z[0]}else R.innerHTML=b?" ":"<br />"}var j=this.editor,c=j.dom,h=j.getDoc(),q=j.settings,o=j.selection.getSel(),l=o.getRangeAt(0),r=h.body,v,t,s,z,D,x,u,A,J,Y,y,B,C=c.getViewPort(j.getWin()),I;v=h.createRange();v.setStart(o.anchorNode,o.anchorOffset);v.collapse(d);t=h.createRange();t.setStart(o.focusNode,o.focusOffset);t.collapse(d);z=(s=v.compareBoundaryPoints(v.START_TO_END,
t)<0)?o.anchorNode:o.focusNode;D=s?o.anchorOffset:o.focusOffset;x=s?o.focusNode:o.anchorNode;s=s?o.focusOffset:o.anchorOffset;if(z===x&&/^(TD|TH)$/.test(z.nodeName)){z.firstChild.nodeName=="BR"&&c.remove(z.firstChild);if(z.childNodes.length==0)j.dom.add(z,q.element,null,"<br />");else{B=z.innerHTML;z.innerHTML="";j.dom.add(z,q.element,null,B)}A=j.dom.add(z,q.element,null,"<br />");l=h.createRange();l.selectNodeContents(A);l.collapse(1);j.selection.setRng(l);return i}if(z==r&&x==r&&r.firstChild&&j.dom.isBlock(r.firstChild)){z=
x=z.firstChild;D=s=0;v=h.createRange();v.setStart(z,0);t=h.createRange();t.setStart(x,0)}z=z.nodeName=="HTML"?h.body:z;z=z.nodeName=="BODY"?z.firstChild:z;x=x.nodeName=="HTML"?h.body:x;x=x.nodeName=="BODY"?x.firstChild:x;u=this.getParentBlock(z);A=this.getParentBlock(x);J=u?u.nodeName:q.element;if(B=this.dom.getParent(u,"li,pre")){if(B.nodeName=="LI")return m(j.selection,this.dom,B);return d}if(u&&(u.nodeName=="CAPTION"||/absolute|relative|fixed/gi.test(c.getStyle(u,"position",1)))){J=q.element;u=
null}if(A&&(A.nodeName=="CAPTION"||/absolute|relative|fixed/gi.test(c.getStyle(u,"position",1)))){J=q.element;A=null}if(/(TD|TABLE|TH|CAPTION)/.test(J)||u&&J=="DIV"&&/left|right/gi.test(c.getStyle(u,"float",1))){J=q.element;u=A=null}Y=u&&u.nodeName==J?u.cloneNode(0):j.dom.create(J);A=A&&A.nodeName==J?A.cloneNode(0):j.dom.create(J);A.removeAttribute("id");if(/^(H[1-6])$/.test(J)&&n(l,u))A=j.dom.create(q.element);B=u=z;do{if(B==r||B.nodeType==9||this.dom.isBlock(B)||/(TD|TABLE|TH|CAPTION)/.test(B.nodeName))break;
u=B}while(B=B.previousSibling?B.previousSibling:B.parentNode);B=y=x;do{if(B==r||B.nodeType==9||this.dom.isBlock(B)||/(TD|TABLE|TH|CAPTION)/.test(B.nodeName))break;y=B}while(B=B.nextSibling?B.nextSibling:B.parentNode);u.nodeName==J?v.setStart(u,0):v.setStartBefore(u);v.setEnd(z,D);Y.appendChild(v.cloneContents()||h.createTextNode(""));try{t.setEndAfter(y)}catch(H){}t.setStart(x,s);A.appendChild(t.cloneContents()||h.createTextNode(""));l=h.createRange();if(!u.previousSibling&&u.parentNode.nodeName==
J)l.setStartBefore(u.parentNode);else v.startContainer.nodeName==J&&v.startOffset==0?l.setStartBefore(v.startContainer):l.setStart(v.startContainer,v.startOffset);!y.nextSibling&&y.parentNode.nodeName==J?l.setEndAfter(y.parentNode):l.setEnd(t.endContainer,t.endOffset);l.deleteContents();b&&j.getWin().scrollTo(0,C.y);if(Y.firstChild&&Y.firstChild.nodeName==J)Y.innerHTML=Y.firstChild.innerHTML;if(A.firstChild&&A.firstChild.nodeName==J)A.innerHTML=A.firstChild.innerHTML;if(p(Y))Y.innerHTML="<br />";
if(p(A))I=g(A,x);if(b&&parseFloat(opera.version())<9.5){l.insertNode(Y);l.insertNode(A)}else{l.insertNode(A);l.insertNode(Y)}A.normalize();Y.normalize();l=h.createRange();l.selectNodeContents(f?h.createTreeWalker(I||A,NodeFilter.SHOW_TEXT,null,i).nextNode()||I||A:I||A);l.collapse(1);o.removeAllRanges();o.addRange(l);h=j.dom.getPos(A).y;if(h<C.y||h+25>C.y+C.h)j.getWin().scrollTo(0,h<C.y?h:h-C.h+25);return i},backspaceDelete:function(g,j){var c=this.editor,h=c.getBody(),q,o=c.selection,l=o.getRng(),
r=l.startContainer,v;if(!j&&l.collapsed&&r.nodeType==1&&l.startOffset==r.childNodes.length){v=new k.dom.TreeWalker(r.lastChild,r);for(q=r.lastChild;q;q=v.prev())if(q.nodeType==3){l.setStart(q,q.nodeValue.length);l.collapse(true);o.setRng(l);return}}if(r&&c.dom.isBlock(r)&&!/^(TD|TH)$/.test(r.nodeName)&&j)if(r.childNodes.length==0||r.childNodes.length==1&&r.firstChild.nodeName=="BR"){for(q=r;(q=q.previousSibling)&&!c.dom.isBlock(q););if(q){if(r!=h.firstChild){for(h=c.dom.doc.createTreeWalker(q,NodeFilter.SHOW_TEXT,
null,i);l=h.nextNode();)q=l;l=c.getDoc().createRange();l.setStart(q,q.nodeValue?q.nodeValue.length:0);l.setEnd(q,q.nodeValue?q.nodeValue.length:0);o.setRng(l);c.dom.remove(r)}return e.cancel(g)}}}})})(tinymce);
(function(k){var n=k.dom.Event,p=k.each,m=k.extend;k.create("tinymce.ControlManager",{ControlManager:function(e,a){var f=this;a=a||{};f.editor=e;f.controls={};f.onAdd=new k.util.Dispatcher(f);f.onPostRender=new k.util.Dispatcher(f);f.prefix=a.prefix||e.id+"_";f._cls={};f.onPostRender.add(function(){p(f.controls,function(b){b.postRender()})})},get:function(e){return this.controls[this.prefix+e]||this.controls[e]},setActive:function(e,a){var f=null;if(f=this.get(e))f.setActive(a);return f},setDisabled:function(e,
a){var f=null;if(f=this.get(e))f.setDisabled(a);return f},add:function(e){if(e){this.controls[e.id]=e;this.onAdd.dispatch(e,this)}return e},createControl:function(e){var a,f=this,b=f.editor;p(b.plugins,function(d){if(d.createControl)if(a=d.createControl(e,f))return false});switch(e){case "|":case "separator":return f.createSeparator()}if(!a&&b.buttons&&(a=b.buttons[e]))return f.createButton(e,a);return f.add(a)},createDropMenu:function(e,a,f){var b=this.editor,d,i,g;a=m({"class":"mceDropDown",constrain:b.settings.constrain_menus},
a);a["class"]=a["class"]+" "+b.getParam("skin")+"Skin";if(g=b.getParam("skin_variant"))a["class"]+=" "+b.getParam("skin")+"Skin"+g.substring(0,1).toUpperCase()+g.substring(1);e=this.prefix+e;d=this.controls[e]=new (f||this._cls.dropmenu||k.ui.DropMenu)(e,a);d.onAddItem.add(function(j,c){var h=c.settings;h.title=b.getLang(h.title,h.title);if(!h.onclick)h.onclick=function(){if(h.cmd)b.execCommand(h.cmd,h.ui||false,h.value)}});b.onRemove.add(function(){d.destroy()});if(k.isIE){d.onShowMenu.add(function(){b.focus();
i=b.selection.getBookmark(1)});d.onHideMenu.add(function(){if(i){b.selection.moveToBookmark(i);i=0}})}return this.add(d)},createListBox:function(e,a,f){var b=this.editor;if(this.get(e))return null;a.title=b.translate(a.title);a.scope=a.scope||b;if(!a.onselect)a.onselect=function(d){b.execCommand(a.cmd,a.ui||false,d||a.value)};a=m({title:a.title,"class":"mce_"+e,scope:a.scope,control_manager:this},a);e=this.prefix+e;if(b.settings.use_native_selects)f=new k.ui.NativeListBox(e,a);else{f=f||this._cls.listbox||
k.ui.ListBox;f=new f(e,a,b)}this.controls[e]=f;k.isWebKit&&f.onPostRender.add(function(d,i){n.add(i,"mousedown",function(){b.bookmark=b.selection.getBookmark(1)});n.add(i,"focus",function(){b.selection.moveToBookmark(b.bookmark);b.bookmark=null})});f.hideMenu&&b.onMouseDown.add(f.hideMenu,f);return this.add(f)},createButton:function(e,a,f){var b=this.editor;if(this.get(e))return null;a.title=b.translate(a.title);a.label=b.translate(a.label);a.scope=a.scope||b;if(!a.onclick&&!a.menu_button)a.onclick=
function(){b.execCommand(a.cmd,a.ui||false,a.value)};a=m({title:a.title,"class":"mce_"+e,unavailable_prefix:b.getLang("unavailable",""),scope:a.scope,control_manager:this},a);e=this.prefix+e;if(a.menu_button){f=f||this._cls.menubutton||k.ui.MenuButton;e=new f(e,a,b);b.onMouseDown.add(e.hideMenu,e)}else{f=this._cls.button||k.ui.Button;e=new f(e,a)}return this.add(e)},createMenuButton:function(e,a,f){a=a||{};a.menu_button=1;return this.createButton(e,a,f)},createSplitButton:function(e,a,f){var b=this.editor;
if(this.get(e))return null;a.title=b.translate(a.title);a.scope=a.scope||b;if(!a.onclick)a.onclick=function(d){b.execCommand(a.cmd,a.ui||false,d||a.value)};if(!a.onselect)a.onselect=function(d){b.execCommand(a.cmd,a.ui||false,d||a.value)};a=m({title:a.title,"class":"mce_"+e,scope:a.scope,control_manager:this},a);e=this.prefix+e;e=this.add(new (f||this._cls.splitbutton||k.ui.SplitButton)(e,a,b));b.onMouseDown.add(e.hideMenu,e);return e},createColorSplitButton:function(e,a,f){var b=this.editor,d,i;
if(this.get(e))return null;a.title=b.translate(a.title);a.scope=a.scope||b;if(!a.onclick)a.onclick=function(g){if(k.isIE)i=b.selection.getBookmark(1);b.execCommand(a.cmd,a.ui||false,g||a.value)};if(!a.onselect)a.onselect=function(g){b.execCommand(a.cmd,a.ui||false,g||a.value)};a=m({title:a.title,"class":"mce_"+e,menu_class:b.getParam("skin")+"Skin",scope:a.scope,more_colors_title:b.getLang("more_colors")},a);e=this.prefix+e;d=new (f||this._cls.colorsplitbutton||k.ui.ColorSplitButton)(e,a,b);b.onMouseDown.add(d.hideMenu,
d);b.onRemove.add(function(){d.destroy()});if(k.isIE){d.onShowMenu.add(function(){b.focus();i=b.selection.getBookmark(1)});d.onHideMenu.add(function(){if(i){b.selection.moveToBookmark(i);i=0}})}return this.add(d)},createToolbar:function(e,a,f){e=this.prefix+e;a=new (f||this._cls.toolbar||k.ui.Toolbar)(e,a,this.editor);if(this.get(e))return null;return this.add(a)},createToolbarGroup:function(e,a,f){e=this.prefix+e;a=new (f||this._cls.toolbarGroup||k.ui.ToolbarGroup)(e,a,this.editor);if(this.get(e))return null;
return this.add(a)},createSeparator:function(e){return new (e||this._cls.separator||k.ui.Separator)},setControlType:function(e,a){return this._cls[e.toLowerCase()]=a},destroy:function(){p(this.controls,function(e){e.destroy()});this.controls=null}})})(tinymce);
(function(k){var n=k.util.Dispatcher,p=k.each,m=k.isIE,e=k.isOpera;k.create("tinymce.WindowManager",{WindowManager:function(a){this.editor=a;this.onOpen=new n(this);this.onClose=new n(this);this.params={};this.features={}},open:function(a,f){var b="",d=this.editor.settings.dialog_type=="modal",i,g,j;j=k.DOM.getViewPort();a=a||{};f=f||{};g=e?j.w:screen.width;j=e?j.h:screen.height;a.name=a.name||"mc_"+(new Date).getTime();a.width=parseInt(a.width||320);a.height=parseInt(a.height||240);a.resizable=true;
a.left=a.left||parseInt(g/2)-a.width/2;a.top=a.top||parseInt(j/2)-a.height/2;f.inline=false;f.mce_width=a.width;f.mce_height=a.height;f.mce_auto_focus=a.auto_focus;if(d)if(m){a.center=true;a.help=false;a.dialogWidth=a.width+"px";a.dialogHeight=a.height+"px";a.scroll=a.scrollbars||false}p(a,function(h,q){if(k.is(h,"boolean"))h=h?"yes":"no";/^(name|url)$/.test(q)||(b+=m&&d?(b?";":"")+q+":"+h:(b?",":"")+q+"="+h)});this.features=a;this.params=f;this.onOpen.dispatch(this,a,f);g=a.url||a.file;g=k._addVer(g);
try{if(m&&d){i=1;window.showModalDialog(g,window,b)}else i=window.open(g,a.name,b)}catch(c){}i||alert(this.editor.getLang("popup_blocked"))},close:function(a){a.close();this.onClose.dispatch(this)},createInstance:function(a,f,b,d,i,g){return new (k.resolve(a))(f,b,d,i,g)},confirm:function(a,f,b,d){d=d||window;f.call(b||this,d.confirm(this._decode(this.editor.getLang(a,a))))},alert:function(a,f,b,d){d=d||window;d.alert(this._decode(this.editor.getLang(a,a)));if(f)f.call(b||this)},resizeBy:function(a,
f,b){b.resizeBy(a,f)},_decode:function(a){return k.DOM.decode(a).replace(/\\n/g,"\n")}})})(tinymce);
(function(k){k.Formatter=function(n){function p(E){return E.nodeType===1&&(E.face==="mceinline"||E.style.fontFamily==="mceinline")}function m(E){return E?x[E]:x}function e(E,F){if(E)if(typeof E!=="string")u(E,function(G,K){e(K,G)});else{F=F.length?F:[F];u(F,function(G){if(G.deep===ba)G.deep=!G.selector;if(G.split===ba)G.split=!G.selector||G.inline;if(G.remove===ba&&G.selector&&!G.inline)G.remove="none";if(G.selector&&G.inline){G.mixed=true;G.block_expand=true}if(typeof G.classes==="string")G.classes=
G.classes.split(/\s+/)});x[E]=F}}function a(E,F,G){function K(U){var O=U.startContainer,M=U.startOffset;if(O.nodeType==1||O.nodeValue==="")if(O=O.nodeType==1?O.childNodes[M]:O){O=new Y(O,O.parentNode);for(M=O.current();M;M=O.next())if(M.nodeType==3&&!h(M)){U.setStart(M,0);break}}return U}function W(U,O){O=O||P;if(U){u(O.styles,function(M,Q){A.setStyle(U,Q,c(M,F))});u(O.attributes,function(M,Q){A.setAttrib(U,Q,c(M,F))});u(O.classes,function(M){M=c(M,F);A.hasClass(U,M)||A.addClass(U,M)})}}function L(U){var O=
[],M,Q;M=P.inline||P.block;Q=A.create(M);W(Q);y.walk(U,function(N){function fa($){var ea=$.nodeName.toLowerCase(),ga=$.parentNode.nodeName.toLowerCase(),ha;if(g(ea,"br")){da=0;P.block&&A.remove($)}else if(P.wrapper&&b($,E,F))da=0;else if(P.block&&!P.wrapper&&/^(h[1-6]|p|div|pre|address|dl|dt|dd)$/.test(ea)){$=A.rename($,M);W($);O.push($);da=0}else{if(P.selector){u(X,function(ia){if(!("collapsed"in ia&&ia.collapsed!==T))if(A.is($,ia.selector)&&!p($)){W($,ia);ha=true}});if(!P.inline||ha){da=0;return}}if(B(M,
ea)&&B(ga,M)&&!($.nodeType===3&&$.nodeValue.length===1&&$.nodeValue.charCodeAt(0)===65279)){if(!da){da=Q.cloneNode(Z);$.parentNode.insertBefore(da,$);O.push(da)}da.appendChild($)}else{da=0;u(k.grep($.childNodes),fa);da=0}}}var da;u(N,fa)});P.wrap_links===false&&u(O,function(N){function fa(da){var $,ea,ga;if(da.nodeName==="A"){ea=Q.cloneNode(Z);O.push(ea);ga=k.grep(da.childNodes);for($=0;$<ga.length;$++)ea.appendChild(ga[$]);da.appendChild(ea)}u(k.grep(da.childNodes),fa)}fa(N)});u(O,function(N){function fa($){var ea,
ga;u($.childNodes,function(ha){if(ha.nodeType==1&&!t(ha)&&!p(ha)){ea=ha;return Z}});if(ea&&i(ea,P)){ga=ea.cloneNode(Z);W(ga);A.replace(ga,$,V);A.remove(ea,1)}return ga||$}var da;da=function($){var ea=0;u($.childNodes,function(ga){!h(ga)&&!t(ga)&&ea++});return ea}(N);if((O.length>1||!C(N))&&da===0)A.remove(N,1);else if(P.inline||P.wrapper){if(!P.exact&&da===1)N=fa(N);u(X,function($){u(A.select($.inline,N),function(ea){var ga;if($.wrap_links===false){ga=ea.parentNode;do if(ga.nodeName==="A")return;
while(ga=ga.parentNode)}l($,F,ea,$.exact?ea:null)})});if(b(N.parentNode,E,F)){A.remove(N,1);N=0;return V}P.merge_with_parents&&A.getParent(N.parentNode,function($){if(b($,E,F)){A.remove(N,1);N=0;return V}});if(N){N=s(v(N),N);N=s(N,v(N,V))}}})}var X=m(E),P=X[0],S,T=J.isCollapsed();if(P)if(G){S=A.createRng();S.setStartBefore(G);S.setEndAfter(G);L(o(S,X))}else if(!T||!P.inline||A.select("td.mceSelected,th.mceSelected").length){G=J.getBookmark();L(o(J.getRng(V),X));J.moveToBookmark(G);J.setRng(K(J.getRng(V)));
n.nodeChanged()}else D("apply",E,F)}function f(E,F,G){function K(M){var Q=M.startContainer,N=M.startOffset,fa;if(Q.nodeType==3&&N>=Q.nodeValue.length-1){Q=Q.parentNode;N=H(Q)+1}if(Q.nodeType==1){fa=Q.childNodes;Q=fa[Math.min(N,fa.length-1)];Q=new Y(Q);N>fa.length-1&&Q.next();for(N=Q.current();N;N=Q.next())if(N.nodeType==3&&!h(N)){Q=A.create("a",null,R);N.parentNode.insertBefore(Q,N);M.setStart(N,0);J.setRng(M);A.remove(Q);break}}}function W(M){var Q,N,fa;Q=k.grep(M.childNodes);N=0;for(fa=T.length;N<
fa;N++)if(l(T[N],F,M,M))break;if(U.deep){N=0;for(fa=Q.length;N<fa;N++)W(Q[N])}}function L(M){var Q;u(A.getParents(M.parentNode,void 0,A.getRoot()).reverse(),function(N){var fa;if(!Q&&N.id!="_start"&&N.id!="_end")if((fa=b(N,E,F))&&fa.split!==false)Q=N});return Q}function X(M,Q,N,fa){var da,$,ea,ga,ha,ia;if(M){ia=M.parentNode;for(da=Q.parentNode;da&&da!=ia;da=da.parentNode){$=da.cloneNode(Z);for(ha=0;ha<T.length;ha++)if(l(T[ha],F,$,$)){$=0;break}if($){ea&&$.appendChild(ea);ga||(ga=$);ea=$}}if(fa&&(!U.mixed||
!C(M)))Q=A.split(M,Q);if(ea){N.parentNode.insertBefore(ea,N);ga.appendChild(N)}}return Q}function P(M){var Q=A.get(M?"_start":"_end"),N=Q[M?"firstChild":"lastChild"];if(t(N))N=N[M?"firstChild":"lastChild"];A.remove(Q,true);return N}function S(M){var Q,N;M=o(M,T,V);if(U.split){Q=z(M,V);N=z(M);if(Q!=N){Q=q(Q,"span",{id:"_start","data-mce-type":"bookmark"});N=q(N,"span",{id:"_end","data-mce-type":"bookmark"});X(L(Q),Q,Q,true);X(L(N),N,N,true);Q=P(V);N=P()}else Q=N=X(L(Q),Q,Q,true);M.startContainer=Q.parentNode;
M.startOffset=H(Q);M.endContainer=N.parentNode;M.endOffset=H(N)+1}y.walk(M,function(fa){u(fa,function(da){W(da)})})}var T=m(E),U=T[0],O;if(G){O=A.createRng();O.setStartBefore(G);O.setEndAfter(G);S(O)}else if(!J.isCollapsed()||!U.inline||A.select("td.mceSelected,th.mceSelected").length){G=J.getBookmark();S(J.getRng(V));J.moveToBookmark(G);d(E,F,J.getStart())&&K(J.getRng(true));n.nodeChanged()}else D("remove",E,F)}function b(E,F,G,K){function W(P,S,T){var U,O,M=S[T];if(M)if(M.length===ba)for(U in M){if(M.hasOwnProperty(U)){O=
T==="attributes"?A.getAttrib(P,U):j(P,U);if(K&&!O&&!S.exact)return;if((!K||S.exact)&&!g(O,c(M[U],G)))return}}else for(U=0;U<M.length;U++)if(T==="attributes"?A.getAttrib(P,M[U]):j(P,M[U]))break;return S}var L=m(F),X;if(L&&E)for(X=0;X<L.length;X++){F=L[X];if(i(E,F)&&W(E,F,"attributes")&&W(E,F,"styles")){if(L=F.classes)for(X=0;X<L.length;X++)if(!A.hasClass(E,L[X]))return;return F}}}function d(E,F,G){function K(L){L=A.getParent(L,function(X){return!!b(X,E,F,true)});return b(L,E,F)}var W;if(G)return K(G);
if(J.isCollapsed()){for(G=ca.apply.length-1;G>=0;G--)if(ca.apply[G].name==E)return true;for(G=ca.remove.length-1;G>=0;G--)if(ca.remove[G].name==E)return false;return K(J.getNode())}G=J.getNode();if(K(G))return V;W=J.getStart();if(W!=G)if(K(W))return V;return Z}function i(E,F){if(g(E,F.inline))return V;if(g(E,F.block))return V;if(F.selector)return A.is(E,F.selector)}function g(E,F){E=E||"";F=F||"";E=""+(E.nodeName||E);F=""+(F.nodeName||F);return E.toLowerCase()==F.toLowerCase()}function j(E,F){var G=
A.getStyle(E,F);if(F=="color"||F=="backgroundColor")G=A.toHex(G);if(F=="fontWeight"&&G==700)G="bold";return""+G}function c(E,F){if(typeof E!="string")E=E(F);else if(F)E=E.replace(/%(\w+)/g,function(G,K){return F[K]||G});return E}function h(E){return E&&E.nodeType===3&&/^([\s\r\n]+|)$/.test(E.nodeValue)}function q(E,F,G){F=A.create(F,G);E.parentNode.insertBefore(F,E);F.appendChild(E);return F}function o(E,F){function G(T,U,O,M){var Q;for(M=M||A.getRoot();;){Q=T.parentNode;if(Q==M||!F[0].block_expand&&
C(Q))break;for(P=Q[U];P&&P!=T;P=P[O]){if(P.nodeType==1&&!t(P))return T;if(P.nodeType==3&&!h(P))return T}T=T.parentNode}return T}var K=E.startContainer,W=E.startOffset,L=E.endContainer,X=E.endOffset,P,S;if(K.nodeType==1&&K.hasChildNodes()){S=K.childNodes.length-1;K=K.childNodes[W>S?S:W];if(K.nodeType==3)W=0}if(L.nodeType==1&&L.hasChildNodes()){S=L.childNodes.length-1;L=L.childNodes[X>S?S:X-1];if(L.nodeType==3)X=L.nodeValue.length}if(t(K.parentNode))K=K.parentNode;if(t(K))K=K.nextSibling||K;if(t(L.parentNode))L=
L.parentNode;if(t(L))L=L.previousSibling||L;if(F[0].inline||F[0].block_expand){K=G(K,"firstChild","nextSibling");L=G(L,"lastChild","previousSibling")}if(F[0].selector&&F[0].expand!==Z&&!F[0].inline){S=function(T,U){var O,M,Q,N;if(T.nodeType==3&&T.nodeValue.length==0&&T[U])T=T[U];O=A.getParents(T,void 0,A.getRoot());for(M=0;M<O.length;M++)for(Q=0;Q<F.length;Q++){N=F[Q];if(!("collapsed"in N&&N.collapsed!==E.collapsed))if(A.is(O[M],N.selector))return O[M]}return T};K=S(K,"previousSibling");L=S(L,"nextSibling")}if(F[0].block||
F[0].selector){S=function(T,U){var O;F[0].wrapper||(O=A.getParent(T,F[0].block));O||(O=A.getParent(T.nodeType==3?T.parentNode:T,C));if(O&&F[0].wrapper)O=A.getParents(O,"ul,ol",A.getRoot()).reverse()[0]||O;if(!O)for(O=T;O[U]&&!C(O[U]);){O=O[U];if(g(O,"br"))break}return O||T};K=S(K,"previousSibling");L=S(L,"nextSibling");if(F[0].block){C(K)||(K=G(K,"firstChild","nextSibling"));C(L)||(L=G(L,"lastChild","previousSibling"))}}if(K.nodeType==1){W=H(K);K=K.parentNode}if(L.nodeType==1){X=H(L)+1;L=L.parentNode}return{startContainer:K,
startOffset:W,endContainer:L,endOffset:X}}function l(E,F,G,K){var W,L,X;if(!i(G,E))return Z;if(E.remove!="all"){u(E.styles,function(P,S){P=c(P,F);if(typeof S==="number"){S=P;K=0}if(!K||g(j(K,S),P))A.setStyle(G,S,"");X=1});if(X&&A.getAttrib(G,"style")==""){G.removeAttribute("style");G.removeAttribute("data-mce-style")}u(E.attributes,function(P,S){var T;P=c(P,F);if(typeof S==="number"){S=P;K=0}if(!K||g(A.getAttrib(K,S),P)){if(S=="class")if(P=A.getAttrib(G,S)){T="";u(P.split(/\s+/),function(U){if(/mce\w+/.test(U))T+=
(T?" ":"")+U});if(T){A.setAttrib(G,S,T);return}}S=="class"&&G.removeAttribute("className");aa.test(S)&&G.removeAttribute("data-mce-"+S);G.removeAttribute(S)}});u(E.classes,function(P){P=c(P,F);if(!K||A.hasClass(K,P))A.removeClass(G,P)});L=A.getAttribs(G);for(W=0;W<L.length;W++)if(L[W].nodeName.indexOf("_")!==0)return Z}if(E.remove!="none"){r(G,E);return V}}function r(E,F){var G=E.parentNode,K;if(F.block)if(I){if(G==A.getRoot())if(!F.list_block||!g(E,F.list_block))u(k.grep(E.childNodes),function(L){if(B(I,
L.nodeName.toLowerCase()))if(K)K.appendChild(L);else K=q(L,I);else K=0})}else{var W=function(L,X,P){L=v(L,X,P);return!L||L.nodeName=="BR"||C(L)};if(C(E)&&!C(G)){!W(E,Z)&&!W(E.firstChild,V,1)&&E.insertBefore(A.create("br"),E.firstChild);!W(E,V)&&!W(E.lastChild,Z,1)&&E.appendChild(A.create("br"))}}F.selector&&F.inline&&!g(F.inline,E)||A.remove(E,1)}function v(E,F,G){if(E){F=F?"nextSibling":"previousSibling";for(E=G?E:E[F];E;E=E[F])if(E.nodeType==1||!h(E))return E}}function t(E){return E&&E.nodeType==
1&&E.getAttribute("data-mce-type")=="bookmark"}function s(E,F){function G(L,X){function P(T){var U={};u(A.getAttribs(T),function(O){O=O.nodeName.toLowerCase();if(O.indexOf("_")!==0&&O!=="style")U[O]=A.getAttrib(T,O)});return U}function S(T,U){var O,M;for(M in T)if(T.hasOwnProperty(M)){O=U[M];if(O===ba)return Z;if(T[M]!=O)return Z;delete U[M]}for(M in U)if(U.hasOwnProperty(M))return Z;return V}if(L.nodeName!=X.nodeName)return Z;if(!S(P(L),P(X)))return Z;if(!S(A.parseStyle(A.getAttrib(L,"style")),A.parseStyle(A.getAttrib(X,
"style"))))return Z;return V}var K,W;if(E&&F){W=function(L,X){for(K=L;K;K=K[X]){if(K.nodeType==3&&K.nodeValue.length!==0)break;if(K.nodeType==1&&!t(K))return K}return L};E=W(E,"previousSibling");F=W(F,"nextSibling");if(G(E,F)){for(K=E.nextSibling;K&&K!=F;){W=K;K=K.nextSibling;E.appendChild(W)}A.remove(F);u(k.grep(F.childNodes),function(L){E.appendChild(L)});return E}}return F}function z(E,F){var G,K,W;G=E[F?"startContainer":"endContainer"];K=E[F?"startOffset":"endOffset"];if(G.nodeType==1){W=G.childNodes.length-
1;!F&&K&&K--;G=G.childNodes[K>W?W:K]}return G}function D(E,F,G){function K(){return ca.apply.length||ca.remove.length}function W(P){u(ca.apply.reverse(),function(S){a(S.name,S.vars,P)});u(ca.remove.reverse(),function(S){f(S.name,S.vars,P)});A.remove(P,1);ca.apply=[];ca.remove=[]}var L=ca[E],X=ca[E=="apply"?"remove":"apply"];for(E=L.length-1;E>=0;E--)if(L[E].name==F)return;L.push({name:F,vars:G});for(E=X.length-1;E>=0;E--)X[E].name==F&&X.splice(E,1);if(K()){n.getDoc().execCommand("FontName",false,
"mceinline");ca.lastRng=J.getRng();u(A.select("font,span"),function(P){var S;if(p(P)){S=J.getBookmark();W(P);J.moveToBookmark(S);n.nodeChanged()}});if(!ca.isListening&&K()){ca.isListening=true;u("onKeyDown,onKeyUp,onKeyPress,onMouseUp".split(","),function(P){n[P].addToTop(function(S,T){if(K()&&!k.dom.RangeUtils.compareRanges(ca.lastRng,J.getRng())){u(A.select("font,span"),function(U){var O;if(p(U))if(O=U.firstChild){W(U);U=A.createRng();U.setStart(O,O.nodeValue.length);U.setEnd(O,O.nodeValue.length);
J.setRng(U);S.nodeChanged()}else A.remove(U)});if(T.type=="keyup"||T.type=="mouseup"){ca.apply=[];ca.remove=[]}}})})}}}var x={},u=k.each,A=n.dom,J=n.selection,Y=k.dom.TreeWalker,y=new k.dom.RangeUtils(A),B=n.schema.isValidChild,C=A.isBlock,I=n.settings.forced_root_block,H=A.nodeIndex,R="﻿",aa=/^(src|href|style)$/,Z=false,V=true,ba,ca={apply:[],remove:[]};k.extend(this,{get:m,register:e,apply:a,remove:f,toggle:function(E,F,G){d(E,F,G)?f(E,F,G):a(E,F,G)},match:d,matchAll:function(E,F){var G,K=[],W=
{},L,X;if(J.isCollapsed()){for(L=0;L<E.length;L++)for(G=ca.remove.length-1;G>=0;G--){X=E[L];if(ca.remove[G].name==X){W[X]=true;break}}for(G=ca.apply.length-1;G>=0;G--)for(L=0;L<E.length;L++){X=E[L];if(!W[X]&&ca.apply[G].name==X){W[X]=true;K.push(X)}}}G=J.getStart();A.getParent(G,function(P){var S,T;for(S=0;S<E.length;S++){T=E[S];if(!W[T]&&b(P,T,F)){W[T]=true;K.push(T)}}});return K},matchNode:b,canApply:function(E){E=m(E);var F,G,K,W;if(E){F=J.getStart();F=A.getParents(F,void 0,A.getRoot());for(K=
E.length-1;K>=0;K--){W=E[K].selector;if(!W)return V;for(G=F.length-1;G>=0;G--)if(A.is(F[G],W))return V}}return Z}})}})(tinymce);
tinymce.onAddEditor.add(function(k,n){var p,m,e,a=n.settings;if(a.inline_styles){m=k.explode(a.font_size_style_values);var f=function(d,i){k.each(i,function(g,j){g&&e.setStyle(d,j,g)});e.rename(d,"span")};p={font:function(d,i){f(i,{backgroundColor:i.style.backgroundColor,color:i.color,fontFamily:i.face,fontSize:m[parseInt(i.size)-1]})},u:function(d,i){f(i,{textDecoration:"underline"})},strike:function(d,i){f(i,{textDecoration:"line-through"})}};var b=function(d,i){e=d.dom;a.convert_fonts_to_spans&&
k.each(e.select("font,u,strike",i.node),function(g){p[g.nodeName.toLowerCase()](n.dom,g)})};n.onPreProcess.add(b);n.onSetContent.add(b);n.onInit.add(function(){n.selection.onSetContent.add(b)})}});

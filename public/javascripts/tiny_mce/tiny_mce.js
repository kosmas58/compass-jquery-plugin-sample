(function(i){var g=/^\s*|\s*$/g,h,j="B".replace(/A(.)|B/,"$1")==="$1";var f={majorVersion:"3",minorVersion:"4.3.2",releaseDate:"2011-06-30",_init:function(){var x=this,b=document,c=navigator,u=c.userAgent,d,v,e,n,p,a;x.isOpera=i.opera&&opera.buildNumber;x.isWebKit=/WebKit/.test(u);x.isIE=!x.isWebKit&&!x.isOpera&&(/MSIE/gi).test(u)&&(/Explorer/gi).test(c.appName);x.isIE6=x.isIE&&/MSIE [56]/.test(u);x.isGecko=!x.isWebKit&&/Gecko/.test(u);x.isMac=u.indexOf("Mac")!=-1;x.isAir=/adobeair/i.test(u);x.isIDevice=/(iPad|iPhone)/.test(u);x.isIOS5=x.isIDevice&&u.match(/AppleWebKit\/(\d*)/)[1]>=534;if(i.tinyMCEPreInit){x.suffix=tinyMCEPreInit.suffix;x.baseURL=tinyMCEPreInit.base;x.query=tinyMCEPreInit.query;return}x.suffix="";v=b.getElementsByTagName("base");for(d=0;d<v.length;d++){if(a=v[d].href){if(/^https?:\/\/[^\/]+$/.test(a)){a+="/"}n=a?a.match(/.*\//)[0]:""}}function t(k){if(k.src&&/tiny_mce(|_gzip|_jquery|_prototype|_full)(_dev|_src)?.js/.test(k.src)){if(/_(src|dev)\.js/g.test(k.src)){x.suffix="_src"}if((p=k.src.indexOf("?"))!=-1){x.query=k.src.substring(p+1)}x.baseURL=k.src.substring(0,k.src.lastIndexOf("/"));if(n&&x.baseURL.indexOf("://")==-1&&x.baseURL.indexOf("/")!==0){x.baseURL=n+x.baseURL}return x.baseURL}return null}v=b.getElementsByTagName("script");for(d=0;d<v.length;d++){if(t(v[d])){return}}e=b.getElementsByTagName("head")[0];if(e){v=e.getElementsByTagName("script");for(d=0;d<v.length;d++){if(t(v[d])){return}}}return},is:function(a,b){if(!b){return a!==h}if(b=="array"&&(a.hasOwnProperty&&a instanceof Array)){return true}return typeof(a)==b},makeMap:function(d,a,b){var c;d=d||[];a=a||",";if(typeof(d)=="string"){d=d.split(a)}b=b||{};c=d.length;while(c--){b[d[c]]={}}return b},each:function(b,e,c){var a,d;if(!b){return 0}c=c||b;if(b.length!==h){for(a=0,d=b.length;a<d;a++){if(e.call(c,b[a],a,b)===false){return 0}}}else{for(a in b){if(b.hasOwnProperty(a)){if(e.call(c,b[a],a,b)===false){return 0}}}}return 1},trim:function(a){return(a?""+a:"").replace(g,"")},create:function(a,t,p){var b=this,s,q,e,d,r,c=0;a=/^((static) )?([\w.]+)(:([\w.]+))?/.exec(a);e=a[3].match(/(^|\.)(\w+)$/i)[2];q=b.createNS(a[3].replace(/\.\w+$/,""),p);if(q[e]){return}if(a[2]=="static"){q[e]=t;if(this.onCreate){this.onCreate(a[2],a[3],q[e])}return}if(!t[e]){t[e]=function(){};c=1}q[e]=t[e];b.extend(q[e].prototype,t);if(a[5]){s=b.resolve(a[5]).prototype;d=a[5].match(/\.(\w+)$/i)[1];r=q[e];if(c){q[e]=function(){return s[d].apply(this,arguments)}}else{q[e]=function(){this.parent=s[d];return r.apply(this,arguments)}}q[e].prototype[e]=q[e];b.each(s,function(l,k){q[e].prototype[k]=s[k]});b.each(t,function(l,k){if(s[k]){q[e].prototype[k]=function(){this.parent=s[k];return l.apply(this,arguments)}}else{if(k!=e){q[e].prototype[k]=l}}})}b.each(t["static"],function(l,k){q[e][k]=l});if(this.onCreate){this.onCreate(a[2],a[3],q[e].prototype)}},walk:function(b,c,a,d){d=d||this;if(b){if(a){b=b[a]}f.each(b,function(e,l){if(c.call(d,e,l,a)===false){return false}f.walk(e,c,a,d)})}},createNS:function(a,b){var c,d;b=b||i;a=a.split(".");for(c=0;c<a.length;c++){d=a[c];if(!b[d]){b[d]={}}b=b[d]}return b},resolve:function(a,b){var c,d;b=b||i;a=a.split(".");for(c=0,d=a.length;c<d;c++){b=b[a[c]];if(!b){break}}return b},addUnload:function(b,c){var d=this;b={func:b,scope:c||this};if(!d.unloads){function e(){var o=d.unloads,n,k;if(o){for(k in o){n=o[k];if(n&&n.func){n.func.call(n.scope,1)}}if(i.detachEvent){i.detachEvent("onbeforeunload",a);i.detachEvent("onunload",e)}else{if(i.removeEventListener){i.removeEventListener("unload",e,false)}}d.unloads=n=o=w=e=0;if(i.CollectGarbage){CollectGarbage()}}}function a(){var k=document;if(k.readyState=="interactive"){function m(){k.detachEvent("onstop",m);if(e){e()}k=0}if(k){k.attachEvent("onstop",m)}i.setTimeout(function(){if(k){k.detachEvent("onstop",m)}},0)}}if(i.attachEvent){i.attachEvent("onunload",e);i.attachEvent("onbeforeunload",a)}else{if(i.addEventListener){i.addEventListener("unload",e,false)}}d.unloads=[b]}else{d.unloads.push(b)}return b},removeUnload:function(a){var c=this.unloads,b=null;f.each(c,function(d,e){if(d&&d.func==a){c.splice(e,1);b=a;return false}});return b},explode:function(b,a){return b?f.map(b.split(a||","),f.trim):b},_addVer:function(a){var b;if(!this.query){return a}b=(a.indexOf("?")==-1?"?":"&")+this.query;if(a.indexOf("#")==-1){return a+b}return a.replace("#",b+"#")},_replace:function(a,c,b){if(j){return b.replace(a,function(){var d=c,m=arguments,e;for(e=0;e<m.length-2;e++){if(m[e]===h){d=d.replace(new RegExp("\\$"+e,"g"),"")}else{d=d.replace(new RegExp("\\$"+e,"g"),m[e])}}return d})}return b.replace(a,c)}};f._init();i.tinymce=i.tinyMCE=f})(window);(function(j,k){var l=k.is,g=/^(href|src|style)$/i,i;if(!j&&window.console){return console.log("Load jQuery first!")}k.$=j;k.adapter={patchEditor:function(c){var d=j.fn;function e(r,q){var p=this;if(q){p.removeAttr("data-mce-style")}return d.css.apply(p,arguments)}function f(r,q){var p=this;if(g.test(r)){if(q!==i){p.each(function(n,m){c.dom.setAttrib(m,r,q)});return p}else{return p.attr("data-mce-"+r)}}return d.attr.apply(p,arguments)}function b(n){return function(m){if(m){m=c.dom.processHTML(m)}return n.call(this,m)}}function a(n){if(n.css!==e){n.css=e;n.attr=f;n.html=b(d.html);n.append=b(d.append);n.prepend=b(d.prepend);n.after=b(d.after);n.before=b(d.before);n.replaceWith=b(d.replaceWith);n.tinymce=c;n.pushStack=function(){return a(d.pushStack.apply(this,arguments))}}return n}c.$=function(p,r){var q=c.getDoc();return a(j(p||q,q||r))}}};k.extend=j.extend;k.extend(k,{map:j.map,grep:function(b,a){return j.grep(b,a||function(){return 1})},inArray:function(b,a){return j.inArray(a,b||[])}});var h={"tinymce.dom.DOMUtils":{select:function(a,b){var c=this;return j.find(a,c.get(b)||c.get(c.settings.root_element)||c.doc,[])},is:function(a,b){return j(this.get(a)).is(b)}}};k.onCreate=function(c,a,b){k.extend(b,h[a])}})(window.jQuery,tinymce);tinymce.create("tinymce.util.Dispatcher",{scope:null,listeners:null,Dispatcher:function(b){this.scope=b||this;this.listeners=[]},add:function(d,c){this.listeners.push({cb:d,scope:c||this.scope});return d},addToTop:function(d,c){this.listeners.unshift({cb:d,scope:c||this.scope});return d},remove:function(e){var d=this.listeners,f=null;tinymce.each(d,function(a,b){if(e==a.cb){f=e;d.splice(b,1);return false}});return f},dispatch:function(){var h,j=arguments,i,a=this.listeners,c;for(i=0;i<a.length;i++){c=a[i];h=c.cb.apply(c.scope,j);if(h===false){break}}return h}});(function(){var b=tinymce.each;tinymce.create("tinymce.util.URI",{URI:function(m,k){var l=this,a,n,o,j;m=tinymce.trim(m);k=l.settings=k||{};if(/^(mailto|tel|news|javascript|about|data):/i.test(m)||/^\s*#/.test(m)){l.source=m;return}if(m.indexOf("/")===0&&m.indexOf("//")!==0){m=(k.base_uri?k.base_uri.protocol||"http":"http")+"://mce_host"+m}if(!/^[\w-]*:?\/\//.test(m)){j=k.base_uri?k.base_uri.path:new tinymce.util.URI(location.href).directory;m=((k.base_uri&&k.base_uri.protocol)||"http")+"://mce_host"+l.toAbsPath(j,m)}m=m.replace(/@@/g,"(mce_at)");m=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*):?([^:@]*))?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/.exec(m);b(["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],function(c,e){var d=m[e];if(d){d=d.replace(/\(mce_at\)/g,"@@")}l[c]=d});if(o=k.base_uri){if(!l.protocol){l.protocol=o.protocol}if(!l.userInfo){l.userInfo=o.userInfo}if(!l.port&&l.host=="mce_host"){l.port=o.port}if(!l.host||l.host=="mce_host"){l.host=o.host}l.source=""}},setPath:function(d){var a=this;d=/^(.*?)\/?(\w+)?$/.exec(d);a.path=d[0];a.directory=d[1];a.file=d[2];a.source="";a.getURI()},toRelative:function(a){var f=this,e;if(a==="./"){return a}a=new tinymce.util.URI(a,{base_uri:f});if((a.host!="mce_host"&&f.host!=a.host&&a.host)||f.port!=a.port||f.protocol!=a.protocol){return a.getURI()}e=f.toRelPath(f.path,a.path);if(a.query){e+="?"+a.query}if(a.anchor){e+="#"+a.anchor}return e},toAbsolute:function(a,d){var a=new tinymce.util.URI(a,{base_uri:this});return a.getURI(this.host==a.host&&this.protocol==a.protocol?d:0)},toRelPath:function(j,i){var n,k=0,m="",l,a;j=j.substring(0,j.lastIndexOf("/"));j=j.split("/");n=i.split("/");if(j.length>=n.length){for(l=0,a=j.length;l<a;l++){if(l>=n.length||j[l]!=n[l]){k=l+1;break}}}if(j.length<n.length){for(l=0,a=n.length;l<a;l++){if(l>=j.length||j[l]!=n[l]){k=l+1;break}}}if(k==1){return i}for(l=0,a=j.length-(k-1);l<a;l++){m+="../"}for(l=k-1,a=n.length;l<a;l++){if(l!=k-1){m+="/"+n[l]}else{m+=n[l]}}return m},toAbsPath:function(l,k){var n,a=0,i=[],m,j;m=/\/$/.test(k)?"/":"";l=l.split("/");k=k.split("/");b(l,function(c){if(c){i.push(c)}});l=i;for(n=k.length-1,i=[];n>=0;n--){if(k[n].length==0||k[n]=="."){continue}if(k[n]==".."){a++;continue}if(a>0){a--;continue}i.push(k[n])}n=l.length-a;if(n<=0){j=i.reverse().join("/")}else{j=l.slice(0,n).join("/")+"/"+i.reverse().join("/")}if(j.indexOf("/")!==0){j="/"+j}if(m&&j.lastIndexOf("/")!==j.length-1){j+=m}return j},getURI:function(e){var f,a=this;if(!a.source||e){f="";if(!e){if(a.protocol){f+=a.protocol+"://"}if(a.userInfo){f+=a.userInfo+"@"}if(a.host){f+=a.host}if(a.port){f+=":"+a.port}}if(a.path){f+=a.path}if(a.query){f+="?"+a.query}if(a.anchor){f+="#"+a.anchor}a.source=f}return a.source}})})();(function(){var b=tinymce.each;tinymce.create("static tinymce.util.Cookie",{getHash:function(e){var a=this.get(e),f;if(a){b(a.split("&"),function(c){c=c.split("=");f=f||{};f[unescape(c[0])]=unescape(c[1])})}return f},setHash:function(d,a,l,m,e,n){var k="";b(a,function(c,f){k+=(!k?"":"&")+escape(f)+"="+escape(c)});this.set(d,k,l,m,e,n)},get:function(a){var c=document.cookie,e,j=a+"=",k;if(!c){return}k=c.indexOf("; "+j);if(k==-1){k=c.indexOf(j);if(k!=0){return null}}else{k+=2}e=c.indexOf(";",k);if(e==-1){e=c.length}return unescape(c.substring(k+j.length,e))},set:function(d,a,j,k,e,l){document.cookie=d+"="+escape(a)+((j)?"; expires="+j.toGMTString():"")+((k)?"; path="+escape(k):"")+((e)?"; domain="+e:"")+((l)?"; secure":"")},remove:function(d,a){var f=new Date();f.setTime(f.getTime()-1000);this.set(d,"",f,a,f)}})})();(function(){function serialize(o,quote){var i,v,t;quote=quote||'"';if(o==null){return"null"}t=typeof o;if(t=="string"){v="\bb\tt\nn\ff\rr\"\"''\\\\";return quote+o.replace(/([\u0080-\uFFFF\x00-\x1f\"\'\\])/g,function(a,b){if(quote==='"'&&a==="'"){return a}i=v.indexOf(b);if(i+1){return"\\"+v.charAt(i+1)}a=b.charCodeAt().toString(16);return"\\u"+"0000".substring(a.length)+a})+quote}if(t=="object"){if(o.hasOwnProperty&&o instanceof Array){for(i=0,v="[";i<o.length;i++){v+=(i>0?",":"")+serialize(o[i],quote)}return v+"]"}v="{";for(i in o){v+=typeof o[i]!="function"?(v.length>1?","+quote:quote)+i+quote+":"+serialize(o[i],quote):""}return v+"}"}return""+o}tinymce.util.JSON={serialize:serialize,parse:function(s){try{return eval("("+s+")")}catch(ex){}}}})();tinymce.create("static tinymce.util.XHR",{send:function(k){var i,m,c=window,j=0;k.scope=k.scope||this;k.success_scope=k.success_scope||k.scope;k.error_scope=k.error_scope||k.scope;k.async=k.async===false?false:true;k.data=k.data||"";function n(a){i=0;try{i=new ActiveXObject(a)}catch(b){}return i}i=c.XMLHttpRequest?new XMLHttpRequest():n("Microsoft.XMLHTTP")||n("Msxml2.XMLHTTP");if(i){if(i.overrideMimeType){i.overrideMimeType(k.content_type)}i.open(k.type||(k.data?"POST":"GET"),k.url,k.async);if(k.content_type){i.setRequestHeader("Content-Type",k.content_type)}i.setRequestHeader("X-Requested-With","XMLHttpRequest");i.send(k.data);function l(){if(!k.async||i.readyState==4||j++>10000){if(k.success&&j<10000&&i.status==200){k.success.call(k.success_scope,""+i.responseText,i,k)}else{if(k.error){k.error.call(k.error_scope,j>10000?"TIMED_OUT":"GENERAL",i,k)}}i=null}else{c.setTimeout(l,10)}}if(!k.async){return l()}m=c.setTimeout(l,10)}}});(function(){var f=tinymce.extend,d=tinymce.util.JSON,e=tinymce.util.XHR;tinymce.create("tinymce.util.JSONRequest",{JSONRequest:function(a){this.settings=f({},a);this.count=0},send:function(a){var b=a.error,c=a.success;a=f(this.settings,a);a.success=function(i,j){i=d.parse(i);if(typeof(i)=="undefined"){i={error:"JSON Parse error."}}if(i.error){b.call(a.error_scope||a.scope,i.error,j)}else{c.call(a.success_scope||a.scope,i.result)}};a.error=function(i,j){if(b){b.call(a.error_scope||a.scope,i,j)}};a.data=d.serialize({id:a.id||"c"+(this.count++),method:a.method,params:a.params});a.content_type="application/json";e.send(a)},"static":{sendRPC:function(a){return new tinymce.util.JSONRequest().send(a)}}})}());(function(m){var v,p,s,l=/[&<>\"\u007E-\uD7FF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,u=/[<>&\u007E-\uD7FF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,q=/[<>&\"\']/g,t=/&(#x|#)?([\w]+);/g,n={128:"\u20AC",130:"\u201A",131:"\u0192",132:"\u201E",133:"\u2026",134:"\u2020",135:"\u2021",136:"\u02C6",137:"\u2030",138:"\u0160",139:"\u2039",140:"\u0152",142:"\u017D",145:"\u2018",146:"\u2019",147:"\u201C",148:"\u201D",149:"\u2022",150:"\u2013",151:"\u2014",152:"\u02DC",153:"\u2122",154:"\u0161",155:"\u203A",156:"\u0153",158:"\u017E",159:"\u0178"};p={'"':"&quot;","'":"&#39;","<":"&lt;",">":"&gt;","&":"&amp;"};s={"&lt;":"<","&gt;":">","&amp;":"&","&quot;":'"',"&apos;":"'"};function o(b){var a;a=document.createElement("div");a.innerHTML=b;return a.textContent||a.innerText||b}function r(a,d){var f,e,b,c={};if(a){a=a.split(",");d=d||10;for(f=0;f<a.length;f+=2){e=String.fromCharCode(parseInt(a[f],d));if(!p[e]){b="&"+a[f+1]+";";c[e]=b;c[b]=e}}return c}}v=r("50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,t9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro",32);m.html=m.html||{};m.html.Entities={encodeRaw:function(a,b){return a.replace(b?l:u,function(c){return p[c]||c})},encodeAllRaw:function(a){return(""+a).replace(q,function(b){return p[b]||b})},encodeNumeric:function(a,b){return a.replace(b?l:u,function(c){if(c.length>1){return"&#"+(((c.charCodeAt(0)-55296)*1024)+(c.charCodeAt(1)-56320)+65536)+";"}return p[c]||"&#"+c.charCodeAt(0)+";"})},encodeNamed:function(c,b,a){a=a||v;return c.replace(b?l:u,function(d){return p[d]||a[d]||d})},getEncodeFunc:function(b,d){var c=m.html.Entities;d=r(d)||v;function a(f,g){return f.replace(g?l:u,function(h){return p[h]||d[h]||"&#"+h.charCodeAt(0)+";"||h})}function e(f,g){return c.encodeNamed(f,g,d)}b=m.makeMap(b.replace(/\+/g,","));if(b.named&&b.numeric){return a}if(b.named){if(d){return e}return c.encodeNamed}if(b.numeric){return c.encodeNumeric}return c.encodeRaw},decode:function(a){return a.replace(t,function(d,b,c){if(b){c=parseInt(c,b.length===2?16:10);if(c>65535){c-=65536;return String.fromCharCode(55296+(c>>10),56320+(c&1023))}else{return n[c]||String.fromCharCode(c)}}return s[d]||v[d]||o(d)})}}})(tinymce);tinymce.html.Styles=function(u,s){var o=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*\)/gi,q=/(?:url(?:(?:\(\s*\"([^\"]+)\"\s*\))|(?:\(\s*\'([^\']+)\'\s*\))|(?:\(\s*([^)\s]+)\s*\))))|(?:\'([^\']+)\')|(?:\"([^\"]+)\")/gi,x=/\s*([^:]+):\s*([^;]+);?/g,n=/\s+$/,i=/rgb/,t,r,y={},p;u=u||{};p="\\\" \\' \\; \\: ; : \uFEFF".split(" ");for(r=0;r<p.length;r++){y[p[r]]="\uFEFF"+r;y["\uFEFF"+r]=p[r]}function v(e,b,c,a){function d(f){f=parseInt(f).toString(16);return f.length>1?f:"0"+f}return"#"+d(b)+d(c)+d(a)}return{toHex:function(a){return a.replace(o,v)},parse:function(a){var h={},c,e,k,b,l=u.url_converter,j=u.url_converter_scope||this;function d(J,G){var H,K,z,I;H=h[J+"-top"+G];if(!H){return}K=h[J+"-right"+G];if(H!=K){return}z=h[J+"-bottom"+G];if(K!=z){return}I=h[J+"-left"+G];if(z!=I){return}h[J+G]=I;delete h[J+"-top"+G];delete h[J+"-right"+G];delete h[J+"-bottom"+G];delete h[J+"-left"+G]}function m(E){var D=h[E],z;if(!D||D.indexOf(" ")<0){return}D=D.split(" ");z=D.length;while(z--){if(D[z]!==D[0]){return false}}h[E]=D[0];return true}function g(F,G,z,E){if(!m(G)){return}if(!m(z)){return}if(!m(E)){return}h[F]=h[G]+" "+h[z]+" "+h[E];delete h[G];delete h[z];delete h[E]}function A(z){b=true;return y[z]}function f(C,z){if(b){C=C.replace(/\uFEFF[0-9]/g,function(B){return y[B]})}if(!z){C=C.replace(/\\([\'\";:])/g,"$1")}return C}if(a){a=a.replace(/\\[\"\';:\uFEFF]/g,A).replace(/\"[^\"]+\"|\'[^\']+\'/g,function(z){return z.replace(/[;:]/g,A)});while(c=x.exec(a)){e=c[1].replace(n,"").toLowerCase();k=c[2].replace(n,"");if(e&&k.length>0){if(e==="font-weight"&&k==="700"){k="bold"}else{if(e==="color"||e==="background-color"){k=k.toLowerCase()}}k=k.replace(o,v);k=k.replace(q,function(K,z,H,I,G,J){G=G||J;if(G){G=f(G);return"'"+G.replace(/\'/g,"\\'")+"'"}z=f(z||H||I);if(l){z=l.call(j,z,"style")}return"url('"+z.replace(/\'/g,"\\'")+"')"});h[e]=b?f(k,true):k}x.lastIndex=c.index+c[0].length}d("border","");d("border","-width");d("border","-color");d("border","-style");d("padding","");d("margin","");g("border","border-width","border-style","border-color");if(h.border==="medium none"){delete h.border}}return h},serialize:function(d,b){var e="",f,c;function a(k){var g,j,l,h;g=s.styles[k];if(g){for(j=0,l=g.length;j<l;j++){k=g[j];h=d[k];if(h!==t&&h.length>0){e+=(e.length>0?" ":"")+k+": "+h+";"}}}}if(b&&s&&s.styles){a("*");a(b)}else{for(f in d){c=d[f];if(c!==t&&c.length>0){e+=(e.length>0?" ":"")+f+": "+c+";"}}}return e}}};(function(n){var s={},q,o,t,u,y={},z,v,x=n.makeMap,p=n.each;function r(a,b){return a.split(b||",")}function A(a,b){var d,c={};function e(f){return f.replace(/[A-Z]+/g,function(g){return e(a[g])})}for(d in a){if(a.hasOwnProperty(d)){a[d]=e(a[d])}}e(b).replace(/#/g,"#text").replace(/(\w+)\[([^\]]+)\]\[([^\]]*)\]/g,function(f,h,i,g){i=r(i,"|");c[h]={attributes:x(i),attributesOrder:i,children:x(g,"|",{"#comment":{}})}});return c}o="h1,h2,h3,h4,h5,h6,hr,p,div,address,pre,form,table,tbody,thead,tfoot,th,tr,td,li,ol,ul,caption,blockquote,center,dl,dt,dd,dir,fieldset,noscript,menu,isindex,samp,header,footer,article,section,hgroup";o=x(o,",",x(o.toUpperCase()));s=A({Z:"H|K|N|O|P",Y:"X|form|R|Q",ZG:"E|span|width|align|char|charoff|valign",X:"p|T|div|U|W|isindex|fieldset|table",ZF:"E|align|char|charoff|valign",W:"pre|hr|blockquote|address|center|noframes",ZE:"abbr|axis|headers|scope|rowspan|colspan|align|char|charoff|valign|nowrap|bgcolor|width|height",ZD:"[E][S]",U:"ul|ol|dl|menu|dir",ZC:"p|Y|div|U|W|table|br|span|bdo|object|applet|img|map|K|N|Q",T:"h1|h2|h3|h4|h5|h6",ZB:"X|S|Q",S:"R|P",ZA:"a|G|J|M|O|P",R:"a|H|K|N|O",Q:"noscript|P",P:"ins|del|script",O:"input|select|textarea|label|button",N:"M|L",M:"em|strong|dfn|code|q|samp|kbd|var|cite|abbr|acronym",L:"sub|sup",K:"J|I",J:"tt|i|b|u|s|strike",I:"big|small|font|basefont",H:"G|F",G:"br|span|bdo",F:"object|applet|img|map|iframe",E:"A|B|C",D:"accesskey|tabindex|onfocus|onblur",C:"onclick|ondblclick|onmousedown|onmouseup|onmouseover|onmousemove|onmouseout|onkeypress|onkeydown|onkeyup",B:"lang|xml:lang|dir",A:"id|class|style|title"},"script[id|charset|type|language|src|defer|xml:space][]style[B|id|type|media|title|xml:space][]object[E|declare|classid|codebase|data|type|codetype|archive|standby|width|height|usemap|name|tabindex|align|border|hspace|vspace][#|param|Y]param[id|name|value|valuetype|type][]p[E|align][#|S]a[E|D|charset|type|name|href|hreflang|rel|rev|shape|coords|target][#|Z]br[A|clear][]span[E][#|S]bdo[A|C|B][#|S]applet[A|codebase|archive|code|object|alt|name|width|height|align|hspace|vspace][#|param|Y]h1[E|align][#|S]img[E|src|alt|name|longdesc|width|height|usemap|ismap|align|border|hspace|vspace][]map[B|C|A|name][X|form|Q|area]h2[E|align][#|S]iframe[A|longdesc|name|src|frameborder|marginwidth|marginheight|scrolling|align|width|height][#|Y]h3[E|align][#|S]tt[E][#|S]i[E][#|S]b[E][#|S]u[E][#|S]s[E][#|S]strike[E][#|S]big[E][#|S]small[E][#|S]font[A|B|size|color|face][#|S]basefont[id|size|color|face][]em[E][#|S]strong[E][#|S]dfn[E][#|S]code[E][#|S]q[E|cite][#|S]samp[E][#|S]kbd[E][#|S]var[E][#|S]cite[E][#|S]abbr[E][#|S]acronym[E][#|S]sub[E][#|S]sup[E][#|S]input[E|D|type|name|value|checked|disabled|readonly|size|maxlength|src|alt|usemap|onselect|onchange|accept|align][]select[E|name|size|multiple|disabled|tabindex|onfocus|onblur|onchange][optgroup|option]optgroup[E|disabled|label][option]option[E|selected|disabled|label|value][]textarea[E|D|name|rows|cols|disabled|readonly|onselect|onchange][]label[E|for|accesskey|onfocus|onblur][#|S]button[E|D|name|value|type|disabled][#|p|T|div|U|W|table|G|object|applet|img|map|K|N|Q]h4[E|align][#|S]ins[E|cite|datetime][#|Y]h5[E|align][#|S]del[E|cite|datetime][#|Y]h6[E|align][#|S]div[E|align][#|Y]ul[E|type|compact][li]li[E|type|value][#|Y]ol[E|type|compact|start][li]dl[E|compact][dt|dd]dt[E][#|S]dd[E][#|Y]menu[E|compact][li]dir[E|compact][li]pre[E|width|xml:space][#|ZA]hr[E|align|noshade|size|width][]blockquote[E|cite][#|Y]address[E][#|S|p]center[E][#|Y]noframes[E][#|Y]isindex[A|B|prompt][]fieldset[E][#|legend|Y]legend[E|accesskey|align][#|S]table[E|summary|width|border|frame|rules|cellspacing|cellpadding|align|bgcolor][caption|col|colgroup|thead|tfoot|tbody|tr]caption[E|align][#|S]col[ZG][]colgroup[ZG][col]thead[ZF][tr]tr[ZF|bgcolor][th|td]th[E|ZE][#|Y]form[E|action|method|name|enctype|onsubmit|onreset|accept|accept-charset|target][#|X|R|Q]noscript[E][#|Y]td[E|ZE][#|Y]tfoot[ZF][tr]tbody[ZF][tr]area[E|D|shape|coords|href|nohref|alt|target][]base[id|href|target][]body[E|onload|onunload|background|bgcolor|text|link|vlink|alink][#|Y]");q=x("checked,compact,declare,defer,disabled,ismap,multiple,nohref,noresize,noshade,nowrap,readonly,selected,preload,autoplay,loop,controls");t=x("area,base,basefont,br,col,frame,hr,img,input,isindex,link,meta,param,embed,source");u=n.extend(x("td,th,iframe,video,object"),t);z=x("pre,script,style");v=x("colgroup,dd,dt,li,options,p,td,tfoot,th,thead,tr");n.html.Schema=function(b){var f=this,e={},d={},h=[],c;b=b||{};if(b.verify_html===false){b.valid_elements="*[*]"}if(b.valid_styles){c={};p(b.valid_styles,function(l,m){c[m]=n.explode(l)})}function g(l){return new RegExp("^"+l.replace(/([?+*])/g,".$1")+"$")}function k(aq){var ar,aw,ab,af,aa,ax,au,ag,ad,ak,ac,m,an,at,ae,am,ai,av,Z,l,al,ah,ao=/^([#+-])?([^\[\/]+)(?:\/([^\[]+))?(?:\[([^\]]+)\])?$/,aj=/^([!\-])?(\w+::\w+|[^=:<]+)?(?:([=:<])(.*))?$/,ap=/[*?+]/;if(aq){aq=r(aq);if(e["@"]){ai=e["@"].attributes;av=e["@"].attributesOrder}for(ar=0,aw=aq.length;ar<aw;ar++){ax=ao.exec(aq[ar]);if(ax){ae=ax[1];ak=ax[2];am=ax[3];ad=ax[4];an={};at=[];au={attributes:an,attributesOrder:at};if(ae==="#"){au.paddEmpty=true}if(ae==="-"){au.removeEmpty=true}if(ai){for(l in ai){an[l]=ai[l]}at.push.apply(at,av)}if(ad){ad=r(ad,"|");for(ab=0,af=ad.length;ab<af;ab++){ax=aj.exec(ad[ab]);if(ax){ag={};m=ax[1];ac=ax[2].replace(/::/g,":");ae=ax[3];ah=ax[4];if(m==="!"){au.attributesRequired=au.attributesRequired||[];au.attributesRequired.push(ac);ag.required=true}if(m==="-"){delete an[ac];at.splice(n.inArray(at,ac),1);continue}if(ae){if(ae==="="){au.attributesDefault=au.attributesDefault||[];au.attributesDefault.push({name:ac,value:ah});ag.defaultValue=ah}if(ae===":"){au.attributesForced=au.attributesForced||[];au.attributesForced.push({name:ac,value:ah});ag.forcedValue=ah}if(ae==="<"){ag.validValues=x(ah,"?")}}if(ap.test(ac)){au.attributePatterns=au.attributePatterns||[];ag.pattern=g(ac);au.attributePatterns.push(ag)}else{if(!an[ac]){at.push(ac)}an[ac]=ag}}}}if(!ai&&ak=="@"){ai=an;av=at}if(am){au.outputName=ak;e[am]=au}if(ap.test(ak)){au.pattern=g(ak);h.push(au)}else{e[ak]=au}}}}}function i(l){e={};h=[];k(l);p(s,function(C,m){d[m]=C.children})}function a(l){var m=/^(~)?(.+)$/;if(l){p(r(l),function(H){var J=m.exec(H),I=J[1]==="~",G=I?"span":"div",K=J[2];d[K]=d[G];y[K]=G;if(!I){o[K]={}}p(d,function(C,B){if(C[G]){C[K]=C[G]}})})}}function j(l){var m=/^([+\-]?)(\w+)\[([^\]]+)\]$/;if(l){p(r(l),function(F){var G=m.exec(F),I,H;if(G){H=G[1];if(H){I=d[G[2]]}else{I=d[G[2]]={"#comment":{}}}I=d[G[2]];p(r(G[3],"|"),function(B){if(H==="-"){delete I[B]}else{I[B]={}}})}})}}if(!b.valid_elements){p(s,function(l,m){e[m]={attributes:l.attributes,attributesOrder:l.attributesOrder};d[m]=l.children});p(r("strong/b,em/i"),function(l){l=r(l,"/");e[l[1]].outputName=l[0]});e.img.attributesDefault=[{name:"alt",value:""}];p(r("ol,ul,sub,sup,blockquote,span,font,a,table,tbody,tr"),function(l){e[l].removeEmpty=true});p(r("p,h1,h2,h3,h4,h5,h6,th,td,pre,div,address,caption"),function(l){e[l].paddEmpty=true})}else{i(b.valid_elements)}a(b.custom_elements);j(b.valid_children);k(b.extended_valid_elements);j("+ol[ul|ol],+ul[ul|ol]");if(b.invalid_elements){n.each(n.explode(b.invalid_elements),function(l){if(e[l]){delete e[l]}})}f.children=d;f.styles=c;f.getBoolAttrs=function(){return q};f.getBlockElements=function(){return o};f.getShortEndedElements=function(){return t};f.getSelfClosingElements=function(){return v};f.getNonEmptyElements=function(){return u};f.getWhiteSpaceElements=function(){return z};f.isValidChild=function(m,C){var l=d[m];return !!(l&&l[C])};f.getElementRule=function(m){var C=e[m],l;if(C){return C}l=h.length;while(l--){C=h[l];if(C.pattern.test(m)){return C}}};f.getCustomElements=function(){return y};f.addValidElements=k;f.setValidElements=i;f.addCustomElements=a;f.addValidChildren=j};n.html.Schema.boolAttrMap=q;n.html.Schema.blockElementsMap=o})(tinymce);(function(b){b.html.SaxParser=function(h,f){var a=this,g=function(){};h=h||{};a.schema=f=f||new b.html.Schema();if(h.fix_self_closing!==false){h.fix_self_closing=true}b.each("comment cdata text start end pi doctype".split(" "),function(c){if(c){a[c]=h[c]||g}});a.parse=function(af){var ag=this,aq,ak=0,V,an,al=[],ae,O,Z,c,X,am,ah,S,R,ad,Y,ai,Q,aj,T,d,e,i,ab,ao,ap,W,aa=0,U=b.html.Entities.decode,P;function ac(l){var j,k;j=al.length;while(j--){if(al[j].name===l){break}}if(j>=0){for(k=al.length-1;k>=j;k--){l=al[k];if(l.valid){ag.end(l.name)}}al.length=j}}ab=new RegExp("<(?:(?:!--([\\w\\W]*?)-->)|(?:!\\[CDATA\\[([\\w\\W]*?)\\]\\]>)|(?:!DOCTYPE([\\w\\W]*?)>)|(?:\\?([^\\s\\/<>]+) ?([\\w\\W]*?)[?/]>)|(?:\\/([^>]+)>)|(?:([^\\s\\/<>]+)\\s*((?:[^\"'>]+(?:(?:\"[^\"]*\")|(?:'[^']*')|[^>]*))*)>))","g");ao=/([\w:\-]+)(?:\s*=\s*(?:(?:\"((?:\\.|[^\"])*)\")|(?:\'((?:\\.|[^\'])*)\')|([^>\s]+)))?/g;ap={script:/<\/script[^>]*>/gi,style:/<\/style[^>]*>/gi,noscript:/<\/noscript[^>]*>/gi};X=f.getShortEndedElements();i=f.getSelfClosingElements();am=f.getBoolAttrs();S=h.validate;P=h.fix_self_closing;while(aq=ab.exec(af)){if(ak<aq.index){ag.text(U(af.substr(ak,aq.index-ak)))}if(V=aq[6]){ac(V.toLowerCase())}else{if(V=aq[7]){V=V.toLowerCase();ah=V in X;if(P&&i[V]&&al.length>0&&al[al.length-1].name===V){ac(V)}if(!S||(R=f.getElementRule(V))){ad=true;if(S){Q=R.attributes;aj=R.attributePatterns}if(ai=aq[8]){ae=[];ae.map={};ai.replace(ao,function(o,p,k,l,m){var j,n;p=p.toLowerCase();k=p in am?p:U(k||l||m||"");if(S&&p.indexOf("data-")!==0){j=Q[p];if(!j&&aj){n=aj.length;while(n--){j=aj[n];if(j.pattern.test(p)){break}}if(n===-1){j=null}}if(!j){return}if(j.validValues&&!(k in j.validValues)){return}}ae.map[p]=k;ae.push({name:p,value:k})})}else{ae=[];ae.map={}}if(S){T=R.attributesRequired;d=R.attributesDefault;e=R.attributesForced;if(e){O=e.length;while(O--){Y=e[O];c=Y.name;W=Y.value;if(W==="{$uid}"){W="mce_"+aa++}ae.map[c]=W;ae.push({name:c,value:W})}}if(d){O=d.length;while(O--){Y=d[O];c=Y.name;if(!(c in ae.map)){W=Y.value;if(W==="{$uid}"){W="mce_"+aa++}ae.map[c]=W;ae.push({name:c,value:W})}}}if(T){O=T.length;while(O--){if(T[O] in ae.map){break}}if(O===-1){ad=false}}if(ae.map["data-mce-bogus"]){ad=false}}if(ad){ag.start(V,ae,ah)}}else{ad=false}if(an=ap[V]){an.lastIndex=ak=aq.index+aq[0].length;if(aq=an.exec(af)){if(ad){Z=af.substr(ak,aq.index-ak)}ak=aq.index+aq[0].length}else{Z=af.substr(ak);ak=af.length}if(ad&&Z.length>0){ag.text(Z,true)}if(ad){ag.end(V)}ab.lastIndex=ak;continue}if(!ah){if(!ai||ai.indexOf("/")!=ai.length-1){al.push({name:V,valid:ad})}else{if(ad){ag.end(V)}}}}else{if(V=aq[1]){ag.comment(V)}else{if(V=aq[2]){ag.cdata(V)}else{if(V=aq[3]){ag.doctype(V)}else{if(V=aq[4]){ag.pi(V,aq[5])}}}}}}ak=aq.index+aq[0].length}if(ak<af.length){ag.text(U(af.substr(ak)))}for(O=al.length-1;O>=0;O--){V=al[O];if(V.valid){ag.end(V.name)}}}}})(tinymce);(function(i){var j=/^[ \t\r\n]*$/,h={"#text":3,"#comment":8,"#cdata":4,"#pi":7,"#doctype":10,"#document-fragment":11};function g(b,a,c){var d,e,n=c?"lastChild":"firstChild",m=c?"prev":"next";if(b[n]){return b[n]}if(b!==a){d=b[m];if(d){return d}for(e=b.parent;e&&e!==a;e=e.parent){d=e[m];if(d){return d}}}}function f(b,a){this.name=b;this.type=a;if(a===1){this.attributes=[];this.attributes.map={}}}i.extend(f.prototype,{replace:function(a){var b=this;if(a.parent){a.remove()}b.insert(a,b);b.remove();return b},attr:function(d,a){var m=this,e,c,b;if(typeof d!=="string"){for(c in d){m.attr(c,d[c])}return m}if(e=m.attributes){if(a!==b){if(a===null){if(d in e.map){delete e.map[d];c=e.length;while(c--){if(e[c].name===d){e=e.splice(c,1);return m}}}return m}if(d in e.map){c=e.length;while(c--){if(e[c].name===d){e[c].value=a;break}}}else{e.push({name:d,value:a})}e.map[d]=a;return m}else{return e.map[d]}}},clone:function(){var e=this,o=new f(e.name,e.type),d,l,a,c,b;if(a=e.attributes){b=[];b.map={};for(d=0,l=a.length;d<l;d++){c=a[d];if(c.name!=="id"){b[b.length]={name:c.name,value:c.value};b.map[c.name]=c.value}}o.attributes=b}o.value=e.value;o.shortEnded=e.shortEnded;return o},wrap:function(a){var b=this;b.parent.insert(a,b);a.append(b);return b},unwrap:function(){var c=this,a,b;for(a=c.firstChild;a;){b=a.next;c.insert(a,c,true);a=b}c.remove()},remove:function(){var d=this,b=d.parent,c=d.next,a=d.prev;if(b){if(b.firstChild===d){b.firstChild=c;if(c){c.prev=null}}else{a.next=c}if(b.lastChild===d){b.lastChild=a;if(a){a.next=null}}else{c.prev=a}d.parent=d.next=d.prev=null}return d},append:function(a){var c=this,b;if(a.parent){a.remove()}b=c.lastChild;if(b){b.next=a;a.prev=b;c.lastChild=a}else{c.lastChild=c.firstChild=a}a.parent=c;return a},insert:function(b,d,a){var c;if(b.parent){b.remove()}c=d.parent||this;if(a){if(d===c.firstChild){c.firstChild=b}else{d.prev.next=b}b.prev=d.prev;b.next=d;d.prev=b}else{if(d===c.lastChild){c.lastChild=b}else{d.next.prev=b}b.next=d.next;b.prev=d;d.next=b}b.parent=c;return b},getAll:function(c){var d=this,b,a=[];for(b=d.firstChild;b;b=g(b,d)){if(b.name===c){a.push(b)}}return a},empty:function(){var c=this,d,b,a;if(c.firstChild){d=[];for(a=c.firstChild;a;a=g(a,c)){d.push(a)}b=d.length;while(b--){a=d[b];a.parent=a.firstChild=a.lastChild=a.next=a.prev=null}}c.firstChild=c.lastChild=null;return c},isEmpty:function(a){var e=this,b=e.firstChild,c,d;if(b){do{if(b.type===1){if(b.attributes.map["data-mce-bogus"]){continue}if(a[b.name]){return false}c=b.attributes.length;while(c--){d=b.attributes[c].name;if(d==="name"||d.indexOf("data-")===0){return false}}}if((b.type===3&&!j.test(b.value))){return false}}while(b=g(b,e))}return true},walk:function(a){return g(this,null,a)}});i.extend(f,{create:function(c,d){var a,b;a=new f(c,h[c]||1);if(d){for(b in d){a.attr(b,d[b])}}return a}});i.html.Node=f})(tinymce);(function(c){var d=c.html.Node;c.html.DomParser=function(l,k){var m=this,n={},o=[],b={},p={};l=l||{};l.validate="validate" in l?l.validate:true;l.root_name=l.root_name||"body";m.schema=k=k||new c.html.Schema();function a(j){var h,g,E,F,C,i,f,A,H,G,B,I,D,e;I=c.makeMap("tr,td,th,tbody,thead,tfoot,table");B=k.getNonEmptyElements();for(h=0;h<j.length;h++){g=j[h];if(!g.parent){continue}F=[g];for(E=g.parent;E&&!k.isValidChild(E.name,g.name)&&!I[E.name];E=E.parent){F.push(E)}if(E&&F.length>1){F.reverse();C=i=m.filterNode(F[0].clone());for(H=0;H<F.length-1;H++){if(k.isValidChild(i.name,F[H].name)){f=m.filterNode(F[H].clone());i.append(f)}else{f=i}for(A=F[H].firstChild;A&&A!=F[H+1];){e=A.next;f.append(A);A=e}i=f}if(!C.isEmpty(B)){E.insert(C,F[0],true);E.insert(g,C)}else{E.insert(g,F[0],true)}E=F[0];if(E.isEmpty(B)||E.firstChild===E.lastChild&&E.firstChild.name==="br"){E.empty().remove()}}else{if(g.parent){if(g.name==="li"){D=g.prev;if(D&&(D.name==="ul"||D.name==="ul")){D.append(g);continue}D=g.next;if(D&&(D.name==="ul"||D.name==="ul")){D.insert(g,D.firstChild,true);continue}g.wrap(m.filterNode(new d("ul",1)));continue}if(k.isValidChild(g.parent.name,"div")&&k.isValidChild("div",g.name)){g.wrap(m.filterNode(new d("div",1)))}else{if(g.name==="style"||g.name==="script"){g.empty().remove()}else{g.unwrap()}}}}}}m.filterNode=function(e){var f,g,h;if(g in n){h=b[g];if(h){h.push(e)}else{b[g]=[e]}}f=o.length;while(f--){g=o[f].name;if(g in e.attributes.map){h=p[g];if(h){h.push(e)}else{p[g]=[e]}}}return e};m.addNodeFilter=function(f,e){c.each(c.explode(f),function(g){var h=n[g];if(!h){n[g]=h=[]}h.push(e)})};m.addAttributeFilter=function(f,e){c.each(c.explode(f),function(g){var h;for(h=0;h<o.length;h++){if(o[h].name===g){o[h].callbacks.push(e);return}}o.push({name:g,callbacks:[e]})})};m.parse=function(N,ac){var ab,L,Z,f,U,X,j,V,Q,e,h,aa,T,g=[],R,ad,S,Y,P,W;ac=ac||{};b={};p={};aa=c.extend(c.makeMap("script,style,head,html,body,title,meta,param"),k.getBlockElements());P=k.getNonEmptyElements();Y=k.children;h=l.validate;W="forced_root_block" in ac?ac.forced_root_block:l.forced_root_block;S=k.getWhiteSpaceElements();T=/^[ \t\r\n]+/;R=/[ \t\r\n]+$/;ad=/[ \t\r\n]+/g;function O(){var q=L.firstChild,r,s;while(q){r=q.next;if(q.type==3||(q.type==1&&q.name!=="p"&&!aa[q.name]&&!q.attr("data-mce-type"))){if(!s){s=i(W,1);L.insert(s,q);s.append(q)}else{s.append(q)}}else{s=null}q=r}}function i(r,q){var t=new d(r,q),s;if(r in n){s=b[r];if(s){s.push(t)}else{b[r]=[t]}}return t}function M(t){var s,r,q;for(s=t.prev;s&&s.type===3;){r=s.value.replace(R,"");if(r.length>0){s.value=r;s=s.prev}else{q=s.prev;s.remove();s=q}}}ab=new c.html.SaxParser({validate:h,fix_self_closing:!h,cdata:function(q){Z.append(i("#cdata",4)).value=q},text:function(s,r){var q;if(!S[Z.name]){s=s.replace(ad," ");if(Z.lastChild&&aa[Z.lastChild.name]){s=s.replace(T,"")}}if(s.length!==0){q=i("#text",3);q.raw=!!r;Z.append(q).value=s}},comment:function(q){Z.append(i("#comment",8)).value=q},pi:function(r,q){Z.append(i(r,7)).value=q;M(Z)},doctype:function(q){var r;r=Z.append(i("#doctype",10));r.value=q;M(Z)},start:function(r,s,A){var u,y,z,B,x,q,t,v;z=h?k.getElementRule(r):{};if(z){u=i(z.outputName||r,1);u.attributes=s;u.shortEnded=A;Z.append(u);v=Y[Z.name];if(v&&Y[u.name]&&!v[u.name]){g.push(u)}y=o.length;while(y--){x=o[y].name;if(x in s.map){Q=p[x];if(Q){Q.push(u)}else{p[x]=[u]}}}if(aa[r]){M(u)}if(!A){Z=u}}},end:function(r){var s,v,t,q,u;v=h?k.getElementRule(r):{};if(v){if(aa[r]){if(!S[Z.name]){for(s=Z.firstChild;s&&s.type===3;){t=s.value.replace(T,"");if(t.length>0){s.value=t;s=s.next}else{q=s.next;s.remove();s=q}}for(s=Z.lastChild;s&&s.type===3;){t=s.value.replace(R,"");if(t.length>0){s.value=t;s=s.prev}else{q=s.prev;s.remove();s=q}}}s=Z.prev;if(s&&s.type===3){t=s.value.replace(T,"");if(t.length>0){s.value=t}else{s.remove()}}}if(v.removeEmpty||v.paddEmpty){if(Z.isEmpty(P)){if(v.paddEmpty){Z.empty().append(new d("#text","3")).value="\u00a0"}else{if(!Z.attributes.map.name){u=Z.parent;Z.empty().remove();Z=u;return}}}}Z=Z.parent}}},k);L=Z=new d(ac.context||l.root_name,11);ab.parse(N);if(h&&g.length){if(!ac.context){a(g)}else{ac.invalid=true}}if(W&&L.name=="body"){O()}if(!ac.invalid){for(e in b){Q=n[e];f=b[e];j=f.length;while(j--){if(!f[j].parent){f.splice(j,1)}}for(U=0,X=Q.length;U<X;U++){Q[U](f,e,ac)}}for(U=0,X=o.length;U<X;U++){Q=o[U];if(Q.name in p){f=p[Q.name];j=f.length;while(j--){if(!f[j].parent){f.splice(j,1)}}for(j=0,V=Q.callbacks.length;j<V;j++){Q.callbacks[j](f,Q.name,ac)}}}}return L};if(l.remove_trailing_brs){m.addNodeFilter("br",function(i,j){var e,f=i.length,h,x=k.getBlockElements(),v=k.getNonEmptyElements(),z,g,y;x.body=1;for(e=0;e<f;e++){h=i[e];z=h.parent;if(x[h.parent.name]&&h===z.lastChild){g=h.prev;while(g){y=g.name;if(y!=="span"||g.attr("data-mce-type")!=="bookmark"){if(y!=="br"){break}if(y==="br"){h=null;break}}g=g.prev}if(h){h.remove();if(z.isEmpty(v)){elementRule=k.getElementRule(z.name);if(elementRule.removeEmpty){z.remove()}else{if(elementRule.paddEmpty){z.empty().append(new c.html.Node("#text",3)).value="\u00a0"}}}}}}})}}})(tinymce);tinymce.html.Writer=function(l){var n=[],i,h,m,k,j;l=l||{};i=l.indent;h=tinymce.makeMap(l.indent_before||"");m=tinymce.makeMap(l.indent_after||"");k=tinymce.html.Entities.getEncodeFunc(l.entity_encoding||"raw",l.entities);j=l.element_format=="html";return{start:function(a,b,e){var g,c,d,f;if(i&&h[a]&&n.length>0){f=n[n.length-1];if(f.length>0&&f!=="\n"){n.push("\n")}}n.push("<",a);if(b){for(g=0,c=b.length;g<c;g++){d=b[g];n.push(" ",d.name,'="',k(d.value,true),'"')}}if(!e||j){n[n.length]=">"}else{n[n.length]=" />"}if(e&&i&&m[a]&&n.length>0){f=n[n.length-1];if(f.length>0&&f!=="\n"){n.push("\n")}}},end:function(b){var a;n.push("</",b,">");if(i&&m[b]&&n.length>0){a=n[n.length-1];if(a.length>0&&a!=="\n"){n.push("\n")}}},text:function(a,b){if(a.length>0){n[n.length]=b?a:k(a)}},cdata:function(a){n.push("<![CDATA[",a,"]]>")},comment:function(a){n.push("<!--",a,"-->")},pi:function(b,a){if(a){n.push("<?",b," ",a,"?>")}else{n.push("<?",b,"?>")}if(i){n.push("\n")}},doctype:function(a){n.push("<!DOCTYPE",a,">",i?"\n":"")},reset:function(){n.length=0},getContent:function(){return n.join("").replace(/\n$/,"")}}};(function(b){b.html.Serializer=function(h,g){var a=this,f=new b.html.Writer(h);h=h||{};h.validate="validate" in h?h.validate:true;a.schema=g=g||new b.html.Schema();a.writer=f;a.serialize=function(d){var e,c;c=h.validate;e={3:function(i,l){f.text(i.value,i.raw)},8:function(i){f.comment(i.value)},7:function(i){f.pi(i.name,i.value)},10:function(i){f.doctype(i.value)},4:function(i){f.cdata(i.value)},11:function(i){if((i=i.firstChild)){do{j(i)}while(i=i.next)}}};f.reset();function j(A){var D=e[A.type],B,x,E,i,v,C,y,z,l;if(!D){B=A.name;x=A.shortEnded;E=A.attributes;if(c&&E&&E.length>1){C=[];C.map={};l=g.getElementRule(A.name);for(y=0,z=l.attributesOrder.length;y<z;y++){i=l.attributesOrder[y];if(i in E.map){v=E.map[i];C.map[i]=v;C.push({name:i,value:v})}}for(y=0,z=E.length;y<z;y++){i=E[y].name;if(!(i in C.map)){v=E.map[i];C.map[i]=v;C.push({name:i,value:v})}}E=C}f.start(A.name,E,x);if(!x){if((A=A.firstChild)){do{j(A)}while(A=A.next)}f.end(B)}}else{D(A)}}if(d.type==1&&!h.inner){j(d)}else{e[11](d)}return f.getContent()}}})(tinymce);(function(k){var m=k.each,n=k.is,o=k.isWebKit,q=k.isIE,p=k.html.Entities,r=/^([a-z0-9],?)+$/i,l=k.html.Schema.blockElementsMap,j=/^[ \t\r\n]*$/;k.create("tinymce.dom.DOMUtils",{doc:null,root:null,files:null,pixelStyles:/^(top|left|bottom|right|width|height|borderWidth)$/,props:{"for":"htmlFor","class":"className",className:"className",checked:"checked",disabled:"disabled",maxlength:"maxLength",readonly:"readOnly",selected:"selected",value:"value",id:"id",name:"name",type:"type"},DOMUtils:function(e,a){var b=this,d,c;b.doc=e;b.win=window;b.files={};b.cssFlicker=false;b.counter=0;b.stdMode=!k.isIE||e.documentMode>=8;b.boxModel=!k.isIE||e.compatMode=="CSS1Compat"||b.stdMode;b.hasOuterHTML="outerHTML" in e.createElement("a");b.settings=a=k.extend({keep_values:false,hex_colors:1},a);b.schema=a.schema;b.styles=new k.html.Styles({url_converter:a.url_converter,url_converter_scope:a.url_converter_scope},a.schema);if(k.isIE6){try{e.execCommand("BackgroundImageCache",false,true)}catch(f){b.cssFlicker=true}}if(q&&a.schema){("abbr article aside audio canvas details figcaption figure footer header hgroup mark menu meter nav output progress section summary time video").replace(/\w+/g,function(g){e.createElement(g)});for(c in a.schema.getCustomElements()){e.createElement(c)}}k.addUnload(b.destroy,b)},getRoot:function(){var b=this,a=b.settings;return(a&&b.get(a.root_element))||b.doc.body},getViewPort:function(b){var a,c;b=!b?this.win:b;a=b.document;c=this.boxModel?a.documentElement:a.body;return{x:b.pageXOffset||c.scrollLeft,y:b.pageYOffset||c.scrollTop,w:b.innerWidth||c.clientWidth,h:b.innerHeight||c.clientHeight}},getRect:function(a){var b,d=this,c;a=d.get(a);b=d.getPos(a);c=d.getSize(a);return{x:b.x,y:b.y,w:c.w,h:c.h}},getSize:function(a){var c=this,d,b;a=c.get(a);d=c.getStyle(a,"width");b=c.getStyle(a,"height");if(d.indexOf("px")===-1){d=0}if(b.indexOf("px")===-1){b=0}return{w:parseInt(d)||a.offsetWidth||a.clientWidth,h:parseInt(b)||a.offsetHeight||a.clientHeight}},getParent:function(a,b,c){return this.getParents(a,b,c,false)},getParents:function(e,h,b,f){var c=this,d,a=c.settings,g=[];e=c.get(e);f=f===undefined;if(a.strict_root){b=b||c.getRoot()}if(n(h,"string")){d=h;if(h==="*"){h=function(i){return i.nodeType==1}}else{h=function(i){return c.is(i,d)}}}while(e){if(e==b||!e.nodeType||e.nodeType===9){break}if(!h||h(e)){if(f){g.push(e)}else{return e}}e=e.parentNode}return f?g:null},get:function(b){var a;if(b&&this.doc&&typeof(b)=="string"){a=b;b=this.doc.getElementById(b);if(b&&b.id!==a){return this.doc.getElementsByName(a)[1]}}return b},getNext:function(a,b){return this._findSib(a,b,"nextSibling")},getPrev:function(a,b){return this._findSib(a,b,"previousSibling")},add:function(a,e,d,b,f){var c=this;return this.run(a,function(g){var h,i;h=n(e,"string")?c.doc.createElement(e):e;c.setAttribs(h,d);if(b){if(b.nodeType){h.appendChild(b)}else{c.setHTML(h,b)}}return !f?g.appendChild(h):h})},create:function(a,c,b){return this.add(this.doc.createElement(a),a,c,b,1)},createHTML:function(d,c,f){var e="",a=this,b;e+="<"+d;for(b in c){if(c.hasOwnProperty(b)){e+=" "+b+'="'+a.encode(c[b])+'"'}}if(typeof(f)!="undefined"){return e+">"+f+"</"+d+">"}return e+" />"},remove:function(b,a){return this.run(b,function(c){var e,d=c.parentNode;if(!d){return null}if(a){while(e=c.firstChild){if(!k.isIE||e.nodeType!==3||e.nodeValue){d.insertBefore(e,c)}else{c.removeChild(e)}}}return d.removeChild(c)})},setStyle:function(a,d,c){var b=this;return b.run(a,function(e){var f,g;f=e.style;d=d.replace(/-(\D)/g,function(h,i){return i.toUpperCase()});if(b.pixelStyles.test(d)&&(k.is(c,"number")||/^[\-0-9\.]+$/.test(c))){c+="px"}switch(d){case"opacity":if(q){f.filter=c===""?"":"alpha(opacity="+(c*100)+")";if(!a.currentStyle||!a.currentStyle.hasLayout){f.display="inline-block"}}f[d]=f["-moz-opacity"]=f["-khtml-opacity"]=c||"";break;case"float":q?f.styleFloat=c:f.cssFloat=c;break;default:f[d]=c||""}if(b.settings.update_styles){b.setAttrib(e,"data-mce-style")}})},getStyle:function(a,d,b){a=this.get(a);if(!a){return}if(this.doc.defaultView&&b){d=d.replace(/[A-Z]/g,function(e){return"-"+e});try{return this.doc.defaultView.getComputedStyle(a,null).getPropertyValue(d)}catch(c){return null}}d=d.replace(/-(\D)/g,function(e,f){return f.toUpperCase()});if(d=="float"){d=q?"styleFloat":"cssFloat"}if(a.currentStyle&&b){return a.currentStyle[d]}return a.style?a.style[d]:undefined},setStyles:function(a,e){var c=this,b=c.settings,d;d=b.update_styles;b.update_styles=0;m(e,function(g,f){c.setStyle(a,f,g)});b.update_styles=d;if(b.update_styles){c.setAttrib(a,b.cssText)}},removeAllAttribs:function(a){return this.run(a,function(b){var c,d=b.attributes;for(c=d.length-1;c>=0;c--){b.removeAttributeNode(d.item(c))}})},setAttrib:function(b,a,d){var c=this;if(!b||!a){return}if(c.settings.strict){a=a.toLowerCase()}return this.run(b,function(e){var f=c.settings;switch(a){case"style":if(!n(d,"string")){m(d,function(h,g){c.setStyle(e,g,h)});return}if(f.keep_values){if(d&&!c._isRes(d)){e.setAttribute("data-mce-style",d,2)}else{e.removeAttribute("data-mce-style",2)}}e.style.cssText=d;break;case"class":e.className=d||"";break;case"src":case"href":if(f.keep_values){if(f.url_converter){d=f.url_converter.call(f.url_converter_scope||c,d,a,e)}c.setAttrib(e,"data-mce-"+a,d,2)}break;case"shape":e.setAttribute("data-mce-style",d);break}if(n(d)&&d!==null&&d.length!==0){e.setAttribute(a,""+d,2)}else{e.removeAttribute(a,2)}})},setAttribs:function(b,a){var c=this;return this.run(b,function(d){m(a,function(f,e){c.setAttrib(d,e,f)})})},getAttrib:function(f,e,b){var d,c=this,a;f=c.get(f);if(!f||f.nodeType!==1){return b===a?false:b}if(!n(b)){b=""}if(/^(src|href|style|coords|shape)$/.test(e)){d=f.getAttribute("data-mce-"+e);if(d){return d}}if(q&&c.props[e]){d=f[c.props[e]];d=d&&d.nodeValue?d.nodeValue:d}if(!d){d=f.getAttribute(e,2)}if(/^(checked|compact|declare|defer|disabled|ismap|multiple|nohref|noshade|nowrap|readonly|selected)$/.test(e)){if(f[c.props[e]]===true&&d===""){return e}return d?e:""}if(f.nodeName==="FORM"&&f.getAttributeNode(e)){return f.getAttributeNode(e).nodeValue}if(e==="style"){d=d||f.style.cssText;if(d){d=c.serializeStyle(c.parseStyle(d),f.nodeName);if(c.settings.keep_values&&!c._isRes(d)){f.setAttribute("data-mce-style",d)}}}if(o&&e==="class"&&d){d=d.replace(/(apple|webkit)\-[a-z\-]+/gi,"")}if(q){switch(e){case"rowspan":case"colspan":if(d===1){d=""}break;case"size":if(d==="+0"||d===20||d===0){d=""}break;case"width":case"height":case"vspace":case"checked":case"disabled":case"readonly":if(d===0){d=""}break;case"hspace":if(d===-1){d=""}break;case"maxlength":case"tabindex":if(d===32768||d===2147483647||d==="32768"){d=""}break;case"multiple":case"compact":case"noshade":case"nowrap":if(d===65535){return e}return b;case"shape":d=d.toLowerCase();break;default:if(e.indexOf("on")===0&&d){d=k._replace(/^function\s+\w+\(\)\s+\{\s+(.*)\s+\}$/,"$1",""+d)}}}return(d!==a&&d!==null&&d!=="")?""+d:b},getPos:function(e,a){var c=this,d=0,f=0,h,g=c.doc,b;e=c.get(e);a=a||g.body;if(e){if(e.getBoundingClientRect){e=e.getBoundingClientRect();h=c.boxModel?g.documentElement:g.body;d=e.left+(g.documentElement.scrollLeft||g.body.scrollLeft)-h.clientTop;f=e.top+(g.documentElement.scrollTop||g.body.scrollTop)-h.clientLeft;return{x:d,y:f}}b=e;while(b&&b!=a&&b.nodeType){d+=b.offsetLeft||0;f+=b.offsetTop||0;b=b.offsetParent}b=e.parentNode;while(b&&b!=a&&b.nodeType){d-=b.scrollLeft||0;f-=b.scrollTop||0;b=b.parentNode}}return{x:d,y:f}},parseStyle:function(a){return this.styles.parse(a)},serializeStyle:function(a,b){return this.styles.serialize(a,b)},loadCSS:function(d){var b=this,a=b.doc,c;if(!d){d=""}c=b.select("head")[0];m(d.split(","),function(f){var e;if(b.files[f]){return}b.files[f]=true;e=b.create("link",{rel:"stylesheet",href:k._addVer(f)});if(q&&a.documentMode&&a.recalc){e.onload=function(){if(a.recalc){a.recalc()}e.onload=null}}c.appendChild(e)})},addClass:function(b,a){return this.run(b,function(d){var c;if(!a){return 0}if(this.hasClass(d,a)){return d.className}c=this.removeClass(d,a);return d.className=(c!=""?(c+" "):"")+a})},removeClass:function(b,a){var d=this,c;return d.run(b,function(e){var f;if(d.hasClass(e,a)){if(!c){c=new RegExp("(^|\\s+)"+a+"(\\s+|$)","g")}f=e.className.replace(c," ");f=k.trim(f!=" "?f:"");e.className=f;if(!f){e.removeAttribute("class");e.removeAttribute("className")}return f}return e.className})},hasClass:function(a,b){a=this.get(a);if(!a||!b){return false}return(" "+a.className+" ").indexOf(" "+b+" ")!==-1},show:function(a){return this.setStyle(a,"display","block")},hide:function(a){return this.setStyle(a,"display","none")},isHidden:function(a){a=this.get(a);return !a||a.style.display=="none"||this.getStyle(a,"display")=="none"},uniqueId:function(a){return(!a?"mce_":a)+(this.counter++)},setHTML:function(a,b){var c=this;return c.run(a,function(e){if(q){while(e.firstChild){e.removeChild(e.firstChild)}try{e.innerHTML="<br />"+b;e.removeChild(e.firstChild)}catch(d){e=c.create("div");e.innerHTML="<br />"+b;m(e.childNodes,function(f,g){if(g){e.appendChild(f)}})}}else{e.innerHTML=b}return b})},getOuterHTML:function(a){var b,c=this;a=c.get(a);if(!a){return null}if(a.nodeType===1&&c.hasOuterHTML){return a.outerHTML}b=(a.ownerDocument||c.doc).createElement("body");b.appendChild(a.cloneNode(true));return b.innerHTML},setOuterHTML:function(a,c,e){var d=this;function b(i,t,g){var f,h;h=g.createElement("body");h.innerHTML=t;f=h.lastChild;while(f){d.insertAfter(f.cloneNode(true),i);f=f.previousSibling}d.remove(i)}return this.run(a,function(f){f=d.get(f);if(f.nodeType==1){e=e||f.ownerDocument||d.doc;if(q){try{if(q&&f.nodeType==1){f.outerHTML=c}else{b(f,c,e)}}catch(g){b(f,c,e)}}else{b(f,c,e)}}})},decode:p.decode,encode:p.encodeAllRaw,insertAfter:function(b,a){a=this.get(a);return this.run(b,function(c){var d,e;d=a.parentNode;e=a.nextSibling;if(e){d.insertBefore(c,e)}else{d.appendChild(c)}return c})},isBlock:function(a){var b=a.nodeType;if(b){return !!(b===1&&l[a.nodeName])}return !!l[a]},replace:function(d,a,c){var b=this;if(n(a,"array")){d=d.cloneNode(true)}return b.run(a,function(e){if(c){m(k.grep(e.childNodes),function(f){d.appendChild(f)})}return e.parentNode.replaceChild(d,e)})},rename:function(a,d){var b=this,c;if(a.nodeName!=d.toUpperCase()){c=b.create(d);m(b.getAttribs(a),function(e){b.setAttrib(c,e.nodeName,b.getAttrib(a,e.nodeName))});b.replace(c,a,1)}return c||a},findCommonAncestor:function(b,d){var a=b,c;while(a){c=d;while(c&&a!=c){c=c.parentNode}if(a==c){break}a=a.parentNode}if(!a&&b.ownerDocument){return b.ownerDocument.documentElement}return a},toHex:function(c){var a=/^\s*rgb\s*?\(\s*?([0-9]+)\s*?,\s*?([0-9]+)\s*?,\s*?([0-9]+)\s*?\)\s*$/i.exec(c);function b(d){d=parseInt(d).toString(16);return d.length>1?d:"0"+d}if(a){c="#"+b(a[1])+b(a[2])+b(a[3]);return c}return c},getClasses:function(){var h=this,d=[],a,g={},f=h.settings.class_filter,b;if(h.classes){return h.classes}function e(i){m(i.imports,function(t){e(t)});m(i.cssRules||i.rules,function(t){switch(t.type||1){case 1:if(t.selectorText){m(t.selectorText.split(","),function(s){s=s.replace(/^\s*|\s*$|^\s\./g,"");if(/\.mce/.test(s)||!/\.[\w\-]+$/.test(s)){return}b=s;s=k._replace(/.*\.([a-z0-9_\-]+).*/i,"$1",s);if(f&&!(s=f(s,b))){return}if(!g[s]){d.push({"class":s});g[s]=1}})}break;case 3:e(t.styleSheet);break}})}try{m(h.doc.styleSheets,e)}catch(c){}if(d.length>0){h.classes=d}return d},run:function(a,b,c){var d=this,e;if(d.doc&&typeof(a)==="string"){a=d.get(a)}if(!a){return false}c=c||this;if(!a.nodeType&&(a.length||a.length===0)){e=[];m(a,function(f,g){if(f){if(typeof(f)=="string"){f=d.doc.getElementById(f)}e.push(b.call(c,f,g))}});return e}return b.call(c,a)},getAttribs:function(a){var b;a=this.get(a);if(!a){return[]}if(q){b=[];if(a.nodeName=="OBJECT"){return a.attributes}if(a.nodeName==="OPTION"&&this.getAttrib(a,"selected")){b.push({specified:1,nodeName:"selected"})}a.cloneNode(false).outerHTML.replace(/<\/?[\w:\-]+ ?|=[\"][^\"]+\"|=\'[^\']+\'|=[\w\-]+|>/gi,"").replace(/[\w:\-]+/gi,function(c){b.push({specified:1,nodeName:c})});return b}return a.attributes},isEmpty:function(g,f){var c=this,a,d,h,e,b;g=g.firstChild;if(g){e=new k.dom.TreeWalker(g);f=f||c.schema?c.schema.getNonEmptyElements():null;do{h=g.nodeType;if(h===1){if(g.getAttribute("data-mce-bogus")){continue}if(f&&f[g.nodeName.toLowerCase()]){return false}d=c.getAttribs(g);a=g.attributes.length;while(a--){b=g.attributes[a].nodeName;if(b==="name"||b==="data-mce-bookmark"){return false}}}if((h===3&&!j.test(g.nodeValue))){return false}}while(g=e.next())}return true},destroy:function(a){var b=this;if(b.events){b.events.destroy()}b.win=b.doc=b.root=b.events=null;if(!a){k.removeUnload(b.destroy)}},createRng:function(){var a=this.doc;return a.createRange?a.createRange():new k.dom.Range(this)},nodeIndex:function(f,e){var d=0,b,a,c;if(f){for(b=f.nodeType,f=f.previousSibling,a=f;f;f=f.previousSibling){c=f.nodeType;if(e&&c==3){if(c==b||!f.nodeValue.length){continue}}d++;b=c}}return d},split:function(d,e,a){var i=this,h=i.createRng(),c,f,b;function g(s){var y,z=s.childNodes,x=s.nodeType;if(x==1&&s.getAttribute("data-mce-type")=="bookmark"){return}for(y=z.length-1;y>=0;y--){g(z[y])}if(x!=9){if(x==3&&s.nodeValue.length>0){if(!i.isBlock(s.parentNode)||k.trim(s.nodeValue).length>0){return}}else{if(x==1){z=s.childNodes;if(z.length==1&&z[0]&&z[0].nodeType==1&&z[0].getAttribute("data-mce-type")=="bookmark"){s.parentNode.insertBefore(z[0],s)}if(z.length||/^(br|hr|input|img)$/i.test(s.nodeName)){return}}}i.remove(s)}return s}if(d&&e){h.setStart(d.parentNode,i.nodeIndex(d));h.setEnd(e.parentNode,i.nodeIndex(e));c=h.extractContents();h=i.createRng();h.setStart(e.parentNode,i.nodeIndex(e)+1);h.setEnd(d.parentNode,i.nodeIndex(d)+1);f=h.extractContents();b=d.parentNode;b.insertBefore(g(c),d);if(a){b.replaceChild(a,e)}else{b.insertBefore(e,d)}b.insertBefore(g(f),d);i.remove(d);return a||e}},bind:function(e,d,a,b){var c=this;if(!c.events){c.events=new k.dom.EventUtils()}return c.events.add(e,d,a,b||this)},unbind:function(a,d,b){var c=this;if(!c.events){c.events=new k.dom.EventUtils()}return c.events.remove(a,d,b)},_findSib:function(a,d,c){var b=this,e=d;if(a){if(n(e,"string")){e=function(f){return b.is(f,d)}}for(a=a[c];a;a=a[c]){if(e(a)){return a}}}return null},_isRes:function(a){return/^(top|left|bottom|right|width|height)/i.test(a)||/;\s*(top|left|bottom|right|width|height)/i.test(a)}});k.DOM=new k.dom.DOMUtils(document,{process_html:0})})(tinymce);(function(d){function c(aJ){var Z=this,aH=aJ.doc,t=0,ai=1,aC=2,aj=true,V=false,a="startOffset",aE="startContainer",X="endContainer",an="endOffset",aB=tinymce.extend,ay=aJ.nodeIndex;aB(Z,{startContainer:aH,startOffset:0,endContainer:aH,endOffset:0,collapsed:aj,commonAncestorContainer:aH,START_TO_START:0,START_TO_END:1,END_TO_END:2,END_TO_START:3,setStart:av,setEnd:at,setStartBefore:aF,setStartAfter:ae,setEndBefore:ad,setEndAfter:ar,collapse:am,selectNode:ap,selectNodeContents:ah,compareBoundaryPoints:aq,deleteContents:aw,extractContents:af,cloneContents:aI,insertNode:ak,surroundContents:aa,cloneRange:ac});function av(e,f){al(aj,e,f)}function at(e,f){al(V,e,f)}function aF(e){av(e.parentNode,ay(e))}function ae(e){av(e.parentNode,ay(e)+1)}function ad(e){at(e.parentNode,ay(e))}function ar(e){at(e.parentNode,ay(e)+1)}function am(e){if(e){Z[X]=Z[aE];Z[an]=Z[a]}else{Z[aE]=Z[X];Z[a]=Z[an]}Z.collapsed=aj}function ap(e){aF(e);ar(e)}function ah(e){av(e,0);at(e,e.nodeType===1?e.childNodes.length:e.nodeValue.length)}function aq(g,m){var n=Z[aE],i=Z[a],e=Z[X],j=Z[an],f=m.startContainer,k=m.startOffset,h=m.endContainer,l=m.endOffset;if(g===0){return ag(n,i,f,k)}if(g===1){return ag(e,j,f,k)}if(g===2){return ag(e,j,h,l)}if(g===3){return ag(n,i,h,l)}}function aw(){az(aC)}function af(){return az(t)}function aI(){return az(ai)}function ak(h){var f=this[aE],g=this[a],i,e;if((f.nodeType===3||f.nodeType===4)&&f.nodeValue){if(!g){f.parentNode.insertBefore(h,f)}else{if(g>=f.nodeValue.length){aJ.insertAfter(h,f)}else{i=f.splitText(g);f.parentNode.insertBefore(h,i)}}}else{if(f.childNodes.length>0){e=f.childNodes[g]}if(e){f.insertBefore(h,e)}else{f.appendChild(h)}}}function aa(e){var f=Z.extractContents();Z.insertNode(e);e.appendChild(f);Z.selectNode(e)}function ac(){return aB(new c(aJ),{startContainer:Z[aE],startOffset:Z[a],endContainer:Z[X],endOffset:Z[an],collapsed:Z.collapsed,commonAncestorContainer:Z.commonAncestorContainer})}function Y(g,f){var e;if(g.nodeType==3){return g}if(f<0){return g}e=g.firstChild;while(e&&f>0){--f;e=e.nextSibling}if(e){return e}return g}function aA(){return(Z[aE]==Z[X]&&Z[a]==Z[an])}function ag(h,f,j,g){var e,i,m,n,k,l;if(h==j){if(f==g){return 0}if(f<g){return -1}return 1}e=j;while(e&&e.parentNode!=h){e=e.parentNode}if(e){i=0;m=h.firstChild;while(m!=e&&i<f){i++;m=m.nextSibling}if(f<=i){return -1}return 1}e=h;while(e&&e.parentNode!=j){e=e.parentNode}if(e){i=0;m=j.firstChild;while(m!=e&&i<g){i++;m=m.nextSibling}if(i<g){return -1}return 1}n=aJ.findCommonAncestor(h,j);k=h;while(k&&k.parentNode!=n){k=k.parentNode}if(!k){k=n}l=j;while(l&&l.parentNode!=n){l=l.parentNode}if(!l){l=n}if(k==l){return 0}m=n.firstChild;while(m){if(m==k){return -1}if(m==l){return 1}m=m.nextSibling}}function al(f,h,i){var g,e;if(f){Z[aE]=h;Z[a]=i}else{Z[X]=h;Z[an]=i}g=Z[X];while(g.parentNode){g=g.parentNode}e=Z[aE];while(e.parentNode){e=e.parentNode}if(e==g){if(ag(Z[aE],Z[a],Z[X],Z[an])>0){Z.collapse(f)}}else{Z.collapse(f)}Z.collapsed=aA();Z.commonAncestorContainer=aJ.findCommonAncestor(Z[aE],Z[X])}function az(n){var e,h=0,k=0,j,f,i,g,m,l;if(Z[aE]==Z[X]){return aG(n)}for(e=Z[X],j=e.parentNode;j;e=j,j=j.parentNode){if(j==Z[aE]){return au(e,n)}++h}for(e=Z[aE],j=e.parentNode;j;e=j,j=j.parentNode){if(j==Z[X]){return b(e,n)}++k}f=k-h;i=Z[aE];while(f>0){i=i.parentNode;f--}g=Z[X];while(f<0){g=g.parentNode;f++}for(m=i.parentNode,l=g.parentNode;m!=l;m=m.parentNode,l=l.parentNode){i=m;g=l}return ax(i,g,n)}function aG(j){var h,k,l,i,g,e,f;if(j!=aC){h=aH.createDocumentFragment()}if(Z[a]==Z[an]){return h}if(Z[aE].nodeType==3){k=Z[aE].nodeValue;l=k.substring(Z[a],Z[an]);if(j!=ai){Z[aE].deleteData(Z[a],Z[an]-Z[a]);Z.collapse(aj)}if(j==aC){return}h.appendChild(aH.createTextNode(l));return h}i=Y(Z[aE],Z[a]);g=Z[an]-Z[a];while(g>0){e=i.nextSibling;f=ao(i,j);if(h){h.appendChild(f)}--g;i=e}if(j!=ai){Z.collapse(aj)}return h}function au(h,k){var j,i,f,g,l,e;if(k!=aC){j=aH.createDocumentFragment()}i=aD(h,k);if(j){j.appendChild(i)}f=ay(h);g=f-Z[a];if(g<=0){if(k!=ai){Z.setEndBefore(h);Z.collapse(V)}return j}i=h.previousSibling;while(g>0){l=i.previousSibling;e=ao(i,k);if(j){j.insertBefore(e,j.firstChild)}--g;i=l}if(k!=ai){Z.setEndBefore(h);Z.collapse(V)}return j}function b(j,k){var h,f,i,g,l,e;if(k!=aC){h=aH.createDocumentFragment()}i=W(j,k);if(h){h.appendChild(i)}f=ay(j);++f;g=Z[an]-f;i=j.nextSibling;while(g>0){l=i.nextSibling;e=ao(i,k);if(h){h.appendChild(e)}--g;i=l}if(k!=ai){Z.setStartAfter(j);Z.collapse(aj)}return h}function ax(f,n,m){var i,k,g,e,o,j,l,h;if(m!=aC){k=aH.createDocumentFragment()}i=W(f,m);if(k){k.appendChild(i)}g=f.parentNode;e=ay(f);o=ay(n);++e;j=o-e;l=f.nextSibling;while(j>0){h=l.nextSibling;i=ao(l,m);if(k){k.appendChild(i)}l=h;--j}i=aD(n,m);if(k){k.appendChild(i)}if(m!=ai){Z.setStartAfter(f);Z.collapse(aj)}return k}function aD(e,m){var i=Y(Z[X],Z[an]-1),k,f,g,l,j,h=i!=Z[X];if(i==e){return ab(i,h,V,m)}k=i.parentNode;f=ab(k,V,V,m);while(k){while(i){g=i.previousSibling;l=ab(i,h,V,m);if(m!=aC){f.insertBefore(l,f.firstChild)}h=aj;i=g}if(k==e){return f}i=k.previousSibling;k=k.parentNode;j=ab(k,V,V,m);if(m!=aC){j.appendChild(f)}f=j}}function W(e,m){var h=Y(Z[aE],Z[a]),g=h!=Z[aE],k,f,i,l,j;if(h==e){return ab(h,g,aj,m)}k=h.parentNode;f=ab(k,V,aj,m);while(k){while(h){i=h.nextSibling;l=ab(h,g,aj,m);if(m!=aC){f.appendChild(l)}g=aj;h=i}if(k==e){return f}h=k.nextSibling;k=k.parentNode;j=ab(k,V,aj,m);if(m!=aC){j.appendChild(f)}f=j}}function ab(l,g,m,k){var h,i,f,j,e;if(g){return ao(l,k)}if(l.nodeType==3){h=l.nodeValue;if(m){j=Z[a];i=h.substring(j);f=h.substring(0,j)}else{j=Z[an];i=h.substring(0,j);f=h.substring(j)}if(k!=ai){l.nodeValue=f}if(k==aC){return}e=l.cloneNode(V);e.nodeValue=i;return e}if(k==aC){return}return l.cloneNode(V)}function ao(e,f){if(f!=aC){return f==ai?e.cloneNode(aj):e}e.parentNode.removeChild(e)}}d.Range=c})(tinymce.dom);(function(){function b(m){var a=this,i=m.dom,n=true,k=false;function l(y,x){var v,z=0,d,g,h,u,f,c,e=-1,A;v=y.duplicate();v.collapse(x);A=v.parentElement();if(A.ownerDocument!==m.dom.doc){return}while(A.contentEditable==="false"){A=A.parentNode}if(!A.hasChildNodes()){return{node:A,inside:1}}h=A.children;d=h.length-1;while(z<=d){c=Math.floor((z+d)/2);u=h[c];v.moveToElementText(u);e=v.compareEndPoints(x?"StartToStart":"EndToEnd",y);if(e>0){d=c-1}else{if(e<0){z=c+1}else{return{node:u}}}}if(e<0){if(!u){v.moveToElementText(A);v.collapse(true);u=A;g=true}else{v.collapse(false)}v.setEndPoint(x?"EndToStart":"EndToEnd",y);if(v.compareEndPoints(x?"StartToStart":"StartToEnd",y)>0){v=y.duplicate();v.collapse(x);f=-1;while(A==v.parentElement()){if(v.move("character",-1)==0){break}f++}}f=f||v.text.replace("\r\n"," ").length}else{v.collapse(true);v.setEndPoint(x?"StartToStart":"StartToEnd",y);f=v.text.replace("\r\n"," ").length}return{node:u,position:e,offset:f,inside:g}}function j(){var v=m.getRng(),c=i.createRng(),s,t,e,d,h,u;s=v.item?v.item(0):v.parentElement();if(s.ownerDocument!=i.doc){return c}t=m.isCollapsed();if(v.item){c.setStart(s.parentNode,i.nodeIndex(s));c.setEnd(c.startContainer,c.startOffset+1);return c}function f(p){var r=l(v,p),C,E,D=0,o,q,B;C=r.node;E=r.offset;if(r.inside&&!C.hasChildNodes()){c[p?"setStart":"setEnd"](C,0);return}if(E===q){c[p?"setStartBefore":"setEndAfter"](C);return}if(r.position<0){o=r.inside?C.firstChild:C.nextSibling;if(!o){c[p?"setStartAfter":"setEndAfter"](C);return}if(!E){if(o.nodeType==3){c[p?"setStart":"setEnd"](o,0)}else{c[p?"setStartBefore":"setEndBefore"](o)}return}while(o){B=o.nodeValue;D+=B.length;if(D>=E){C=o;D-=E;D=B.length-D;break}o=o.nextSibling}}else{o=C.previousSibling;if(!o){return c[p?"setStartBefore":"setEndBefore"](C)}if(!E){if(C.nodeType==3){c[p?"setStart":"setEnd"](o,C.nodeValue.length)}else{c[p?"setStartAfter":"setEndAfter"](o)}return}while(o){D+=o.nodeValue.length;if(D>=E){C=o;D-=E;break}o=o.previousSibling}}c[p?"setStart":"setEnd"](C,D)}try{f(true);if(!t){f()}}catch(g){if(g.number==-2147024809){h=a.getBookmark(2);e=v.duplicate();e.collapse(true);s=e.parentElement();if(!t){e=v.duplicate();e.collapse(false);d=e.parentElement();d.innerHTML=d.innerHTML}s.innerHTML=s.innerHTML;a.moveToBookmark(h);v=m.getRng();f(true);if(!t){f()}}else{throw g}}return c}this.getBookmark=function(c){var f=m.getRng(),h,g,d={};function p(o){var o,v,A,x,y,z=[];v=o.parentNode;A=i.getRoot().parentNode;while(v!=A){x=v.children;y=x.length;while(y--){if(o===x[y]){z.push(y);break}}o=v;v=v.parentNode}return z}function e(o){var r;r=l(f,o);if(r){return{position:r.position,offset:r.offset,indexes:p(r.node),inside:r.inside}}}if(c===2){if(!f.item){d.start=e(true);if(!m.isCollapsed()){d.end=e()}}else{d.start={ctrl:true,indexes:p(f.item(0))}}}return d};this.moveToBookmark=function(e){var f,g=i.doc.body;function c(u){var h,s,v,t;h=i.getRoot();for(s=u.length-1;s>=0;s--){t=h.children;v=u[s];if(v<=t.length-1){h=t[v]}}return h}function d(h){var v=e[h?"start":"end"],s,t,u;if(v){s=v.position>0;t=g.createTextRange();t.moveToElementText(c(v.indexes));offset=v.offset;if(offset!==u){t.collapse(v.inside||s);t.moveStart("character",s?-offset:offset)}else{t.collapse(h)}f.setEndPoint(h?"StartToStart":"EndToStart",t);if(h){f.collapse(true)}}}if(e.start){if(e.start.ctrl){f=g.createControlRange();f.addElement(c(e.start.indexes));f.select()}else{f=g.createTextRange();d(true);d();f.select()}}};this.addRange=function(x){var g,t,u,e,y,d,c=m.dom.doc,h=c.body;function v(s){var q,A,r,o,p;r=i.create("a");q=s?u:y;A=s?e:d;o=g.duplicate();if(q==c||q==c.documentElement){q=h;A=0}if(q.nodeType==3){q.parentNode.insertBefore(r,q);o.moveToElementText(r);o.moveStart("character",A);i.remove(r);g.setEndPoint(s?"StartToStart":"EndToEnd",o)}else{p=q.childNodes;if(p.length){if(A>=p.length){i.insertAfter(r,p[p.length-1])}else{q.insertBefore(r,p[A])}o.moveToElementText(r)}else{r=c.createTextNode("\uFEFF");q.appendChild(r);o.moveToElementText(r.parentNode);o.collapse(n)}g.setEndPoint(s?"StartToStart":"EndToEnd",o);i.remove(r)}}u=x.startContainer;e=x.startOffset;y=x.endContainer;d=x.endOffset;g=h.createTextRange();if(u==y&&u.nodeType==1&&e==d-1){if(e==d-1){try{t=h.createControlRange();t.addElement(u.childNodes[e]);t.select();return}catch(f){}}}v(true);v();g.select()};this.getRangeAt=j}tinymce.dom.TridentSelection=b})();(function(k){var i=k.each,l=k.DOM,g=k.isIE,j=k.isWebKit,h;k.create("tinymce.dom.EventUtils",{EventUtils:function(){this.inits=[];this.events=[]},add:function(a,o,b,d){var n,f=this,e=f.events,c;if(o instanceof Array){c=[];i(o,function(m){c.push(f.add(a,m,b,d))});return c}if(a&&a.hasOwnProperty&&a instanceof Array){c=[];i(a,function(m){m=l.get(m);c.push(f.add(m,o,b,d))});return c}a=l.get(a);if(!a){return}n=function(m){if(f.disabled){return}m=m||window.event;if(m&&g){if(!m.target){m.target=m.srcElement}k.extend(m,f._stoppers)}if(!d){return b(m)}return b.call(d,m)};if(o=="unload"){k.unloads.unshift({func:n});return n}if(o=="init"){if(f.domLoaded){n()}else{f.inits.push(n)}return n}e.push({obj:a,name:o,func:b,cfunc:n,scope:d});f._add(a,o,n);return b},remove:function(b,a,c){var f=this,n=f.events,e=false,d;if(b&&b.hasOwnProperty&&b instanceof Array){d=[];i(b,function(m){m=l.get(m);d.push(f.remove(m,a,c))});return d}b=l.get(b);i(n,function(m,p){if(m.obj==b&&m.name==a&&(!c||(m.func==c||m.cfunc==c))){n.splice(p,1);f._remove(b,a,m.cfunc);e=true;return false}});return e},clear:function(a){var c=this,e=c.events,d,b;if(a){a=l.get(a);for(d=e.length-1;d>=0;d--){b=e[d];if(b.obj===a){c._remove(b.obj,b.name,b.cfunc);b.obj=b.cfunc=null;e.splice(d,1)}}}},cancel:function(a){if(!a){return false}this.stop(a);return this.prevent(a)},stop:function(a){if(a.stopPropagation){a.stopPropagation()}else{a.cancelBubble=true}return false},prevent:function(a){if(a.preventDefault){a.preventDefault()}else{a.returnValue=false}return false},destroy:function(){var a=this;i(a.events,function(b,c){a._remove(b.obj,b.name,b.cfunc);b.obj=b.cfunc=null});a.events=[];a=null},_add:function(b,a,c){if(b.attachEvent){b.attachEvent("on"+a,c)}else{if(b.addEventListener){b.addEventListener(a,c,false)}else{b["on"+a]=c}}},_remove:function(b,a,c){if(b){try{if(b.detachEvent){b.detachEvent("on"+a,c)}else{if(b.removeEventListener){b.removeEventListener(a,c,false)}else{b["on"+a]=null}}}catch(d){}}},_pageInit:function(a){var b=this;if(b.domLoaded){return}b.domLoaded=true;i(b.inits,function(c){c()});b.inits=[]},_wait:function(a){var c=this,b=a.document;if(a.tinyMCE_GZ&&tinyMCE_GZ.loaded){c.domLoaded=1;return}if(b.attachEvent){b.attachEvent("onreadystatechange",function(){if(b.readyState==="complete"){b.detachEvent("onreadystatechange",arguments.callee);c._pageInit(a)}});if(b.documentElement.doScroll&&a==a.top){(function(){if(c.domLoaded){return}try{b.documentElement.doScroll("left")}catch(d){setTimeout(arguments.callee,0);return}c._pageInit(a)})()}}else{if(b.addEventListener){c._add(a,"DOMContentLoaded",function(){c._pageInit(a)})}}c._add(a,"load",function(){c._pageInit(a)})},_stoppers:{preventDefault:function(){this.returnValue=false},stopPropagation:function(){this.cancelBubble=true}}});h=k.dom.Event=new k.dom.EventUtils();h._wait(window);k.addUnload(function(){h.destroy()})})(tinymce);(function(b){b.dom.Element=function(g,i){var a=this,h,j;a.settings=i=i||{};a.id=g;a.dom=h=i.dom||b.DOM;if(!b.isIE){j=h.get(a.id)}b.each(("getPos,getRect,getParent,add,setStyle,getStyle,setStyles,setAttrib,setAttribs,getAttrib,addClass,removeClass,hasClass,getOuterHTML,setOuterHTML,remove,show,hide,isHidden,setHTML,get").split(/,/),function(c){a[c]=function(){var e=[g],d;for(d=0;d<arguments.length;d++){e.push(arguments[d])}e=h[c].apply(h,e);a.update(c);return e}});b.extend(a,{on:function(c,d,e){return b.dom.Event.add(a.id,c,d,e)},getXY:function(){return{x:parseInt(a.getStyle("left")),y:parseInt(a.getStyle("top"))}},getSize:function(){var c=h.get(a.id);return{w:parseInt(a.getStyle("width")||c.clientWidth),h:parseInt(a.getStyle("height")||c.clientHeight)}},moveTo:function(d,c){a.setStyles({left:d,top:c})},moveBy:function(e,c){var d=a.getXY();a.moveTo(d.x+e,d.y+c)},resizeTo:function(d,c){a.setStyles({width:d,height:c})},resizeBy:function(e,c){var d=a.getSize();a.resizeTo(d.w+e,d.h+c)},update:function(c){var d;if(b.isIE6&&i.blocker){c=c||"";if(c.indexOf("get")===0||c.indexOf("has")===0||c.indexOf("is")===0){return}if(c=="remove"){h.remove(a.blocker);return}if(!a.blocker){a.blocker=h.uniqueId();d=h.add(i.container||h.getRoot(),"iframe",{id:a.blocker,style:"position:absolute;",frameBorder:0,src:'javascript:""'});h.setStyle(d,"opacity",0)}else{d=h.get(a.blocker)}h.setStyles(d,{left:a.getStyle("left",1),top:a.getStyle("top",1),width:a.getStyle("width",1),height:a.getStyle("height",1),display:a.getStyle("display",1),zIndex:parseInt(a.getStyle("zIndex",1)||0)-1})}}})}})(tinymce);(function(j){function h(a){return a.replace(/[\n\r]+/g,"")}var f=j.is,g=j.isIE,i=j.each;j.create("tinymce.dom.Selection",{Selection:function(a,b,c){var d=this;d.dom=a;d.win=b;d.serializer=c;i(["onBeforeSetContent","onBeforeGetContent","onSetContent","onGetContent"],function(e){d[e]=new j.util.Dispatcher(d)});if(!d.win.getSelection){d.tridentSel=new j.dom.TridentSelection(d)}if(j.isIE&&a.boxModel){this._fixIESelection()}j.addUnload(d.destroy,d)},getContent:function(o){var p=this,n=p.getRng(),b=p.dom.create("body"),d=p.getSel(),e,c,a;o=o||{};e=c="";o.get=true;o.format=o.format||"html";o.forced_root_block="";p.onBeforeGetContent.dispatch(p,o);if(o.format=="text"){return p.isCollapsed()?"":(n.text||(d.toString?d.toString():""))}if(n.cloneContents){a=n.cloneContents();if(a){b.appendChild(a)}}else{if(f(n.item)||f(n.htmlText)){b.innerHTML=n.item?n.item(0).outerHTML:n.htmlText}else{b.innerHTML=n.toString()}}if(/^\s/.test(b.innerHTML)){e=" "}if(/\s+$/.test(b.innerHTML)){c=" "}o.getInner=true;o.content=p.isCollapsed()?"":e+p.serializer.serialize(b,o)+c;p.onGetContent.dispatch(p,o);return o.content},setContent:function(q,o){var a=this,r=a.getRng(),e,d=a.win.document,b,c;o=o||{format:"html"};o.set=true;q=o.content=q;if(!o.no_events){a.onBeforeSetContent.dispatch(a,o)}q=o.content;if(r.insertNode){q+='<span id="__caret">_</span>';if(r.startContainer==d&&r.endContainer==d){d.body.innerHTML=q}else{r.deleteContents();if(d.body.childNodes.length==0){d.body.innerHTML=q}else{if(r.createContextualFragment){r.insertNode(r.createContextualFragment(q))}else{b=d.createDocumentFragment();c=d.createElement("div");b.appendChild(c);c.outerHTML=q;r.insertNode(b)}}}e=a.dom.get("__caret");r=d.createRange();r.setStartBefore(e);r.setEndBefore(e);a.setRng(r);a.dom.remove("__caret");try{a.setRng(r)}catch(p){}}else{if(r.item){d.execCommand("Delete",false,null);r=a.getRng()}r.pasteHTML(q)}if(!o.no_events){a.onSetContent.dispatch(a,o)}},getStart:function(){var d=this.getRng(),c,e,a,b;if(d.duplicate||d.item){if(d.item){return d.item(0)}a=d.duplicate();a.collapse(1);c=a.parentElement();e=b=d.parentElement();while(b=b.parentNode){if(b==c){c=e;break}}return c}else{c=d.startContainer;if(c.nodeType==1&&c.hasChildNodes()){c=c.childNodes[Math.min(c.childNodes.length-1,d.startOffset)]}if(c&&c.nodeType==3){return c.parentNode}return c}},getEnd:function(){var c=this,b=c.getRng(),a,d;if(b.duplicate||b.item){if(b.item){return b.item(0)}b=b.duplicate();b.collapse(0);a=b.parentElement();if(a&&a.nodeName=="BODY"){return a.lastChild||a}return a}else{a=b.endContainer;d=b.endOffset;if(a.nodeType==1&&a.hasChildNodes()){a=a.childNodes[d>0?d-1:d]}if(a&&a.nodeType==3){return a.parentNode}return a}},getBookmark:function(a,G){var E=this,t=E.dom,C,z,A,e,B,d,c,x="\uFEFF",F;function D(k,m){var l=0;i(t.select(k),function(n,o){if(n==m){l=o}});return l}if(a==2){function y(){var k=E.getRng(true),l=t.getRoot(),n={};function m(v,p){var I=v[p?"startContainer":"endContainer"],q=v[p?"startOffset":"endOffset"],o=[],u,r,s=0;if(I.nodeType==3){if(G){for(u=I.previousSibling;u&&u.nodeType==3;u=u.previousSibling){q+=u.nodeValue.length}}o.push(q)}else{r=I.childNodes;if(q>=r.length&&r.length){s=1;q=Math.max(0,r.length-1)}o.push(E.dom.nodeIndex(r[q],G)+s)}for(;I&&I!=l;I=I.parentNode){o.push(E.dom.nodeIndex(I,G))}return o}n.start=m(k,true);if(!E.isCollapsed()){n.end=m(k)}return n}if(E.tridentSel){return E.tridentSel.getBookmark(a)}return y()}if(a){return{rng:E.getRng()}}C=E.getRng();A=t.uniqueId();e=tinyMCE.activeEditor.selection.isCollapsed();F="overflow:hidden;line-height:0px";if(C.duplicate||C.item){if(!C.item){z=C.duplicate();try{C.collapse();C.pasteHTML('<span data-mce-type="bookmark" id="'+A+'_start" style="'+F+'">'+x+"</span>");if(!e){z.collapse(false);C.moveToElementText(z.parentElement());if(C.compareEndPoints("StartToEnd",z)==0){z.move("character",-1)}z.pasteHTML('<span data-mce-type="bookmark" id="'+A+'_end" style="'+F+'">'+x+"</span>")}}catch(b){return null}}else{d=C.item(0);B=d.nodeName;return{name:B,index:D(B,d)}}}else{d=E.getNode();B=d.nodeName;if(B=="IMG"){return{name:B,index:D(B,d)}}z=C.cloneRange();if(!e){z.collapse(false);z.insertNode(t.create("span",{"data-mce-type":"bookmark",id:A+"_end",style:F},x))}C.collapse(true);C.insertNode(t.create("span",{"data-mce-type":"bookmark",id:A+"_start",style:F},x))}E.moveToBookmark({id:A,keep:1});return{id:A}},moveToBookmark:function(e){var a=this,u=a.dom,y,z,B,b,x,C,d,c;if(e){if(e.start){B=u.createRng();b=u.getRoot();function A(o){var n=e[o?"start":"end"],l,k,p,m;if(n){p=n[0];for(k=b,l=n.length-1;l>=1;l--){m=k.childNodes;if(n[l]>m.length-1){return}k=m[n[l]]}if(k.nodeType===3){p=Math.min(n[0],k.nodeValue.length)}if(k.nodeType===1){p=Math.min(n[0],k.childNodes.length)}if(o){B.setStart(k,p)}else{B.setEnd(k,p)}}return true}if(a.tridentSel){return a.tridentSel.moveToBookmark(e)}if(A(true)&&A()){a.setRng(B)}}else{if(e.id){function v(l){var n=u.get(e.id+"_"+l),p,o,k,q,m=e.keep;if(n){p=n.parentNode;if(l=="start"){if(!m){o=u.nodeIndex(n)}else{p=n.firstChild;o=1}x=C=p;d=c=o}else{if(!m){o=u.nodeIndex(n)}else{p=n.firstChild;o=1}C=p;c=o}if(!m){q=n.previousSibling;k=n.nextSibling;i(j.grep(n.childNodes),function(r){if(r.nodeType==3){r.nodeValue=r.nodeValue.replace(/\uFEFF/g,"")}});while(n=u.get(e.id+"_"+l)){u.remove(n,1)}if(q&&k&&q.nodeType==k.nodeType&&q.nodeType==3&&!j.isOpera){o=q.nodeValue.length;q.appendData(k.nodeValue);u.remove(k);if(l=="start"){x=C=q;d=c=o}else{C=q;c=o}}}}}function t(k){if(u.isBlock(k)&&!k.innerHTML){k.innerHTML=!g?'<br data-mce-bogus="1" />':" "}return k}v("start");v("end");if(x){B=u.createRng();B.setStart(t(x),d);B.setEnd(t(C),c);a.setRng(B)}}else{if(e.name){a.select(u.select(e.name)[e.index])}else{if(e.rng){a.setRng(e.rng)}}}}}},select:function(b,c){var d=this,a=d.dom,m=a.createRng(),n;if(b){n=a.nodeIndex(b);m.setStart(b.parentNode,n);m.setEnd(b.parentNode,n+1);if(c){function e(k,l){var p=new j.dom.TreeWalker(k,k);do{if(k.nodeType==3&&j.trim(k.nodeValue).length!=0){if(l){m.setStart(k,0)}else{m.setEnd(k,k.nodeValue.length)}return}if(k.nodeName=="BR"){if(l){m.setStartBefore(k)}else{m.setEndBefore(k)}return}}while(k=(l?p.next():p.prev()))}e(b,1);e(b)}d.setRng(m)}return b},isCollapsed:function(){var c=this,a=c.getRng(),b=c.getSel();if(!a||a.item){return false}if(a.compareEndPoints){return a.compareEndPoints("StartToEnd",a)===0}return !b||a.collapsed},collapse:function(d){var b=this,c=b.getRng(),a;if(c.item){a=c.item(0);c=b.win.document.body.createTextRange();c.moveToElementText(a)}c.collapse(!!d);b.setRng(c)},getSel:function(){var a=this,b=this.win;return b.getSelection?b.getSelection():b.document.selection},getRng:function(a){var m=this,e,d,b,c=m.win.document;if(a&&m.tridentSel){return m.tridentSel.getRangeAt(0)}try{if(e=m.getSel()){d=e.rangeCount>0?e.getRangeAt(0):(e.createRange?e.createRange():c.createRange())}}catch(n){}if(j.isIE&&d&&d.setStart&&c.selection.createRange().item){b=c.selection.createRange().item(0);d=c.createRange();d.setStartBefore(b);d.setEndAfter(b)}if(!d){d=c.createRange?c.createRange():c.body.createTextRange()}if(m.selectedRange&&m.explicitRange){if(d.compareBoundaryPoints(d.START_TO_START,m.selectedRange)===0&&d.compareBoundaryPoints(d.END_TO_END,m.selectedRange)===0){d=m.explicitRange}else{m.selectedRange=null;m.explicitRange=null}}return d},setRng:function(a){var b,c=this;if(!c.tridentSel){b=c.getSel();if(b){c.explicitRange=a;try{b.removeAllRanges()}catch(d){}b.addRange(a);c.selectedRange=b.getRangeAt(0)}}else{if(a.cloneRange){c.tridentSel.addRange(a);return}try{a.select()}catch(d){}}},setNode:function(a){var b=this;b.setContent(b.dom.getOuterHTML(a));return a},getNode:function(){var e=this,m=e.getRng(),d=e.getSel(),a,b=m.startContainer,n=m.endContainer;if(!m){return e.dom.getRoot()}if(m.setStart){a=m.commonAncestorContainer;if(!m.collapsed){if(m.startContainer==m.endContainer){if(m.endOffset-m.startOffset<2){if(m.startContainer.hasChildNodes()){a=m.startContainer.childNodes[m.startOffset]}}}if(b.nodeType===3&&n.nodeType===3){function c(l,k){var q=l;while(l&&l.nodeType===3&&l.length===0){l=k?l.nextSibling:l.previousSibling}return l||q}if(b.length===m.startOffset){b=c(b.nextSibling,true)}else{b=b.parentNode}if(m.endOffset===0){n=c(n.previousSibling,false)}else{n=n.parentNode}if(b&&b===n){return b}}}if(a&&a.nodeType==3){return a.parentNode}return a}return m.item?m.item(0):m.parentElement()},getSelectedBlocks:function(o,p){var e=this,d=e.dom,a,n,b,c=[];a=d.getParent(o||e.getStart(),d.isBlock);n=d.getParent(p||e.getEnd(),d.isBlock);if(a){c.push(a)}if(a&&n&&a!=n){b=a;while((b=b.nextSibling)&&b!=n){if(d.isBlock(b)){c.push(b)}}}if(n&&a!=n){c.push(n)}return c},normalize:function(){var c=this,d,a;if(j.isIE){return}function b(t){var r,u,v,e=c.dom,s=e.getRoot(),q;r=d[(t?"start":"end")+"Container"];u=d[(t?"start":"end")+"Offset"];if(r.nodeType===9){r=r.body;u=0}if(r===s){if(r.hasChildNodes()){r=r.childNodes[Math.min(!t&&u>0?u-1:u,r.childNodes.length-1)];u=0;q=r;v=new j.dom.TreeWalker(r,s);do{if(q.nodeType===3){u=t?0:q.nodeValue.length-1;r=q;break}if(q.nodeName==="BR"){u=e.nodeIndex(q);r=q.parentNode;break}}while(q=(t?v.next():v.prev()));a=true}}if(a){d["set"+(t?"Start":"End")](r,u)}}d=c.getRng();b(true);if(d.collapsed){b()}if(a){c.setRng(d)}},destroy:function(a){var b=this;b.win=null;if(!a){j.removeUnload(b.destroy)}},_fixIESelection:function(){var q=this.dom,b=q.doc,p=b.body,e,a,r;b.documentElement.unselectable=true;function o(n,k){var m=p.createTextRange();try{m.moveToPoint(n,k)}catch(l){m=null}return m}function c(k){var l;if(k.button){l=o(k.x,k.y);if(l){if(l.compareEndPoints("StartToStart",a)>0){l.setEndPoint("StartToStart",a)}else{l.setEndPoint("EndToEnd",a)}l.select()}}else{d()}}function d(){var k=b.selection.createRange();if(a&&!k.item&&k.compareEndPoints("StartToEnd",k)===0){a.select()}q.unbind(b,"mouseup",d);q.unbind(b,"mousemove",c);a=e=0}q.bind(b,["mousedown","contextmenu"],function(k){if(k.target.nodeName==="HTML"){if(e){d()}r=b.documentElement;if(r.scrollHeight>r.clientHeight){return}e=1;a=o(k.x,k.y);if(a){q.bind(b,"mouseup",d);q.bind(b,"mousemove",c);q.win.focus();a.select()}}})}})})(tinymce);(function(b){b.dom.Serializer=function(n,j,m){var k,a,o=b.isIE,l=b.each,p;if(!n.apply_source_formatting){n.indent=false}n.remove_trailing_brs=true;j=j||b.DOM;m=m||new b.html.Schema(n);n.entity_encoding=n.entity_encoding||"named";k=new b.util.Dispatcher(self);a=new b.util.Dispatcher(self);p=new b.html.DomParser(n,m);p.addAttributeFilter("src,href,style",function(s,t){var f=s.length,i,d,g="data-mce-"+t,e=n.url_converter,c=n.url_converter_scope,h;while(f--){i=s[f];d=i.attributes.map[g];if(d!==h){i.attr(t,d.length>0?d:null);i.attr(g,null)}else{d=i.attributes.map[t];if(t==="style"){d=j.serializeStyle(j.parseStyle(d),i.name)}else{if(e){d=e.call(c,d,t,i.name)}}i.attr(t,d.length>0?d:null)}}});p.addAttributeFilter("class",function(f,e){var d=f.length,c,g;while(d--){c=f[d];g=c.attr("class").replace(/\s*mce(Item\w+|Selected)\s*/g,"");c.attr("class",g.length>0?g:null)}});p.addAttributeFilter("data-mce-type",function(f,d,e){var c=f.length,g;while(c--){g=f[c];if(g.attributes.map["data-mce-type"]==="bookmark"&&!e.cleanup){g.remove()}}});p.addNodeFilter("script,style",function(e,d){var c=e.length,h,g;function f(i){return i.replace(/(<!--\[CDATA\[|\]\]-->)/g,"\n").replace(/^[\r\n]*|[\r\n]*$/g,"").replace(/^\s*(\/\/\s*<!--|\/\/\s*<!\[CDATA\[|<!--|<!\[CDATA\[)[\r\n]*/g,"").replace(/\s*(\/\/\s*\]\]>|\/\/\s*-->|\]\]>|-->|\]\]-->)\s*$/g,"")}while(c--){h=e[c];g=h.firstChild?h.firstChild.value:"";if(d==="script"){h.attr("type",(h.attr("type")||"text/javascript").replace(/^mce\-/,""));if(g.length>0){h.firstChild.value="// <![CDATA[\n"+f(g)+"\n// ]]>"}}else{if(g.length>0){h.firstChild.value="<!--\n"+f(g)+"\n-->"}}}});p.addNodeFilter("#comment",function(f,e){var d=f.length,c;while(d--){c=f[d];if(c.value.indexOf("[CDATA[")===0){c.name="#cdata";c.type=4;c.value=c.value.replace(/^\[CDATA\[|\]\]$/g,"")}else{if(c.value.indexOf("mce:protected ")===0){c.name="#text";c.type=3;c.raw=true;c.value=unescape(c.value).substr(14)}}}});p.addNodeFilter("xml:namespace,input",function(f,e){var d=f.length,c;while(d--){c=f[d];if(c.type===7){c.remove()}else{if(c.type===1){if(e==="input"&&!("type" in c.attributes.map)){c.attr("type","text")}}}}});if(n.fix_list_elements){p.addNodeFilter("ul,ol",function(e,d){var c=e.length,g,f;while(c--){g=e[c];f=g.parent;if(f.name==="ul"||f.name==="ol"){if(g.prev&&g.prev.name==="li"){g.prev.append(g)}}}})}p.addAttributeFilter("data-mce-src,data-mce-href,data-mce-style",function(e,d){var c=e.length;while(c--){e[c].attr(d,null)}});return{schema:m,addNodeFilter:p.addNodeFilter,addAttributeFilter:p.addAttributeFilter,onPreProcess:k,onPostProcess:a,serialize:function(h,c){var d,g,e,f,i;if(o&&j.select("script,style,select").length>0){i=h.innerHTML;h=h.cloneNode(false);j.setHTML(h,i)}else{h=h.cloneNode(true)}d=h.ownerDocument.implementation;if(d.createHTMLDocument){g=d.createHTMLDocument("");l(h.nodeName=="BODY"?h.childNodes:[h],function(r){g.body.appendChild(g.importNode(r,true))});if(h.nodeName!="BODY"){h=g.body.firstChild}else{h=g.body}e=j.doc;j.doc=g}c=c||{};c.format=c.format||"html";if(!c.no_events){c.node=h;k.dispatch(self,c)}f=new b.html.Serializer(n,m);c.content=f.serialize(p.parse(c.getInner?h.innerHTML:b.trim(j.getOuterHTML(h),c),c));if(!c.cleanup){c.content=c.content.replace(/\uFEFF/g,"")}if(!c.no_events){a.dispatch(self,c)}if(e){j.doc=e}c.node=null;return c.content},addRules:function(c){m.addValidElements(c)},setRules:function(c){m.setValidElements(c)}}}})(tinymce);(function(b){b.dom.ScriptLoader=function(p){var u=0,m=1,o=2,a={},n=[],r={},t=[],q=0,s;function v(h,j){var i=this,d=b.DOM,l,f,c,g;function e(){d.remove(g);if(l){l.onreadystatechange=l.onload=l=null}j()}function k(){if(typeof(console)!=="undefined"&&console.log){console.log("Failed to load: "+h)}}g=d.uniqueId();if(b.isIE6){f=new b.util.URI(h);c=location;if(f.host==c.hostname&&f.port==c.port&&(f.protocol+":")==c.protocol&&f.protocol.toLowerCase()!="file"){b.util.XHR.send({url:b._addVer(f.getURI()),success:function(z){var x=d.create("script",{type:"text/javascript"});x.text=z;document.getElementsByTagName("head")[0].appendChild(x);d.remove(x);e()},error:k});return}}l=d.create("script",{id:g,type:"text/javascript",src:b._addVer(h)});if(!b.isIE){l.onload=e}l.onerror=k;if(!b.isOpera){l.onreadystatechange=function(){var x=l.readyState;if(x=="complete"||x=="loaded"){e()}}}(document.getElementsByTagName("head")[0]||document.body).appendChild(l)}this.isDone=function(c){return a[c]==o};this.markDone=function(c){a[c]=o};this.add=this.load=function(c,d,g){var f,e=a[c];if(e==s){n.push(c);a[c]=u}if(d){if(!r[c]){r[c]=[]}r[c].push({func:d,scope:g||this})}};this.loadQueue=function(d,c){this.loadScripts(n,d,c)};this.loadScripts=function(c,d,e){var f;function g(h){b.each(r[h],function(i){i.func.call(i.scope)});r[h]=s}t.push({func:d,scope:e||this});f=function(){var h=b.grep(c);c.length=0;b.each(h,function(i){if(a[i]==o){g(i);return}if(a[i]!=m){a[i]=m;q++;v(i,function(){a[i]=o;q--;g(i);f()})}});if(!q){b.each(t,function(i){i.func.call(i.scope)});t.length=0}};f()}};b.ScriptLoader=new b.dom.ScriptLoader()})(tinymce);tinymce.dom.TreeWalker=function(f,h){var e=f;function g(b,k,l,a){var c,d;if(b){if(!a&&b[k]){return b[k]}if(b!=h){c=b[l];if(c){return c}for(d=b.parentNode;d&&d!=h;d=d.parentNode){c=d[l];if(c){return c}}}}}this.current=function(){return e};this.next=function(a){return(e=g(e,"firstChild","nextSibling",a))};this.prev=function(a){return(e=g(e,"lastChild","previousSibling",a))}};(function(b){b.dom.RangeUtils=function(d){var a="\uFEFF";this.walk=function(H,c){var D=H.startContainer,A=H.startOffset,I=H.endContainer,z=H.endOffset,C,F,x,E,t,u,G;G=d.select("td.mceSelected,th.mceSelected");if(G.length>0){b.each(G,function(e){c([e])});return}function v(f,g,h){var e=[];for(;f&&f!=h;f=f[g]){e.push(f)}return e}function y(e,f){do{if(e.parentNode==f){return e}e=e.parentNode}while(e)}function B(f,g,e){var h=e?"nextSibling":"previousSibling";for(E=f,t=E.parentNode;E&&E!=g;E=t){t=E.parentNode;u=v(E==f?E:E[h],h);if(u.length){if(!e){u.reverse()}c(u)}}}if(D.nodeType==1&&D.hasChildNodes()){D=D.childNodes[A]}if(I.nodeType==1&&I.hasChildNodes()){I=I.childNodes[Math.min(z-1,I.childNodes.length-1)]}C=d.findCommonAncestor(D,I);if(D==I){return c([D])}for(E=D;E;E=E.parentNode){if(E==I){return B(D,C,true)}if(E==C){break}}for(E=I;E;E=E.parentNode){if(E==D){return B(I,C)}if(E==C){break}}F=y(D,C)||D;x=y(I,C)||I;B(D,F,true);u=v(F==D?F:F.nextSibling,"nextSibling",x==I?x.nextSibling:x);if(u.length){c(u)}B(I,x)}};b.dom.RangeUtils.compareRanges=function(d,a){if(d&&a){if(d.item||d.duplicate){if(d.item&&a.item&&d.item(0)===a.item(0)){return true}if(d.isEqual&&a.isEqual&&a.isEqual(d)){return true}}else{return d.startContainer==a.startContainer&&d.startOffset==a.startOffset}}return false}})(tinymce);(function(d){var e=d.dom.Event,f=d.each;d.create("tinymce.ui.KeyboardNavigation",{KeyboardNavigation:function(z,y){var a=this,q=z.root,r=z.items,c=z.enableUpDown,u=z.enableLeftRight||!z.enableUpDown,s=z.excludeFromTabOrder,t,v,b,A,x;y=y||d.DOM;t=function(g){x=g.target.id};v=function(g){y.setAttrib(g.target.id,"tabindex","-1")};A=function(h){var g=y.get(x);y.setAttrib(g,"tabindex","0");g.focus()};a.focus=function(){y.get(x).focus()};a.destroy=function(){f(r,function(g){y.unbind(y.get(g.id),"focus",t);y.unbind(y.get(g.id),"blur",v)});y.unbind(y.get(q),"focus",A);y.unbind(y.get(q),"keydown",b);r=y=q=a.focus=t=v=b=A=null;a.destroy=function(){}};a.moveFocus=function(g,j){var k=-1,h=a.controls,i;if(!x){return}f(r,function(l,m){if(l.id===x){k=m;return false}});k+=g;if(k<0){k=r.length-1}else{if(k>=r.length){k=0}}i=r[k];y.setAttrib(x,"tabindex","-1");y.setAttrib(i.id,"tabindex","0");y.get(i.id).focus();if(z.actOnFocus){z.onAction(i.id)}if(j){e.cancel(j)}};b=function(j){var m=37,n=39,k=38,i=40,h=27,o=14,g=13,l=32;switch(j.keyCode){case m:if(u){a.moveFocus(-1)}break;case n:if(u){a.moveFocus(1)}break;case k:if(c){a.moveFocus(-1)}break;case i:if(c){a.moveFocus(1)}break;case h:if(z.onCancel){z.onCancel();e.cancel(j)}break;case o:case g:case l:if(z.onAction){z.onAction(x);e.cancel(j)}break}};f(r,function(g,i){var h;if(!g.id){g.id=y.uniqueId("_mce_item_")}if(s){y.bind(g.id,"blur",v);h="-1"}else{h=(i===0?"0":"-1")}y.setAttrib(g.id,"tabindex",h);y.bind(y.get(g.id),"focus",t)});if(r[0]){x=r[0].id}y.setAttrib(q,"tabindex","-1");y.bind(y.get(q),"focus",A);y.bind(y.get(q),"keydown",b)}})})(tinymce);(function(f){var d=f.DOM,e=f.is;f.create("tinymce.ui.Control",{Control:function(a,b,c){this.id=a;this.settings=b=b||{};this.rendered=false;this.onRender=new f.util.Dispatcher(this);this.classPrefix="";this.scope=b.scope||this;this.disabled=0;this.active=0;this.editor=c},setAriaProperty:function(a,b){var c=d.get(this.id+"_aria")||d.get(this.id);if(c){d.setAttrib(c,"aria-"+a,!!b)}},focus:function(){d.get(this.id).focus()},setDisabled:function(a){if(a!=this.disabled){this.setAriaProperty("disabled",a);this.setState("Disabled",a);this.setState("Enabled",!a);this.disabled=a}},isDisabled:function(){return this.disabled},setActive:function(a){if(a!=this.active){this.setState("Active",a);this.active=a;this.setAriaProperty("pressed",a)}},isActive:function(){return this.active},setState:function(a,c){var b=d.get(this.id);a=this.classPrefix+a;if(c){d.addClass(b,a)}else{d.removeClass(b,a)}},isRendered:function(){return this.rendered},renderHTML:function(){},renderTo:function(a){d.setHTML(a,this.renderHTML())},postRender:function(){var a=this,b;if(e(a.disabled)){b=a.disabled;a.disabled=-1;a.setDisabled(b)}if(e(a.active)){b=a.active;a.active=-1;a.setActive(b)}},remove:function(){d.remove(this.id);this.destroy()},destroy:function(){f.dom.Event.clear(this.id)}})})(tinymce);tinymce.create("tinymce.ui.Container:tinymce.ui.Control",{Container:function(f,d,e){this.parent(f,d,e);this.controls=[];this.lookup={}},add:function(b){this.lookup[b.id]=b;this.controls.push(b);return b},get:function(b){return this.lookup[b]}});tinymce.create("tinymce.ui.Separator:tinymce.ui.Control",{Separator:function(c,d){this.parent(c,d);this.classPrefix="mceSeparator";this.setDisabled(true)},renderHTML:function(){return tinymce.DOM.createHTML("span",{"class":this.classPrefix,role:"separator","aria-orientation":"vertical",tabindex:"-1"})}});(function(i){var j=i.is,f=i.DOM,h=i.each,g=i.walk;i.create("tinymce.ui.MenuItem:tinymce.ui.Control",{MenuItem:function(a,b){this.parent(a,b);this.classPrefix="mceMenuItem"},setSelected:function(a){this.setState("Selected",a);this.setAriaProperty("checked",!!a);this.selected=a},isSelected:function(){return this.selected},postRender:function(){var a=this;a.parent();if(j(a.selected)){a.setSelected(a.selected)}}})})(tinymce);(function(i){var j=i.is,f=i.DOM,h=i.each,g=i.walk;i.create("tinymce.ui.Menu:tinymce.ui.MenuItem",{Menu:function(a,b){var c=this;c.parent(a,b);c.items={};c.collapsed=false;c.menuCount=0;c.onAddItem=new i.util.Dispatcher(this)},expand:function(a){var b=this;if(a){g(b,function(c){if(c.expand){c.expand()}},"items",b)}b.collapsed=false},collapse:function(a){var b=this;if(a){g(b,function(c){if(c.collapse){c.collapse()}},"items",b)}b.collapsed=true},isCollapsed:function(){return this.collapsed},add:function(a){if(!a.settings){a=new i.ui.MenuItem(a.id||f.uniqueId(),a)}this.onAddItem.dispatch(this,a);return this.items[a.id]=a},addSeparator:function(){return this.add({separator:true})},addMenu:function(a){if(!a.collapse){a=this.createMenu(a)}this.menuCount++;return this.add(a)},hasMenus:function(){return this.menuCount!==0},remove:function(a){delete this.items[a.id]},removeAll:function(){var a=this;g(a,function(b){if(b.removeAll){b.removeAll()}else{b.remove()}b.destroy()},"items",a);a.items={}},createMenu:function(a){var b=new i.ui.Menu(a.id||f.uniqueId(),a);b.onAddItem.add(this.onAddItem.dispatch,this.onAddItem);return b}})})(tinymce);(function(j){var k=j.is,l=j.DOM,i=j.each,h=j.dom.Event,g=j.dom.Element;j.create("tinymce.ui.DropMenu:tinymce.ui.Menu",{DropMenu:function(a,b){b=b||{};b.container=b.container||l.doc.body;b.offset_x=b.offset_x||0;b.offset_y=b.offset_y||0;b.vp_offset_x=b.vp_offset_x||0;b.vp_offset_y=b.vp_offset_y||0;if(k(b.icons)&&!b.icons){b["class"]+=" mceNoIcons"}this.parent(a,b);this.onShowMenu=new j.util.Dispatcher(this);this.onHideMenu=new j.util.Dispatcher(this);this.classPrefix="mceMenu"},createMenu:function(a){var c=this,b=c.settings,d;a.container=a.container||b.container;a.parent=c;a.constrain=a.constrain||b.constrain;a["class"]=a["class"]||b["class"];a.vp_offset_x=a.vp_offset_x||b.vp_offset_x;a.vp_offset_y=a.vp_offset_y||b.vp_offset_y;a.keyboard_focus=b.keyboard_focus;d=new j.ui.DropMenu(a.id||l.uniqueId(),a);d.onAddItem.add(c.onAddItem.dispatch,c.onAddItem);return d},focus:function(){var a=this;if(a.keyboardNav){a.keyboardNav.focus()}},update:function(){var d=this,c=d.settings,f=l.get("menu_"+d.id+"_tbl"),a=l.get("menu_"+d.id+"_co"),e,b;e=c.max_width?Math.min(f.clientWidth,c.max_width):f.clientWidth;b=c.max_height?Math.min(f.clientHeight,c.max_height):f.clientHeight;if(!l.boxModel){d.element.setStyles({width:e+2,height:b+2})}else{d.element.setStyles({width:e,height:b})}if(c.max_width){l.setStyle(a,"width",e)}if(c.max_height){l.setStyle(a,"height",b);if(f.clientHeight<c.max_height){l.setStyle(a,"overflow","hidden")}}},showMenu:function(c,f,a){var D=this,e=D.settings,d,C=l.getViewPort(),F,t,E,b,B=2,x,y,s=D.classPrefix;D.collapse(1);if(D.isMenuVisible){return}if(!D.rendered){d=l.add(D.settings.container,D.renderNode());i(D.items,function(m){m.postRender()});D.element=new g("menu_"+D.id,{blocker:1,container:e.container})}else{d=l.get("menu_"+D.id)}if(!j.isOpera){l.setStyles(d,{left:-65535,top:-65535})}l.show(d);D.update();c+=e.offset_x||0;f+=e.offset_y||0;C.w-=4;C.h-=4;if(e.constrain){F=d.clientWidth-B;t=d.clientHeight-B;E=C.x+C.w;b=C.y+C.h;if((c+e.vp_offset_x+F)>E){c=a?a-F:Math.max(0,(E-e.vp_offset_x)-F)}if((f+e.vp_offset_y+t)>b){f=Math.max(0,(b-e.vp_offset_y)-t)}}l.setStyles(d,{left:c,top:f});D.element.update();D.isMenuVisible=1;D.mouseClickFunc=h.add(d,"click",function(n){var m;n=n.target;if(n&&(n=l.getParent(n,"tr"))&&!l.hasClass(n,s+"ItemSub")){m=D.items[n.id];if(m.isDisabled()){return}x=D;while(x){if(x.hideMenu){x.hideMenu()}x=x.settings.parent}if(m.settings.onclick){m.settings.onclick(n)}return h.cancel(n)}});if(D.hasMenus()){D.mouseOverFunc=h.add(d,"mouseover",function(m){var p,n,o;m=m.target;if(m&&(m=l.getParent(m,"tr"))){p=D.items[m.id];if(D.lastMenu){D.lastMenu.collapse(1)}if(p.isDisabled()){return}if(m&&l.hasClass(m,s+"ItemSub")){n=l.getRect(m);p.showMenu((n.x+n.w-B),n.y-B,n.x);D.lastMenu=p;l.addClass(l.get(p.id).firstChild,s+"ItemActive")}}})}h.add(d,"keydown",D._keyHandler,D);D.onShowMenu.dispatch(D);if(e.keyboard_focus){D._setupKeyboardNav()}},hideMenu:function(a){var d=this,b=l.get("menu_"+d.id),c;if(!d.isMenuVisible){return}if(d.keyboardNav){d.keyboardNav.destroy()}h.remove(b,"mouseover",d.mouseOverFunc);h.remove(b,"click",d.mouseClickFunc);h.remove(b,"keydown",d._keyHandler);l.hide(b);d.isMenuVisible=0;if(!a){d.collapse(1)}if(d.element){d.element.hide()}if(c=l.get(d.id)){l.removeClass(c.firstChild,d.classPrefix+"ItemActive")}d.onHideMenu.dispatch(d)},add:function(a){var c=this,b;a=c.parent(a);if(c.isRendered&&(b=l.get("menu_"+c.id))){c._add(l.select("tbody",b)[0],a)}return a},collapse:function(a){this.parent(a);this.hideMenu(1)},remove:function(a){l.remove(a.id);this.destroy();return this.parent(a)},destroy:function(){var b=this,a=l.get("menu_"+b.id);if(b.keyboardNav){b.keyboardNav.destroy()}h.remove(a,"mouseover",b.mouseOverFunc);h.remove(l.select("a",a),"focus",b.mouseOverFunc);h.remove(a,"click",b.mouseClickFunc);h.remove(a,"keydown",b._keyHandler);if(b.element){b.element.remove()}l.remove(a)},renderNode:function(){var d=this,c=d.settings,a,e,b,f;f=l.create("div",{role:"listbox",id:"menu_"+d.id,"class":c["class"],style:"position:absolute;left:0;top:0;z-index:200000;outline:0"});if(d.settings.parent){l.setAttrib(f,"aria-parent","menu_"+d.settings.parent.id)}b=l.add(f,"div",{role:"presentation",id:"menu_"+d.id+"_co","class":d.classPrefix+(c["class"]?" "+c["class"]:"")});d.element=new g("menu_"+d.id,{blocker:1,container:c.container});if(c.menu_line){l.add(b,"span",{"class":d.classPrefix+"Line"})}a=l.add(b,"table",{role:"presentation",id:"menu_"+d.id+"_tbl",border:0,cellPadding:0,cellSpacing:0});e=l.add(a,"tbody");i(d.items,function(n){d._add(e,n)});d.rendered=true;return f},_setupKeyboardNav:function(){var a,b,c=this;a=l.select("#menu_"+c.id)[0];b=l.select("a[role=option]","menu_"+c.id);b.splice(0,0,a);c.keyboardNav=new j.ui.KeyboardNavigation({root:"menu_"+c.id,items:b,onCancel:function(){c.hideMenu()},enableUpDown:true});a.focus()},_keyHandler:function(c){var b=this,a;switch(c.keyCode){case 37:if(b.settings.parent){b.hideMenu();b.settings.parent.focus();h.cancel(c)}break;case 39:if(b.mouseOverFunc){b.mouseOverFunc(c)}break}},_add:function(f,o){var n,a=o.settings,b,d,e,c=this.classPrefix,r;if(a.separator){d=l.add(f,"tr",{id:o.id,"class":c+"ItemSeparator"});l.add(d,"td",{"class":c+"ItemSeparator"});if(n=d.previousSibling){l.addClass(n,"mceLast")}return}n=d=l.add(f,"tr",{id:o.id,"class":c+"Item "+c+"ItemEnabled"});n=e=l.add(n,a.titleItem?"th":"td");n=b=l.add(n,"a",{id:o.id+"_aria",role:a.titleItem?"presentation":"option",href:"javascript:;",onclick:"return false;",onmousedown:"return false;"});if(a.parent){l.setAttrib(b,"aria-haspopup","true");l.setAttrib(b,"aria-owns","menu_"+o.id)}l.addClass(e,a["class"]);r=l.add(n,"span",{"class":"mceIcon"+(a.icon?" mce_"+a.icon:"")});if(a.icon_src){l.add(r,"img",{src:a.icon_src})}n=l.add(n,a.element||"span",{"class":"mceText",title:o.settings.title},o.settings.title);if(o.settings.style){l.setAttrib(n,"style",o.settings.style)}if(f.childNodes.length==1){l.addClass(d,"mceFirst")}if((n=d.previousSibling)&&l.hasClass(n,c+"ItemSeparator")){l.addClass(d,"mceFirst")}if(o.collapse){l.addClass(d,c+"ItemSub")}if(n=d.previousSibling){l.removeClass(n,"mceLast")}l.addClass(d,"mceLast")}})})(tinymce);(function(c){var d=c.DOM;c.create("tinymce.ui.Button:tinymce.ui.Control",{Button:function(a,b,f){this.parent(a,b,f);this.classPrefix="mceButton"},renderHTML:function(){var a=this.classPrefix,b=this.settings,g,h;h=d.encode(b.label||"");g='<a role="button" id="'+this.id+'" href="javascript:;" class="'+a+" "+a+"Enabled "+b["class"]+(h?" "+a+"Labeled":"")+'" onmousedown="return false;" onclick="return false;" aria-labelledby="'+this.id+'_voice" title="'+d.encode(b.title)+'">';if(b.image&&!(this.editor&&this.editor.forcedHighContrastMode)){g+='<img class="mceIcon" src="'+b.image+'" alt="'+d.encode(b.title)+'" />'+h}else{g+='<span class="mceIcon '+b["class"]+'"></span>'+(h?'<span class="'+a+'Label">'+h+"</span>":"")}g+='<span class="mceVoiceLabel mceIconOnly" style="display: none;" id="'+this.id+'_voice">'+b.title+"</span>";g+="</a>";return g},postRender:function(){var b=this,a=b.settings;c.dom.Event.add(b.id,"click",function(e){if(!b.isDisabled()){return a.onclick.call(a.scope,e)}})}})})(tinymce);(function(i){var j=i.DOM,f=i.dom.Event,h=i.each,g=i.util.Dispatcher;i.create("tinymce.ui.ListBox:tinymce.ui.Control",{ListBox:function(a,b,d){var c=this;c.parent(a,b,d);c.items=[];c.onChange=new g(c);c.onPostRender=new g(c);c.onAdd=new g(c);c.onRenderMenu=new i.util.Dispatcher(this);c.classPrefix="mceListBox"},select:function(c){var d=this,a,b;if(c==undefined){return d.selectByIndex(-1)}if(c&&c.call){b=c}else{b=function(e){return e==c}}if(c!=d.selectedValue){h(d.items,function(e,l){if(b(e.value)){a=1;d.selectByIndex(l);return false}});if(!a){d.selectByIndex(-1)}}},selectByIndex:function(d){var c=this,b,a;if(d!=c.selectedIndex){b=j.get(c.id+"_text");a=c.items[d];if(a){c.selectedValue=a.value;c.selectedIndex=d;j.setHTML(b,j.encode(a.title));j.removeClass(b,"mceTitle");j.setAttrib(c.id,"aria-valuenow",a.title)}else{j.setHTML(b,j.encode(c.settings.title));j.addClass(b,"mceTitle");c.selectedValue=c.selectedIndex=null;j.setAttrib(c.id,"aria-valuenow",c.settings.title)}b=0}},add:function(a,d,b){var c=this;b=b||{};b=i.extend(b,{title:a,value:d});c.items.push(b);c.onAdd.dispatch(c,b)},getLength:function(){return this.items.length},renderHTML:function(){var b="",d=this,c=d.settings,a=d.classPrefix;b='<span role="button" aria-haspopup="true" aria-labelledby="'+d.id+'_text" aria-describedby="'+d.id+'_voiceDesc"><table role="presentation" tabindex="0" id="'+d.id+'" cellpadding="0" cellspacing="0" class="'+a+" "+a+"Enabled"+(c["class"]?(" "+c["class"]):"")+'"><tbody><tr>';b+="<td>"+j.createHTML("span",{id:d.id+"_voiceDesc","class":"voiceLabel",style:"display:none;"},d.settings.title);b+=j.createHTML("a",{id:d.id+"_text",tabindex:-1,href:"javascript:;","class":"mceText",onclick:"return false;",onmousedown:"return false;"},j.encode(d.settings.title))+"</td>";b+="<td>"+j.createHTML("a",{id:d.id+"_open",tabindex:-1,href:"javascript:;","class":"mceOpen",onclick:"return false;",onmousedown:"return false;"},'<span><span style="display:none;" class="mceIconOnly" aria-hidden="true">\u25BC</span></span>')+"</td>";b+="</tr></tbody></table></span>";return b},showMenu:function(){var c=this,a,b=j.get(this.id),d;if(c.isDisabled()||c.items.length==0){return}if(c.menu&&c.menu.isMenuVisible){return c.hideMenu()}if(!c.isMenuRendered){c.renderMenu();c.isMenuRendered=true}a=j.getPos(b);d=c.menu;d.settings.offset_x=a.x;d.settings.offset_y=a.y;d.settings.keyboard_focus=!i.isOpera;if(c.oldID){d.items[c.oldID].setSelected(0)}h(c.items,function(e){if(e.value===c.selectedValue){d.items[e.id].setSelected(1);c.oldID=e.id}});d.showMenu(0,b.clientHeight);f.add(j.doc,"mousedown",c.hideMenu,c);j.addClass(c.id,c.classPrefix+"Selected")},hideMenu:function(a){var b=this;if(b.menu&&b.menu.isMenuVisible){j.removeClass(b.id,b.classPrefix+"Selected");if(a&&a.type=="mousedown"&&(a.target.id==b.id+"_text"||a.target.id==b.id+"_open")){return}if(!a||!j.getParent(a.target,".mceMenu")){j.removeClass(b.id,b.classPrefix+"Selected");f.remove(j.doc,"mousedown",b.hideMenu,b);b.menu.hideMenu()}}},renderMenu:function(){var a=this,b;b=a.settings.control_manager.createDropMenu(a.id+"_menu",{menu_line:1,"class":a.classPrefix+"Menu mceNoIcons",max_width:150,max_height:150});b.onHideMenu.add(function(){a.hideMenu();a.focus()});b.add({title:a.settings.title,"class":"mceMenuItemTitle",onclick:function(){if(a.settings.onselect("")!==false){a.select("")}}});h(a.items,function(c){if(c.value===undefined){b.add({title:c.title,"class":"mceMenuItemTitle",onclick:function(){if(a.settings.onselect("")!==false){a.select("")}}})}else{c.id=j.uniqueId();c.onclick=function(){if(a.settings.onselect(c.value)!==false){a.select(c.value)}};b.add(c)}});a.onRenderMenu.dispatch(a,b);a.menu=b},postRender:function(){var b=this,a=b.classPrefix;f.add(b.id,"click",b.showMenu,b);f.add(b.id,"keydown",function(c){if(c.keyCode==32){b.showMenu(c);f.cancel(c)}});f.add(b.id,"focus",function(){if(!b._focused){b.keyDownHandler=f.add(b.id,"keydown",function(c){if(c.keyCode==40){b.showMenu();f.cancel(c)}});b.keyPressHandler=f.add(b.id,"keypress",function(c){var d;if(c.keyCode==13){d=b.selectedValue;b.selectedValue=null;f.cancel(c);b.settings.onselect(d)}})}b._focused=1});f.add(b.id,"blur",function(){f.remove(b.id,"keydown",b.keyDownHandler);f.remove(b.id,"keypress",b.keyPressHandler);b._focused=0});if(i.isIE6||!j.boxModel){f.add(b.id,"mouseover",function(){if(!j.hasClass(b.id,a+"Disabled")){j.addClass(b.id,a+"Hover")}});f.add(b.id,"mouseout",function(){if(!j.hasClass(b.id,a+"Disabled")){j.removeClass(b.id,a+"Hover")}})}b.onPostRender.dispatch(b,j.get(b.id))},destroy:function(){this.parent();f.clear(this.id+"_text");f.clear(this.id+"_open")}})})(tinymce);(function(i){var j=i.DOM,f=i.dom.Event,h=i.each,g=i.util.Dispatcher;i.create("tinymce.ui.NativeListBox:tinymce.ui.ListBox",{NativeListBox:function(a,b){this.parent(a,b);this.classPrefix="mceNativeListBox"},setDisabled:function(a){j.get(this.id).disabled=a;this.setAriaProperty("disabled",a)},isDisabled:function(){return j.get(this.id).disabled},select:function(c){var d=this,a,b;if(c==undefined){return d.selectByIndex(-1)}if(c&&c.call){b=c}else{b=function(e){return e==c}}if(c!=d.selectedValue){h(d.items,function(e,l){if(b(e.value)){a=1;d.selectByIndex(l);return false}});if(!a){d.selectByIndex(-1)}}},selectByIndex:function(a){j.get(this.id).selectedIndex=a+1;this.selectedValue=this.items[a]?this.items[a].value:null},add:function(a,d,e){var b,c=this;e=e||{};e.value=d;if(c.isRendered()){j.add(j.get(this.id),"option",e,a)}b={title:a,value:d,attribs:e};c.items.push(b);c.onAdd.dispatch(c,b)},getLength:function(){return this.items.length},renderHTML:function(){var a,b=this;a=j.createHTML("option",{value:""},"-- "+b.settings.title+" --");h(b.items,function(c){a+=j.createHTML("option",{value:c.value},c.title)});a=j.createHTML("select",{id:b.id,"class":"mceNativeListBox","aria-labelledby":b.id+"_aria"},a);a+=j.createHTML("span",{id:b.id+"_aria",style:"display: none"},b.settings.title);return a},postRender:function(){var c=this,b,a=true;c.rendered=true;function d(e){var l=c.items[e.target.selectedIndex-1];if(l&&(l=l.value)){c.onChange.dispatch(c,l);if(c.settings.onselect){c.settings.onselect(l)}}}f.add(c.id,"change",d);f.add(c.id,"keydown",function(e){var l;f.remove(c.id,"change",b);a=false;l=f.add(c.id,"blur",function(){if(a){return}a=true;f.add(c.id,"change",d);f.remove(c.id,"blur",l)});if(e.keyCode==13||e.keyCode==32){d(e);return f.cancel(e)}});c.onPostRender.dispatch(c,j.get(c.id))}})})(tinymce);(function(h){var e=h.DOM,f=h.dom.Event,g=h.each;h.create("tinymce.ui.MenuButton:tinymce.ui.Button",{MenuButton:function(a,b,c){this.parent(a,b,c);this.onRenderMenu=new h.util.Dispatcher(this);b.menu_container=b.menu_container||e.doc.body},showMenu:function(){var d=this,a,b,c=e.get(d.id),k;if(d.isDisabled()){return}if(!d.isMenuRendered){d.renderMenu();d.isMenuRendered=true}if(d.isMenuVisible){return d.hideMenu()}a=e.getPos(d.settings.menu_container);b=e.getPos(c);k=d.menu;k.settings.offset_x=b.x;k.settings.offset_y=b.y;k.settings.vp_offset_x=b.x;k.settings.vp_offset_y=b.y;k.settings.keyboard_focus=d._focused;k.showMenu(0,c.clientHeight);f.add(e.doc,"mousedown",d.hideMenu,d);d.setState("Selected",1);d.isMenuVisible=1},renderMenu:function(){var a=this,b;b=a.settings.control_manager.createDropMenu(a.id+"_menu",{menu_line:1,"class":this.classPrefix+"Menu",icons:a.settings.icons});b.onHideMenu.add(function(){a.hideMenu();a.focus()});a.onRenderMenu.dispatch(a,b);a.menu=b},hideMenu:function(a){var b=this;if(a&&a.type=="mousedown"&&e.getParent(a.target,function(c){return c.id===b.id||c.id===b.id+"_open"})){return}if(!a||!e.getParent(a.target,".mceMenu")){b.setState("Selected",0);f.remove(e.doc,"mousedown",b.hideMenu,b);if(b.menu){b.menu.hideMenu()}}b.isMenuVisible=0},postRender:function(){var b=this,a=b.settings;f.add(b.id,"click",function(){if(!b.isDisabled()){if(a.onclick){a.onclick(b.value)}b.showMenu()}})}})})(tinymce);(function(h){var e=h.DOM,f=h.dom.Event,g=h.each;h.create("tinymce.ui.SplitButton:tinymce.ui.MenuButton",{SplitButton:function(a,b,c){this.parent(a,b,c);this.classPrefix="mceSplitButton"},renderHTML:function(){var a,c=this,b=c.settings,d;a="<tbody><tr>";if(b.image){d=e.createHTML("img ",{src:b.image,role:"presentation","class":"mceAction "+b["class"]})}else{d=e.createHTML("span",{"class":"mceAction "+b["class"]},"")}d+=e.createHTML("span",{"class":"mceVoiceLabel mceIconOnly",id:c.id+"_voice",style:"display:none;"},b.title);a+="<td >"+e.createHTML("a",{role:"button",id:c.id+"_action",tabindex:"-1",href:"javascript:;","class":"mceAction "+b["class"],onclick:"return false;",onmousedown:"return false;",title:b.title},d)+"</td>";d=e.createHTML("span",{"class":"mceOpen "+b["class"]},'<span style="display:none;" class="mceIconOnly" aria-hidden="true">\u25BC</span>');a+="<td >"+e.createHTML("a",{role:"button",id:c.id+"_open",tabindex:"-1",href:"javascript:;","class":"mceOpen "+b["class"],onclick:"return false;",onmousedown:"return false;",title:b.title},d)+"</td>";a+="</tr></tbody>";a=e.createHTML("table",{id:c.id,role:"presentation",tabindex:"0","class":"mceSplitButton mceSplitButtonEnabled "+b["class"],cellpadding:"0",cellspacing:"0",title:b.title},a);return e.createHTML("span",{role:"button","aria-labelledby":c.id+"_voice","aria-haspopup":"true"},a)},postRender:function(){var c=this,a=c.settings,b;if(a.onclick){b=function(d){if(!c.isDisabled()){a.onclick(c.value);f.cancel(d)}};f.add(c.id+"_action","click",b);f.add(c.id,["click","keydown"],function(r){var o=32,d=14,q=13,p=38,n=40;if((r.keyCode===32||r.keyCode===13||r.keyCode===14)&&!r.altKey&&!r.ctrlKey&&!r.metaKey){b();f.cancel(r)}else{if(r.type==="click"||r.keyCode===n){c.showMenu();f.cancel(r)}}})}f.add(c.id+"_open","click",function(d){c.showMenu();f.cancel(d)});f.add([c.id,c.id+"_open"],"focus",function(){c._focused=1});f.add([c.id,c.id+"_open"],"blur",function(){c._focused=0});if(h.isIE6||!e.boxModel){f.add(c.id,"mouseover",function(){if(!e.hasClass(c.id,"mceSplitButtonDisabled")){e.addClass(c.id,"mceSplitButtonHover")}});f.add(c.id,"mouseout",function(){if(!e.hasClass(c.id,"mceSplitButtonDisabled")){e.removeClass(c.id,"mceSplitButtonHover")}})}},destroy:function(){this.parent();f.clear(this.id+"_action");f.clear(this.id+"_open");f.clear(this.id)}})})(tinymce);(function(i){var j=i.DOM,g=i.dom.Event,f=i.is,h=i.each;i.create("tinymce.ui.ColorSplitButton:tinymce.ui.SplitButton",{ColorSplitButton:function(a,b,d){var c=this;c.parent(a,b,d);c.settings=b=i.extend({colors:"000000,993300,333300,003300,003366,000080,333399,333333,800000,FF6600,808000,008000,008080,0000FF,666699,808080,FF0000,FF9900,99CC00,339966,33CCCC,3366FF,800080,999999,FF00FF,FFCC00,FFFF00,00FF00,00FFFF,00CCFF,993366,C0C0C0,FF99CC,FFCC99,FFFF99,CCFFCC,CCFFFF,99CCFF,CC99FF,FFFFFF",grid_width:8,default_color:"#888888"},c.settings);c.onShowMenu=new i.util.Dispatcher(c);c.onHideMenu=new i.util.Dispatcher(c);c.value=b.default_color},showMenu:function(){var e=this,d,a,b,c;if(e.isDisabled()){return}if(!e.isMenuRendered){e.renderMenu();e.isMenuRendered=true}if(e.isMenuVisible){return e.hideMenu()}b=j.get(e.id);j.show(e.id+"_menu");j.addClass(b,"mceSplitButtonSelected");c=j.getPos(b);j.setStyles(e.id+"_menu",{left:c.x,top:c.y+b.clientHeight,zIndex:200000});b=0;g.add(j.doc,"mousedown",e.hideMenu,e);e.onShowMenu.dispatch(e);if(e._focused){e._keyHandler=g.add(e.id+"_menu","keydown",function(l){if(l.keyCode==27){e.hideMenu()}});j.select("a",e.id+"_menu")[0].focus()}e.isMenuVisible=1},hideMenu:function(a){var b=this;if(b.isMenuVisible){if(a&&a.type=="mousedown"&&j.getParent(a.target,function(c){return c.id===b.id+"_open"})){return}if(!a||!j.getParent(a.target,".mceSplitButtonMenu")){j.removeClass(b.id,"mceSplitButtonSelected");g.remove(j.doc,"mousedown",b.hideMenu,b);g.remove(b.id+"_menu","keydown",b._keyHandler);j.hide(b.id+"_menu")}b.isMenuVisible=0}},renderMenu:function(){var b=this,n,e=0,a=b.settings,r,m,d,c,s;c=j.add(a.menu_container,"div",{role:"listbox",id:b.id+"_menu","class":a.menu_class+" "+a["class"],style:"position:absolute;left:0;top:-1000px;"});n=j.add(c,"div",{"class":a["class"]+" mceSplitButtonMenu"});j.add(n,"span",{"class":"mceMenuLine"});r=j.add(n,"table",{role:"presentation","class":"mceColorSplitMenu"});m=j.add(r,"tbody");e=0;h(f(a.colors,"array")?a.colors:a.colors.split(","),function(k){k=k.replace(/^#/,"");if(!e--){d=j.add(m,"tr");e=a.grid_width-1}r=j.add(d,"td");r=j.add(r,"a",{role:"option",href:"javascript:;",style:{backgroundColor:"#"+k},title:b.editor.getLang("colors."+k,k),"data-mce-color":"#"+k});if(b.editor.forcedHighContrastMode){r=j.add(r,"canvas",{width:16,height:16,"aria-hidden":"true"});if(r.getContext&&(s=r.getContext("2d"))){s.fillStyle="#"+k;s.fillRect(0,0,16,16)}else{j.remove(r)}}});if(a.more_colors_func){r=j.add(m,"tr");r=j.add(r,"td",{colspan:a.grid_width,"class":"mceMoreColors"});r=j.add(r,"a",{role:"option",id:b.id+"_more",href:"javascript:;",onclick:"return false;","class":"mceMoreColors"},a.more_colors_title);g.add(r,"click",function(k){a.more_colors_func.call(a.more_colors_scope||this);return g.cancel(k)})}j.addClass(n,"mceColorSplitMenu");new i.ui.KeyboardNavigation({root:b.id+"_menu",items:j.select("a",b.id+"_menu"),onCancel:function(){b.hideMenu();b.focus()}});g.add(b.id+"_menu","mousedown",function(k){return g.cancel(k)});g.add(b.id+"_menu","click",function(l){var k;l=j.getParent(l.target,"a",m);if(l&&l.nodeName.toLowerCase()=="a"&&(k=l.getAttribute("data-mce-color"))){b.setColor(k)}return g.cancel(l)});return c},setColor:function(a){this.displayColor(a);this.hideMenu();this.settings.onselect(a)},displayColor:function(a){var b=this;j.setStyle(b.id+"_preview","backgroundColor",a);b.value=a},postRender:function(){var b=this,a=b.id;b.parent();j.add(a+"_action","div",{id:a+"_preview","class":"mceColorPreview"});j.setStyle(b.id+"_preview","backgroundColor",b.value)},destroy:function(){this.parent();g.clear(this.id+"_menu");g.clear(this.id+"_more");j.remove(this.id+"_menu")}})})(tinymce);(function(e){var g=e.DOM,h=e.each,f=e.dom.Event;e.create("tinymce.ui.ToolbarGroup:tinymce.ui.Container",{renderHTML:function(){var d=this,b=[],k=d.controls,a=e.each,c=d.settings;b.push('<div id="'+d.id+'" role="group" aria-labelledby="'+d.id+'_voice">');b.push("<span role='application'>");b.push('<span id="'+d.id+'_voice" class="mceVoiceLabel" style="display:none;">'+g.encode(c.name)+"</span>");a(k,function(i){b.push(i.renderHTML())});b.push("</span>");b.push("</div>");return b.join("")},focus:function(){this.keyNav.focus()},postRender:function(){var a=this,b=[];h(a.controls,function(c){h(c.controls,function(d){if(d.id){b.push(d)}})});a.keyNav=new e.ui.KeyboardNavigation({root:a.id,items:b,onCancel:function(){a.editor.focus()},excludeFromTabOrder:!a.settings.tab_focus_toolbar})},destroy:function(){var a=this;a.parent();a.keyNav.destroy();f.clear(a.id)}})})(tinymce);(function(e){var f=e.DOM,d=e.each;e.create("tinymce.ui.Toolbar:tinymce.ui.Container",{renderHTML:function(){var b=this,p="",i,h,a=b.settings,q,r,o,c;c=b.controls;for(q=0;q<c.length;q++){h=c[q];r=c[q-1];o=c[q+1];if(q===0){i="mceToolbarStart";if(h.Button){i+=" mceToolbarStartButton"}else{if(h.SplitButton){i+=" mceToolbarStartSplitButton"}else{if(h.ListBox){i+=" mceToolbarStartListBox"}}}p+=f.createHTML("td",{"class":i},f.createHTML("span",null,"<!-- IE -->"))}if(r&&h.ListBox){if(r.Button||r.SplitButton){p+=f.createHTML("td",{"class":"mceToolbarEnd"},f.createHTML("span",null,"<!-- IE -->"))}}if(f.stdMode){p+='<td style="position: relative">'+h.renderHTML()+"</td>"}else{p+="<td>"+h.renderHTML()+"</td>"}if(o&&h.ListBox){if(o.Button||o.SplitButton){p+=f.createHTML("td",{"class":"mceToolbarStart"},f.createHTML("span",null,"<!-- IE -->"))}}}i="mceToolbarEnd";if(h.Button){i+=" mceToolbarEndButton"}else{if(h.SplitButton){i+=" mceToolbarEndSplitButton"}else{if(h.ListBox){i+=" mceToolbarEndListBox"}}}p+=f.createHTML("td",{"class":i},f.createHTML("span",null,"<!-- IE -->"));return f.createHTML("table",{id:b.id,"class":"mceToolbar"+(a["class"]?" "+a["class"]:""),cellpadding:"0",cellspacing:"0",align:b.settings.align||"",role:"presentation",tabindex:"-1"},"<tbody><tr>"+p+"</tr></tbody>")}})})(tinymce);(function(d){var e=d.util.Dispatcher,f=d.each;d.create("tinymce.AddOnManager",{AddOnManager:function(){var a=this;a.items=[];a.urls={};a.lookup={};a.onAdd=new e(a)},get:function(a){if(this.lookup[a]){return this.lookup[a].instance}else{return undefined}},dependencies:function(a){var b;if(this.lookup[a]){b=this.lookup[a].dependencies}return b||[]},requireLangPack:function(a){var b=d.settings;if(b&&b.language&&b.language_load!==false){d.ScriptLoader.add(this.urls[a]+"/langs/"+b.language+".js")}},add:function(a,b,c){this.items.push(b);this.lookup[a]={instance:b,dependencies:c};this.onAdd.dispatch(this,a,b);return b},createUrl:function(b,a){if(typeof a==="object"){return a}else{return{prefix:b.prefix,resource:a,suffix:b.suffix}}},addComponents:function(a,c){var b=this.urls[a];d.each(c,function(h){d.ScriptLoader.add(b+"/"+h)})},load:function(a,l,n,c){var k=this,m=l;function b(){var g=k.dependencies(a);d.each(g,function(h){var i=k.createUrl(l,h);k.load(i.resource,i,undefined,undefined)});if(n){if(c){n.call(c)}else{n.call(d.ScriptLoader)}}}if(k.urls[a]){return}if(typeof l==="object"){m=l.prefix+l.resource+l.suffix}if(m.indexOf("/")!=0&&m.indexOf("://")==-1){m=d.baseURL+"/"+m}k.urls[a]=m.substring(0,m.lastIndexOf("/"));if(k.lookup[a]){b()}else{d.ScriptLoader.add(m,b,c)}}});d.PluginManager=new d.AddOnManager();d.ThemeManager=new d.AddOnManager()}(tinymce));(function(m){var p=m.each,s=m.extend,l=m.DOM,n=m.dom.Event,q=m.ThemeManager,u=m.PluginManager,r=m.explode,o=m.util.Dispatcher,v,t=0;m.documentBaseURL=window.location.href.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,"");if(!/[\/\\]$/.test(m.documentBaseURL)){m.documentBaseURL+="/"}m.baseURL=new m.util.URI(m.documentBaseURL).toAbsolute(m.baseURL);m.baseURI=new m.util.URI(m.baseURL);m.onBeforeUnload=new o(m);n.add(window,"beforeunload",function(a){m.onBeforeUnload.dispatch(m,a)});m.onAddEditor=new o(m);m.onRemoveEditor=new o(m);m.EditorManager=s(m,{editors:[],i18n:{},activeEditor:null,init:function(e){var h=this,f,b=m.ScriptLoader,c,g=[],a;function d(i,z,k){var j=i[z];if(!j){return}if(m.is(j,"string")){k=j.replace(/\.\w+$/,"");k=k?m.resolve(k):0;j=m.resolve(j)}return j.apply(k||this,Array.prototype.slice.call(arguments,2))}e=s({theme:"simple",language:"en"},e);h.settings=e;n.add(document,"init",function(){var k,i;d(e,"onpageload");switch(e.mode){case"exact":k=e.elements||"";if(k.length>0){p(r(k),function(y){if(l.get(y)){a=new m.Editor(y,e);g.push(a);a.render(1)}else{p(document.forms,function(x){p(x.elements,function(A){if(A.name===y){y="mce_editor_"+t++;l.setAttrib(A,"id",y);a=new m.Editor(y,e);g.push(a);a.render(1)}})})}})}break;case"textareas":case"specific_textareas":function j(A,z){return z.constructor===RegExp?z.test(A.className):l.hasClass(A,z)}p(l.select("textarea"),function(y){if(e.editor_deselector&&j(y,e.editor_deselector)){return}if(!e.editor_selector||j(y,e.editor_selector)){c=l.get(y.name);if(!y.id&&!c){y.id=y.name}if(!y.id||h.get(y.id)){y.id=l.uniqueId()}a=new m.Editor(y.id,e);g.push(a);a.render(1)}});break}if(e.oninit){k=i=0;p(g,function(y){i++;if(!y.initialized){y.onInit.add(function(){k++;if(k==i){d(e,"oninit")}})}else{k++}if(k==i){d(e,"oninit")}})}})},get:function(a){if(a===v){return this.editors}return this.editors[a]},getInstanceById:function(a){return this.get(a)},add:function(a){var b=this,c=b.editors;c[a.id]=a;c.push(a);b._setActive(a);b.onAddEditor.dispatch(b,a);if(m.adapter){m.adapter.patchEditor(a)}return a},remove:function(d){var a=this,b,c=a.editors;if(!c[d.id]){return null}delete c[d.id];for(b=0;b<c.length;b++){if(c[b]==d){c.splice(b,1);break}}if(a.activeEditor==d){a._setActive(c[0])}d.destroy();a.onRemoveEditor.dispatch(a,d);return d},execCommand:function(c,e,f){var d=this,g=d.get(f),b;switch(c){case"mceFocus":g.focus();return true;case"mceAddEditor":case"mceAddControl":if(!d.get(f)){new m.Editor(f,d.settings).render()}return true;case"mceAddFrameControl":b=f.window;b.tinyMCE=tinyMCE;b.tinymce=m;m.DOM.doc=b.document;m.DOM.win=b;g=new m.Editor(f.element_id,f);g.render();if(m.isIE){function a(){g.destroy();b.detachEvent("onunload",a);b=b.tinyMCE=b.tinymce=null}b.attachEvent("onunload",a)}f.page_window=null;return true;case"mceRemoveEditor":case"mceRemoveControl":if(g){g.remove()}return true;case"mceToggleEditor":if(!g){d.execCommand("mceAddControl",0,f);return true}if(g.isHidden()){g.show()}else{g.hide()}return true}if(d.activeEditor){return d.activeEditor.execCommand(c,e,f)}return false},execInstanceCommand:function(c,d,e,a){var b=this.get(c);if(b){return b.execCommand(d,e,a)}return false},triggerSave:function(){p(this.editors,function(a){a.save()})},addI18n:function(d,c){var b,a=this.i18n;if(!m.is(d,"string")){p(d,function(e,f){p(e,function(g,h){p(g,function(i,j){if(h==="common"){a[f+"."+j]=i}else{a[f+"."+h+"."+j]=i}})})})}else{p(c,function(e,f){a[d+"."+f]=e})}},_setActive:function(a){this.selectedInstance=this.activeEditor=a}})})(tinymce);(function(r){var q=r.DOM,u=r.dom.Event,z=r.extend,t=r.util.Dispatcher,v=r.each,E=r.isGecko,D=r.isIE,A=r.isWebKit,B=r.is,x=r.ThemeManager,C=r.PluginManager,p=r.inArray,s=r.grep,y=r.explode;r.create("tinymce.Editor",{Editor:function(a,b){var c=this;c.id=c.editorId=a;c.execCommands={};c.queryStateCommands={};c.queryValueCommands={};c.isNotDirty=false;c.plugins={};v(["onPreInit","onBeforeRenderUI","onPostRender","onInit","onRemove","onActivate","onDeactivate","onClick","onEvent","onMouseUp","onMouseDown","onDblClick","onKeyDown","onKeyUp","onKeyPress","onContextMenu","onSubmit","onReset","onPaste","onPreProcess","onPostProcess","onBeforeSetContent","onBeforeGetContent","onSetContent","onGetContent","onLoadContent","onSaveContent","onNodeChange","onChange","onBeforeExecCommand","onExecCommand","onUndo","onRedo","onVisualAid","onSetProgressState"],function(d){c[d]=new t(c)});c.settings=b=z({id:a,language:"en",docs_language:"en",theme:"simple",skin:"default",delta_width:0,delta_height:0,popup_css:"",plugins:"",document_base_url:r.documentBaseURL,add_form_submit_trigger:1,submit_patch:1,add_unload_trigger:1,convert_urls:1,relative_urls:1,remove_script_host:1,table_inline_editing:0,object_resizing:1,cleanup:1,accessibility_focus:1,custom_shortcuts:1,custom_undo_redo_keyboard_shortcuts:1,custom_undo_redo_restore_selection:1,custom_undo_redo:1,doctype:r.isIE6?'<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">':"<!DOCTYPE>",visual_table_class:"mceItemTable",visual:1,font_size_style_values:"xx-small,x-small,small,medium,large,x-large,xx-large",apply_source_formatting:1,directionality:"ltr",forced_root_block:"p",hidden_input:1,padd_empty_editor:1,render_ui:1,init_theme:1,force_p_newlines:1,indentation:"30px",keep_styles:1,fix_table_elements:1,inline_styles:1,convert_fonts_to_spans:true,indent:"simple",indent_before:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,ul,li,area,table,thead,tfoot,tbody,tr",indent_after:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,ul,li,area,table,thead,tfoot,tbody,tr",validate:true,entity_encoding:"named",url_converter:c.convertURL,url_converter_scope:c,ie7_compat:true},b);c.documentBaseURI=new r.util.URI(b.document_base_url||r.documentBaseURL,{base_uri:tinyMCE.baseURI});c.baseURI=r.baseURI;c.contentCSS=[];c.execCallback("setup",c)},render:function(d){var c=this,b=c.settings,a=c.id,f=r.ScriptLoader;if(!u.domLoaded){u.add(document,"init",function(){c.render()});return}tinyMCE.settings=b;if(!c.getElement()){return}if(r.isIDevice&&!r.isIOS5){return}if(!/TEXTAREA|INPUT/i.test(c.getElement().nodeName)&&b.hidden_input&&q.getParent(a,"form")){q.insertAfter(q.create("input",{type:"hidden",name:a}),a)}if(r.WindowManager){c.windowManager=new r.WindowManager(c)}if(b.encoding=="xml"){c.onGetContent.add(function(h,g){if(g.save){g.content=q.encode(g.content)}})}if(b.add_form_submit_trigger){c.onSubmit.addToTop(function(){if(c.initialized){c.save();c.isNotDirty=1}})}if(b.add_unload_trigger){c._beforeUnload=tinyMCE.onBeforeUnload.add(function(){if(c.initialized&&!c.destroyed&&!c.isHidden()){c.save({format:"raw",no_events:true})}})}r.addUnload(c.destroy,c);if(b.submit_patch){c.onBeforeRenderUI.add(function(){var g=c.getElement().form;if(!g){return}if(g._mceOldSubmit){return}if(!g.submit.nodeType&&!g.submit.length){c.formElement=g;g._mceOldSubmit=g.submit;g.submit=function(){r.triggerSave();c.isNotDirty=1;return c.formElement._mceOldSubmit(c.formElement)}}g=null})}function e(){if(b.language&&b.language_load!==false){f.add(r.baseURL+"/langs/"+b.language+".js")}if(b.theme&&b.theme.charAt(0)!="-"&&!x.urls[b.theme]){x.load(b.theme,"themes/"+b.theme+"/editor_template"+r.suffix+".js")}v(y(b.plugins),function(g){if(g&&!C.urls[g]){if(g.charAt(0)=="-"){g=g.substr(1,g.length);var h=C.dependencies(g);v(h,function(i){var j={prefix:"plugins/",resource:i,suffix:"/editor_plugin"+r.suffix+".js"};var i=C.createUrl(j,i);C.load(i.resource,i)})}else{if(g=="safari"){return}C.load(g,{prefix:"plugins/",resource:g,suffix:"/editor_plugin"+r.suffix+".js"})}}});f.loadQueue(function(){if(!c.removed){c.init()}})}e()},init:function(){var b,m=this,k=m.settings,J,g,a=m.getElement(),d,f,o,i,c,n,h,l=[];r.add(m);k.aria_label=k.aria_label||q.getAttrib(a,"aria-label",m.getLang("aria.rich_text_area"));if(k.theme){k.theme=k.theme.replace(/-/,"");d=x.get(k.theme);m.theme=new d();if(m.theme.init&&k.init_theme){m.theme.init(m,x.urls[k.theme]||r.documentBaseURL.replace(/\/$/,""))}}function e(G){var F=C.get(G),H=C.urls[G]||r.documentBaseURL.replace(/\/$/,""),I;if(F&&r.inArray(l,G)===-1){v(C.dependencies(G),function(K){e(K)});I=new F(m,H);m.plugins[G]=I;if(I.init){I.init(m,H);l.push(G)}}}v(y(k.plugins.replace(/\-/g,"")),e);if(k.popup_css!==false){if(k.popup_css){k.popup_css=m.documentBaseURI.toAbsolute(k.popup_css)}else{k.popup_css=m.baseURI.toAbsolute("themes/"+k.theme+"/skins/"+k.skin+"/dialog.css")}}if(k.popup_css_add){k.popup_css+=","+m.documentBaseURI.toAbsolute(k.popup_css_add)}m.controlManager=new r.ControlManager(m);if(k.custom_undo_redo){m.onBeforeExecCommand.add(function(I,G,H,F,L){if(G!="Undo"&&G!="Redo"&&G!="mceRepaint"&&(!L||!L.skip_undo)){m.undoManager.beforeChange()}});m.onExecCommand.add(function(I,G,H,F,L){if(G!="Undo"&&G!="Redo"&&G!="mceRepaint"&&(!L||!L.skip_undo)){m.undoManager.add()}})}m.onExecCommand.add(function(G,F){if(!/^(FontName|FontSize)$/.test(F)){m.nodeChanged()}});if(E){function j(G,F){if(!F||!F.initial){m.execCommand("mceRepaint")}}m.onUndo.add(j);m.onRedo.add(j);m.onSetContent.add(j)}m.onBeforeRenderUI.dispatch(m,m.controlManager);if(k.render_ui){J=k.width||a.style.width||a.offsetWidth;g=k.height||a.style.height||a.offsetHeight;m.orgDisplay=a.style.display;n=/^[0-9\.]+(|px)$/i;if(n.test(""+J)){J=Math.max(parseInt(J)+(d.deltaWidth||0),100)}if(n.test(""+g)){g=Math.max(parseInt(g)+(d.deltaHeight||0),100)}d=m.theme.renderUI({targetNode:a,width:J,height:g,deltaWidth:k.delta_width,deltaHeight:k.delta_height});m.editorContainer=d.editorContainer}if(document.domain&&location.hostname!=document.domain){r.relaxedDomain=document.domain}q.setStyles(d.sizeContainer||d.editorContainer,{width:J,height:g});if(k.content_css){r.each(y(k.content_css),function(F){m.contentCSS.push(m.documentBaseURI.toAbsolute(F))})}g=(d.iframeHeight||g)+(typeof(g)=="number"?(d.deltaHeight||0):"");if(g<100){g=100}m.iframeHTML=k.doctype+'<html><head xmlns="http://www.w3.org/1999/xhtml">';if(k.document_base_url!=r.documentBaseURL){m.iframeHTML+='<base href="'+m.documentBaseURI.getURI()+'" />'}if(k.ie7_compat){m.iframeHTML+='<meta http-equiv="X-UA-Compatible" content="IE=7" />'}else{m.iframeHTML+='<meta http-equiv="X-UA-Compatible" content="IE=edge" />'}m.iframeHTML+='<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />';if(!E||!/Firefox\/2/.test(navigator.userAgent)){for(h=0;h<m.contentCSS.length;h++){m.iframeHTML+='<link type="text/css" rel="stylesheet" href="'+m.contentCSS[h]+'" />'}m.contentCSS=[]}i=k.body_id||"tinymce";if(i.indexOf("=")!=-1){i=m.getParam("body_id","","hash");i=i[m.id]||i}c=k.body_class||"";if(c.indexOf("=")!=-1){c=m.getParam("body_class","","hash");c=c[m.id]||""}m.iframeHTML+='</head><body id="'+i+'" class="mceContentBody '+c+'"></body></html>';if(r.relaxedDomain&&(D||(r.isOpera&&parseFloat(opera.version())<11))){o='javascript:(function(){document.open();document.domain="'+document.domain+'";var ed = window.parent.tinyMCE.get("'+m.id+'");document.write(ed.iframeHTML);document.close();ed.setupIframe();})()'}b=q.add(d.iframeContainer,"iframe",{id:m.id+"_ifr",src:o||'javascript:""',frameBorder:"0",allowTransparency:"true",title:k.aria_label,style:{width:"100%",height:g}});m.contentAreaContainer=d.iframeContainer;q.get(d.editorContainer).style.display=m.orgDisplay;q.get(m.id).style.display="none";q.setAttrib(m.id,"aria-hidden",true);if(!r.relaxedDomain||!o){m.setupIframe()}a=b=d=null},setupIframe:function(a){var e=this,b=e.settings,h=q.get(e.id),g=e.getDoc(),c,f;if((!D||!r.relaxedDomain)&&!a){if(E&&!b.readonly){e.getWin().onload=function(){window.setTimeout(function(){var j=e.getBody(),i;j.innerHTML="<br>";if(j.contentEditable!==i){j.contentEditable=false;j.contentEditable=true;e.onMouseDown.add(function(k,l){if(l.target.nodeName==="HTML"){j.contentEditable=false;j.contentEditable=true;g.designMode="on";window.setTimeout(function(){g.designMode="off";e.getBody().focus()},1)}})}else{g.designMode="on"}e.setupIframe(true)},1)}}g.open();g.write(e.iframeHTML);g.close();if(r.relaxedDomain){g.domain=r.relaxedDomain}if(E&&!b.readonly){return}}f=e.getBody();f.disabled=true;if(!E&&!b.readonly){f.contentEditable=true}f.disabled=false;e.schema=new r.html.Schema(b);e.dom=new r.dom.DOMUtils(e.getDoc(),{keep_values:true,url_converter:e.convertURL,url_converter_scope:e,hex_colors:b.force_hex_style_colors,class_filter:b.class_filter,update_styles:1,fix_ie_paragraphs:1,schema:e.schema});e.parser=new r.html.DomParser(b,e.schema);if(!e.settings.allow_html_in_named_anchor){e.parser.addAttributeFilter("name",function(k,j){var o=k.length,m,i,n,l;while(o--){l=k[o];if(l.name==="a"&&l.firstChild){n=l.parent;m=l.lastChild;do{i=m.prev;n.insert(m,l);m=i}while(m)}}})}e.parser.addAttributeFilter("src,href,style",function(k,j){var i=k.length,n,l=e.dom,m,o;while(i--){n=k[i];m=n.attr(j);o="data-mce-"+j;if(!n.attributes.map[o]){if(j==="style"){n.attr(o,l.serializeStyle(l.parseStyle(m),n.name))}else{n.attr(o,e.convertURL(m,j,n.name))}}}});e.parser.addNodeFilter("script",function(k,j){var i=k.length;while(i--){k[i].attr("type","mce-text/javascript")}});e.parser.addNodeFilter("#cdata",function(k,j){var i=k.length,l;while(i--){l=k[i];l.type=8;l.name="#comment";l.value="[CDATA["+l.value+"]]"}});e.parser.addNodeFilter("p,h1,h2,h3,h4,h5,h6,div",function(j,i){var m=j.length,l,k=e.schema.getNonEmptyElements();while(m--){l=j[m];if(l.isEmpty(k)){l.empty().append(new r.html.Node("br",1)).shortEnded=true}}});e.serializer=new r.dom.Serializer(b,e.dom,e.schema);e.selection=new r.dom.Selection(e.dom,e.getWin(),e.serializer);e.formatter=new r.Formatter(this);e.formatter.register({alignleft:[{selector:"p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li",styles:{textAlign:"left"}},{selector:"img,table",collapsed:false,styles:{"float":"left"}}],aligncenter:[{selector:"p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li",styles:{textAlign:"center"}},{selector:"img",collapsed:false,styles:{display:"block",marginLeft:"auto",marginRight:"auto"}},{selector:"table",collapsed:false,styles:{marginLeft:"auto",marginRight:"auto"}}],alignright:[{selector:"p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li",styles:{textAlign:"right"}},{selector:"img,table",collapsed:false,styles:{"float":"right"}}],alignfull:[{selector:"p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li",styles:{textAlign:"justify"}}],bold:[{inline:"strong",remove:"all"},{inline:"span",styles:{fontWeight:"bold"}},{inline:"b",remove:"all"}],italic:[{inline:"em",remove:"all"},{inline:"span",styles:{fontStyle:"italic"}},{inline:"i",remove:"all"}],underline:[{inline:"span",styles:{textDecoration:"underline"},exact:true},{inline:"u",remove:"all"}],strikethrough:[{inline:"span",styles:{textDecoration:"line-through"},exact:true},{inline:"strike",remove:"all"}],forecolor:{inline:"span",styles:{color:"%value"},wrap_links:false},hilitecolor:{inline:"span",styles:{backgroundColor:"%value"},wrap_links:false},fontname:{inline:"span",styles:{fontFamily:"%value"}},fontsize:{inline:"span",styles:{fontSize:"%value"}},fontsize_class:{inline:"span",attributes:{"class":"%value"}},blockquote:{block:"blockquote",wrapper:1,remove:"all"},subscript:{inline:"sub"},superscript:{inline:"sup"},removeformat:[{selector:"b,strong,em,i,font,u,strike",remove:"all",split:true,expand:false,block_expand:true,deep:true},{selector:"span",attributes:["style","class"],remove:"empty",split:true,expand:false,deep:true},{selector:"*",attributes:["style","class"],split:false,expand:false,deep:true}]});v("p h1 h2 h3 h4 h5 h6 div address pre div code dt dd samp".split(/\s/),function(i){e.formatter.register(i,{block:i,remove:"all"})});e.formatter.register(e.settings.formats);e.undoManager=new r.UndoManager(e);e.undoManager.onAdd.add(function(i,j){if(i.hasUndo()){return e.onChange.dispatch(e,j,i)}});e.undoManager.onUndo.add(function(i,j){return e.onUndo.dispatch(e,j,i)});e.undoManager.onRedo.add(function(i,j){return e.onRedo.dispatch(e,j,i)});e.forceBlocks=new r.ForceBlocks(e,{forced_root_block:b.forced_root_block});e.editorCommands=new r.EditorCommands(e);e.serializer.onPreProcess.add(function(j,i){return e.onPreProcess.dispatch(e,i,j)});e.serializer.onPostProcess.add(function(j,i){return e.onPostProcess.dispatch(e,i,j)});e.onPreInit.dispatch(e);if(!b.gecko_spellcheck){e.getBody().spellcheck=0}if(!b.readonly){e._addEvents()}e.controlManager.onPostRender.dispatch(e,e.controlManager);e.onPostRender.dispatch(e);if(b.directionality){e.getBody().dir=b.directionality}if(b.nowrap){e.getBody().style.whiteSpace="nowrap"}if(b.handle_node_change_callback){e.onNodeChange.add(function(j,k,i){e.execCallback("handle_node_change_callback",e.id,i,-1,-1,true,e.selection.isCollapsed())})}if(b.save_callback){e.onSaveContent.add(function(k,i){var j=e.execCallback("save_callback",e.id,i.content,e.getBody());if(j){i.content=j}})}if(b.onchange_callback){e.onChange.add(function(i,j){e.execCallback("onchange_callback",e,j)})}if(b.protect){e.onBeforeSetContent.add(function(j,i){if(b.protect){v(b.protect,function(k){i.content=i.content.replace(k,function(l){return"<!--mce:protected "+escape(l)+"-->"})})}})}if(b.convert_newlines_to_brs){e.onBeforeSetContent.add(function(j,i){if(i.initial){i.content=i.content.replace(/\r?\n/g,"<br />")}})}if(b.preformatted){e.onPostProcess.add(function(j,i){i.content=i.content.replace(/^\s*<pre.*?>/,"");i.content=i.content.replace(/<\/pre>\s*$/,"");if(i.set){i.content='<pre class="mceItemHidden">'+i.content+"</pre>"}})}if(b.verify_css_classes){e.serializer.attribValueFilter=function(k,i){var l,j;if(k=="class"){if(!e.classesRE){j=e.dom.getClasses();if(j.length>0){l="";v(j,function(m){l+=(l?"|":"")+m["class"]});e.classesRE=new RegExp("("+l+")","gi")}}return !e.classesRE||/(\bmceItem\w+\b|\bmceTemp\w+\b)/g.test(i)||e.classesRE.test(i)?i:""}return i}}if(b.cleanup_callback){e.onBeforeSetContent.add(function(j,i){i.content=e.execCallback("cleanup_callback","insert_to_editor",i.content,i)});e.onPreProcess.add(function(j,i){if(i.set){e.execCallback("cleanup_callback","insert_to_editor_dom",i.node,i)}if(i.get){e.execCallback("cleanup_callback","get_from_editor_dom",i.node,i)}});e.onPostProcess.add(function(j,i){if(i.set){i.content=e.execCallback("cleanup_callback","insert_to_editor",i.content,i)}if(i.get){i.content=e.execCallback("cleanup_callback","get_from_editor",i.content,i)}})}if(b.save_callback){e.onGetContent.add(function(j,i){if(i.save){i.content=e.execCallback("save_callback",e.id,i.content,e.getBody())}})}if(b.handle_event_callback){e.onEvent.add(function(k,j,i){if(e.execCallback("handle_event_callback",j,k,i)===false){u.cancel(j)}})}e.onSetContent.add(function(){e.addVisual(e.getBody())});if(b.padd_empty_editor){e.onPostProcess.add(function(j,i){i.content=i.content.replace(/^(<p[^>]*>(&nbsp;|&#160;|\s|\u00a0|)<\/p>[\r\n]*|<br \/>[\r\n]*)$/,"")})}if(E){function d(j,i){v(j.dom.select("a"),function(l){var k=l.parentNode;if(j.dom.isBlock(k)&&k.lastChild===l){j.dom.add(k,"br",{"data-mce-bogus":1})}})}e.onExecCommand.add(function(j,i){if(i==="CreateLink"){d(j)}});e.onSetContent.add(e.selection.onSetContent.add(d))}e.load({initial:true,format:"html"});e.startContent=e.getContent({format:"raw"});e.undoManager.add();e.initialized=true;e.onInit.dispatch(e);e.execCallback("setupcontent_callback",e.id,e.getBody(),e.getDoc());e.execCallback("init_instance_callback",e);e.focus(true);e.nodeChanged({initial:1});v(e.contentCSS,function(i){e.dom.loadCSS(i)});if(b.auto_focus){setTimeout(function(){var i=r.get(b.auto_focus);i.selection.select(i.getBody(),1);i.selection.collapse(1);i.getBody().focus();i.getWin().focus()},100)}h=null},focus:function(c){var h,f=this,d=f.selection,a=f.settings.content_editable,e,g,b=f.getDoc();if(!c){e=d.getRng();if(e.item){g=e.item(0)}d.normalize();if(!a){f.getWin().focus()}if(r.isGecko){f.getBody().focus()}if(g&&g.ownerDocument==b){e=b.body.createControlRange();e.addElement(g);e.select()}}if(r.activeEditor!=f){if((h=r.activeEditor)!=null){h.onDeactivate.dispatch(h,f)}f.onActivate.dispatch(f,h)}r._setActive(f)},execCallback:function(a){var d=this,b=d.settings[a],c;if(!b){return}if(d.callbackLookup&&(c=d.callbackLookup[a])){b=c.func;c=c.scope}if(B(b,"string")){c=b.replace(/\.\w+$/,"");c=c?r.resolve(c):0;b=r.resolve(b);d.callbackLookup=d.callbackLookup||{};d.callbackLookup[a]={func:b,scope:c}}return b.apply(c||d,Array.prototype.slice.call(arguments,1))},translate:function(c){var a=this.settings.language||"en",b=r.i18n;if(!c){return""}return b[a+"."+c]||c.replace(/{\#([^}]+)\}/g,function(d,e){return b[a+"."+e]||"{#"+e+"}"})},getLang:function(a,b){return r.i18n[(this.settings.language||"en")+"."+a]||(B(b)?b:"{#"+a+"}")},getParam:function(a,d,f){var c=r.trim,e=B(this.settings[a])?this.settings[a]:d,b;if(f==="hash"){b={};if(B(e,"string")){v(e.indexOf("=")>0?e.split(/[;,](?![^=;,]*(?:[;,]|$))/):e.split(","),function(g){g=g.split("=");if(g.length>1){b[c(g[0])]=c(g[1])}else{b[c(g[0])]=c(g)}})}else{b=e}return b}return e},nodeChanged:function(b){var d=this,c=d.selection,a=c.getStart()||d.getBody();if(d.initialized){b=b||{};a=D&&a.ownerDocument!=d.getDoc()?d.getBody():a;b.parents=[];d.dom.getParent(a,function(e){if(e.nodeName=="BODY"){return true}b.parents.push(e)});d.onNodeChange.dispatch(d,b?b.controlManager||d.controlManager:d.controlManager,a,c.isCollapsed(),b)}},addButton:function(a,b){var c=this;c.buttons=c.buttons||{};c.buttons[a]=b},addCommand:function(c,a,b){this.execCommands[c]={func:a,scope:b||this}},addQueryStateHandler:function(c,a,b){this.queryStateCommands[c]={func:a,scope:b||this}},addQueryValueHandler:function(c,a,b){this.queryValueCommands[c]={func:a,scope:b||this}},addShortcut:function(d,b,f,c){var e=this,a;if(!e.settings.custom_shortcuts){return false}e.shortcuts=e.shortcuts||{};if(B(f,"string")){a=f;f=function(){e.execCommand(a,false,null)}}if(B(f,"object")){a=f;f=function(){e.execCommand(a[0],a[1],a[2])}}v(y(d),function(h){var g={func:f,scope:c||this,desc:b,alt:false,ctrl:false,shift:false};v(y(h,"+"),function(i){switch(i){case"alt":case"ctrl":case"shift":g[i]=true;break;default:g.charCode=i.charCodeAt(0);g.keyCode=i.toUpperCase().charCodeAt(0)}});e.shortcuts[(g.ctrl?"ctrl":"")+","+(g.alt?"alt":"")+","+(g.shift?"shift":"")+","+g.keyCode]=g});return true},execCommand:function(a,b,g,f){var d=this,c=0,h,e;if(!/^(mceAddUndoLevel|mceEndUndoLevel|mceBeginUndoLevel|mceRepaint|SelectAll)$/.test(a)&&(!f||!f.skip_focus)){d.focus()}h={};d.onBeforeExecCommand.dispatch(d,a,b,g,h);if(h.terminate){return false}if(d.execCallback("execcommand_callback",d.id,d.selection.getNode(),a,b,g)){d.onExecCommand.dispatch(d,a,b,g,f);return true}if(h=d.execCommands[a]){e=h.func.call(h.scope,b,g);if(e!==true){d.onExecCommand.dispatch(d,a,b,g,f);return e}}v(d.plugins,function(i){if(i.execCommand&&i.execCommand(a,b,g)){d.onExecCommand.dispatch(d,a,b,g,f);c=1;return false}});if(c){return true}if(d.theme&&d.theme.execCommand&&d.theme.execCommand(a,b,g)){d.onExecCommand.dispatch(d,a,b,g,f);return true}if(d.editorCommands.execCommand(a,b,g)){d.onExecCommand.dispatch(d,a,b,g,f);return true}d.getDoc().execCommand(a,b,g);d.onExecCommand.dispatch(d,a,b,g,f)},queryCommandState:function(b){var d=this,a,c;if(d._isHidden()){return}if(a=d.queryStateCommands[b]){c=a.func.call(a.scope);if(c!==true){return c}}a=d.editorCommands.queryCommandState(b);if(a!==-1){return a}try{return this.getDoc().queryCommandState(b)}catch(e){}},queryCommandValue:function(a){var d=this,b,c;if(d._isHidden()){return}if(b=d.queryValueCommands[a]){c=b.func.call(b.scope);if(c!==true){return c}}b=d.editorCommands.queryCommandValue(a);if(B(b)){return b}try{return this.getDoc().queryCommandValue(a)}catch(e){}},show:function(){var a=this;q.show(a.getContainer());q.hide(a.id);a.load()},hide:function(){var b=this,a=b.getDoc();if(D&&a){a.execCommand("SelectAll")}b.save();q.hide(b.getContainer());q.setStyle(b.id,"display",b.orgDisplay)},isHidden:function(){return !q.isHidden(this.id)},setProgressState:function(c,b,a){this.onSetProgressState.dispatch(this,c,b,a);return c},load:function(a){var d=this,b=d.getElement(),c;if(b){a=a||{};a.load=true;c=d.setContent(B(b.value)?b.value:b.innerHTML,a);a.element=b;if(!a.no_events){d.onLoadContent.dispatch(d,a)}a.element=b=null;return c}},save:function(a){var e=this,b=e.getElement(),d,c;if(!b||!e.initialized){return}a=a||{};a.save=true;if(!a.no_events){e.undoManager.typing=false;e.undoManager.add()}a.element=b;d=a.content=e.getContent(a);if(!a.no_events){e.onSaveContent.dispatch(e,a)}d=a.content;if(!/TEXTAREA|INPUT/i.test(b.nodeName)){b.innerHTML=d;if(c=q.getParent(e.id,"form")){v(c.elements,function(f){if(f.name==e.id){f.value=d;return false}})}}else{b.value=d}a.element=b=null;return d},setContent:function(a,c){var d=this,e,f=d.getBody(),b;c=c||{};c.format=c.format||"html";c.set=true;c.content=a;if(!c.no_events){d.onBeforeSetContent.dispatch(d,c)}a=c.content;if(!r.isIE&&(a.length===0||/^\s+$/.test(a))){b=d.settings.forced_root_block;if(b){a="<"+b+'><br data-mce-bogus="1"></'+b+">"}else{a='<br data-mce-bogus="1">'}f.innerHTML=a;d.selection.select(f,true);d.selection.collapse(true);return}if(c.format!=="raw"){a=new r.html.Serializer({},d.schema).serialize(d.parser.parse(a))}c.content=r.trim(a);d.dom.setHTML(f,c.content);if(!c.no_events){d.onSetContent.dispatch(d,c)}d.selection.normalize();return c.content},getContent:function(b){var c=this,a;b=b||{};b.format=b.format||"html";b.get=true;if(!b.no_events){c.onBeforeGetContent.dispatch(c,b)}if(b.format=="raw"){a=c.getBody().innerHTML}else{a=c.serializer.serialize(c.getBody(),b)}b.content=r.trim(a);if(!b.no_events){c.onGetContent.dispatch(c,b)}return b.content},isDirty:function(){var a=this;return r.trim(a.startContent)!=r.trim(a.getContent({format:"raw",no_events:1}))&&!a.isNotDirty},getContainer:function(){var a=this;if(!a.container){a.container=q.get(a.editorContainer||a.id+"_parent")}return a.container},getContentAreaContainer:function(){return this.contentAreaContainer},getElement:function(){return q.get(this.settings.content_element||this.id)},getWin:function(){var b=this,a;if(!b.contentWindow){a=q.get(b.id+"_ifr");if(a){b.contentWindow=a.contentWindow}}return b.contentWindow},getDoc:function(){var a=this,b;if(!a.contentDocument){b=a.getWin();if(b){a.contentDocument=b.document}}return a.contentDocument},getBody:function(){return this.bodyElement||this.getDoc().body},convertURL:function(e,a,b){var d=this,c=d.settings;if(c.urlconverter_callback){return d.execCallback("urlconverter_callback",e,b,true,a)}if(!c.convert_urls||(b&&b.nodeName=="LINK")||e.indexOf("file:")===0){return e}if(c.relative_urls){return d.documentBaseURI.toRelative(e)}e=d.documentBaseURI.toAbsolute(e,c.remove_script_host);return e},addVisual:function(a){var c=this,b=c.settings;a=a||c.getBody();if(!B(c.hasVisual)){c.hasVisual=b.visual}v(c.dom.select("table,a",a),function(d){var e;switch(d.nodeName){case"TABLE":e=c.dom.getAttrib(d,"border");if(!e||e=="0"){if(c.hasVisual){c.dom.addClass(d,b.visual_table_class)}else{c.dom.removeClass(d,b.visual_table_class)}}return;case"A":e=c.dom.getAttrib(d,"name");if(e){if(c.hasVisual){c.dom.addClass(d,"mceItemAnchor")}else{c.dom.removeClass(d,"mceItemAnchor")}}return}});c.onVisualAid.dispatch(c,a,c.hasVisual)},remove:function(){var b=this,a=b.getContainer();b.removed=1;b.hide();b.execCallback("remove_instance_callback",b);b.onRemove.dispatch(b);b.onExecCommand.listeners=[];r.remove(b);q.remove(a)},destroy:function(a){var b=this;if(b.destroyed){return}if(!a){r.removeUnload(b.destroy);tinyMCE.onBeforeUnload.remove(b._beforeUnload);if(b.theme&&b.theme.destroy){b.theme.destroy()}b.controlManager.destroy();b.selection.destroy();b.dom.destroy();if(!b.settings.content_editable){u.clear(b.getWin());u.clear(b.getDoc())}u.clear(b.getBody());u.clear(b.formElement)}if(b.formElement){b.formElement.submit=b.formElement._mceOldSubmit;b.formElement._mceOldSubmit=null}b.contentAreaContainer=b.formElement=b.container=b.settings.content_element=b.bodyElement=b.contentDocument=b.contentWindow=null;if(b.selection){b.selection=b.selection.win=b.selection.dom=b.selection.dom.doc=null}b.destroyed=1},_addEvents:function(){var d=this,a,b=d.settings,c=d.dom,i={mouseup:"onMouseUp",mousedown:"onMouseDown",click:"onClick",keyup:"onKeyUp",keydown:"onKeyDown",keypress:"onKeyPress",submit:"onSubmit",reset:"onReset",contextmenu:"onContextMenu",dblclick:"onDblClick",paste:"onPaste"};function e(l,n){var m=l.type;if(d.removed){return}if(d.onEvent.dispatch(d,l,n)!==false){d[i[l.fakeType||l.type]].dispatch(d,l,n)}}v(i,function(l,m){switch(m){case"contextmenu":c.bind(d.getDoc(),m,e);break;case"paste":c.bind(d.getBody(),m,function(n){e(n)});break;case"submit":case"reset":c.bind(d.getElement().form||q.getParent(d.id,"form"),m,e);break;default:c.bind(b.content_editable?d.getBody():d.getDoc(),m,e)}});c.bind(b.content_editable?d.getBody():(E?d.getDoc():d.getWin()),"focus",function(l){d.focus(true)});if(r.isGecko){c.bind(d.getDoc(),"DOMNodeInserted",function(l){var m;l=l.target;if(l.nodeType===1&&l.nodeName==="IMG"&&(m=l.getAttribute("data-mce-src"))){l.src=d.documentBaseURI.toAbsolute(m)}})}if(E){function k(){var n=this,l=n.getDoc(),m=n.settings;if(E&&!m.readonly){if(n._isHidden()){try{if(!m.content_editable){l.body.contentEditable=false;l.body.contentEditable=true}}catch(o){}}try{l.execCommand("styleWithCSS",0,false)}catch(o){if(!n._isHidden()){try{l.execCommand("useCSS",0,true)}catch(o){}}}if(!m.table_inline_editing){try{l.execCommand("enableInlineTableEditing",false,false)}catch(o){}}if(!m.object_resizing){try{l.execCommand("enableObjectResizing",false,false)}catch(o){}}}}d.onBeforeExecCommand.add(k);d.onMouseDown.add(k)}d.onClick.add(function(m,l){l=l.target;if(r.isWebKit&&l.nodeName=="IMG"){d.selection.getSel().setBaseAndExtent(l,0,l,1)}if(l.nodeName=="A"&&c.hasClass(l,"mceItemAnchor")){d.selection.select(l)}d.nodeChanged()});d.onMouseUp.add(d.nodeChanged);d.onKeyUp.add(function(m,l){var n=l.keyCode;if((n>=33&&n<=36)||(n>=37&&n<=40)||n==13||n==45||n==46||n==8||(r.isMac&&(n==91||n==93))||l.ctrlKey){d.nodeChanged()}});d.onReset.add(function(){d.setContent(d.startContent,{format:"raw"})});if(b.custom_shortcuts){if(b.custom_undo_redo_keyboard_shortcuts){d.addShortcut("ctrl+z",d.getLang("undo_desc"),"Undo");d.addShortcut("ctrl+y",d.getLang("redo_desc"),"Redo")}d.addShortcut("ctrl+b",d.getLang("bold_desc"),"Bold");d.addShortcut("ctrl+i",d.getLang("italic_desc"),"Italic");d.addShortcut("ctrl+u",d.getLang("underline_desc"),"Underline");for(a=1;a<=6;a++){d.addShortcut("ctrl+"+a,"",["FormatBlock",false,"h"+a])}d.addShortcut("ctrl+7","",["FormatBlock",false,"<p>"]);d.addShortcut("ctrl+8","",["FormatBlock",false,"<div>"]);d.addShortcut("ctrl+9","",["FormatBlock",false,"<address>"]);function j(l){var m=null;if(!l.altKey&&!l.ctrlKey&&!l.metaKey){return m}v(d.shortcuts,function(n){if(r.isMac&&n.ctrl!=l.metaKey){return}else{if(!r.isMac&&n.ctrl!=l.ctrlKey){return}}if(n.alt!=l.altKey){return}if(n.shift!=l.shiftKey){return}if(l.keyCode==n.keyCode||(l.charCode&&l.charCode==n.charCode)){m=n;return false}});return m}d.onKeyUp.add(function(m,l){var n=j(l);if(n){return u.cancel(l)}});d.onKeyPress.add(function(m,l){var n=j(l);if(n){return u.cancel(l)}});d.onKeyDown.add(function(m,l){var n=j(l);if(n){n.func.call(n.scope);return u.cancel(l)}})}if(r.isIE){c.bind(d.getDoc(),"controlselect",function(n){var l=d.resizeInfo,m;n=n.target;if(n.nodeName!=="IMG"){return}if(l){c.unbind(l.node,l.ev,l.cb)}if(!c.hasClass(n,"mceItemNoResize")){ev="resizeend";m=c.bind(n,ev,function(o){var G;o=o.target;if(G=c.getStyle(o,"width")){c.setAttrib(o,"width",G.replace(/[^0-9%]+/g,""));c.setStyle(o,"width","")}if(G=c.getStyle(o,"height")){c.setAttrib(o,"height",G.replace(/[^0-9%]+/g,""));c.setStyle(o,"height","")}})}else{ev="resizestart";m=c.bind(n,"resizestart",u.cancel,u)}l=d.resizeInfo={node:n,ev:ev,cb:m}})}if(r.isOpera){d.onClick.add(function(m,l){u.prevent(l)})}if(b.custom_undo_redo){function h(){d.undoManager.typing=false;d.undoManager.add()}c.bind(d.getDoc(),"focusout",function(l){if(!d.removed&&d.undoManager.typing){h()}});d.dom.bind(d.dom.getRoot(),"dragend",function(l){h()});d.onKeyUp.add(function(m,n){var l=n.keyCode;if((l>=33&&l<=36)||(l>=37&&l<=40)||l==13||l==45||n.ctrlKey){h()}});d.onKeyDown.add(function(m,n){var o=n.keyCode,l;if(o==8){l=d.getDoc().selection;if(l&&l.createRange&&l.createRange().item){d.undoManager.beforeChange();m.dom.remove(l.createRange().item(0));h();return u.cancel(n)}}if((o>=33&&o<=36)||(o>=37&&o<=40)||o==13||o==45){if(r.isIE&&o==13){d.undoManager.beforeChange()}if(d.undoManager.typing){h()}return}if((o<16||o>20)&&o!=224&&o!=91&&!d.undoManager.typing){d.undoManager.beforeChange();d.undoManager.typing=true;d.undoManager.add()}});d.onMouseDown.add(function(){if(d.undoManager.typing){h()}})}if(r.isWebKit){c.bind(d.getDoc(),"selectionchange",function(){if(d.selectionTimer){window.clearTimeout(d.selectionTimer);d.selectionTimer=0}d.selectionTimer=window.setTimeout(function(){d.nodeChanged()},50)})}if(r.isGecko){function f(){var l=d.dom.getAttribs(d.selection.getStart().cloneNode(false));return function(){var m=d.selection.getStart();d.dom.removeAllAttribs(m);v(l,function(n){m.setAttributeNode(n.cloneNode(true))})}}function g(){var l=d.selection;return !l.isCollapsed()&&l.getStart()!=l.getEnd()}d.onKeyPress.add(function(m,n){var l;if((n.keyCode==8||n.keyCode==46)&&g()){l=f();d.getDoc().execCommand("delete",false,null);l();return u.cancel(n)}});d.dom.bind(d.getDoc(),"cut",function(l){var m;if(g()){m=f();d.onKeyUp.addToTop(u.cancel,u);setTimeout(function(){m();d.onKeyUp.remove(u.cancel,u)},0)}})}},_isHidden:function(){var a;if(!E){return 0}a=this.selection.getSel();return(!a||!a.rangeCount||a.rangeCount==0)}})})(tinymce);(function(j){var i=j.each,h,g=true,f=false;j.EditorCommands=function(e){var v=e.dom,c=e.selection,y={state:{},exec:{},value:{}},x=e.settings,d;function b(n,k,l){var m;n=n.toLowerCase();if(m=y.exec[n]){m(n,k,l);return g}return f}function u(k){var l;k=k.toLowerCase();if(l=y.state[k]){return l(k)}return -1}function A(k){var l;k=k.toLowerCase();if(l=y.value[k]){return l(k)}return f}function D(l,k){k=k||"exec";i(l,function(n,m){i(m.toLowerCase().split(","),function(o){y[k][o]=n})})}j.extend(this,{execCommand:b,queryCommandState:u,queryCommandValue:A,addCommands:D});function C(k,l,m){if(l===h){l=f}if(m===h){m=null}return e.getDoc().execCommand(k,l,m)}function E(k){return e.formatter.match(k)}function a(l,k){e.formatter.toggle(l,k?{value:k}:h)}function z(k){d=c.getBookmark(k)}function B(){c.moveToBookmark(d)}D({"mceResetDesignMode,mceBeginUndoLevel":function(){},"mceEndUndoLevel,mceAddUndoLevel":function(){e.undoManager.add()},"Cut,Copy,Paste":function(n){var k=e.getDoc(),m;try{C(n)}catch(l){m=g}if(m||!k.queryCommandSupported(n)){if(j.isGecko){e.windowManager.confirm(e.getLang("clipboard_msg"),function(o){if(o){open("http://www.mozilla.org/editor/midasdemo/securityprefs.html","_blank")}})}else{e.windowManager.alert(e.getLang("clipboard_no_support"))}}},unlink:function(k){if(c.isCollapsed()){c.select(c.getNode())}C(k);c.collapse(f)},"JustifyLeft,JustifyCenter,JustifyRight,JustifyFull":function(l){var k=l.substring(7);i("left,center,right,full".split(","),function(m){if(k!=m){e.formatter.remove("align"+m)}});a("align"+k);b("mceRepaint")},"InsertUnorderedList,InsertOrderedList":function(k){var m,l;C(k);m=v.getParent(c.getNode(),"ol,ul");if(m){l=m.parentNode;if(/^(H[1-6]|P|ADDRESS|PRE)$/.test(l.nodeName)){z();v.split(l,m);B()}}},"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":function(k){a(k)},"ForeColor,HiliteColor,FontName":function(k,l,m){a(k,m)},FontSize:function(o,k,l){var m,n;if(l>=1&&l<=7){n=j.explode(x.font_size_style_values);m=j.explode(x.font_size_classes);if(m){l=m[l-1]||l}else{l=n[l-1]||l}}a(o,l)},RemoveFormat:function(k){e.formatter.remove(k)},mceBlockQuote:function(k){a("blockquote")},FormatBlock:function(k,l,m){return a(m||"p")},mceCleanup:function(){var k=c.getBookmark();e.setContent(e.getContent({cleanup:g}),{cleanup:g});c.moveToBookmark(k)},mceRemoveNode:function(n,k,l){var m=l||c.getNode();if(m!=e.getBody()){z();e.dom.remove(m,g);B()}},mceSelectNodeDepth:function(n,k,l){var m=0;v.getParent(c.getNode(),function(o){if(o.nodeType==1&&m++==l){c.select(o);return f}},e.getBody())},mceSelectNode:function(k,l,m){c.select(m)},mceInsertContent:function(n,O,s){var t,M,k,r,S,R,l,m,q,N,p,o,Q,P;t=e.parser;M=new j.html.Serializer({},e.schema);Q='<span id="mce_marker" data-mce-type="bookmark">\uFEFF</span>';R={content:s,format:"html"};c.onBeforeSetContent.dispatch(c,R);s=R.content;if(s.indexOf("{$caret}")==-1){s+="{$caret}"}s=s.replace(/\{\$caret\}/,Q);if(!c.isCollapsed()){e.getDoc().execCommand("Delete",false,null)}k=c.getNode();R={context:k.nodeName.toLowerCase()};S=t.parse(s,R);p=S.lastChild;if(p.attr("id")=="mce_marker"){l=p;for(p=p.prev;p;p=p.walk(true)){if(p.type==3||!v.isBlock(p.name)){p.parent.insert(l,p,p.name==="br");break}}}if(!R.invalid){s=M.serialize(S);p=k.firstChild;o=k.lastChild;if(!p||(p===o&&p.nodeName==="BR")){v.setHTML(k,s)}else{c.setContent(s)}}else{c.setContent(Q);k=e.selection.getNode();r=e.getBody();if(k.nodeType==9){k=p=r}else{p=k}while(p!==r){k=p;p=p.parentNode}s=k==r?r.innerHTML:v.getOuterHTML(k);s=M.serialize(t.parse(s.replace(/<span (id="mce_marker"|id=mce_marker).+<\/span>/i,function(){return M.serialize(S)})));if(k==r){v.setHTML(r,s)}else{v.setOuterHTML(k,s)}}l=v.get("mce_marker");m=v.getRect(l);q=v.getViewPort(e.getWin());if((m.y+m.h>q.y+q.h||m.y<q.y)||(m.x>q.x+q.w||m.x<q.x)){P=j.isIE?e.getDoc().documentElement:e.getBody();P.scrollLeft=m.x;P.scrollTop=m.y-q.h+25}N=v.createRng();p=l.previousSibling;if(p&&p.nodeType==3){N.setStart(p,p.nodeValue.length)}else{N.setStartBefore(l);N.setEndBefore(l)}v.remove(l);c.setRng(N);c.onSetContent.dispatch(c,R);e.addVisual()},mceInsertRawHTML:function(k,l,m){c.setContent("tiny_mce_marker");e.setContent(e.getContent().replace(/tiny_mce_marker/g,function(){return m}))},mceSetContent:function(k,l,m){e.setContent(m)},"Indent,Outdent":function(n){var l,m,k;l=x.indentation;m=/[a-z%]+$/i.exec(l);l=parseInt(l);if(!u("InsertUnorderedList")&&!u("InsertOrderedList")){i(c.getSelectedBlocks(),function(o){if(n=="outdent"){k=Math.max(0,parseInt(o.style.paddingLeft||0)-l);v.setStyle(o,"paddingLeft",k?k+m:"")}else{v.setStyle(o,"paddingLeft",(parseInt(o.style.paddingLeft||0)+l)+m)}})}else{C(n)}},mceRepaint:function(){var k;if(j.isGecko){try{z(g);if(c.getSel()){c.getSel().selectAllChildren(e.getBody())}c.collapse(g);B()}catch(l){}}},mceToggleFormat:function(k,l,m){e.formatter.toggle(m)},InsertHorizontalRule:function(){e.execCommand("mceInsertContent",false,"<hr />")},mceToggleVisualAid:function(){e.hasVisual=!e.hasVisual;e.addVisual()},mceReplaceContent:function(k,l,m){e.execCommand("mceInsertContent",false,m.replace(/\{\$selection\}/g,c.getContent({format:"text"})))},mceInsertLink:function(q,l,o){var p=v.getParent(c.getNode(),"a"),m,k,n;if(j.is(o,"string")){o={href:o}}o.href=o.href.replace(" ","%20");if(!p){if(j.isWebKit){m=v.getParent(c.getNode(),"img");if(m){k=m.style.cssText;n=m.className;m.style.cssText=null;m.className=null}}C("CreateLink",f,"javascript:mctmp(0);");if(k){m.style.cssText=k}if(n){m.className=n}i(v.select("a[href='javascript:mctmp(0);']"),function(r){v.setAttribs(r,o)})}else{if(o.href){v.setAttribs(p,o)}else{e.dom.remove(p,g)}}},selectAll:function(){var k=v.getRoot(),l=v.createRng();l.setStart(k,0);l.setEnd(k,k.childNodes.length);e.selection.setRng(l)}});D({"JustifyLeft,JustifyCenter,JustifyRight,JustifyFull":function(k){return E("align"+k.substring(7))},"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":function(k){return E(k)},mceBlockQuote:function(){return E("blockquote")},Outdent:function(){var k;if(x.inline_styles){if((k=v.getParent(c.getStart(),v.isBlock))&&parseInt(k.style.paddingLeft)>0){return g}if((k=v.getParent(c.getEnd(),v.isBlock))&&parseInt(k.style.paddingLeft)>0){return g}}return u("InsertUnorderedList")||u("InsertOrderedList")||(!x.inline_styles&&!!v.getParent(c.getNode(),"BLOCKQUOTE"))},"InsertUnorderedList,InsertOrderedList":function(k){return v.getParent(c.getNode(),k=="insertunorderedlist"?"UL":"OL")}},"state");D({"FontSize,FontName":function(k){var l=0,m;if(m=v.getParent(c.getNode(),"span")){if(k=="fontsize"){l=m.style.fontSize}else{l=m.style.fontFamily.replace(/, /g,",").replace(/[\'\"]/g,"").toLowerCase()}}return l}},"value");if(x.custom_undo_redo){D({Undo:function(){e.undoManager.undo()},Redo:function(){e.undoManager.redo()}})}}})(tinymce);(function(c){var d=c.util.Dispatcher;c.UndoManager=function(i){var k,j=0,a=[],l;function b(){return c.trim(i.getContent({format:"raw",no_events:1}))}return k={typing:false,onAdd:new d(k),onUndo:new d(k),onRedo:new d(k),beforeChange:function(){l=i.selection.getBookmark(2,true)},add:function(e){var h,g=i.settings,f;e=e||{};e.content=b();f=a[j];if(f&&f.content==e.content){return null}if(a[j]){a[j].beforeBookmark=l}if(g.custom_undo_redo_levels){if(a.length>g.custom_undo_redo_levels){for(h=0;h<a.length-1;h++){a[h]=a[h+1]}a.length--;j=a.length}}e.bookmark=i.selection.getBookmark(2,true);if(j<a.length-1){a.length=j+1}a.push(e);j=a.length-1;k.onAdd.dispatch(k,e);i.isNotDirty=0;return e},undo:function(){var e,f;if(k.typing){k.add();k.typing=false}if(j>0){e=a[--j];i.setContent(e.content,{format:"raw"});i.selection.moveToBookmark(e.beforeBookmark);k.onUndo.dispatch(k,e)}return e},redo:function(){var e;if(j<a.length-1){e=a[++j];i.setContent(e.content,{format:"raw"});i.selection.moveToBookmark(e.bookmark);k.onRedo.dispatch(k,e)}return e},clear:function(){a=[];j=0;k.typing=false},hasUndo:function(){return j>0||this.typing},hasRedo:function(){return j<a.length-1&&!this.typing}}}})(tinymce);(function(m){var o=m.dom.Event,v=m.isIE,y=m.isGecko,x=m.isOpera,p=m.each,q=m.extend,u=true,r=false;function n(c){var b,d,a;do{if(/^(SPAN|STRONG|B|EM|I|FONT|STRIKE|U)$/.test(c.nodeName)){if(b){d=c.cloneNode(false);d.appendChild(b);b=d}else{b=a=c.cloneNode(false)}b.removeAttribute("id")}}while(c=c.parentNode);if(b){return{wrapper:b,inner:a}}}function s(c,b){var a=b.ownerDocument.createRange();a.setStart(c.endContainer,c.endOffset);a.setEndAfter(b);return a.cloneContents().textContent.length==0}function t(d,b,a){var e,c;if(b.isEmpty(a)){e=b.getParent(a,"ul,ol");if(!b.getParent(e.parentNode,"ul,ol")){b.split(e,a);c=b.create("p",0,'<br data-mce-bogus="1" />');b.replace(c,a);d.select(c,1)}return r}return u}m.create("tinymce.ForceBlocks",{ForceBlocks:function(a){var d=this,c=a.settings,b;d.editor=a;d.dom=a.dom;b=(c.forced_root_block||"p").toLowerCase();c.element=b.toUpperCase();a.onPreInit.add(d.setup,d)},setup:function(){var h=this,a=h.editor,f=a.settings,c=a.dom,g=a.selection,e=a.schema.getBlockElements();if(f.forced_root_block){function b(){var H=g.getStart(),K=a.getBody(),M,G,i,J,L,I,l,k=-16777215;if(!H||H.nodeType!==1){return}while(H!=K){if(e[H.nodeName]){return}H=H.parentNode}M=g.getRng();if(M.setStart){G=M.startContainer;i=M.startOffset;J=M.endContainer;L=M.endOffset}else{if(M.item){M=a.getDoc().body.createTextRange();M.moveToElementText(M.item(0))}tmpRng=M.duplicate();tmpRng.collapse(true);i=tmpRng.move("character",k)*-1;if(!tmpRng.collapsed){tmpRng=M.duplicate();tmpRng.collapse(false);L=(tmpRng.move("character",k)*-1)-i}}for(H=K.firstChild;H;H){if(H.nodeType===3||(H.nodeType==1&&!e[H.nodeName])){if(!I){I=c.create(f.forced_root_block);H.parentNode.insertBefore(I,H)}l=H;H=H.nextSibling;I.appendChild(l)}else{I=null;H=H.nextSibling}}if(M.setStart){M.setStart(G,i);M.setEnd(J,L);g.setRng(M)}else{try{M=a.getDoc().body.createTextRange();M.moveToElementText(K);M.collapse(true);M.moveStart("character",i);if(L>0){M.moveEnd("character",L)}M.select()}catch(j){}}a.nodeChanged()}a.onKeyUp.add(b);a.onClick.add(b)}if(f.force_br_newlines){if(v){a.onKeyPress.add(function(k,j){var i;if(j.keyCode==13&&g.getNode().nodeName!="LI"){g.setContent('<br id="__" /> ',{format:"raw"});i=c.get("__");i.removeAttribute("id");g.select(i);g.collapse();return o.cancel(j)}})}}if(f.force_p_newlines){if(!v){a.onKeyPress.add(function(j,i){if(i.keyCode==13&&!i.shiftKey&&!h.insertPara(i)){o.cancel(i)}})}else{m.addUnload(function(){h._previousFormats=0});a.onKeyPress.add(function(j,i){h._previousFormats=0;if(i.keyCode==13&&!i.shiftKey&&j.selection.isCollapsed()&&f.keep_styles){h._previousFormats=n(j.selection.getStart())}});a.onKeyUp.add(function(j,l){if(l.keyCode==13&&!l.shiftKey){var i=j.selection.getStart(),k=h._previousFormats;if(!i.hasChildNodes()&&k){i=c.getParent(i,c.isBlock);if(i&&i.nodeName!="LI"){i.innerHTML="";if(h._previousFormats){i.appendChild(k.wrapper);k.inner.innerHTML="\uFEFF"}else{i.innerHTML="\uFEFF"}g.select(i,1);g.collapse(true);j.getDoc().execCommand("Delete",false,null);h._previousFormats=0}}}})}if(y){a.onKeyDown.add(function(j,i){if((i.keyCode==8||i.keyCode==46)&&!i.shiftKey){h.backspaceDelete(i,i.keyCode==8)}})}}if(m.isWebKit){function d(k){var l=g.getRng(),j,i=c.create("div",null," "),B,C=c.getViewPort(k.getWin()).h;l.insertNode(j=c.create("br"));l.setStartAfter(j);l.setEndAfter(j);g.setRng(l);if(g.getSel().focusNode==j.previousSibling){g.select(c.insertAfter(c.doc.createTextNode("\u00a0"),j));g.collapse(u)}c.insertAfter(i,j);B=c.getPos(i).y;c.remove(i);if(B>C){k.getWin().scrollTo(0,B)}}a.onKeyPress.add(function(j,i){if(i.keyCode==13&&(i.shiftKey||(f.force_br_newlines&&!c.getParent(g.getNode(),"h1,h2,h3,h4,h5,h6,ol,ul")))){d(j);o.cancel(i)}})}if(v){if(f.element!="P"){a.onKeyPress.add(function(j,i){h.lastElm=g.getNode().nodeName});a.onKeyUp.add(function(j,i){var l,A=g.getNode(),k=j.getBody();if(k.childNodes.length===1&&A.nodeName=="P"){A=c.rename(A,f.element);g.select(A);g.collapse();j.nodeChanged()}else{if(i.keyCode==13&&!i.shiftKey&&h.lastElm!="P"){l=c.getParent(A,"p");if(l){c.rename(l,f.element);j.nodeChanged()}}}})}}},getParentBlock:function(b){var a=this.dom;return a.getParent(b,a.isBlock)},insertPara:function(f){var af=this,ac=af.editor,j=ac.dom,e=ac.getDoc(),a=ac.settings,ad=ac.selection.getSel(),ab=ad.getRangeAt(0),b=e.body;var X,W,aa,h,i,aj,am,ae,l,an,ah,c,al,Z,Y,k=j.getViewPort(ac.getWin()),ai,ag,ak;ac.undoManager.beforeChange();X=e.createRange();X.setStart(ad.anchorNode,ad.anchorOffset);X.collapse(u);W=e.createRange();W.setStart(ad.focusNode,ad.focusOffset);W.collapse(u);aa=X.compareBoundaryPoints(X.START_TO_END,W)<0;h=aa?ad.anchorNode:ad.focusNode;i=aa?ad.anchorOffset:ad.focusOffset;aj=aa?ad.focusNode:ad.anchorNode;am=aa?ad.focusOffset:ad.anchorOffset;if(h===aj&&/^(TD|TH)$/.test(h.nodeName)){if(h.firstChild.nodeName=="BR"){j.remove(h.firstChild)}if(h.childNodes.length==0){ac.dom.add(h,a.element,null,"<br />");c=ac.dom.add(h,a.element,null,"<br />")}else{Y=h.innerHTML;h.innerHTML="";ac.dom.add(h,a.element,null,Y);c=ac.dom.add(h,a.element,null,"<br />")}ab=e.createRange();ab.selectNodeContents(c);ab.collapse(1);ac.selection.setRng(ab);return r}if(h==b&&aj==b&&b.firstChild&&ac.dom.isBlock(b.firstChild)){h=aj=h.firstChild;i=am=0;X=e.createRange();X.setStart(h,0);W=e.createRange();W.setStart(aj,0)}h=h.nodeName=="HTML"?e.body:h;h=h.nodeName=="BODY"?h.firstChild:h;aj=aj.nodeName=="HTML"?e.body:aj;aj=aj.nodeName=="BODY"?aj.firstChild:aj;ae=af.getParentBlock(h);l=af.getParentBlock(aj);an=ae?ae.nodeName:a.element;if(Y=af.dom.getParent(ae,"li,pre")){if(Y.nodeName=="LI"){return t(ac.selection,af.dom,Y)}return u}if(ae&&(ae.nodeName=="CAPTION"||/absolute|relative|fixed/gi.test(j.getStyle(ae,"position",1)))){an=a.element;ae=null}if(l&&(l.nodeName=="CAPTION"||/absolute|relative|fixed/gi.test(j.getStyle(ae,"position",1)))){an=a.element;l=null}if(/(TD|TABLE|TH|CAPTION)/.test(an)||(ae&&an=="DIV"&&/left|right/gi.test(j.getStyle(ae,"float",1)))){an=a.element;ae=l=null}ah=(ae&&ae.nodeName==an)?ae.cloneNode(0):ac.dom.create(an);c=(l&&l.nodeName==an)?l.cloneNode(0):ac.dom.create(an);c.removeAttribute("id");if(/^(H[1-6])$/.test(an)&&s(ab,ae)){c=ac.dom.create(a.element)}Y=al=h;do{if(Y==b||Y.nodeType==9||af.dom.isBlock(Y)||/(TD|TABLE|TH|CAPTION)/.test(Y.nodeName)){break}al=Y}while((Y=Y.previousSibling?Y.previousSibling:Y.parentNode));Y=Z=aj;do{if(Y==b||Y.nodeType==9||af.dom.isBlock(Y)||/(TD|TABLE|TH|CAPTION)/.test(Y.nodeName)){break}Z=Y}while((Y=Y.nextSibling?Y.nextSibling:Y.parentNode));if(al.nodeName==an){X.setStart(al,0)}else{X.setStartBefore(al)}X.setEnd(h,i);ah.appendChild(X.cloneContents()||e.createTextNode(""));try{W.setEndAfter(Z)}catch(g){}W.setStart(aj,am);c.appendChild(W.cloneContents()||e.createTextNode(""));ab=e.createRange();if(!al.previousSibling&&al.parentNode.nodeName==an){ab.setStartBefore(al.parentNode)}else{if(X.startContainer.nodeName==an&&X.startOffset==0){ab.setStartBefore(X.startContainer)}else{ab.setStart(X.startContainer,X.startOffset)}}if(!Z.nextSibling&&Z.parentNode.nodeName==an){ab.setEndAfter(Z.parentNode)}else{ab.setEnd(W.endContainer,W.endOffset)}ab.deleteContents();if(x){ac.getWin().scrollTo(0,k.y)}if(ah.firstChild&&ah.firstChild.nodeName==an){ah.innerHTML=ah.firstChild.innerHTML}if(c.firstChild&&c.firstChild.nodeName==an){c.innerHTML=c.firstChild.innerHTML}function d(E,B){var C=[],D,z,A;E.innerHTML="";if(a.keep_styles){z=B;do{if(/^(SPAN|STRONG|B|EM|I|FONT|STRIKE|U)$/.test(z.nodeName)){D=z.cloneNode(r);j.setAttrib(D,"id","");C.push(D)}}while(z=z.parentNode)}if(C.length>0){for(A=C.length-1,D=E;A>=0;A--){D=D.appendChild(C[A])}C[0].innerHTML=x?"\u00a0":"<br />";return C[0]}else{E.innerHTML=x?"\u00a0":"<br />"}}if(j.isEmpty(ah)){d(ah,h)}if(j.isEmpty(c)){ak=d(c,aj)}if(x&&parseFloat(opera.version())<9.5){ab.insertNode(ah);ab.insertNode(c)}else{ab.insertNode(c);ab.insertNode(ah)}c.normalize();ah.normalize();ac.selection.select(c,true);ac.selection.collapse(true);ai=ac.dom.getPos(c).y;if(ai<k.y||ai+25>k.y+k.h){ac.getWin().scrollTo(0,ai<k.y?ai:ai-k.h+25)}ac.undoManager.add();return r},backspaceDelete:function(l,c){var a=this,D=a.editor,i=D.getBody(),b=D.dom,d,k=D.selection,f=k.getRng(),j=f.startContainer,d,h,e,g;if(!c&&f.collapsed&&j.nodeType==1&&f.startOffset==j.childNodes.length){g=new m.dom.TreeWalker(j.lastChild,j);for(d=j.lastChild;d;d=g.prev()){if(d.nodeType==3){f.setStart(d,d.nodeValue.length);f.collapse(true);k.setRng(f);return}}}if(j&&D.dom.isBlock(j)&&!/^(TD|TH)$/.test(j.nodeName)&&c){if(j.childNodes.length==0||(j.childNodes.length==1&&j.firstChild.nodeName=="BR")){d=j;while((d=d.previousSibling)&&!D.dom.isBlock(d)){}if(d){if(j!=i.firstChild){h=D.dom.doc.createTreeWalker(d,NodeFilter.SHOW_TEXT,null,r);while(e=h.nextNode()){d=e}f=D.getDoc().createRange();f.setStart(d,d.nodeValue?d.nodeValue.length:0);f.setEnd(d,d.nodeValue?d.nodeValue.length:0);k.setRng(f);D.dom.remove(j)}return o.cancel(l)}}}}})})(tinymce);(function(j){var f=j.DOM,g=j.dom.Event,i=j.each,h=j.extend;j.create("tinymce.ControlManager",{ControlManager:function(d,a){var b=this,c;a=a||{};b.editor=d;b.controls={};b.onAdd=new j.util.Dispatcher(b);b.onPostRender=new j.util.Dispatcher(b);b.prefix=a.prefix||d.id+"_";b._cls={};b.onPostRender.add(function(){i(b.controls,function(e){e.postRender()})})},get:function(a){return this.controls[this.prefix+a]||this.controls[a]},setActive:function(a,c){var b=null;if(b=this.get(a)){b.setActive(c)}return b},setDisabled:function(a,c){var b=null;if(b=this.get(a)){b.setDisabled(c)}return b},add:function(a){var b=this;if(a){b.controls[a.id]=a;b.onAdd.dispatch(a,b)}return a},createControl:function(a){var b,c=this,d=c.editor;i(d.plugins,function(e){if(e.createControl){b=e.createControl(a,c);if(b){return false}}});switch(a){case"|":case"separator":return c.createSeparator()}if(!b&&d.buttons&&(b=d.buttons[a])){return c.createButton(a,b)}return c.add(b)},createDropMenu:function(r,a,p){var b=this,o=b.editor,e,q,d,c;a=h({"class":"mceDropDown",constrain:o.settings.constrain_menus},a);a["class"]=a["class"]+" "+o.getParam("skin")+"Skin";if(d=o.getParam("skin_variant")){a["class"]+=" "+o.getParam("skin")+"Skin"+d.substring(0,1).toUpperCase()+d.substring(1)}r=b.prefix+r;c=p||b._cls.dropmenu||j.ui.DropMenu;e=b.controls[r]=new c(r,a);e.onAddItem.add(function(k,l){var m=l.settings;m.title=o.getLang(m.title,m.title);if(!m.onclick){m.onclick=function(n){if(m.cmd){o.execCommand(m.cmd,m.ui||false,m.value)}}}});o.onRemove.add(function(){e.destroy()});if(j.isIE){e.onShowMenu.add(function(){o.focus();q=o.selection.getBookmark(1)});e.onHideMenu.add(function(){if(q){o.selection.moveToBookmark(q);q=0}})}return b.add(e)},createListBox:function(a,e,b){var n=this,o=n.editor,d,c,p;if(n.get(a)){return null}e.title=o.translate(e.title);e.scope=e.scope||o;if(!e.onselect){e.onselect=function(k){o.execCommand(e.cmd,e.ui||false,k||e.value)}}e=h({title:e.title,"class":"mce_"+a,scope:e.scope,control_manager:n},e);a=n.prefix+a;if(o.settings.use_native_selects){c=new j.ui.NativeListBox(a,e)}else{p=b||n._cls.listbox||j.ui.ListBox;c=new p(a,e,o)}n.controls[a]=c;if(j.isWebKit){c.onPostRender.add(function(k,l){g.add(l,"mousedown",function(){o.bookmark=o.selection.getBookmark(1)});g.add(l,"focus",function(){o.selection.moveToBookmark(o.bookmark);o.bookmark=null})})}if(c.hideMenu){o.onMouseDown.add(c.hideMenu,c)}return n.add(c)},createButton:function(a,e,b){var n=this,o=n.editor,d,c,p;if(n.get(a)){return null}e.title=o.translate(e.title);e.label=o.translate(e.label);e.scope=e.scope||o;if(!e.onclick&&!e.menu_button){e.onclick=function(){o.execCommand(e.cmd,e.ui||false,e.value)}}e=h({title:e.title,"class":"mce_"+a,unavailable_prefix:o.getLang("unavailable",""),scope:e.scope,control_manager:n},e);a=n.prefix+a;if(e.menu_button){p=b||n._cls.menubutton||j.ui.MenuButton;c=new p(a,e,o);o.onMouseDown.add(c.hideMenu,c)}else{p=n._cls.button||j.ui.Button;c=new p(a,e,o)}return n.add(c)},createMenuButton:function(a,c,b){c=c||{};c.menu_button=1;return this.createButton(a,c,b)},createSplitButton:function(a,e,b){var n=this,o=n.editor,d,c,p;if(n.get(a)){return null}e.title=o.translate(e.title);e.scope=e.scope||o;if(!e.onclick){e.onclick=function(k){o.execCommand(e.cmd,e.ui||false,k||e.value)}}if(!e.onselect){e.onselect=function(k){o.execCommand(e.cmd,e.ui||false,k||e.value)}}e=h({title:e.title,"class":"mce_"+a,scope:e.scope,control_manager:n},e);a=n.prefix+a;p=b||n._cls.splitbutton||j.ui.SplitButton;c=n.add(new p(a,e,o));o.onMouseDown.add(c.hideMenu,c);return c},createColorSplitButton:function(r,a,p){var c=this,e=c.editor,o,d,b,q;if(c.get(r)){return null}a.title=e.translate(a.title);a.scope=a.scope||e;if(!a.onclick){a.onclick=function(k){if(j.isIE){q=e.selection.getBookmark(1)}e.execCommand(a.cmd,a.ui||false,k||a.value)}}if(!a.onselect){a.onselect=function(k){e.execCommand(a.cmd,a.ui||false,k||a.value)}}a=h({title:a.title,"class":"mce_"+r,menu_class:e.getParam("skin")+"Skin",scope:a.scope,more_colors_title:e.getLang("more_colors")},a);r=c.prefix+r;b=p||c._cls.colorsplitbutton||j.ui.ColorSplitButton;d=new b(r,a,e);e.onMouseDown.add(d.hideMenu,d);e.onRemove.add(function(){d.destroy()});if(j.isIE){d.onShowMenu.add(function(){e.focus();q=e.selection.getBookmark(1)});d.onHideMenu.add(function(){if(q){e.selection.moveToBookmark(q);q=0}})}return c.add(d)},createToolbar:function(a,d,b){var c,e=this,l;a=e.prefix+a;l=b||e._cls.toolbar||j.ui.Toolbar;c=new l(a,d,e.editor);if(e.get(a)){return null}return e.add(c)},createToolbarGroup:function(a,d,b){var c,e=this,l;a=e.prefix+a;l=b||this._cls.toolbarGroup||j.ui.ToolbarGroup;c=new l(a,d,e.editor);if(e.get(a)){return null}return e.add(c)},createSeparator:function(a){var b=a||this._cls.separator||j.ui.Separator;return new b()},setControlType:function(a,b){return this._cls[a.toLowerCase()]=b},destroy:function(){i(this.controls,function(a){a.destroy()});this.controls=null}})})(tinymce);(function(i){var g=i.util.Dispatcher,h=i.each,j=i.isIE,f=i.isOpera;i.create("tinymce.WindowManager",{WindowManager:function(b){var a=this;a.editor=b;a.onOpen=new g(a);a.onClose=new g(a);a.params={};a.features={}},open:function(A,x){var B=this,s="",d,e,u=B.editor.settings.dialog_type=="modal",b,c,t,y=i.DOM.getViewPort(),a;A=A||{};x=x||{};c=f?y.w:screen.width;t=f?y.h:screen.height;A.name=A.name||"mc_"+new Date().getTime();A.width=parseInt(A.width||320);A.height=parseInt(A.height||240);A.resizable=true;A.left=A.left||parseInt(c/2)-(A.width/2);A.top=A.top||parseInt(t/2)-(A.height/2);x.inline=false;x.mce_width=A.width;x.mce_height=A.height;x.mce_auto_focus=A.auto_focus;if(u){if(j){A.center=true;A.help=false;A.dialogWidth=A.width+"px";A.dialogHeight=A.height+"px";A.scroll=A.scrollbars||false}}h(A,function(l,k){if(i.is(l,"boolean")){l=l?"yes":"no"}if(!/^(name|url)$/.test(k)){if(j&&u){s+=(s?";":"")+k+":"+l}else{s+=(s?",":"")+k+"="+l}}});B.features=A;B.params=x;B.onOpen.dispatch(B,A,x);a=A.url||A.file;a=i._addVer(a);try{if(j&&u){b=1;window.showModalDialog(a,window,s)}else{b=window.open(a,A.name,s)}}catch(p){}if(!b){alert(B.editor.getLang("popup_blocked"))}},close:function(a){a.close();this.onClose.dispatch(this)},createInstance:function(e,n,o,a,b,c){var d=i.resolve(e);return new d(n,o,a,b,c)},confirm:function(b,d,a,c){c=c||window;d.call(a||this,c.confirm(this._decode(this.editor.getLang(b,b))))},alert:function(c,e,a,d){var b=this;d=d||window;d.alert(b._decode(b.editor.getLang(c,c)));if(e){e.call(a||b)}},resizeBy:function(c,b,a){a.resizeBy(c,b)},_decode:function(a){return i.DOM.decode(a).replace(/\\n/g,"\n")}})}(tinymce));(function(b){b.Formatter=function(a){var ae={},ac=b.each,aO=a.dom,aA=a.selection,ax=b.dom.TreeWalker,ag=new b.dom.RangeUtils(aO),aN=a.schema.isValidChild,al=aO.isBlock,aF=a.settings.forced_root_block,ay=aO.nodeIndex,am="\uFEFF",aM=/^(src|href|style)$/,Y=false,ap=true,aB,ab={apply:[],remove:[]};function ar(c){return c instanceof Array}function aE(d,c){return aO.getParents(d,c,aO.getRoot())}function aP(c){return c.nodeType===1&&(c.face==="mceinline"||c.style.fontFamily==="mceinline")}function Z(c){return c?ae[c]:ae}function aG(c,d){if(c){if(typeof(c)!=="string"){ac(c,function(e,f){aG(f,e)})}else{d=d.length?d:[d];ac(d,function(e){if(e.deep===aB){e.deep=!e.selector}if(e.split===aB){e.split=!e.selector||e.inline}if(e.remove===aB&&e.selector&&!e.inline){e.remove="none"}if(e.selector&&e.inline){e.mixed=true;e.block_expand=true}if(typeof(e.classes)==="string"){e.classes=e.classes.split(/\s+/)}});ae[c]=d}}}var aI=function(d){var c;a.dom.getParent(d,function(e){c=a.dom.getStyle(e,"text-decoration");return c&&c!=="none"});return c};var ai=function(c){var d;if(c.nodeType===1&&c.parentNode&&c.parentNode.nodeType===1){d=aI(c.parentNode);if(a.dom.getStyle(c,"color")&&d){a.dom.setStyle(c,"text-decoration",d)}else{if(a.dom.getStyle(c,"textdecoration")===d){a.dom.setStyle(c,"text-decoration",null)}}}};function X(e,k,c){var o=Z(e),j=o[0],l,f,m,n=aA.isCollapsed();function d(s){var t=s.startContainer,p=s.startOffset,q,r;if(t.nodeType==1||t.nodeValue===""){t=t.nodeType==1?t.childNodes[p]:t;if(t){q=new ax(t,t.parentNode);for(r=q.current();r;r=q.next()){if(r.nodeType==3&&!aL(r)){s.setStart(r,0);break}}}}return s}function g(p,q){q=q||j;if(p){ac(q.styles,function(r,s){aO.setStyle(p,s,az(r,k))});ac(q.attributes,function(r,s){aO.setAttrib(p,s,az(r,k))});ac(q.classes,function(r){r=az(r,k);if(!aO.hasClass(p,r)){aO.addClass(p,r)}})}}function i(r){var s=[],p,q;p=j.inline||j.block;q=aO.create(p);g(q);ag.walk(r,function(v){var u;function t(z){var A=z.nodeName.toLowerCase(),x=z.parentNode.nodeName.toLowerCase(),y;if(aK(A,"br")){u=0;if(j.block){aO.remove(z)}return}if(j.wrapper&&au(z,e,k)){u=0;return}if(j.block&&!j.wrapper&&ak(A)){z=aO.rename(z,p);g(z);s.push(z);u=0;return}if(j.selector){ac(o,function(B){if("collapsed" in B&&B.collapsed!==n){return}if(aO.is(z,B.selector)&&!aP(z)){g(z,B);y=true}});if(!j.inline||y){u=0;return}}if(aN(p,A)&&aN(x,p)&&!(z.nodeType===3&&z.nodeValue.length===1&&z.nodeValue.charCodeAt(0)===65279)){if(!u){u=q.cloneNode(Y);z.parentNode.insertBefore(u,z);s.push(u)}u.appendChild(z)}else{if(A=="li"){if(!u){liTextNode=z.ownerDocument.createTextNode("");ac(b.grep(z.childNodes),function(B){if(B.nodeType==3){liTextNode.nodeValue+=B.nodeValue;B.parentNode.removeChild(B)}});u=q.cloneNode(Y);z.insertBefore(u,z.firstChild);s.push(u)}u.appendChild(liTextNode)}else{u=0;ac(b.grep(z.childNodes),t);u=0}}}ac(v,t)});if(j.wrap_links===false){ac(s,function(u){function t(v){var x,y,z;if(v.nodeName==="A"){y=q.cloneNode(Y);s.push(y);z=b.grep(v.childNodes);for(x=0;x<z.length;x++){y.appendChild(z[x])}v.appendChild(y)}ac(b.grep(v.childNodes),t)}t(u)})}ac(s,function(u){var x;function t(y){var z=0;ac(y.childNodes,function(A){if(!aL(A)&&!aj(A)){z++}});return z}function v(z){var A,y;ac(z.childNodes,function(B){if(B.nodeType==1&&!aj(B)&&!aP(B)){A=B;return Y}});if(A&&aJ(A,j)){y=A.cloneNode(Y);g(y);aO.replace(y,z,ap);aO.remove(A,1)}return y||z}x=t(u);if((s.length>1||!al(u))&&x===0){aO.remove(u,1);return}if(j.inline||j.wrapper){if(!j.exact&&x===1){u=v(u)}ac(o,function(y){ac(aO.select(y.inline,u),function(A){var z;if(y.wrap_links===false){z=A.parentNode;do{if(z.nodeName==="A"){return}}while(z=z.parentNode)}W(y,k,A,y.exact?A:null)})});if(au(u.parentNode,e,k)){aO.remove(u,1);u=0;return ap}if(j.merge_with_parents){aO.getParent(u.parentNode,function(y){if(au(y,e,k)){aO.remove(u,1);u=0;return ap}})}if(u){u=aw(ao(u),u);u=aw(u,ao(u,ap))}}})}if(j){if(c){f=aO.createRng();f.setStartBefore(c);f.setEndAfter(c);i(aC(f,o))}else{if(!n||!j.inline||aO.select("td.mceSelected,th.mceSelected").length){var h=a.selection.getNode();l=aA.getBookmark();i(aC(aA.getRng(ap),o));if(j.styles&&(j.styles.color||j.styles.textDecoration)){b.walk(h,ai,"childNodes");ai(h)}aA.moveToBookmark(l);aA.setRng(d(aA.getRng(ap)));a.nodeChanged()}else{aa("apply",e,k)}}}}function aq(e,k,q){var p=Z(e),i=p[0],l,m,f;function c(x){var y=x.startContainer,r=x.startOffset,s,t,v,u;if(y.nodeType==3&&r>=y.nodeValue.length-1){y=y.parentNode;r=ay(y)+1}if(y.nodeType==1){v=y.childNodes;y=v[Math.min(r,v.length-1)];s=new ax(y);if(r>v.length-1){s.next()}for(t=s.current();t;t=s.next()){if(t.nodeType==3&&!aL(t)){u=aO.create("a",null,am);t.parentNode.insertBefore(u,t);x.setStart(t,0);aA.setRng(x);aO.remove(u);return}}}}function d(r){var s,t,u;s=b.grep(r.childNodes);for(t=0,u=p.length;t<u;t++){if(W(p[t],k,r,r)){break}}if(i.deep){for(t=0,u=s.length;t<u;t++){d(s[t])}}}function o(s){var r;ac(aE(s.parentNode).reverse(),function(u){var t;if(!r&&u.id!="_start"&&u.id!="_end"){t=au(u,e,k);if(t&&t.split!==false){r=u}}});return r}function g(y,B,v,s){var r,t,u,z,x,A;if(y){A=y.parentNode;for(r=B.parentNode;r&&r!=A;r=r.parentNode){t=r.cloneNode(Y);for(x=0;x<p.length;x++){if(W(p[x],k,t,t)){t=0;break}}if(t){if(u){t.appendChild(u)}if(!z){z=t}u=t}}if(s&&(!i.mixed||!al(y))){B=aO.split(y,B)}if(u){v.parentNode.insertBefore(u,v);z.appendChild(v)}}return B}function j(r){return g(o(r),r,r,true)}function n(r){var s=aO.get(r?"_start":"_end"),t=s[r?"firstChild":"lastChild"];if(aj(t)){t=t[r?"firstChild":"lastChild"]}aO.remove(s,true);return t}function h(t){var s,r;t=aC(t,p,ap);if(i.split){s=ah(t,ap);r=ah(t);if(s!=r){s=ad(s,"span",{id:"_start","data-mce-type":"bookmark"});r=ad(r,"span",{id:"_end","data-mce-type":"bookmark"});j(s);j(r);s=n(ap);r=n()}else{s=r=j(s)}t.startContainer=s.parentNode;t.startOffset=ay(s);t.endContainer=r.parentNode;t.endOffset=ay(r)+1}ag.walk(t,function(u){ac(u,function(v){d(v);if(v.nodeType===1&&a.dom.getStyle(v,"text-decoration")==="underline"&&v.parentNode&&aI(v.parentNode)==="underline"){W({deep:false,exact:true,inline:"span",styles:{textDecoration:"underline"}},null,v)}})})}if(q){f=aO.createRng();f.setStartBefore(q);f.setEndAfter(q);h(f);return}if(!aA.isCollapsed()||!i.inline||aO.select("td.mceSelected,th.mceSelected").length){l=aA.getBookmark();h(aA.getRng(ap));aA.moveToBookmark(l);if(aH(e,k,aA.getStart())){c(aA.getRng(true))}a.nodeChanged()}else{aa("remove",e,k)}}function an(f,d,e){var c=Z(f);if(aH(f,d,e)&&(!("toggle" in c[0])||c[0]["toggle"])){aq(f,d,e)}else{X(f,d,e)}}function au(f,g,j,c){var e=Z(g),i,k,d;function h(l,q,p){var m,r,o=q[p],n;if(o){if(o.length===aB){for(m in o){if(o.hasOwnProperty(m)){if(p==="attributes"){r=aO.getAttrib(l,m)}else{r=af(l,m)}if(c&&!r&&!q.exact){return}if((!c||q.exact)&&!aK(r,az(o[m],j))){return}}}}else{for(n=0;n<o.length;n++){if(p==="attributes"?aO.getAttrib(l,o[n]):af(l,o[n])){return q}}}}return q}if(e&&f){for(k=0;k<e.length;k++){i=e[k];if(aJ(f,i)&&h(f,i,"attributes")&&h(f,i,"styles")){if(d=i.classes){for(k=0;k<d.length;k++){if(!aO.hasClass(f,d[k])){return}}}return i}}}}function aH(g,d,f){var h,e;function c(i){i=aO.getParent(i,function(j){return !!au(j,g,d,true)});return au(i,g,d)}if(f){return c(f)}if(aA.isCollapsed()){for(e=ab.apply.length-1;e>=0;e--){if(ab.apply[e].name==g){return true}}for(e=ab.remove.length-1;e>=0;e--){if(ab.remove[e].name==g){return false}}return c(aA.getNode())}f=aA.getNode();if(c(f)){return ap}h=aA.getStart();if(h!=f){if(c(h)){return ap}}return Y}function av(d,e){var h,f=[],g={},i,j,c;if(aA.isCollapsed()){for(j=0;j<d.length;j++){for(i=ab.remove.length-1;i>=0;i--){c=d[j];if(ab.remove[i].name==c){g[c]=true;break}}}for(i=ab.apply.length-1;i>=0;i--){for(j=0;j<d.length;j++){c=d[j];if(!g[c]&&ab.apply[i].name==c){g[c]=true;f.push(c)}}}}h=aA.getStart();aO.getParent(h,function(k){var l,m;for(l=0;l<d.length;l++){m=d[l];if(!g[m]&&au(k,m,e)){g[m]=true;f.push(m)}}});return f}function at(g){var d=Z(g),f,h,e,i,c;if(d){f=aA.getStart();h=aE(f);for(i=d.length-1;i>=0;i--){c=d[i].selector;if(!c){return ap}for(e=h.length-1;e>=0;e--){if(aO.is(h[e],c)){return ap}}}}return Y}b.extend(this,{get:Z,register:aG,apply:X,remove:aq,toggle:an,match:aH,matchAll:av,matchNode:au,canApply:at});function aJ(c,d){if(aK(c,d.inline)){return ap}if(aK(c,d.block)){return ap}if(d.selector){return aO.is(c,d.selector)}}function aK(d,c){d=d||"";c=c||"";d=""+(d.nodeName||d);c=""+(c.nodeName||c);return d.toLowerCase()==c.toLowerCase()}function af(e,c){var d=aO.getStyle(e,c);if(c=="color"||c=="backgroundColor"){d=aO.toHex(d)}if(c=="fontWeight"&&d==700){d="bold"}return""+d}function az(c,d){if(typeof(c)!="string"){c=c(d)}else{if(d){c=c.replace(/%(\w+)/g,function(e,f){return d[f]||e})}}return c}function aL(c){return c&&c.nodeType===3&&/^([\s\r\n]+|)$/.test(c.nodeValue)}function ad(e,f,c){var d=aO.create(f,c);e.parentNode.insertBefore(d,e);d.appendChild(e);return d}function aC(g,k,d){var e=g.startContainer,n=g.startOffset,h=g.endContainer,m=g.endOffset,i,l,o;function j(t,s,v,u){var r,q;u=u||aO.getRoot();for(;;){r=t.parentNode;if(r==u||(!k[0].block_expand&&al(r))){return t}for(i=r[s];i&&i!=t;i=i[v]){if(i.nodeType==1&&!aj(i)){return t}if(i.nodeType==3&&!aL(i)){return t}}t=t.parentNode}return t}function p(r,q){if(q===aB){q=r.nodeType===3?r.length:r.childNodes.length}while(r&&r.hasChildNodes()){r=r.childNodes[q];if(r){q=r.nodeType===3?r.length:r.childNodes.length}}return{node:r,offset:q}}if(e.nodeType==1&&e.hasChildNodes()){l=e.childNodes.length-1;e=e.childNodes[n>l?l:n];if(e.nodeType==3){n=0}}if(h.nodeType==1&&h.hasChildNodes()){l=h.childNodes.length-1;h=h.childNodes[m>l?l:m-1];if(h.nodeType==3){m=h.nodeValue.length}}if(aj(e.parentNode)){e=e.parentNode}if(aj(e)){e=e.nextSibling||e}if(aj(h.parentNode)){m=aO.nodeIndex(h);h=h.parentNode}if(aj(h)&&h.previousSibling){h=h.previousSibling;m=h.length}if(k[0].inline){o=p(h,m);if(o.node){while(o.node&&o.offset===0&&o.node.previousSibling){o=p(o.node.previousSibling)}if(o.node&&o.offset>0&&o.node.nodeType===3&&o.node.nodeValue.charAt(o.offset-1)===" "){if(o.offset>1){h=o.node;h.splitText(o.offset-1)}else{if(o.node.previousSibling){h=o.node.previousSibling}}}}}if(k[0].inline||k[0].block_expand){e=j(e,"firstChild","nextSibling");h=j(h,"lastChild","previousSibling")}if(k[0].selector&&k[0].expand!==Y&&!k[0].inline){function c(u,v){var t,s,q,r;if(u.nodeType==3&&u.nodeValue.length==0&&u[v]){u=u[v]}t=aE(u);for(s=0;s<t.length;s++){for(q=0;q<k.length;q++){r=k[q];if("collapsed" in r&&r.collapsed!==g.collapsed){continue}if(aO.is(t[s],r.selector)){return t[s]}}}return u}e=c(e,"previousSibling");h=c(h,"nextSibling")}if(k[0].block||k[0].selector){function f(s,t,q){var r;if(!k[0].wrapper){r=aO.getParent(s,k[0].block)}if(!r){r=aO.getParent(s.nodeType==3?s.parentNode:s,al)}if(r&&k[0].wrapper){r=aE(r,"ul,ol").reverse()[0]||r}if(!r){r=s;while(r[t]&&!al(r[t])){r=r[t];if(aK(r,"br")){break}}}return r||s}e=f(e,"previousSibling");h=f(h,"nextSibling");if(k[0].block){if(!al(e)){e=j(e,"firstChild","nextSibling")}if(!al(h)){h=j(h,"lastChild","previousSibling")}}}if(e.nodeType==1){n=ay(e);e=e.parentNode}if(h.nodeType==1){m=ay(h)+1;h=h.parentNode}return{startContainer:e,startOffset:n,endContainer:h,endOffset:m}}function W(d,e,g,c){var h,i,f;if(!aJ(g,d)){return Y}if(d.remove!="all"){ac(d.styles,function(j,k){j=az(j,e);if(typeof(k)==="number"){k=j;c=0}if(!c||aK(af(c,k),j)){aO.setStyle(g,k,"")}f=1});if(f&&aO.getAttrib(g,"style")==""){g.removeAttribute("style");g.removeAttribute("data-mce-style")}ac(d.attributes,function(j,l){var k;j=az(j,e);if(typeof(l)==="number"){l=j;c=0}if(!c||aK(aO.getAttrib(c,l),j)){if(l=="class"){j=aO.getAttrib(g,l);if(j){k="";ac(j.split(/\s+/),function(m){if(/mce\w+/.test(m)){k+=(k?" ":"")+m}});if(k){aO.setAttrib(g,l,k);return}}}if(l=="class"){g.removeAttribute("className")}if(aM.test(l)){g.removeAttribute("data-mce-"+l)}g.removeAttribute(l)}});ac(d.classes,function(j){j=az(j,e);if(!c||aO.hasClass(c,j)){aO.removeClass(g,j)}});i=aO.getAttribs(g);for(h=0;h<i.length;h++){if(i[h].nodeName.indexOf("_")!==0){return Y}}}if(d.remove!="none"){aD(g,d);return ap}}function aD(f,e){var c=f.parentNode,g;if(e.block){if(!aF){function d(i,j,h){i=ao(i,j,h);return !i||(i.nodeName=="BR"||al(i))}if(al(f)&&!al(c)){if(!d(f,Y)&&!d(f.firstChild,ap,1)){f.insertBefore(aO.create("br"),f.firstChild)}if(!d(f,ap)&&!d(f.lastChild,Y,1)){f.appendChild(aO.create("br"))}}}else{if(c==aO.getRoot()){if(!e.list_block||!aK(f,e.list_block)){ac(b.grep(f.childNodes),function(h){if(aN(aF,h.nodeName.toLowerCase())){if(!g){g=ad(h,aF)}else{g.appendChild(h)}}else{g=0}})}}}}if(e.selector&&e.inline&&!aK(e.inline,f)){return}aO.remove(f,1)}function ao(e,c,d){if(e){c=c?"nextSibling":"previousSibling";for(e=d?e:e[c];e;e=e[c]){if(e.nodeType==1||!aL(e)){return e}}}}function aj(c){return c&&c.nodeType==1&&c.getAttribute("data-mce-type")=="bookmark"}function aw(g,f){var c,h,i;function d(k,l){if(k.nodeName!=l.nodeName){return Y}function m(o){var n={};ac(aO.getAttribs(o),function(q){var p=q.nodeName.toLowerCase();if(p.indexOf("_")!==0&&p!=="style"){n[p]=aO.getAttrib(o,p)}});return n}function j(p,q){var n,o;for(o in p){if(p.hasOwnProperty(o)){n=q[o];if(n===aB){return Y}if(p[o]!=n){return Y}delete q[o]}}for(o in q){if(q.hasOwnProperty(o)){return Y}}return ap}if(!j(m(k),m(l))){return Y}if(!j(aO.parseStyle(aO.getAttrib(k,"style")),aO.parseStyle(aO.getAttrib(l,"style")))){return Y}return ap}if(g&&f){function e(j,k){for(h=j;h;h=h[k]){if(h.nodeType==3&&h.nodeValue.length!==0){return j}if(h.nodeType==1&&!aj(h)){return h}}return j}g=e(g,"previousSibling");f=e(f,"nextSibling");if(d(g,f)){for(h=g.nextSibling;h&&h!=f;){i=h;h=h.nextSibling;g.appendChild(i)}aO.remove(f);ac(b.grep(f.childNodes),function(j){g.appendChild(j)});return g}}return f}function ak(c){return/^(h[1-6]|p|div|pre|address|dl|dt|dd)$/.test(c)}function ah(g,e){var c,d,f;c=g[e?"startContainer":"endContainer"];d=g[e?"startOffset":"endOffset"];if(c.nodeType==1){f=c.childNodes.length-1;if(!e&&d){d--}c=c.childNodes[d>f?f:d]}return c}function aa(k,f,c){var e,g=ab[k],j=ab[k=="apply"?"remove":"apply"];function i(){return ab.apply.length||ab.remove.length}function d(){ab.apply=[];ab.remove=[]}function h(l){ac(ab.apply.reverse(),function(m){X(m.name,m.vars,l);if(m.name==="forecolor"&&m.vars.value){ai(l.parentNode)}});ac(ab.remove.reverse(),function(m){aq(m.name,m.vars,l)});aO.remove(l,1);d()}for(e=g.length-1;e>=0;e--){if(g[e].name==f){return}}g.push({name:f,vars:c});for(e=j.length-1;e>=0;e--){if(j[e].name==f){j.splice(e,1)}}if(i()){a.getDoc().execCommand("FontName",false,"mceinline");ab.lastRng=aA.getRng();ac(aO.select("font,span"),function(l){var m;if(aP(l)){m=aA.getBookmark();h(l);aA.moveToBookmark(m);a.nodeChanged()}});if(!ab.isListening&&i()){ab.isListening=true;ac("onKeyDown,onKeyUp,onKeyPress,onMouseUp".split(","),function(l){a[l].addToTop(function(n,m){if(i()&&!b.dom.RangeUtils.compareRanges(ab.lastRng,aA.getRng())){ac(aO.select("font,span"),function(q){var p,o;if(aP(q)){p=q.firstChild;while(p&&p.nodeType!=3){p=p.firstChild}if(p){h(q);o=aO.createRng();o.setStart(p,p.nodeValue.length);o.setEnd(p,p.nodeValue.length);aA.setRng(o);n.nodeChanged()}else{aO.remove(q)}}});if(m.type=="keyup"||m.type=="mouseup"){d()}}})})}}}}})(tinymce);tinymce.onAddEditor.add(function(n,j){var o,k,l,p=j.settings;if(p.inline_styles){k=n.explode(p.font_size_style_values);function i(a,b){n.each(b,function(c,d){if(c){l.setStyle(a,d,c)}});l.rename(a,"span")}o={font:function(a,b){i(b,{backgroundColor:b.style.backgroundColor,color:b.color,fontFamily:b.face,fontSize:k[parseInt(b.size)-1]})},u:function(a,b){i(b,{textDecoration:"underline"})},strike:function(a,b){i(b,{textDecoration:"line-through"})}};function m(b,a){l=b.dom;if(p.convert_fonts_to_spans){n.each(l.select("font,u,strike",a.node),function(c){o[c.nodeName.toLowerCase()](j.dom,c)})}}j.onPreProcess.add(m);j.onSetContent.add(m);j.onInit.add(function(){j.selection.onSetContent.add(m)})}});
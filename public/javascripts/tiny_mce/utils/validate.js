var Validator={isEmail:function(a){return this.test(a,"^[-!#$%&'*+\\./0-9=?A-Z^_`a-z{|}~]+@[-!#$%&'*+\\/0-9=?A-Z^_`a-z{|}~]+.[-!#$%&'*+\\./0-9=?A-Z^_`a-z{|}~]+$")},isAbsUrl:function(a){return this.test(a,"^(news|telnet|nttp|file|http|ftp|https)://[-A-Za-z0-9\\.]+\\/?.*$")},isSize:function(a){return this.test(a,"^[0-9]+(%|in|cm|mm|em|ex|pt|pc|px)?$")},isId:function(a){return this.test(a,"^[A-Za-z_]([A-Za-z0-9_])*$")},isEmpty:function(a){var b,d;if(a.nodeName=="SELECT"&&a.selectedIndex<1)return true;
if(a.type=="checkbox"&&!a.checked)return true;if(a.type=="radio"){d=0;for(b=a.form.elements;d<b.length;d++)if(b[d].type=="radio"&&b[d].name==a.name&&b[d].checked)return false;return true}return/^\s*$/.test(a.nodeType==1?a.value:a)},isNumber:function(a,b){return!isNaN(a.nodeType==1?a.value:a)&&(!b||!this.test(a,"^-?[0-9]*\\.[0-9]*$"))},test:function(a,b){a=a.nodeType==1?a.value:a;return a==""||RegExp(b).test(a)}},AutoValidator={settings:{id_cls:"id",int_cls:"int",url_cls:"url",number_cls:"number",
email_cls:"email",size_cls:"size",required_cls:"required",invalid_cls:"invalid",min_cls:"min",max_cls:"max"},init:function(a){for(var b in a)this.settings[b]=a[b]},validate:function(a){var b,d,e=this.settings,c=0;d=this.tags(a,"label");for(b=0;b<d.length;b++){this.removeClass(d[b],e.invalid_cls);d[b].setAttribute("aria-invalid",false)}c+=this.validateElms(a,"input");c+=this.validateElms(a,"select");c+=this.validateElms(a,"textarea");return c==3},invalidate:function(a){this.mark(a.form,a)},getErrorMessages:function(a){var b,
d=this.settings,e,c,f=[],g=tinyMCEPopup.editor;a=this.tags(a,"label");for(b=0;b<a.length;b++)if(this.hasClass(a[b],d.invalid_cls)){e=document.getElementById(a[b].getAttribute("for"));c={field:a[b].textContent};if(this.hasClass(e,d.min_cls,true)){message=g.getLang("invalid_data_min");c.min=this.getNum(e,d.min_cls)}else message=this.hasClass(e,d.number_cls)?g.getLang("invalid_data_number"):this.hasClass(e,d.size_cls)?g.getLang("invalid_data_size"):g.getLang("invalid_data");message=message.replace(/{\#([^}]+)\}/g,
function(i,h){return c[h]||"{#"+h+"}"});f.push(message)}return f},reset:function(a){var b=["label","input","select","textarea"],d,e,c,f=this.settings;if(a!=null)for(d=0;d<b.length;d++){c=this.tags(a.form?a.form:a,b[d]);for(e=0;e<c.length;e++){this.removeClass(c[e],f.invalid_cls);c[e].setAttribute("aria-invalid",false)}}},validateElms:function(a,b){var d,e,c,f=this.settings,g=true,i=Validator,h;d=this.tags(a,b);for(e=0;e<d.length;e++){c=d[e];this.removeClass(c,f.invalid_cls);if(this.hasClass(c,f.required_cls)&&
i.isEmpty(c))g=this.mark(a,c);if(this.hasClass(c,f.number_cls)&&!i.isNumber(c))g=this.mark(a,c);if(this.hasClass(c,f.int_cls)&&!i.isNumber(c,true))g=this.mark(a,c);if(this.hasClass(c,f.url_cls)&&!i.isAbsUrl(c))g=this.mark(a,c);if(this.hasClass(c,f.email_cls)&&!i.isEmail(c))g=this.mark(a,c);if(this.hasClass(c,f.size_cls)&&!i.isSize(c))g=this.mark(a,c);if(this.hasClass(c,f.id_cls)&&!i.isId(c))g=this.mark(a,c);if(this.hasClass(c,f.min_cls,true)){h=this.getNum(c,f.min_cls);if(isNaN(h)||parseInt(c.value)<
parseInt(h))g=this.mark(a,c)}if(this.hasClass(c,f.max_cls,true)){h=this.getNum(c,f.max_cls);if(isNaN(h)||parseInt(c.value)>parseInt(h))g=this.mark(a,c)}}return g},hasClass:function(a,b,d){return RegExp("\\b"+b+(d?"[0-9]+":"")+"\\b","g").test(a.className)},getNum:function(a,b){b=a.className.match(RegExp("\\b"+b+"([0-9]+)\\b","g"))[0];return b=b.replace(/[^0-9]/g,"")},addClass:function(a,b,d){var e=this.removeClass(a,b);a.className=d?b+(e!=""?" "+e:""):(e!=""?e+" ":"")+b},removeClass:function(a,b){b=
a.className.replace(RegExp("(^|\\s+)"+b+"(\\s+|$)")," ");return a.className=b!=" "?b:""},tags:function(a,b){return a.getElementsByTagName(b)},mark:function(a,b){var d=this.settings;this.addClass(b,d.invalid_cls);b.setAttribute("aria-invalid","true");this.markLabels(a,b,d.invalid_cls);return false},markLabels:function(a,b,d){var e;a=this.tags(a,"label");for(e=0;e<a.length;e++)if(a[e].getAttribute("for")==b.id||a[e].htmlFor==b.id)this.addClass(a[e],d);return null}};

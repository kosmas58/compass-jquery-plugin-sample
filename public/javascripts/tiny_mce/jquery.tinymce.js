(function(e){function u(){function g(b){b==="remove"&&this.each(function(a,f){var d=i(f);d&&d.remove()});this.find("span.mceEditor,div.mceEditor").each(function(a,f){var d=tinyMCE.get(f.id.replace(/_parent$/,""));d&&d.remove()})}function o(b){var a;if(b!==s){g.call(this);this.each(function(f,d){var c;if(c=tinyMCE.get(d.id))c.setContent(b)})}else if(this.length>0)if(a=tinyMCE.get(this[0].id))return a.getContent()}function i(b){var a=null;b&&b.id&&p.tinymce&&(a=tinyMCE.get(b.id));return a}function h(b){return!!(b&&
b.length&&p.tinymce&&b.is(":tinymce"))}var j={};e.each(["text","html","val"],function(b,a){var f=j[a]=e.fn[a],d=a==="text";e.fn[a]=function(c){if(!h(this))return f.apply(this,arguments);if(c!==s){o.call(this.filter(":tinymce"),c);f.apply(this.not(":tinymce"),arguments);return this}else{var k="",n=arguments;(d?this:this.eq(0)).each(function(l,m){var q=i(m);k+=q?d?q.getContent().replace(/<(?:"[^"]*"|'[^']*'|[^'">])*>/g,""):q.getContent():f.apply(e(m),n)});return k}}});e.each(["append","prepend"],function(b,
a){var f=j[a]=e.fn[a],d=a==="prepend";e.fn[a]=function(c){if(!h(this))return f.apply(this,arguments);if(c!==s){this.filter(":tinymce").each(function(k,n){var l=i(n);l&&l.setContent(d?c+l.getContent():l.getContent()+c)});f.apply(this.not(":tinymce"),arguments);return this}}});e.each(["remove","replaceWith","replaceAll","empty"],function(b,a){var f=j[a]=e.fn[a];e.fn[a]=function(){g.call(this,a);return f.apply(this,arguments)}});j.attr=e.fn.attr;e.fn.attr=function(b,a,f){if(!b||b!=="value"||!h(this))return j.attr.call(this,
b,a,f);if(a!==s){o.call(this.filter(":tinymce"),a);j.attr.call(this.not(":tinymce"),b,a,f);return this}else{var d=this[0],c=i(d);return c?c.getContent():j.attr.call(e(d),b,a,f)}}}var s,t,v=[],p=window;e.fn.tinymce=function(g){function o(){var c=[],k=0;if(u){u();u=null}i.each(function(n,l){var m;m=l.id;var q=g.oninit;if(!m)l.id=m=tinymce.DOM.uniqueId();m=new tinymce.Editor(m,g);c.push(m);m.onInit.add(function(){var w,r=q;i.css("visibility","");if(q)if(++k==c.length){if(tinymce.is(r,"string")){w=r.indexOf(".")===
-1?null:tinymce.resolve(r.replace(/\.\w+$/,""));r=tinymce.resolve(r)}r.apply(w||tinymce,c)}})});e.each(c,function(n,l){l.render()})}var i=this,h,j,b,a,f="",d="";if(!i.length)return i;if(!g)return tinyMCE.get(i[0].id);i.css("visibility","hidden");if(!p.tinymce&&!t&&(h=g.script_url)){t=1;j=h.substring(0,h.lastIndexOf("/"));if(/_(src|dev)\.js/g.test(h))d="_src";b=h.lastIndexOf("?");if(b!=-1)f=h.substring(b+1);p.tinyMCEPreInit=p.tinyMCEPreInit||{base:j,suffix:d,query:f};if(h.indexOf("gzip")!=-1){a=g.language||
"en";h=h+(/\?/.test(h)?"&":"?")+"js=true&core=true&suffix="+escape(d)+"&themes="+escape(g.theme)+"&plugins="+escape(g.plugins)+"&languages="+a;p.tinyMCE_GZ||(tinyMCE_GZ={start:function(){function c(k){tinymce.ScriptLoader.markDone(tinyMCE.baseURI.toAbsolute(k))}tinymce.suffix=d;c("langs/"+a+".js");c("themes/"+g.theme+"/editor_template"+d+".js");c("themes/"+g.theme+"/langs/"+a+".js");e.each(g.plugins.split(","),function(k,n){if(n){c("plugins/"+n+"/editor_plugin"+d+".js");c("plugins/"+n+"/langs/"+a+
".js")}})},end:function(){}})}e.ajax({type:"GET",url:h,dataType:"script",cache:true,success:function(){tinymce.dom.Event.domLoaded=1;t=2;g.script_loaded&&g.script_loaded();o();e.each(v,function(c,k){k()})}})}else t===1?v.push(o):o();return i};e.extend(e.expr[":"],{tinymce:function(g){return g.id&&!!tinyMCE.get(g.id)}})})(jQuery);

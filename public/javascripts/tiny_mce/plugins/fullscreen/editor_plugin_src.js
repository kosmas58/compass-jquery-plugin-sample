(function(){var b=tinymce.DOM;tinymce.create("tinymce.plugins.FullScreenPlugin",{init:function(c,m){var d=this,a={},f,l;d.editor=c;c.addCommand("mceFullScreen",function(){var i,h=b.doc.documentElement;if(c.getParam("fullscreen_is_enabled"))c.getParam("fullscreen_new_window")?closeFullscreen():b.win.setTimeout(function(){tinymce.dom.Event.remove(b.win,"resize",d.resizeFunc);tinyMCE.get(c.getParam("fullscreen_editor_id")).setContent(c.getContent({format:"raw"}),{format:"raw"});tinyMCE.remove(c);b.remove("mce_fullscreen_container");
h.style.overflow=c.getParam("fullscreen_html_overflow");b.setStyle(b.doc.body,"overflow",c.getParam("fullscreen_overflow"));b.win.scrollTo(c.getParam("fullscreen_scrollx"),c.getParam("fullscreen_scrolly"));tinyMCE.settings=tinyMCE.oldSettings},10);else if(c.getParam("fullscreen_new_window")){i=b.win.open(m+"/fullscreen.htm","mceFullScreenPopup","fullscreen=yes,menubar=no,toolbar=no,scrollbars=no,resizable=yes,left=0,top=0,width="+screen.availWidth+",height="+screen.availHeight);try{i.resizeTo(screen.availWidth,
screen.availHeight)}catch(o){}}else{tinyMCE.oldSettings=tinyMCE.settings;a.fullscreen_overflow=b.getStyle(b.doc.body,"overflow",1)||"auto";a.fullscreen_html_overflow=b.getStyle(h,"overflow",1);f=b.getViewPort();a.fullscreen_scrollx=f.x;a.fullscreen_scrolly=f.y;if(tinymce.isOpera&&a.fullscreen_overflow=="visible")a.fullscreen_overflow="auto";if(tinymce.isIE&&a.fullscreen_overflow=="scroll")a.fullscreen_overflow="auto";if(tinymce.isIE&&(a.fullscreen_html_overflow=="visible"||a.fullscreen_html_overflow==
"scroll"))a.fullscreen_html_overflow="auto";if(a.fullscreen_overflow=="0px")a.fullscreen_overflow="";b.setStyle(b.doc.body,"overflow","hidden");h.style.overflow="hidden";f=b.getViewPort();b.win.scrollTo(0,0);if(tinymce.isIE)f.h-=1;l=tinymce.isIE6?"absolute;top:"+f.y:"fixed;top:0";n=b.add(b.doc.body,"div",{id:"mce_fullscreen_container",style:"position:"+l+";left:0;width:"+f.w+"px;height:"+f.h+"px;z-index:200000;"});b.add(n,"div",{id:"mce_fullscreen"});tinymce.each(c.settings,function(g,e){a[e]=g});
a.id="mce_fullscreen";a.width=n.clientWidth;a.height=n.clientHeight-15;a.fullscreen_is_enabled=true;a.fullscreen_editor_id=c.id;a.theme_advanced_resizing=false;a.save_onsavecallback=function(){c.setContent(tinyMCE.get(a.id).getContent({format:"raw"}),{format:"raw"});c.execCommand("mceSave")};tinymce.each(c.getParam("fullscreen_settings"),function(g,e){a[e]=g});if(a.theme_advanced_toolbar_location==="external")a.theme_advanced_toolbar_location="top";d.fullscreenEditor=new tinymce.Editor("mce_fullscreen",
a);d.fullscreenEditor.onInit.add(function(){d.fullscreenEditor.setContent(c.getContent());d.fullscreenEditor.focus()});d.fullscreenEditor.render();d.fullscreenElement=new tinymce.dom.Element("mce_fullscreen_container");d.fullscreenElement.update();d.resizeFunc=tinymce.dom.Event.add(b.win,"resize",function(){var g=tinymce.DOM.getViewPort(),e=d.fullscreenEditor,j,k;j=e.dom.getSize(e.getContainer().firstChild);k=e.dom.getSize(e.getContainer().getElementsByTagName("iframe")[0]);e.theme.resizeTo(g.w-j.w+
k.w,g.h-j.h+k.h)})}});c.addButton("fullscreen",{title:"fullscreen.desc",cmd:"mceFullScreen"});c.onNodeChange.add(function(i,h){h.setActive("fullscreen",i.getParam("fullscreen_is_enabled"))})},getInfo:function(){return{longname:"Fullscreen",author:"Moxiecode Systems AB",authorurl:"http://tinymce.moxiecode.com",infourl:"http://wiki.moxiecode.com/index.php/TinyMCE:Plugins/fullscreen",version:tinymce.majorVersion+"."+tinymce.minorVersion}}});tinymce.PluginManager.add("fullscreen",tinymce.plugins.FullScreenPlugin)})();

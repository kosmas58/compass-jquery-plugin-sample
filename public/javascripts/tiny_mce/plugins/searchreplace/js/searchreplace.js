tinyMCEPopup.requireLangPack();
var SearchReplaceDialog={init:function(){var c=this,a=document.forms[0],b=tinyMCEPopup.getWindowArg("mode");c.switchMode(b);a[b+"_panel_searchstring"].value=tinyMCEPopup.getWindowArg("search_string");a[b+"_panel_searchstring"].focus();mcTabs.onChange.add(function(d){c.switchMode(d.substring(0,d.indexOf("_")))})},switchMode:function(c){var a,b=this.lastMode;if(b!=c){a=document.forms[0];if(b){a[c+"_panel_searchstring"].value=a[b+"_panel_searchstring"].value;a[c+"_panel_backwardsu"].checked=a[b+"_panel_backwardsu"].checked;
a[c+"_panel_backwardsd"].checked=a[b+"_panel_backwardsd"].checked;a[c+"_panel_casesensitivebox"].checked=a[b+"_panel_casesensitivebox"].checked}mcTabs.displayTab(c+"_tab",c+"_panel");document.getElementById("replaceBtn").style.display=c=="replace"?"inline":"none";document.getElementById("replaceAllBtn").style.display=c=="replace"?"inline":"none";this.lastMode=c}},searchNext:function(c){var a=tinyMCEPopup.editor,b=a.selection,d=b.getRng(),g,h=this.lastMode,e,f,i=0,k=a.getWin(),j=0;g=document.forms[0];
e=g[h+"_panel_searchstring"].value;f=g[h+"_panel_backwardsu"].checked;ca=g[h+"_panel_casesensitivebox"].checked;rs=g.replace_panel_replacestring.value;if(tinymce.isIE)d=a.getDoc().selection.createRange();if(e!=""){if(ca)i|=4;switch(c){case "all":a.execCommand("SelectAll");a.selection.collapse(true);if(tinymce.isIE){for(;d.findText(e,f?-1:1,i);){d.scrollIntoView();d.select();a.selection.setContent(rs);j=1;f&&d.moveEnd("character",-rs.length)}tinyMCEPopup.storeSelection()}else for(;k.find(e,ca,f,false,
false,false,false);){a.selection.setContent(rs);j=1}j?tinyMCEPopup.alert(a.getLang("searchreplace_dlg.allreplaced")):tinyMCEPopup.alert(a.getLang("searchreplace_dlg.notfound"));return;case "current":a.selection.isCollapsed()||a.selection.setContent(rs)}b.collapse(f);d=b.getRng();if(tinymce.isIE)d=a.getDoc().selection.createRange();if(e)if(tinymce.isIE){if(d.findText(e,f?-1:1,i)){d.scrollIntoView();d.select()}else tinyMCEPopup.alert(a.getLang("searchreplace_dlg.notfound"));tinyMCEPopup.storeSelection()}else if(k.find(e,
ca,f,false,false,false,false)){d=b.getRng().cloneRange();a.getDoc().execCommand("SelectAll",false,null);b.setRng(d)}else tinyMCEPopup.alert(a.getLang("searchreplace_dlg.notfound"))}}};tinyMCEPopup.onInit.add(SearchReplaceDialog.init,SearchReplaceDialog);

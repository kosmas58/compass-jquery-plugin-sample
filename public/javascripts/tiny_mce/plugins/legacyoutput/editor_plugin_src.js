(function(b){b.onAddEditor.addToTop(function(d,e){e.settings.inline_styles=false});b.create("tinymce.plugins.LegacyOutput",{init:function(d){d.onInit.add(function(){var e=b.explode(d.settings.font_size_style_values),f=d.schema;d.formatter.register({alignleft:{selector:"p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li,table,img",attributes:{align:"left"}},aligncenter:{selector:"p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li,table,img",attributes:{align:"center"}},alignright:{selector:"p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li,table,img",
attributes:{align:"right"}},alignfull:{selector:"p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li,table,img",attributes:{align:"full"}},bold:[{inline:"b",remove:"all"},{inline:"strong",remove:"all"},{inline:"span",styles:{fontWeight:"bold"}}],italic:[{inline:"i",remove:"all"},{inline:"em",remove:"all"},{inline:"span",styles:{fontStyle:"italic"}}],underline:[{inline:"u",remove:"all"},{inline:"span",styles:{textDecoration:"underline"},exact:true}],strikethrough:[{inline:"strike",remove:"all"},{inline:"span",
styles:{textDecoration:"line-through"},exact:true}],fontname:{inline:"font",attributes:{face:"%value"}},fontsize:{inline:"font",attributes:{size:function(a){return b.inArray(e,a.value)+1}}},forecolor:{inline:"font",styles:{color:"%value"}},hilitecolor:{inline:"font",styles:{backgroundColor:"%value"}}});b.each("b,i,u,strike".split(","),function(a){f.addValidElements(a+"[*]")});f.getElementRule("font")||f.addValidElements("font[face|size|color|style]");b.each("p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li,table,img".split(","),
function(a){if(a=f.getElementRule(a))if(!a.attributes.align){a.attributes.align={};a.attributesOrder.push("align")}});d.onNodeChange.add(function(a,h){var c,i,j;if(c=a.dom.getParent(a.selection.getNode(),"font")){i=c.face;j=c.size}if(c=h.get("fontselect"))c.select(function(g){return g==i});if(c=h.get("fontsizeselect"))c.select(function(g){return b.inArray(e,g.fontSize)+1==j})})})},getInfo:function(){return{longname:"LegacyOutput",author:"Moxiecode Systems AB",authorurl:"http://tinymce.moxiecode.com",
infourl:"http://wiki.moxiecode.com/index.php/TinyMCE:Plugins/legacyoutput",version:b.majorVersion+"."+b.minorVersion}}});b.PluginManager.add("legacyoutput",b.plugins.LegacyOutput)})(tinymce);

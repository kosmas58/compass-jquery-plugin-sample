(function(){tinymce.create("tinymce.plugins.PageBreakPlugin",{init:function(b){var e='<img src="'+b.theme.url+'/img/trans.gif" class="mcePageBreak mceItemNoResize" />',f=b.getParam("pagebreak_separator","<!-- pagebreak --\>"),g;g=RegExp(f.replace(/[\?\.\*\[\]\(\)\{\}\+\^\$\:]/g,function(c){return"\\"+c}),"g");b.addCommand("mcePageBreak",function(){b.execCommand("mceInsertContent",0,e)});b.addButton("pagebreak",{title:"pagebreak.desc",cmd:"mcePageBreak"});b.onInit.add(function(){b.theme.onResolveName&&
b.theme.onResolveName.add(function(c,a){if(a.node.nodeName=="IMG"&&b.dom.hasClass(a.node,"mcePageBreak"))a.name="pagebreak"})});b.onClick.add(function(c,a){a=a.target;a.nodeName==="IMG"&&c.dom.hasClass(a,"mcePageBreak")&&c.selection.select(a)});b.onNodeChange.add(function(c,a,d){a.setActive("pagebreak",d.nodeName==="IMG"&&c.dom.hasClass(d,"mcePageBreak"))});b.onBeforeSetContent.add(function(c,a){a.content=a.content.replace(g,e)});b.onPostProcess.add(function(c,a){if(a.get)a.content=a.content.replace(/<img[^>]+>/g,
function(d){if(d.indexOf('class="mcePageBreak')!==-1)d=f;return d})})},getInfo:function(){return{longname:"PageBreak",author:"Moxiecode Systems AB",authorurl:"http://tinymce.moxiecode.com",infourl:"http://wiki.moxiecode.com/index.php/TinyMCE:Plugins/pagebreak",version:tinymce.majorVersion+"."+tinymce.minorVersion}}});tinymce.PluginManager.add("pagebreak",tinymce.plugins.PageBreakPlugin)})();

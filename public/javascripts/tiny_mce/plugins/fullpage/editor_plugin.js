(function(){tinymce.create("tinymce.plugins.FullPagePlugin",{init:function(b,d){var a=this;a.editor=b;b.addCommand("mceFullPageProperties",function(){b.windowManager.open({file:d+"/fullpage.htm",width:430+parseInt(b.getLang("fullpage.delta_width",0)),height:495+parseInt(b.getLang("fullpage.delta_height",0)),inline:1},{plugin_url:d,head_html:a.head})});b.addButton("fullpage",{title:"fullpage.desc",cmd:"mceFullPageProperties"});b.onBeforeSetContent.add(a._setContent,a);b.onSetContent.add(a._setBodyAttribs,
a);b.onGetContent.add(a._getContent,a)},getInfo:function(){return{longname:"Fullpage",author:"Moxiecode Systems AB",authorurl:"http://tinymce.moxiecode.com",infourl:"http://wiki.moxiecode.com/index.php/TinyMCE:Plugins/fullpage",version:tinymce.majorVersion+"."+tinymce.minorVersion}},_setBodyAttribs:function(b){var d,a,e,c,g,h;d=this.head.match(/body(.*?)>/i);var i="",f;f=this.head.match(/<html([^>]*?)>/i);if(d&&d[1])if(d=d[1].match(/\s*(\w+\s*=\s*".*?"|\w+\s*=\s*'.*?'|\w+\s*=\s*\w+|\w+)\s*/g)){a=
0;for(e=d.length;a<e;a++){c=d[a].split("=");g=c[0].replace(/\s/,"");if(c=c[1]){c=c.replace(/^\s+/,"").replace(/\s+$/,"");if(h=c.match(/^["'](.*)["']$/))c=h[1];if(g=="dir")i=c}else c=g;b.dom.setAttrib(b.getBody(),"style",c)}}if(i==""&&f&&f[1])if((f=f[1].match(/dir\s*=\s*["']([^"']*)["']/i))&&f[1])i=f[1];bd=b.getBody();bd.setAttribute("dir",i)},_createSerializer:function(){return new tinymce.dom.Serializer({dom:this.editor.dom,indent:true,apply_source_formatting:true,indent_before:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,ul,li,area,title,meta,head",
indent_after:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,ul,li,area,title,meta,head"})},_setContent:function(b,d){var a,e,c=d.content;e="";if(!(d.format=="raw"&&this.head))if(!(d.source_view&&b.getParam("fullpage_hide_in_source_view"))){c=c.replace(/<(\/?)BODY/gi,"<$1body");a=c.indexOf("<body");if(a!=-1){a=c.indexOf(">",a);this.head=c.substring(0,a+1);e=c.indexOf("</body",a);if(e==-1)e=c.length;d.content=c.substring(a+1,e);this.foot=c.substring(e);a=function(g){return g.replace(/<\/?[A-Z]+/g,
function(h){return h.toLowerCase()})};this.head=a(this.head);this.foot=a(this.foot)}else{this.head="";if(b.getParam("fullpage_default_xml_pi"))this.head+='<?xml version="1.0" encoding="'+b.getParam("fullpage_default_encoding","ISO-8859-1")+'" ?>\n';this.head+=b.getParam("fullpage_default_doctype",'<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">');this.head+="\n<html>\n<head>\n<title>"+b.getParam("fullpage_default_title","Untitled document")+
"</title>\n";if(a=b.getParam("fullpage_default_encoding"))this.head+='<meta http-equiv="Content-Type" content="'+a+'" />\n';if(a=b.getParam("fullpage_default_font_family"))e+="font-family: "+a+";";if(a=b.getParam("fullpage_default_font_size"))e+="font-size: "+a+";";if(a=b.getParam("fullpage_default_text_color"))e+="color: "+a+";";this.head+="</head>\n<body"+(e?' style="'+e+'"':"")+">\n";this.foot="\n</body>\n</html>"}}},_getContent:function(b,d){if(!d.source_view||!b.getParam("fullpage_hide_in_source_view"))d.content=
tinymce.trim(this.head)+"\n"+tinymce.trim(d.content)+"\n"+tinymce.trim(this.foot)}});tinymce.PluginManager.add("fullpage",tinymce.plugins.FullPagePlugin)})();

jQuery&&function(){$.extend($.fn,{contextMenu:function(a,e){if(a.menu==void 0)return!1;if(a.inSpeed==void 0)a.inSpeed=150;if(a.outSpeed==void 0)a.outSpeed=75;if(a.inSpeed==0)a.inSpeed=-1;if(a.outSpeed==0)a.outSpeed=-1;$(this).each(function(){var d=$(this),i=$(d).offset();$("#"+a.menu).addClass("contextMenu");$(this).mousedown(function(j){j.stopPropagation();$(this).mouseup(function(f){f.stopPropagation();var k=$(this);$(this).unbind("mouseup");if(j.button==2){$(".contextMenu").hide();var b=$("#"+
a.menu);if($(d).hasClass("disabled"))return!1;var c={},g,h;if(self.innerHeight)c.pageYOffset=self.pageYOffset,c.pageXOffset=self.pageXOffset,c.innerHeight=self.innerHeight,c.innerWidth=self.innerWidth;else if(document.documentElement&&document.documentElement.clientHeight)c.pageYOffset=document.documentElement.scrollTop,c.pageXOffset=document.documentElement.scrollLeft,c.innerHeight=document.documentElement.clientHeight,c.innerWidth=document.documentElement.clientWidth;else if(document.body)c.pageYOffset=
document.body.scrollTop,c.pageXOffset=document.body.scrollLeft,c.innerHeight=document.body.clientHeight,c.innerWidth=document.body.clientWidth;f.pageX?g=f.pageX:g=f.clientX+c.scrollLeft;f.pageY?h=f.pageY:h=f.clientY+c.scrollTop;$(document).unbind("click");$(b).css({top:h,left:g}).fadeIn(a.inSpeed);$(b).find("A").mouseover(function(){$(b).find("LI.hover").removeClass("hover");$(this).parent().addClass("hover")}).mouseout(function(){$(b).find("LI.hover").removeClass("hover")});$(document).keypress(function(a){switch(a.keyCode){case 38:$(b).find("LI.hover").size()==
0?$(b).find("LI:last").addClass("hover"):($(b).find("LI.hover").removeClass("hover").prevAll("LI:not(.disabled)").eq(0).addClass("hover"),$(b).find("LI.hover").size()==0&&$(b).find("LI:last").addClass("hover"));break;case 40:$(b).find("LI.hover").size()==0?$(b).find("LI:first").addClass("hover"):($(b).find("LI.hover").removeClass("hover").nextAll("LI:not(.disabled)").eq(0).addClass("hover"),$(b).find("LI.hover").size()==0&&$(b).find("LI:first").addClass("hover"));break;case 13:$(b).find("LI.hover A").trigger("click");
break;case 27:$(document).trigger("click")}});$("#"+a.menu).find("A").unbind("click");$("#"+a.menu).find("LI:not(.disabled) A").click(function(){$(document).unbind("click").unbind("keypress");$(".contextMenu").hide();e&&e($(this).attr("href").substr(1),$(k),{x:g-i.left,y:h-i.top,docX:g,docY:h});return!1});setTimeout(function(){$(document).click(function(){$(document).unbind("click").unbind("keypress");$(b).fadeOut(a.outSpeed);return!1})},0)}})});$.browser.mozilla?$("#"+a.menu).each(function(){$(this).css({MozUserSelect:"none"})}):
$.browser.msie?$("#"+a.menu).each(function(){$(this).bind("selectstart.disableTextSelect",function(){return!1})}):$("#"+a.menu).each(function(){$(this).bind("mousedown.disableTextSelect",function(){return!1})});$(d).add($("UL.contextMenu")).bind("contextmenu",function(){return!1})});return $(this)},disableContextMenuItems:function(a){if(a==void 0)return $(this).find("LI").addClass("disabled"),$(this);$(this).each(function(){if(a!=void 0)for(var e=a.split(","),d=0;d<e.length;d++)$(this).find('A[href="'+
e[d]+'"]').parent().addClass("disabled")});return $(this)},enableContextMenuItems:function(a){if(a==void 0)return $(this).find("LI.disabled").removeClass("disabled"),$(this);$(this).each(function(){if(a!=void 0)for(var e=a.split(","),d=0;d<e.length;d++)$(this).find('A[href="'+e[d]+'"]').parent().removeClass("disabled")});return $(this)},disableContextMenu:function(){$(this).each(function(){$(this).addClass("disabled")});return $(this)},enableContextMenu:function(){$(this).each(function(){$(this).removeClass("disabled")});
return $(this)},destroyContextMenu:function(){$(this).each(function(){$(this).unbind("mousedown").unbind("mouseup")});return $(this)}})}(jQuery);

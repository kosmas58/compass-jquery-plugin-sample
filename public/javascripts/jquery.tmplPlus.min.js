(function(b){var j=b.tmpl.complete,h=b.fn.domManip;b.tmpl.complete=function(c){var a;j(c);for(a in c)a=c[a],a.addedTmplItems&&-1===b.inArray(a,a.addedTmplItems)&&a.addedTmplItems.push(a);for(a in c)a=c[a],a.rendered&&a.rendered(a)};b.extend({tmplCmd:function(c,a,d){function e(a,b){for(var c=[],d,f,g=b.length,e,h=0,j=a.length;h<j;){e=a[h++];for(f=0;f<g;)d=b[f++],d.data===e&&c.push(d)}return c}var f=[],g,a=b.isArray(a)?a:[a];switch(c){case "find":return e(a,d);case "replace":a.reverse()}b.each(d?e(a,
d):a,function(a,e){coll=e.nodes;switch(c){case "update":e.update();break;case "remove":b(coll).remove();d&&d.splice(b.inArray(e,d),1);break;case "replace":g=g?b(coll).insertBefore(g)[0]:b(coll).appendTo(coll[0].parentNode)[0],f.unshift(e)}});return f}});b.fn.extend({domManip:function(c,a,d,e){var f=c[1],g=c[0],i;return 2<=c.length&&"object"===typeof f&&!f.nodeType&&!(f instanceof b)?(i=b.makeArray(arguments),i[0]=[b.tmpl(b.template(g),f,c[2],c[3])],i[2]=function(a){b.tmpl.afterManip(this,a,d)},h.apply(this,
i)):h.apply(this,arguments)}})})(jQuery);

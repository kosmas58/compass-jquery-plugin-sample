(function(e){function j(a){function c(f){var h=RegExp(e.map(f,encodeURIComponent).join("|"),"ig");return function(k){return k.replace(h,decodeURIComponent)}}a=e.extend({unescape:false},a||{});d.encoder=function(f){if(f===true)return function(h){return h};if(typeof f=="string"&&(f=c(f.split("")))||typeof f=="function")return function(h){return f(encodeURIComponent(h))};return encodeURIComponent}(a.unescape)}var d={put:function(a,c){(c||window).location.hash=this.encoder(a)},get:function(a){a=(a||window).location.hash.replace(/^#/,
"");try{return e.browser.mozilla?a:decodeURIComponent(a)}catch(c){return a}},encoder:encodeURIComponent},i={id:"__jQuery_history",init:function(){var a='<iframe id="'+this.id+'" style="display:none" src="javascript:false;" />';e("body").prepend(a);return this},_document:function(){return e("#"+this.id)[0].contentWindow.document},put:function(a){var c=this._document();c.open();c.close();d.put(a,c)},get:function(){return d.get(this._document())}},g={};g.base={callback:undefined,type:undefined,check:function(){},
load:function(){},init:function(a,c){j(c);b.callback=a;b._options=c;b._init()},_init:function(){},_options:{}};g.timer={_appState:undefined,_init:function(){var a=d.get();b._appState=a;b.callback(a);setInterval(b.check,100)},check:function(){var a=d.get();if(a!=b._appState){b._appState=a;b.callback(a)}},load:function(a){if(a!=b._appState){d.put(a);b._appState=a;b.callback(a)}}};g.iframeTimer={_appState:undefined,_init:function(){var a=d.get();b._appState=a;i.init().put(a);b.callback(a);setInterval(b.check,
100)},check:function(){var a=i.get(),c=d.get();if(c!=a)if(c==b._appState){b._appState=a;d.put(a);b.callback(a)}else{b._appState=c;i.put(c);b.callback(c)}},load:function(a){if(a!=b._appState){d.put(a);i.put(a);b._appState=a;b.callback(a)}}};g.hashchangeEvent={_init:function(){b.callback(d.get());e(window).bind("hashchange",b.check)},check:function(){b.callback(d.get())},load:function(a){d.put(a)}};var b=e.extend({},g.base);b.type=e.browser.msie&&(e.browser.version<8||document.documentMode<8)?"iframeTimer":
"onhashchange"in window?"hashchangeEvent":"timer";e.extend(b,g[b.type]);e.history=b})(jQuery);

(function(){if(!(jQuery&&jQuery.jstree)){var r=false,t=false,u=false;(function(c){c.vakata={};c.vakata.css={get_css:function(b,g,h){b=b.toLowerCase();var j=h.cssRules||h.rules,l=0;do{if(j.length&&l>j.length+5)break;if(j[l].selectorText&&j[l].selectorText.toLowerCase()==b)if(g===true){h.removeRule&&h.removeRule(l);h.deleteRule&&h.deleteRule(l);return true}else return j[l]}while(j[++l]);return false},add_css:function(b,g){if(c.jstree.css.get_css(b,false,g))return false;g.insertRule?g.insertRule(b+" { }",
0):g.addRule(b,null,0);return c.vakata.css.get_css(b)},remove_css:function(b,g){return c.vakata.css.get_css(b,true,g)},add_sheet:function(b){var g=false,h=true;if(b.str){if(b.title)g=c("style[id='"+b.title+"-stylesheet']")[0];if(g)h=false;else{g=document.createElement("style");g.setAttribute("type","text/css");b.title&&g.setAttribute("id",b.title+"-stylesheet")}if(g.styleSheet)if(h){document.getElementsByTagName("head")[0].appendChild(g);g.styleSheet.cssText=b.str}else g.styleSheet.cssText=g.styleSheet.cssText+
" "+b.str;else{g.appendChild(document.createTextNode(b.str));document.getElementsByTagName("head")[0].appendChild(g)}return g.sheet||g.styleSheet}if(b.url)if(document.createStyleSheet)try{document.createStyleSheet(b.url)}catch(j){}else{g=document.createElement("link");g.rel="stylesheet";g.type="text/css";g.media="all";g.href=b.url;document.getElementsByTagName("head")[0].appendChild(g);return g.styleSheet}}};var a=[],d=-1,f={},e={};c.fn.jstree=function(b){var g=typeof b=="string",h=Array.prototype.slice.call(arguments,
1),j=this;if(g){if(b.substring(0,1)=="_")return j;this.each(function(){var l=a[c.data(this,"jstree-instance-id")];l=l&&c.isFunction(l[b])?l[b].apply(l,h):l;if(typeof l!=="undefined"&&(b.indexOf("is_"===0)||l!==true&&l!==false)){j=l;return false}})}else this.each(function(){var l=c.data(this,"jstree-instance-id"),i=[],k=b?c.extend({},true,b):{},m=c(this),o=false,n=[];i=i.concat(h);m.data("jstree")&&i.push(m.data("jstree"));k=i.length?c.extend.apply(null,[true,k].concat(i)):k;typeof l!=="undefined"&&
a[l]&&a[l].destroy();l=parseInt(a.push({}),10)-1;c.data(this,"jstree-instance-id",l);k.plugins=c.isArray(k.plugins)?k.plugins:c.jstree.defaults.plugins.slice();k.plugins.unshift("core");k.plugins=k.plugins.sort().join(",,").replace(/(,|^)([^,]+)(,,\2)+(,|$)/g,"$1$2$4").replace(/,,+/g,",").replace(/,$/,"").split(",");o=c.extend(true,{},c.jstree.defaults,k);o.plugins=k.plugins;c.each(f,function(p){if(c.inArray(p,o.plugins)===-1){o[p]=null;delete o[p]}else n.push(p)});o.plugins=n;a[l]=new c.jstree._instance(l,
c(this).addClass("jstree jstree-"+l),o);c.each(a[l]._get_settings().plugins,function(p,q){a[l].data[q]={}});c.each(a[l]._get_settings().plugins,function(p,q){f[q]&&f[q].__init.apply(a[l])});setTimeout(function(){a[l].init()},0)});return j};c.jstree={defaults:{plugins:[]},_focused:function(){return a[d]||null},_reference:function(b){if(a[b])return a[b];var g=c(b);if(!g.length&&typeof b==="string")g=c("#"+b);if(!g.length)return null;return a[g.closest(".jstree").data("jstree-instance-id")]||null},_instance:function(b,
g,h){this.data={core:{}};this.get_settings=function(){return c.extend(true,{},h)};this._get_settings=function(){return h};this.get_index=function(){return b};this.get_container=function(){return g};this.get_container_ul=function(){return g.children("ul:eq(0)")};this._set_settings=function(j){h=c.extend(true,{},h,j)}},_fn:{},plugin:function(b,g){g=c.extend({},{__init:c.noop,__destroy:c.noop,_fn:{},defaults:false},g);f[b]=g;c.jstree.defaults[b]=g.defaults;c.each(g._fn,function(h,j){j.plugin=b;j.old=
c.jstree._fn[h];c.jstree._fn[h]=function(){var l,i=j,k=Array.prototype.slice.call(arguments);l=new c.Event("before.jstree");var m=false;if(!(this.data.core.locked===true&&h!=="unlock"&&h!=="is_locked")){do{if(i&&i.plugin&&c.inArray(i.plugin,this._get_settings().plugins)!==-1)break;i=i.old}while(i);if(i){if(h.indexOf("_")===0)l=i.apply(this,k);else{l=this.get_container().triggerHandler(l,{func:h,inst:this,args:k,plugin:i.plugin});if(l===false)return;if(typeof l!=="undefined")k=l;l=i.apply(c.extend({},
this,{__callback:function(o){this.get_container().triggerHandler(h+".jstree",{inst:this,args:k,rslt:o,rlbk:m})},__rollback:function(){return m=this.get_rollback()},__call_old:function(o){return i.old.apply(this,o?Array.prototype.slice.call(arguments,1):k)}}),k)}return l}}};c.jstree._fn[h].old=j.old;c.jstree._fn[h].plugin=b})},rollback:function(b){if(b){c.isArray(b)||(b=[b]);c.each(b,function(g,h){a[h.i].set_rollback(h.h,h.d)})}}};c.jstree._fn=c.jstree._instance.prototype={};c(function(){var b=navigator.userAgent.toLowerCase(),
g=(b.match(/.+?(?:rv|it|ra|ie)[\/: ]([\d.]+)/)||[0,"0"])[1],h=".jstree ul, .jstree li { display:block; margin:0 0 0 0; padding:0 0 0 0; list-style-type:none; } .jstree li { display:block; min-height:18px; line-height:18px; white-space:nowrap; margin-left:18px; min-width:18px; } .jstree-rtl li { margin-left:0; margin-right:18px; } .jstree > ul > li { margin-left:0px; } .jstree-rtl > ul > li { margin-right:0px; } .jstree ins { display:inline-block; text-decoration:none; width:18px; height:18px; margin:0 0 0 0; padding:0; } .jstree a { display:inline-block; line-height:16px; height:16px; color:black; white-space:nowrap; text-decoration:none; padding:1px 2px; margin:0; } .jstree a:focus { outline: none; } .jstree a > ins { height:16px; width:16px; } .jstree a > .jstree-icon { margin-right:3px; } .jstree-rtl a > .jstree-icon { margin-left:3px; margin-right:0; } li.jstree-open > ul { display:block; } li.jstree-closed > ul { display:none; } ";
if(/msie/.test(b)&&parseInt(g,10)==6){r=true;try{document.execCommand("BackgroundImageCache",false,true)}catch(j){}h+=".jstree li { height:18px; margin-left:0; margin-right:0; } .jstree li li { margin-left:18px; } .jstree-rtl li li { margin-left:0px; margin-right:18px; } li.jstree-open ul { display:block; } li.jstree-closed ul { display:none !important; } .jstree li a { display:inline; border-width:0 !important; padding:0px 2px !important; } .jstree li a ins { height:16px; width:16px; margin-right:3px; } .jstree-rtl li a ins { margin-right:0px; margin-left:3px; } "}if(/msie/.test(b)&&
parseInt(g,10)==7){t=true;h+=".jstree li a { border-width:0 !important; padding:0px 2px !important; } "}if(!/compatible/.test(b)&&/mozilla/.test(b)&&parseFloat(g,10)<1.9){u=true;h+=".jstree ins { display:-moz-inline-box; } .jstree li { line-height:12px; } .jstree a { display:-moz-inline-box; } .jstree .jstree-no-icons .jstree-checkbox { display:-moz-inline-stack !important; } "}c.vakata.css.add_sheet({str:h,title:"jstree"})});c.jstree.plugin("core",{__init:function(){this.data.core.locked=false;this.data.core.to_open=
this.get_settings().core.initially_open;this.data.core.to_load=this.get_settings().core.initially_load},defaults:{html_titles:false,animation:500,initially_open:[],initially_load:[],open_parents:true,notify_plugins:true,rtl:false,load_open:false,strings:{loading:"Loading ...",new_node:"New node",multiple_selection:"Multiple selection"}},_fn:{init:function(){this.set_focus();this._get_settings().core.rtl&&this.get_container().addClass("jstree-rtl").css("direction","rtl");this.get_container().html("<ul><li class='jstree-last jstree-leaf'><ins>&#160;</ins><a class='jstree-loading' href='#'><ins class='jstree-icon'>&#160;</ins>"+
this._get_string("loading")+"</a></li></ul>");this.data.core.li_height=this.get_container_ul().find("li.jstree-closed, li.jstree-leaf").eq(0).height()||18;this.get_container().delegate("li > ins","click.jstree",c.proxy(function(b){var g=c(b.target);g.is("ins")&&b.pageY-g.offset().top<this.data.core.li_height&&this.toggle_node(g)},this)).bind("mousedown.jstree",c.proxy(function(){this.set_focus()},this)).bind("dblclick.jstree",function(){var b;if(document.selection&&document.selection.empty)document.selection.empty();
else if(window.getSelection){b=window.getSelection();try{b.removeAllRanges();b.collapse()}catch(g){}}});this._get_settings().core.notify_plugins&&this.get_container().bind("load_node.jstree",c.proxy(function(b,g){var h=this._get_node(g.rslt.obj),j=this;if(h===-1)h=this.get_container_ul();h.length&&h.find("li").each(function(){var l=c(this);l.data("jstree")&&c.each(l.data("jstree"),function(i,k){j.data[i]&&c.isFunction(j["_"+i+"_notify"])&&j["_"+i+"_notify"].call(j,l,k)})})},this));this._get_settings().core.load_open&&
this.get_container().bind("load_node.jstree",c.proxy(function(b,g){var h=this._get_node(g.rslt.obj),j=this;if(h===-1)h=this.get_container_ul();h.length&&h.find("li.jstree-open:not(:has(ul))").each(function(){j.load_node(this,c.noop,c.noop)})},this));this.__callback();this.load_node(-1,function(){this.loaded();this.reload_nodes()})},destroy:function(){var b,g=this.get_index(),h=this._get_settings(),j=this;c.each(h.plugins,function(l,i){try{f[i].__destroy.apply(j)}catch(k){}});this.__callback();if(this.is_focused())for(b in a)if(a.hasOwnProperty(b)&&
b!=g){a[b].set_focus();break}if(g===d)d=-1;this.get_container().unbind(".jstree").undelegate(".jstree").removeData("jstree-instance-id").find("[class^='jstree']").andSelf().attr("class",function(){return this.className.replace(/jstree[^ ]*|$/ig,"")});c(document).unbind(".jstree-"+g).undelegate(".jstree-"+g);a[g]=null;delete a[g]},_core_notify:function(b,g){g.opened&&this.open_node(b,false,true)},lock:function(){this.data.core.locked=true;this.get_container().children("ul").addClass("jstree-locked").css("opacity",
"0.7");this.__callback({})},unlock:function(){this.data.core.locked=false;this.get_container().children("ul").removeClass("jstree-locked").css("opacity","1");this.__callback({})},is_locked:function(){return this.data.core.locked},save_opened:function(){var b=this;this.data.core.to_open=[];this.get_container_ul().find("li.jstree-open").each(function(){this.id&&b.data.core.to_open.push("#"+this.id.toString().replace(/^#/,"").replace(/\\\//g,"/").replace(/\//g,"\\/").replace(/\\\./g,".").replace(/\./g,
"\\."))});this.__callback(b.data.core.to_open)},save_loaded:function(){},reload_nodes:function(b){var g=this,h=true,j=[],l=[];if(!b){this.data.core.reopen=false;this.data.core.refreshing=true;this.data.core.to_open=c.map(c.makeArray(this.data.core.to_open),function(i){return"#"+i.toString().replace(/^#/,"").replace(/\\\//g,"/").replace(/\//g,"\\/").replace(/\\\./g,".").replace(/\./g,"\\.")});this.data.core.to_load=c.map(c.makeArray(this.data.core.to_load),function(i){return"#"+i.toString().replace(/^#/,
"").replace(/\\\//g,"/").replace(/\//g,"\\/").replace(/\\\./g,".").replace(/\./g,"\\.")});if(this.data.core.to_open.length)this.data.core.to_load=this.data.core.to_load.concat(this.data.core.to_open)}if(this.data.core.to_load.length){c.each(this.data.core.to_load,function(i,k){if(k=="#")return true;c(k).length?j.push(k):l.push(k)});if(j.length){this.data.core.to_load=l;c.each(j,function(i,k){if(!g._is_loaded(k)){g.load_node(k,function(){g.reload_nodes(true)},function(){g.reload_nodes(true)});h=false}})}}this.data.core.to_open.length&&
c.each(this.data.core.to_open,function(i,k){g.open_node(k,false,true)});if(h){this.data.core.reopen&&clearTimeout(this.data.core.reopen);this.data.core.reopen=setTimeout(function(){g.__callback({},g)},50);this.data.core.refreshing=false;this.reopen()}},reopen:function(){var b=this;this.data.core.to_open.length&&c.each(this.data.core.to_open,function(g,h){b.open_node(h,false,true)});this.__callback({})},refresh:function(b){var g=this;this.save_opened();b||(b=-1);(b=this._get_node(b))||(b=-1);b!==-1&&
b.children("UL").remove();this.load_node(b,function(){g.__callback({obj:b});g.reload_nodes()})},loaded:function(){this.__callback()},set_focus:function(){if(!this.is_focused()){var b=c.jstree._focused();b&&b.unset_focus();this.get_container().addClass("jstree-focused");d=this.get_index();this.__callback()}},is_focused:function(){return d==this.get_index()},unset_focus:function(){if(this.is_focused()){this.get_container().removeClass("jstree-focused");d=-1}this.__callback()},_get_node:function(b){var g=
c(b,this.get_container());if(g.is(".jstree")||b==-1)return-1;g=g.closest("li",this.get_container());return g.length?g:false},_get_next:function(b,g){b=this._get_node(b);if(b===-1)return this.get_container().find("> ul > li:first-child");if(!b.length)return false;if(g)return b.nextAll("li").size()>0?b.nextAll("li:eq(0)"):false;return b.hasClass("jstree-open")?b.find("li:eq(0)"):b.nextAll("li").size()>0?b.nextAll("li:eq(0)"):b.parentsUntil(".jstree","li").next("li").eq(0)},_get_prev:function(b,g){b=
this._get_node(b);if(b===-1)return this.get_container().find("> ul > li:last-child");if(!b.length)return false;if(g)return b.prevAll("li").length>0?b.prevAll("li:eq(0)"):false;if(b.prev("li").length){for(b=b.prev("li").eq(0);b.hasClass("jstree-open");)b=b.children("ul:eq(0)").children("li:last");return b}else{var h=b.parentsUntil(".jstree","li:eq(0)");return h.length?h:false}},_get_parent:function(b){b=this._get_node(b);if(b==-1||!b.length)return false;b=b.parentsUntil(".jstree","li:eq(0)");return b.length?
b:-1},_get_children:function(b){b=this._get_node(b);if(b===-1)return this.get_container().children("ul:eq(0)").children("li");if(!b.length)return false;return b.children("ul:eq(0)").children("li")},get_path:function(b,g){var h=[],j=this;b=this._get_node(b);if(b===-1||!b||!b.length)return false;b.parentsUntil(".jstree","li").each(function(){h.push(g?this.id:j.get_text(this))});h.reverse();h.push(g?b.attr("id"):this.get_text(b));return h},_get_string:function(b){return this._get_settings().core.strings[b]||
b},is_open:function(b){return(b=this._get_node(b))&&b!==-1&&b.hasClass("jstree-open")},is_closed:function(b){return(b=this._get_node(b))&&b!==-1&&b.hasClass("jstree-closed")},is_leaf:function(b){return(b=this._get_node(b))&&b!==-1&&b.hasClass("jstree-leaf")},correct_state:function(b){b=this._get_node(b);if(!b||b===-1)return false;b.removeClass("jstree-closed jstree-open").addClass("jstree-leaf").children("ul").remove();this.__callback({obj:b})},open_node:function(b,g,h){b=this._get_node(b);if(!b.length)return false;
if(!b.hasClass("jstree-closed")){g&&g.call();return false}var j=h||r?0:this._get_settings().core.animation,l=this;if(this._is_loaded(b)){this._get_settings().core.open_parents&&b.parentsUntil(".jstree",".jstree-closed").each(function(){l.open_node(this,false,true)});j&&b.children("ul").css("display","none");b.removeClass("jstree-closed").addClass("jstree-open").children("a").removeClass("jstree-loading");j?b.children("ul").stop(true,true).slideDown(j,function(){this.style.display="";l.after_open(b)}):
l.after_open(b);this.__callback({obj:b});g&&g.call()}else{b.children("a").addClass("jstree-loading");this.load_node(b,function(){l.open_node(b,g,h)},g)}},after_open:function(b){this.__callback({obj:b})},close_node:function(b,g){b=this._get_node(b);var h=g||r?0:this._get_settings().core.animation,j=this;if(!b.length||!b.hasClass("jstree-open"))return false;h&&b.children("ul").attr("style","display:block !important");b.removeClass("jstree-open").addClass("jstree-closed");h?b.children("ul").stop(true,
true).slideUp(h,function(){this.style.display="";j.after_close(b)}):j.after_close(b);this.__callback({obj:b})},after_close:function(b){this.__callback({obj:b})},toggle_node:function(b){b=this._get_node(b);if(b.hasClass("jstree-closed"))return this.open_node(b);if(b.hasClass("jstree-open"))return this.close_node(b)},open_all:function(b,g,h){b=b?this._get_node(b):-1;if(!b||b===-1)b=this.get_container_ul();if(h)b=b.find("li.jstree-closed");else{h=b;b=b.is(".jstree-closed")?b.find("li.jstree-closed").andSelf():
b.find("li.jstree-closed")}var j=this;b.each(function(){var l=this;j._is_loaded(this)?j.open_node(this,false,!g):j.open_node(this,function(){j.open_all(l,g,h)},!g)});h.find("li.jstree-closed").length===0&&this.__callback({obj:h})},close_all:function(b,g){var h=this;b=b?this._get_node(b):this.get_container();if(!b||b===-1)b=this.get_container_ul();b.find("li.jstree-open").andSelf().each(function(){h.close_node(this,!g)});this.__callback({obj:b})},clean_node:function(b){b=b&&b!=-1?c(b):this.get_container_ul();
b=b.is("li")?b.find("li").andSelf():b.find("li");b.removeClass("jstree-last").filter("li:last-child").addClass("jstree-last").end().filter(":has(li)").not(".jstree-open").removeClass("jstree-leaf").addClass("jstree-closed");b.not(".jstree-open, .jstree-closed").addClass("jstree-leaf").children("ul").remove();this.__callback({obj:b})},get_rollback:function(){this.__callback();return{i:this.get_index(),h:this.get_container().children("ul").clone(true),d:this.data}},set_rollback:function(b,g){this.get_container().empty().append(b);
this.data=g;this.__callback()},load_node:function(b){this.__callback({obj:b})},_is_loaded:function(){return true},create_node:function(b,g,h,j,l){b=this._get_node(b);g=typeof g==="undefined"?"last":g;var i=c("<li />"),k=this._get_settings().core,m;if(b!==-1&&!b.length)return false;if(!l&&!this._is_loaded(b)){this.load_node(b,function(){this.create_node(b,g,h,j,true)});return false}this.__rollback();if(typeof h==="string")h={data:h};h||(h={});h.attr&&i.attr(h.attr);h.metadata&&i.data(h.metadata);h.state&&
i.addClass("jstree-"+h.state);if(!h.data)h.data=this._get_string("new_node");if(!c.isArray(h.data)){m=h.data;h.data=[];h.data.push(m)}c.each(h.data,function(o,n){m=c("<a />");if(c.isFunction(n))n=n.call(this,h);if(typeof n=="string")m.attr("href","#")[k.html_titles?"html":"text"](n);else{if(!n.attr)n.attr={};if(!n.attr.href)n.attr.href="#";m.attr(n.attr)[k.html_titles?"html":"text"](n.title);n.language&&m.addClass(n.language)}m.prepend("<ins class='jstree-icon'>&#160;</ins>");if(n.icon)n.icon.indexOf("/")===
-1?m.children("ins").addClass(n.icon):m.children("ins").css("background","url('"+n.icon+"') center center no-repeat");i.append(m)});i.prepend("<ins class='jstree-icon'>&#160;</ins>");if(b===-1){b=this.get_container();if(g==="before")g="first";if(g==="after")g="last"}switch(g){case "before":b.before(i);m=this._get_parent(b);break;case "after":b.after(i);m=this._get_parent(b);break;case "inside":case "first":b.children("ul").length||b.append("<ul />");b.children("ul").prepend(i);m=b;break;case "last":b.children("ul").length||
b.append("<ul />");b.children("ul").append(i);m=b;break;default:b.children("ul").length||b.append("<ul />");g||(g=0);m=b.children("ul").children("li").eq(g);m.length?m.before(i):b.children("ul").append(i);m=b}if(m===-1||m.get(0)===this.get_container().get(0))m=-1;this.clean_node(m);this.__callback({obj:i,parent:m});j&&j.call(this,i);return i},get_text:function(b){b=this._get_node(b);if(!b.length)return false;var g=this._get_settings().core.html_titles;b=b.children("a:eq(0)");if(g){b=b.clone();b.children("INS").remove();
return b.html()}else{b=b.contents().filter(function(){return this.nodeType==3})[0];return b.nodeValue}},set_text:function(b,g){b=this._get_node(b);if(!b.length)return false;b=b.children("a:eq(0)");if(this._get_settings().core.html_titles){var h=b.children("INS").clone();b.html(g).prepend(h);this.__callback({obj:b,name:g});return true}else{b=b.contents().filter(function(){return this.nodeType==3})[0];this.__callback({obj:b,name:g});return b.nodeValue=g}},rename_node:function(b,g){b=this._get_node(b);
this.__rollback();b&&b.length&&this.set_text.apply(this,Array.prototype.slice.call(arguments))&&this.__callback({obj:b,name:g})},delete_node:function(b){b=this._get_node(b);if(!b.length)return false;this.__rollback();var g=this._get_parent(b),h=c([]),j=this;b.each(function(){h=h.add(j._get_prev(this))});b=b.detach();g!==-1&&g.find("> ul > li").length===0&&g.removeClass("jstree-open jstree-closed").addClass("jstree-leaf");this.clean_node(g);this.__callback({obj:b,prev:h,parent:g});return b},prepare_move:function(b,
g,h,j,l){var i={};i.ot=c.jstree._reference(b)||this;i.o=i.ot._get_node(b);i.r=g===-1?-1:this._get_node(g);i.p=typeof h==="undefined"?"last":h;if(!(!l&&e.o&&e.o[0]===i.o[0]&&e.r[0]===i.r[0]&&e.p===i.p)){i.ot=c.jstree._reference(i.o)||this;i.rt=c.jstree._reference(i.r)||this;if(i.r===-1||!i.r){i.cr=-1;switch(i.p){case "first":case "before":case "inside":i.cp=0;break;case "after":case "last":i.cp=i.rt.get_container().find(" > ul > li").length;break;default:i.cp=i.p}}else{if(!/^(before|after)$/.test(i.p)&&
!this._is_loaded(i.r))return this.load_node(i.r,function(){this.prepare_move(b,g,h,j,true)});switch(i.p){case "before":i.cp=i.r.index();i.cr=i.rt._get_parent(i.r);break;case "after":i.cp=i.r.index()+1;i.cr=i.rt._get_parent(i.r);break;case "inside":case "first":i.cp=0;i.cr=i.r;break;case "last":i.cp=i.r.find(" > ul > li").length;i.cr=i.r;break;default:i.cp=i.p;i.cr=i.r}}i.np=i.cr==-1?i.rt.get_container():i.cr;i.op=i.ot._get_parent(i.o);i.cop=i.o.index();if(i.op===-1)i.op=i.ot?i.ot.get_container():
this.get_container();!/^(before|after)$/.test(i.p)&&i.op&&i.np&&i.op[0]===i.np[0]&&i.o.index()<i.cp&&i.cp++;i.or=i.np.find(" > ul > li:nth-child("+(i.cp+1)+")");e=i}this.__callback(e);j&&j.call(this,e)},check_move:function(){var b=e,g=true,h=b.r===-1?this.get_container():b.r;if(!b||!b.o||b.or[0]===b.o[0])return false;if(b.op&&b.np&&b.op[0]===b.np[0]&&b.cp-1===b.o.index())return false;b.o.each(function(){if(h.parentsUntil(".jstree","li").andSelf().index(this)!==-1)return g=false});return g},move_node:function(b,
g,h,j,l,i){if(!l)return this.prepare_move(b,g,h,function(m){this.move_node(m,false,false,j,true,i)});if(j)e.cy=true;if(!i&&!this.check_move())return false;this.__rollback();g=false;if(j){g=b.o.clone();g.find("*[id]").andSelf().each(function(){if(this.id)this.id="copy_"+this.id})}else g=b.o;if(b.or.length)b.or.before(g);else{b.np.children("ul").length||c("<ul />").appendTo(b.np);b.np.children("ul:eq(0)").append(g)}try{b.ot.clean_node(b.op);b.rt.clean_node(b.np);b.op.find("> ul > li").length||b.op.removeClass("jstree-open jstree-closed").addClass("jstree-leaf").children("ul").remove()}catch(k){}if(j){e.cy=
true;e.oc=g}this.__callback(e);return e},_get_move:function(){return e}}})})(jQuery);(function(c){var a,d,f;c(function(){if(/msie/.test(navigator.userAgent.toLowerCase())){d=c('<textarea cols="10" rows="2"></textarea>').css({position:"absolute",top:-1E3,left:0}).appendTo("body");f=c('<textarea cols="10" rows="2" style="overflow: hidden;"></textarea>').css({position:"absolute",top:-1E3,left:0}).appendTo("body");a=d.width()-f.width();d.add(f).remove()}else{d=c("<div />").css({width:100,height:100,overflow:"auto",
position:"absolute",top:-1E3,left:0}).prependTo("body").append("<div />").find("div").css({width:"100%",height:200});a=100-d.width();d.parent().remove()}});c.jstree.plugin("ui",{__init:function(){this.data.ui.selected=c();this.data.ui.last_selected=false;this.data.ui.hovered=null;this.data.ui.to_select=this.get_settings().ui.initially_select;this.get_container().delegate("a","click.jstree",c.proxy(function(e){e.preventDefault();e.currentTarget.blur();c(e.currentTarget).hasClass("jstree-loading")||
this.select_node(e.currentTarget,true,e)},this)).delegate("a","mouseenter.jstree",c.proxy(function(e){c(e.currentTarget).hasClass("jstree-loading")||this.hover_node(e.target)},this)).delegate("a","mouseleave.jstree",c.proxy(function(e){c(e.currentTarget).hasClass("jstree-loading")||this.dehover_node(e.target)},this)).bind("reopen.jstree",c.proxy(function(){this.reselect()},this)).bind("get_rollback.jstree",c.proxy(function(){this.dehover_node();this.save_selected()},this)).bind("set_rollback.jstree",
c.proxy(function(){this.reselect()},this)).bind("close_node.jstree",c.proxy(function(e,b){var g=this._get_settings().ui,h=this._get_node(b.rslt.obj),j=h&&h.length?h.children("ul").find("a.jstree-clicked"):c(),l=this;g.selected_parent_close===false||!j.length||j.each(function(){l.deselect_node(this);g.selected_parent_close==="select_parent"&&l.select_node(h)})},this)).bind("delete_node.jstree",c.proxy(function(e,b){var g=this._get_settings().ui.select_prev_on_delete,h=this._get_node(b.rslt.obj);h=
h&&h.length?h.find("a.jstree-clicked"):[];var j=this;h.each(function(){j.deselect_node(this)});g&&h.length&&b.rslt.prev.each(function(){if(this.parentNode){j.select_node(this);return false}})},this)).bind("move_node.jstree",c.proxy(function(e,b){b.rslt.cy&&b.rslt.oc.find("a.jstree-clicked").removeClass("jstree-clicked")},this))},defaults:{select_limit:-1,select_multiple_modifier:"ctrl",select_range_modifier:"shift",selected_parent_close:"select_parent",selected_parent_open:true,select_prev_on_delete:true,
disable_selecting_children:false,initially_select:[]},_fn:{_get_node:function(e,b){if(typeof e==="undefined"||e===null)return b?this.data.ui.selected:this.data.ui.last_selected;var g=c(e,this.get_container());if(g.is(".jstree")||e==-1)return-1;g=g.closest("li",this.get_container());return g.length?g:false},_ui_notify:function(e,b){b.selected&&this.select_node(e,false)},save_selected:function(){var e=this;this.data.ui.to_select=[];this.data.ui.selected.each(function(){this.id&&e.data.ui.to_select.push("#"+
this.id.toString().replace(/^#/,"").replace(/\\\//g,"/").replace(/\//g,"\\/").replace(/\\\./g,".").replace(/\./g,"\\."))});this.__callback(this.data.ui.to_select)},reselect:function(){var e=this,b=this.data.ui.to_select;b=c.map(c.makeArray(b),function(g){return"#"+g.toString().replace(/^#/,"").replace(/\\\//g,"/").replace(/\//g,"\\/").replace(/\\\./g,".").replace(/\./g,"\\.")});c.each(b,function(g,h){h&&h!=="#"&&e.select_node(h)});this.data.ui.selected=this.data.ui.selected.filter(function(){return this.parentNode});
this.__callback()},refresh:function(){this.save_selected();return this.__call_old()},hover_node:function(e){e=this._get_node(e);if(!e.length)return false;e.hasClass("jstree-hovered")||this.dehover_node();this.data.ui.hovered=e.children("a").addClass("jstree-hovered").parent();this._fix_scroll(e);this.__callback({obj:e})},dehover_node:function(){var e=this.data.ui.hovered;if(!e||!e.length)return false;if(this.data.ui.hovered[0]===e.children("a").removeClass("jstree-hovered").parent()[0])this.data.ui.hovered=
null;this.__callback({obj:e})},select_node:function(e,b,g){e=this._get_node(e);if(e==-1||!e||!e.length)return false;var h=this._get_settings().ui,j=h.select_multiple_modifier=="on"||h.select_multiple_modifier!==false&&g&&g[h.select_multiple_modifier+"Key"],l=h.select_range_modifier!==false&&g&&g[h.select_range_modifier+"Key"]&&this.data.ui.last_selected&&this.data.ui.last_selected[0]!==e[0]&&this.data.ui.last_selected.parent()[0]===e.parent()[0],i=this.is_selected(e),k=true,m=this;if(b){if(h.disable_selecting_children&&
j&&(e.parentsUntil(".jstree","li").children("a.jstree-clicked").length||e.children("ul").find("a.jstree-clicked:eq(0)").length))return false;k=false;switch(true){case l:this.data.ui.last_selected.addClass("jstree-last-selected");e=e[e.index()<this.data.ui.last_selected.index()?"nextUntil":"prevUntil"](".jstree-last-selected").andSelf();if(h.select_limit==-1||e.length<h.select_limit){this.data.ui.last_selected.removeClass("jstree-last-selected");this.data.ui.selected.each(function(){this!==m.data.ui.last_selected[0]&&
m.deselect_node(this)});i=false;k=true}else k=false;break;case i&&!j:this.deselect_all();i=false;k=true;break;case !i&&!j:if(h.select_limit==-1||h.select_limit>0){this.deselect_all();k=true}break;case i&&j:this.deselect_node(e);break;case !i&&j:if(h.select_limit==-1||this.data.ui.selected.length+1<=h.select_limit)k=true}}if(k&&!i){if(!l)this.data.ui.last_selected=e;e.children("a").addClass("jstree-clicked");h.selected_parent_open&&e.parents(".jstree-closed").each(function(){m.open_node(this,false,
true)});this.data.ui.selected=this.data.ui.selected.add(e);this._fix_scroll(e.eq(0));this.__callback({obj:e,e:g})}},_fix_scroll:function(e){var b=this.get_container()[0];if(b.scrollHeight>b.offsetHeight){e=this._get_node(e);if(!(!e||e===-1||!e.length||!e.is(":visible"))){e=e.offset().top-this.get_container().offset().top;if(e<0)b.scrollTop=b.scrollTop+e-1;if(e+this.data.core.li_height+(b.scrollWidth>b.offsetWidth?a:0)>b.offsetHeight)b.scrollTop+=e-b.offsetHeight+this.data.core.li_height+1+(b.scrollWidth>
b.offsetWidth?a:0)}}},deselect_node:function(e){e=this._get_node(e);if(!e.length)return false;if(this.is_selected(e)){e.children("a").removeClass("jstree-clicked");this.data.ui.selected=this.data.ui.selected.not(e);if(this.data.ui.last_selected.get(0)===e.get(0))this.data.ui.last_selected=this.data.ui.selected.eq(0);this.__callback({obj:e})}},toggle_select:function(e){e=this._get_node(e);if(!e.length)return false;this.is_selected(e)?this.deselect_node(e):this.select_node(e)},is_selected:function(e){return this.data.ui.selected.index(this._get_node(e))>=
0},get_selected:function(e){return e?c(e).find("a.jstree-clicked").parent():this.data.ui.selected},deselect_all:function(e){e=e?c(e).find("a.jstree-clicked").parent():this.get_container().find("a.jstree-clicked").parent();e.children("a.jstree-clicked").removeClass("jstree-clicked");this.data.ui.selected=c([]);this.data.ui.last_selected=false;this.__callback({obj:e})}}});c.jstree.defaults.plugins.push("ui")})(jQuery);(function(c){c.jstree.plugin("crrm",{__init:function(){this.get_container().bind("move_node.jstree",
c.proxy(function(a,d){if(this._get_settings().crrm.move.open_onmove){var f=this;d.rslt.np.parentsUntil(".jstree").andSelf().filter(".jstree-closed").each(function(){f.open_node(this,false,true)})}},this))},defaults:{input_width_limit:200,move:{always_copy:false,open_onmove:true,default_position:"last",check_move:function(){return true}}},_fn:{_show_input:function(a,d){a=this._get_node(a);var f=this._get_settings().core.rtl,e=this._get_settings().crrm.input_width_limit,b=a.children("ins").width(),
g=a.find("> a:visible > ins").width()*a.find("> a:visible > ins").length,h=this.get_text(a),j=c("<div />",{css:{position:"absolute",top:"-200px",left:f?"0px":"-1000px",visibility:"hidden"}}).appendTo("body"),l=a.css("position","relative").append(c("<input />",{value:h,"class":"jstree-rename-input",css:{padding:"0",border:"1px solid silver",position:"absolute",left:f?"auto":b+g+4+"px",right:f?b+g+4+"px":"auto",top:"0px",height:this.data.core.li_height-2+"px",lineHeight:this.data.core.li_height-2+"px",
width:"150px"},blur:c.proxy(function(){var i=a.children(".jstree-rename-input"),k=i.val();if(k==="")k=h;i.remove();this.set_text(a,h);this.rename_node(a,k);d.call(this,a,k,h);a.css("position","")},this),keyup:function(i){i=i.keyCode||i.which;if(i==27){this.value=h;this.blur()}else i==13?this.blur():l.width(Math.min(j.text("pW"+this.value).width(),e))},keypress:function(i){if((i.keyCode||i.which)==13)return false}})).children(".jstree-rename-input");this.set_text(a,"");j.css({fontFamily:l.css("fontFamily")||
"",fontSize:l.css("fontSize")||"",fontWeight:l.css("fontWeight")||"",fontStyle:l.css("fontStyle")||"",fontStretch:l.css("fontStretch")||"",fontVariant:l.css("fontVariant")||"",letterSpacing:l.css("letterSpacing")||"",wordSpacing:l.css("wordSpacing")||""});l.width(Math.min(j.text("pW"+l[0].value).width(),e))[0].select()},rename:function(a){a=this._get_node(a);this.__rollback();var d=this.__callback;this._show_input(a,function(f,e,b){d.call(this,{obj:f,new_name:e,old_name:b})})},create:function(a,d,
f,e,b){var g=this;(a=this._get_node(a))||(a=-1);this.__rollback();return this.create_node(a,d,f,function(h){var j=this._get_parent(h),l=c(h).index();e&&e.call(this,h);j.length&&j.hasClass("jstree-closed")&&this.open_node(j,false,true);b?g.__callback({obj:h,name:this.get_text(h),parent:j,position:l}):this._show_input(h,function(i,k){g.__callback({obj:i,name:k,parent:j,position:l})})})},remove:function(a){a=this._get_node(a,true);var d=this._get_parent(a),f=this._get_prev(a);this.__rollback();a=this.delete_node(a);
a!==false&&this.__callback({obj:a,prev:f,parent:d})},check_move:function(){if(!this.__call_old())return false;if(!this._get_settings().crrm.move.check_move.call(this,this._get_move()))return false;return true},move_node:function(a,d,f,e,b,g){var h=this._get_settings().crrm.move;if(!b){if(typeof f==="undefined")f=h.default_position;if(f==="inside"&&!h.default_position.match(/^(before|after)$/))f=h.default_position;return this.__call_old(true,a,d,f,e,false,g)}if(h.always_copy===true||h.always_copy===
"multitree"&&a.rt.get_index()!==a.ot.get_index())e=true;this.__call_old(true,a,d,f,e,true,g)},cut:function(a){a=this._get_node(a,true);if(!a||!a.length)return false;this.data.crrm.cp_nodes=false;this.data.crrm.ct_nodes=a;this.__callback({obj:a})},copy:function(a){a=this._get_node(a,true);if(!a||!a.length)return false;this.data.crrm.ct_nodes=false;this.data.crrm.cp_nodes=a;this.__callback({obj:a})},paste:function(a){a=this._get_node(a);if(!a||!a.length)return false;var d=this.data.crrm.ct_nodes?this.data.crrm.ct_nodes:
this.data.crrm.cp_nodes;if(!this.data.crrm.ct_nodes&&!this.data.crrm.cp_nodes)return false;if(this.data.crrm.ct_nodes){this.move_node(this.data.crrm.ct_nodes,a);this.data.crrm.ct_nodes=false}this.data.crrm.cp_nodes&&this.move_node(this.data.crrm.cp_nodes,a,false,true);this.__callback({obj:a,nodes:d})}}})})(jQuery);(function(c){var a=[];c.jstree._themes=false;c.jstree.plugin("themes",{__init:function(){this.get_container().bind("init.jstree",c.proxy(function(){var d=this._get_settings().themes;this.data.themes.dots=
d.dots;this.data.themes.icons=d.icons;this.set_theme(d.theme,d.url)},this)).bind("loaded.jstree",c.proxy(function(){this.data.themes.dots?this.show_dots():this.hide_dots();this.data.themes.icons?this.show_icons():this.hide_icons()},this))},defaults:{theme:"default",url:false,dots:true,icons:true},_fn:{set_theme:function(d,f){if(!d)return false;f||(f=c.jstree._themes+d+".css");if(c.inArray(f,a)==-1){c.vakata.css.add_sheet({url:f});a.push(f)}if(this.data.themes.theme!=d){this.get_container().removeClass("jstree-"+
this.data.themes.theme);this.data.themes.theme=d}this.get_container().addClass("jstree-"+d);this.data.themes.dots?this.show_dots():this.hide_dots();this.data.themes.icons?this.show_icons():this.hide_icons();this.__callback()},get_theme:function(){return this.data.themes.theme},show_dots:function(){this.data.themes.dots=true;this.get_container().children("ul").removeClass("jstree-no-dots")},hide_dots:function(){this.data.themes.dots=false;this.get_container().children("ul").addClass("jstree-no-dots")},
toggle_dots:function(){this.data.themes.dots?this.hide_dots():this.show_dots()},show_icons:function(){this.data.themes.icons=true;this.get_container().children("ul").removeClass("jstree-no-icons")},hide_icons:function(){this.data.themes.icons=false;this.get_container().children("ul").addClass("jstree-no-icons")},toggle_icons:function(){this.data.themes.icons?this.hide_icons():this.show_icons()}}});c(function(){if(c.jstree._themes===false)c.jstree._themes="/stylesheets/jquery/jstree/"});c.jstree.defaults.plugins.push("themes")})(jQuery);
(function(c){var a=[];c.jstree.plugin("hotkeys",{__init:function(){if(typeof c.hotkeys==="undefined")throw"jsTree hotkeys: jQuery hotkeys plugin not included.";if(!this.data.ui)throw"jsTree hotkeys: jsTree UI plugin not included.";c.each(this._get_settings().hotkeys,function(d,f){if(f!==false&&c.inArray(d,a)==-1){c(document).bind("keydown",d,function(e){var b;var g=c.jstree._focused(),h;if(g&&g.data&&g.data.hotkeys&&g.data.hotkeys.enabled)if(h=g._get_settings().hotkeys[d])b=h.call(g,e);return b});
a.push(d)}});this.get_container().bind("lock.jstree",c.proxy(function(){if(this.data.hotkeys.enabled){this.data.hotkeys.enabled=false;this.data.hotkeys.revert=true}},this)).bind("unlock.jstree",c.proxy(function(){if(this.data.hotkeys.revert)this.data.hotkeys.enabled=true},this));this.enable_hotkeys()},defaults:{up:function(){this.hover_node(this._get_prev(this.data.ui.hovered||this.data.ui.last_selected||-1));return false},"ctrl+up":function(){this.hover_node(this._get_prev(this.data.ui.hovered||
this.data.ui.last_selected||-1));return false},"shift+up":function(){this.hover_node(this._get_prev(this.data.ui.hovered||this.data.ui.last_selected||-1));return false},down:function(){this.hover_node(this._get_next(this.data.ui.hovered||this.data.ui.last_selected||-1));return false},"ctrl+down":function(){this.hover_node(this._get_next(this.data.ui.hovered||this.data.ui.last_selected||-1));return false},"shift+down":function(){this.hover_node(this._get_next(this.data.ui.hovered||this.data.ui.last_selected||
-1));return false},left:function(){var d=this.data.ui.hovered||this.data.ui.last_selected;if(d)d.hasClass("jstree-open")?this.close_node(d):this.hover_node(this._get_prev(d));return false},"ctrl+left":function(){var d=this.data.ui.hovered||this.data.ui.last_selected;if(d)d.hasClass("jstree-open")?this.close_node(d):this.hover_node(this._get_prev(d));return false},"shift+left":function(){var d=this.data.ui.hovered||this.data.ui.last_selected;if(d)d.hasClass("jstree-open")?this.close_node(d):this.hover_node(this._get_prev(d));
return false},right:function(){var d=this.data.ui.hovered||this.data.ui.last_selected;if(d&&d.length)d.hasClass("jstree-closed")?this.open_node(d):this.hover_node(this._get_next(d));return false},"ctrl+right":function(){var d=this.data.ui.hovered||this.data.ui.last_selected;if(d&&d.length)d.hasClass("jstree-closed")?this.open_node(d):this.hover_node(this._get_next(d));return false},"shift+right":function(){var d=this.data.ui.hovered||this.data.ui.last_selected;if(d&&d.length)d.hasClass("jstree-closed")?
this.open_node(d):this.hover_node(this._get_next(d));return false},space:function(){this.data.ui.hovered&&this.data.ui.hovered.children("a:eq(0)").click();return false},"ctrl+space":function(d){d.type="click";this.data.ui.hovered&&this.data.ui.hovered.children("a:eq(0)").trigger(d);return false},"shift+space":function(d){d.type="click";this.data.ui.hovered&&this.data.ui.hovered.children("a:eq(0)").trigger(d);return false},f2:function(){this.rename(this.data.ui.hovered||this.data.ui.last_selected)},
del:function(){this.remove(this.data.ui.hovered||this._get_node(null))}},_fn:{enable_hotkeys:function(){this.data.hotkeys.enabled=true},disable_hotkeys:function(){this.data.hotkeys.enabled=false}}})})(jQuery);(function(c){c.jstree.plugin("json_data",{__init:function(){this._get_settings().json_data.progressive_unload&&this.get_container().bind("after_close.jstree",function(a,d){d.rslt.obj.children("ul").remove()})},defaults:{data:false,ajax:false,correct_state:true,progressive_render:false,progressive_unload:false},
_fn:{load_node:function(a,d,f){var e=this;this.load_node_json(a,function(){e.__callback({obj:e._get_node(a)});d.call(this)},f)},_is_loaded:function(a){var d=this._get_settings().json_data;a=this._get_node(a);return a==-1||!a||!d.ajax&&!d.progressive_render&&!c.isFunction(d.data)||a.is(".jstree-open, .jstree-leaf")||a.children("ul").children("li").length>0},refresh:function(a){a=this._get_node(a);var d=this._get_settings().json_data;if(a&&a!==-1&&d.progressive_unload&&(c.isFunction(d.data)||d.ajax))a.removeData("jstree-children");
return this.__call_old()},load_node_json:function(a,d,f){var e=this.get_settings().json_data,b,g=function(){};b=function(){};if((a=this._get_node(a))&&a!==-1&&(e.progressive_render||e.progressive_unload)&&!a.is(".jstree-open, .jstree-leaf")&&a.children("ul").children("li").length===0&&a.data("jstree-children")){if(b=this._parse_json(a.data("jstree-children"),a)){a.append(b);e.progressive_unload||a.removeData("jstree-children")}this.clean_node(a);d&&d.call(this)}else{if(a&&a!==-1)if(a.data("jstree-is-loading"))return;
else a.data("jstree-is-loading",true);switch(true){case !e.data&&!e.ajax:throw"Neither data nor ajax settings supplied.";case c.isFunction(e.data):e.data.call(this,a,c.proxy(function(h){if(h=this._parse_json(h,a)){if(a===-1||!a)this.get_container().children("ul").empty().append(h.children());else{a.append(h).children("a.jstree-loading").removeClass("jstree-loading");a.removeData("jstree-is-loading")}this.clean_node(a);d&&d.call(this)}else{if(a===-1||!a)e.correct_state&&this.get_container().children("ul").empty();
else{a.children("a.jstree-loading").removeClass("jstree-loading");a.removeData("jstree-is-loading");e.correct_state&&this.correct_state(a)}f&&f.call(this)}},this));break;case !!e.data&&!e.ajax||!!e.data&&!!e.ajax&&(!a||a===-1):if(!a||a==-1)if(b=this._parse_json(e.data,a)){this.get_container().children("ul").empty().append(b.children());this.clean_node()}else e.correct_state&&this.get_container().children("ul").empty();d&&d.call(this);break;case !e.data&&!!e.ajax||!!e.data&&!!e.ajax&&a&&a!==-1:g=function(h,
j,l){var i=this.get_settings().json_data.ajax.error;i&&i.call(this,h,j,l);if(a!=-1&&a.length){a.children("a.jstree-loading").removeClass("jstree-loading");a.removeData("jstree-is-loading");j==="success"&&e.correct_state&&this.correct_state(a)}else j==="success"&&e.correct_state&&this.get_container().children("ul").empty();f&&f.call(this)};b=function(h,j,l){var i=this.get_settings().json_data.ajax.success;if(i)h=i.call(this,h,j,l)||h;if(h===""||h&&h.toString&&h.toString().replace(/^[\s\n]+$/,"")===
""||!c.isArray(h)&&!c.isPlainObject(h))return g.call(this,l,j,"");if(h=this._parse_json(h,a)){if(a===-1||!a)this.get_container().children("ul").empty().append(h.children());else{a.append(h).children("a.jstree-loading").removeClass("jstree-loading");a.removeData("jstree-is-loading")}this.clean_node(a);d&&d.call(this)}else if(a===-1||!a){if(e.correct_state){this.get_container().children("ul").empty();d&&d.call(this)}}else{a.children("a.jstree-loading").removeClass("jstree-loading");a.removeData("jstree-is-loading");
if(e.correct_state){this.correct_state(a);d&&d.call(this)}}};e.ajax.context=this;e.ajax.error=g;e.ajax.success=b;if(!e.ajax.dataType)e.ajax.dataType="json";if(c.isFunction(e.ajax.url))e.ajax.url=e.ajax.url.call(this,a);if(c.isFunction(e.ajax.data))e.ajax.data=e.ajax.data.call(this,a);c.ajax(e.ajax)}}},_parse_json:function(a,d,f){var e=false,b=this._get_settings(),g=b.json_data,h=b.core.html_titles,j;if(!a)return e;g.progressive_unload&&d&&d!==-1&&d.data("jstree-children",e);if(c.isArray(a)){e=c();
if(!a.length)return false;b=0;for(g=a.length;b<g;b++){j=this._parse_json(a[b],d,true);if(j.length)e=e.add(j)}}else{if(typeof a=="string")a={data:a};if(!a.data&&a.data!=="")return e;e=c("<li />");a.attr&&e.attr(a.attr);a.metadata&&e.data(a.metadata);a.state&&e.addClass("jstree-"+a.state);if(!c.isArray(a.data)){j=a.data;a.data=[];a.data.push(j)}c.each(a.data,function(l,i){j=c("<a />");if(c.isFunction(i))i=i.call(this,a);if(typeof i=="string")j.attr("href","#")[h?"html":"text"](i);else{if(!i.attr)i.attr=
{};if(!i.attr.href)i.attr.href="#";j.attr(i.attr)[h?"html":"text"](i.title);i.language&&j.addClass(i.language)}j.prepend("<ins class='jstree-icon'>&#160;</ins>");if(!i.icon&&a.icon)i.icon=a.icon;if(i.icon)i.icon.indexOf("/")===-1?j.children("ins").addClass(i.icon):j.children("ins").css("background","url('"+i.icon+"') center center no-repeat");e.append(j)});e.prepend("<ins class='jstree-icon'>&#160;</ins>");if(a.children)if(g.progressive_render&&a.state!=="open")e.addClass("jstree-closed").data("jstree-children",
a.children);else{g.progressive_unload&&e.data("jstree-children",a.children);if(c.isArray(a.children)&&a.children.length){j=this._parse_json(a.children,d,true);if(j.length){d=c("<ul />");d.append(j);e.append(d)}}}}if(!f){f=c("<ul />");f.append(e);e=f}return e},get_json:function(a,d,f,e){var b=[],g=this._get_settings(),h=this,j,l,i,k,m,o;a=this._get_node(a);if(!a||a===-1)a=this.get_container().find("> ul > li");d=c.isArray(d)?d:["id","class"];!e&&this.data.types&&d.push(g.types.type_attr);f=c.isArray(f)?
f:[];a.each(function(){i=c(this);j={data:[]};if(d.length)j.attr={};c.each(d,function(n,p){if((l=i.attr(p))&&l.length&&l.replace(/jstree[^ ]*/ig,"").length)j.attr[p]=(" "+l).replace(/ jstree[^ ]*/ig,"").replace(/\s+$/ig," ").replace(/^ /,"").replace(/ $/,"")});if(i.hasClass("jstree-open"))j.state="open";if(i.hasClass("jstree-closed"))j.state="closed";if(i.data())j.metadata=i.data();k=i.children("a");k.each(function(){m=c(this);if(f.length||c.inArray("languages",g.plugins)!==-1||m.children("ins").get(0).style.backgroundImage.length||
m.children("ins").get(0).className&&m.children("ins").get(0).className.replace(/jstree[^ ]*|$/ig,"").length){o=false;c.inArray("languages",g.plugins)!==-1&&c.isArray(g.languages)&&g.languages.length&&c.each(g.languages,function(n,p){if(m.hasClass(p)){o=p;return false}});l={attr:{},title:h.get_text(m,o)};c.each(f,function(n,p){l.attr[p]=(" "+(m.attr(p)||"")).replace(/ jstree[^ ]*/ig,"").replace(/\s+$/ig," ").replace(/^ /,"").replace(/ $/,"")});c.inArray("languages",g.plugins)!==-1&&c.isArray(g.languages)&&
g.languages.length&&c.each(g.languages,function(n,p){if(m.hasClass(p)){l.language=p;return true}});if(m.children("ins").get(0).className.replace(/jstree[^ ]*|$/ig,"").replace(/^\s+$/ig,"").length)l.icon=m.children("ins").get(0).className.replace(/jstree[^ ]*|$/ig,"").replace(/\s+$/ig," ").replace(/^ /,"").replace(/ $/,"");if(m.children("ins").get(0).style.backgroundImage.length)l.icon=m.children("ins").get(0).style.backgroundImage.replace("url(","").replace(")","")}else l=h.get_text(m);if(k.length>
1)j.data.push(l);else j.data=l});i=i.find("> ul > li");if(i.length)j.children=h.get_json(i,d,f,true);b.push(j)});return b}}})})(jQuery);(function(c){c.jstree.plugin("languages",{__init:function(){this._load_css()},defaults:[],_fn:{set_lang:function(a){var d=this._get_settings().languages,f=false,e=".jstree-"+this.get_index()+" a";if(!c.isArray(d)||d.length===0)return false;if(c.inArray(a,d)==-1)if(d[a])a=d[a];else return false;if(a==this.data.languages.current_language)return true;f=c.vakata.css.get_css(e+
"."+this.data.languages.current_language,false,this.data.languages.language_css);if(f!==false)f.style.display="none";f=c.vakata.css.get_css(e+"."+a,false,this.data.languages.language_css);if(f!==false)f.style.display="";this.data.languages.current_language=a;this.__callback(a);return true},get_lang:function(){return this.data.languages.current_language},_get_string:function(a,d){var f=this._get_settings().languages,e=this._get_settings().core.strings;if(c.isArray(f)&&f.length)d=d&&c.inArray(d,f)!=
-1?d:this.data.languages.current_language;if(e[d]&&e[d][a])return e[d][a];if(e[a])return e[a];return a},get_text:function(a,d){a=this._get_node(a)||this.data.ui.last_selected;if(!a.size())return false;var f=this._get_settings().languages,e=this._get_settings().core.html_titles;if(c.isArray(f)&&f.length){d=d&&c.inArray(d,f)!=-1?d:this.data.languages.current_language;a=a.children("a."+d)}else a=a.children("a:eq(0)");if(e){a=a.clone();a.children("INS").remove();return a.html()}else{a=a.contents().filter(function(){return this.nodeType==
3})[0];return a.nodeValue}},set_text:function(a,d,f){a=this._get_node(a)||this.data.ui.last_selected;if(!a.size())return false;var e=this._get_settings().languages,b=this._get_settings().core.html_titles;if(c.isArray(e)&&e.length){f=f&&c.inArray(f,e)!=-1?f:this.data.languages.current_language;a=a.children("a."+f)}else a=a.children("a:eq(0)");if(b){e=a.children("INS").clone();a.html(d).prepend(e);this.__callback({obj:a,name:d,lang:f});return true}else{a=a.contents().filter(function(){return this.nodeType==
3})[0];this.__callback({obj:a,name:d,lang:f});return a.nodeValue=d}},_load_css:function(){var a=this._get_settings().languages,d="/* languages css */",f=".jstree-"+this.get_index()+" a",e;if(c.isArray(a)&&a.length){this.data.languages.current_language=a[0];for(e=0;e<a.length;e++){d+=f+"."+a[e]+" {";if(a[e]!=this.data.languages.current_language)d+=" display:none; ";d+=" } "}this.data.languages.language_css=c.vakata.css.add_sheet({str:d,title:"jstree-languages"})}},create_node:function(a,d,f,e){return this.__call_old(true,
a,d,f,function(b){var g=this._get_settings().languages,h=b.children("a"),j;if(c.isArray(g)&&g.length){for(j=0;j<g.length;j++)h.is("."+g[j])||b.append(h.eq(0).clone().removeClass(g.join(" ")).addClass(g[j]));h.not("."+g.join(", .")).remove()}e&&e.call(this,b)})}}})})(jQuery);(function(c){c.jstree.plugin("cookies",{__init:function(){if(typeof c.cookie==="undefined")throw"jsTree cookie: jQuery cookie plugin not included.";var a=this._get_settings().cookies,d;if(a.save_loaded)if((d=c.cookie(a.save_loaded))&&
d.length)this.data.core.to_load=d.split(",");if(a.save_opened)if((d=c.cookie(a.save_opened))&&d.length)this.data.core.to_open=d.split(",");if(a.save_selected)if((d=c.cookie(a.save_selected))&&d.length&&this.data.ui)this.data.ui.to_select=d.split(",");this.get_container().one((this.data.ui?"reselect":"reopen")+".jstree",c.proxy(function(){this.get_container().bind("open_node.jstree close_node.jstree select_node.jstree deselect_node.jstree",c.proxy(function(f){this._get_settings().cookies.auto_save&&
this.save_cookie((f.handleObj.namespace+f.handleObj.type).replace("jstree",""))},this))},this))},defaults:{save_loaded:"jstree_load",save_opened:"jstree_open",save_selected:"jstree_select",auto_save:true,cookie_options:{}},_fn:{save_cookie:function(a){if(!this.data.core.refreshing){var d=this._get_settings().cookies;if(a)switch(a){case "open_node":case "close_node":if(d.save_opened){this.save_opened();c.cookie(d.save_opened,this.data.core.to_open.join(","),d.cookie_options)}if(d.save_loaded){this.save_loaded();
c.cookie(d.save_loaded,this.data.core.to_load.join(","),d.cookie_options)}break;case "select_node":case "deselect_node":if(d.save_selected&&this.data.ui){this.save_selected();c.cookie(d.save_selected,this.data.ui.to_select.join(","),d.cookie_options)}}else{if(d.save_loaded){this.save_loaded();c.cookie(d.save_loaded,this.data.core.to_load.join(","),d.cookie_options)}if(d.save_opened){this.save_opened();c.cookie(d.save_opened,this.data.core.to_open.join(","),d.cookie_options)}if(d.save_selected&&this.data.ui){this.save_selected();
c.cookie(d.save_selected,this.data.ui.to_select.join(","),d.cookie_options)}}}}}})})(jQuery);(function(c){c.jstree.plugin("sort",{__init:function(){this.get_container().bind("load_node.jstree",c.proxy(function(a,d){var f=this._get_node(d.rslt.obj);f=f===-1?this.get_container().children("ul"):f.children("ul");this.sort(f)},this)).bind("rename_node.jstree create_node.jstree create.jstree",c.proxy(function(a,d){this.sort(d.rslt.obj.parent())},this)).bind("move_node.jstree",c.proxy(function(a,d){this.sort((d.rslt.np==
-1?this.get_container():d.rslt.np).children("ul"))},this))},defaults:function(a,d){return this.get_text(a)>this.get_text(d)?1:-1},_fn:{sort:function(a){var d=this._get_settings().sort,f=this;a.append(c.makeArray(a.children("li")).sort(c.proxy(d,f)));a.find("> li > ul").each(function(){f.sort(c(this))});this.clean_node(a)}}})})(jQuery);(function(c){var a=false,d=false,f=false,e=false,b=false,g=false,h=false,j=false,l=false;c.vakata.dnd={is_down:false,is_drag:false,helper:false,scroll_spd:10,init_x:0,
init_y:0,threshold:5,helper_left:5,helper_top:10,user_data:{},drag_start:function(i,k,m){c.vakata.dnd.is_drag&&c.vakata.drag_stop({});try{i.currentTarget.unselectable="on";i.currentTarget.onselectstart=function(){return false};if(i.currentTarget.style)i.currentTarget.style.MozUserSelect="none"}catch(o){}c.vakata.dnd.init_x=i.pageX;c.vakata.dnd.init_y=i.pageY;c.vakata.dnd.user_data=k;c.vakata.dnd.is_down=true;c.vakata.dnd.helper=c("<div id='vakata-dragged' />").html(m);c(document).bind("mousemove",
c.vakata.dnd.drag);c(document).bind("mouseup",c.vakata.dnd.drag_stop);return false},drag:function(i){if(c.vakata.dnd.is_down){if(!c.vakata.dnd.is_drag)if(Math.abs(i.pageX-c.vakata.dnd.init_x)>5||Math.abs(i.pageY-c.vakata.dnd.init_y)>5){c.vakata.dnd.helper.appendTo("body");c.vakata.dnd.is_drag=true;c(document).triggerHandler("drag_start.vakata",{event:i,data:c.vakata.dnd.user_data})}else return;if(i.type==="mousemove"){var k=c(document),m=k.scrollTop();k=k.scrollLeft();if(i.pageY-m<20){if(g&&h==="down"){clearInterval(g);
g=false}if(!g){h="up";g=setInterval(function(){c(document).scrollTop(c(document).scrollTop()-c.vakata.dnd.scroll_spd)},150)}}else if(g&&h==="up"){clearInterval(g);g=false}if(c(window).height()-(i.pageY-m)<20){if(g&&h==="up"){clearInterval(g);g=false}if(!g){h="down";g=setInterval(function(){c(document).scrollTop(c(document).scrollTop()+c.vakata.dnd.scroll_spd)},150)}}else if(g&&h==="down"){clearInterval(g);g=false}if(i.pageX-k<20){if(b&&j==="right"){clearInterval(b);b=false}if(!b){j="left";b=setInterval(function(){c(document).scrollLeft(c(document).scrollLeft()-
c.vakata.dnd.scroll_spd)},150)}}else if(b&&j==="left"){clearInterval(b);b=false}if(c(window).width()-(i.pageX-k)<20){if(b&&j==="left"){clearInterval(b);b=false}if(!b){j="right";b=setInterval(function(){c(document).scrollLeft(c(document).scrollLeft()+c.vakata.dnd.scroll_spd)},150)}}else if(b&&j==="right"){clearInterval(b);b=false}}c.vakata.dnd.helper.css({left:i.pageX+c.vakata.dnd.helper_left+"px",top:i.pageY+c.vakata.dnd.helper_top+"px"});c(document).triggerHandler("drag.vakata",{event:i,data:c.vakata.dnd.user_data})}},
drag_stop:function(i){b&&clearInterval(b);g&&clearInterval(g);c(document).unbind("mousemove",c.vakata.dnd.drag);c(document).unbind("mouseup",c.vakata.dnd.drag_stop);c(document).triggerHandler("drag_stop.vakata",{event:i,data:c.vakata.dnd.user_data});c.vakata.dnd.helper.remove();c.vakata.dnd.init_x=0;c.vakata.dnd.init_y=0;c.vakata.dnd.user_data={};c.vakata.dnd.is_down=false;c.vakata.dnd.is_drag=false}};c(function(){c.vakata.css.add_sheet({str:"#vakata-dragged { display:block; margin:0 0 0 0; padding:4px 4px 4px 24px; position:absolute; top:-2000px; line-height:16px; z-index:10000; } ",
title:"vakata"})});c.jstree.plugin("dnd",{__init:function(){this.data.dnd={active:false,after:false,inside:false,before:false,off:false,prepared:false,w:0,to1:false,to2:false,cof:false,cw:false,ch:false,i1:false,i2:false,mto:false};this.get_container().bind("mouseenter.jstree",c.proxy(function(k){if(c.vakata.dnd.is_drag&&c.vakata.dnd.user_data.jstree){if(this.data.themes){f.attr("class","jstree-"+this.data.themes.theme);e&&e.attr("class","jstree-"+this.data.themes.theme);c.vakata.dnd.helper.attr("class",
"jstree-dnd-helper jstree-"+this.data.themes.theme)}if(k.currentTarget===k.target&&c.vakata.dnd.user_data.obj&&c(c.vakata.dnd.user_data.obj).length&&c(c.vakata.dnd.user_data.obj).parents(".jstree:eq(0)")[0]!==k.target){k=c.jstree._reference(k.target);if(k.data.dnd.foreign){k=k._get_settings().dnd.drag_check.call(this,{o:a,r:k.get_container(),is_root:true});if(k===true||k.inside===true||k.before===true||k.after===true)c.vakata.dnd.helper.children("ins").attr("class","jstree-ok")}else{k.prepare_move(a,
k.get_container(),"last");k.check_move()&&c.vakata.dnd.helper.children("ins").attr("class","jstree-ok")}}}},this)).bind("mouseup.jstree",c.proxy(function(k){if(c.vakata.dnd.is_drag&&c.vakata.dnd.user_data.jstree&&k.currentTarget===k.target&&c.vakata.dnd.user_data.obj&&c(c.vakata.dnd.user_data.obj).length&&c(c.vakata.dnd.user_data.obj).parents(".jstree:eq(0)")[0]!==k.target){var m=c.jstree._reference(k.currentTarget);if(m.data.dnd.foreign){k=m._get_settings().dnd.drag_check.call(this,{o:a,r:m.get_container(),
is_root:true});if(k===true||k.inside===true||k.before===true||k.after===true)m._get_settings().dnd.drag_finish.call(this,{o:a,r:m.get_container(),is_root:true})}else m.move_node(a,m.get_container(),"last",k[m._get_settings().dnd.copy_modifier+"Key"])}},this)).bind("mouseleave.jstree",c.proxy(function(k){if(k.relatedTarget&&k.relatedTarget.id&&k.relatedTarget.id==="jstree-marker-line")return false;if(c.vakata.dnd.is_drag&&c.vakata.dnd.user_data.jstree){this.data.dnd.i1&&clearInterval(this.data.dnd.i1);
this.data.dnd.i2&&clearInterval(this.data.dnd.i2);this.data.dnd.to1&&clearTimeout(this.data.dnd.to1);this.data.dnd.to2&&clearTimeout(this.data.dnd.to2);c.vakata.dnd.helper.children("ins").hasClass("jstree-ok")&&c.vakata.dnd.helper.children("ins").attr("class","jstree-invalid")}},this)).bind("mousemove.jstree",c.proxy(function(k){if(c.vakata.dnd.is_drag&&c.vakata.dnd.user_data.jstree){var m=this.get_container()[0];if(k.pageX+24>this.data.dnd.cof.left+this.data.dnd.cw){this.data.dnd.i1&&clearInterval(this.data.dnd.i1);
this.data.dnd.i1=setInterval(c.proxy(function(){this.scrollLeft+=c.vakata.dnd.scroll_spd},m),100)}else if(k.pageX-24<this.data.dnd.cof.left){this.data.dnd.i1&&clearInterval(this.data.dnd.i1);this.data.dnd.i1=setInterval(c.proxy(function(){this.scrollLeft-=c.vakata.dnd.scroll_spd},m),100)}else this.data.dnd.i1&&clearInterval(this.data.dnd.i1);if(k.pageY+24>this.data.dnd.cof.top+this.data.dnd.ch){this.data.dnd.i2&&clearInterval(this.data.dnd.i2);this.data.dnd.i2=setInterval(c.proxy(function(){this.scrollTop+=
c.vakata.dnd.scroll_spd},m),100)}else if(k.pageY-24<this.data.dnd.cof.top){this.data.dnd.i2&&clearInterval(this.data.dnd.i2);this.data.dnd.i2=setInterval(c.proxy(function(){this.scrollTop-=c.vakata.dnd.scroll_spd},m),100)}else this.data.dnd.i2&&clearInterval(this.data.dnd.i2)}},this)).bind("scroll.jstree",c.proxy(function(){if(c.vakata.dnd.is_drag&&c.vakata.dnd.user_data.jstree&&f&&e){f.hide();e.hide()}},this)).delegate("a","mousedown.jstree",c.proxy(function(k){if(k.which===1){this.start_drag(k.currentTarget,
k);return false}},this)).delegate("a","mouseenter.jstree",c.proxy(function(k){c.vakata.dnd.is_drag&&c.vakata.dnd.user_data.jstree&&this.dnd_enter(k.currentTarget)},this)).delegate("a","mousemove.jstree",c.proxy(function(k){if(c.vakata.dnd.is_drag&&c.vakata.dnd.user_data.jstree){if(!d||!d.length||d.children("a")[0]!==k.currentTarget)this.dnd_enter(k.currentTarget);if(typeof this.data.dnd.off.top==="undefined")this.data.dnd.off=c(k.target).offset();this.data.dnd.w=(k.pageY-(this.data.dnd.off.top||0))%
this.data.core.li_height;if(this.data.dnd.w<0)this.data.dnd.w+=this.data.core.li_height;this.dnd_show()}},this)).delegate("a","mouseleave.jstree",c.proxy(function(k){if(c.vakata.dnd.is_drag&&c.vakata.dnd.user_data.jstree){if(k.relatedTarget&&k.relatedTarget.id&&k.relatedTarget.id==="jstree-marker-line")return false;f&&f.hide();e&&e.hide();this.data.dnd.mto=setTimeout(function(m){return function(){m.dnd_leave(k)}}(this),0)}},this)).delegate("a","mouseup.jstree",c.proxy(function(k){c.vakata.dnd.is_drag&&
c.vakata.dnd.user_data.jstree&&this.dnd_finish(k)},this));c(document).bind("drag_stop.vakata",c.proxy(function(){this.data.dnd.to1&&clearTimeout(this.data.dnd.to1);this.data.dnd.to2&&clearTimeout(this.data.dnd.to2);this.data.dnd.i1&&clearInterval(this.data.dnd.i1);this.data.dnd.i2&&clearInterval(this.data.dnd.i2);this.data.dnd.after=false;this.data.dnd.before=false;this.data.dnd.inside=false;this.data.dnd.off=false;this.data.dnd.prepared=false;this.data.dnd.w=false;this.data.dnd.to1=false;this.data.dnd.to2=
false;this.data.dnd.i1=false;this.data.dnd.i2=false;this.data.dnd.active=false;this.data.dnd.foreign=false;f&&f.css({top:"-2000px"});e&&e.css({top:"-2000px"})},this)).bind("drag_start.vakata",c.proxy(function(k,m){if(m.data.jstree){var o=c(m.event.target);o.closest(".jstree").hasClass("jstree-"+this.get_index())&&this.dnd_enter(o)}},this));var i=this._get_settings().dnd;i.drag_target&&c(document).delegate(i.drag_target,"mousedown.jstree-"+this.get_index(),c.proxy(function(k){a=k.target;c.vakata.dnd.drag_start(k,
{jstree:true,obj:k.target},"<ins class='jstree-icon'></ins>"+c(k.target).text());if(this.data.themes){f&&f.attr("class","jstree-"+this.data.themes.theme);e&&e.attr("class","jstree-"+this.data.themes.theme);c.vakata.dnd.helper.attr("class","jstree-dnd-helper jstree-"+this.data.themes.theme)}c.vakata.dnd.helper.children("ins").attr("class","jstree-invalid");var m=this.get_container();this.data.dnd.cof=m.offset();this.data.dnd.cw=parseInt(m.width(),10);this.data.dnd.ch=parseInt(m.height(),10);this.data.dnd.foreign=
true;k.preventDefault()},this));i.drop_target&&c(document).delegate(i.drop_target,"mouseenter.jstree-"+this.get_index(),c.proxy(function(k){this.data.dnd.active&&this._get_settings().dnd.drop_check.call(this,{o:a,r:c(k.target),e:k})&&c.vakata.dnd.helper.children("ins").attr("class","jstree-ok")},this)).delegate(i.drop_target,"mouseleave.jstree-"+this.get_index(),c.proxy(function(){this.data.dnd.active&&c.vakata.dnd.helper.children("ins").attr("class","jstree-invalid")},this)).delegate(i.drop_target,
"mouseup.jstree-"+this.get_index(),c.proxy(function(k){this.data.dnd.active&&c.vakata.dnd.helper.children("ins").hasClass("jstree-ok")&&this._get_settings().dnd.drop_finish.call(this,{o:a,r:c(k.target),e:k})},this))},defaults:{copy_modifier:"ctrl",check_timeout:100,open_timeout:500,drop_target:".jstree-drop",drop_check:function(){return true},drop_finish:c.noop,drag_target:".jstree-draggable",drag_finish:c.noop,drag_check:function(){return{after:false,before:false,inside:true}}},_fn:{dnd_prepare:function(){if(d&&
d.length){this.data.dnd.off=d.offset();if(this._get_settings().core.rtl)this.data.dnd.off.right=this.data.dnd.off.left+d.width();if(this.data.dnd.foreign){var i=this._get_settings().dnd.drag_check.call(this,{o:a,r:d});this.data.dnd.after=i.after;this.data.dnd.before=i.before;this.data.dnd.inside=i.inside;this.data.dnd.prepared=true;return this.dnd_show()}this.prepare_move(a,d,"before");this.data.dnd.before=this.check_move();this.prepare_move(a,d,"after");this.data.dnd.after=this.check_move();if(this._is_loaded(d)){this.prepare_move(a,
d,"inside");this.data.dnd.inside=this.check_move()}else this.data.dnd.inside=false;this.data.dnd.prepared=true;return this.dnd_show()}},dnd_show:function(){if(this.data.dnd.prepared){var i=["before","inside","after"],k=false,m=this._get_settings().core.rtl;i=this.data.dnd.w<this.data.core.li_height/3?["before","inside","after"]:this.data.dnd.w<=this.data.core.li_height*2/3?this.data.dnd.w<this.data.core.li_height/2?["inside","before","after"]:["inside","after","before"]:["after","inside","before"];
c.each(i,c.proxy(function(o,n){if(this.data.dnd[n]){c.vakata.dnd.helper.children("ins").attr("class","jstree-ok");k=n;return false}},this));k===false&&c.vakata.dnd.helper.children("ins").attr("class","jstree-invalid");i=m?this.data.dnd.off.right-18:this.data.dnd.off.left+10;switch(k){case "before":f.css({left:i+"px",top:this.data.dnd.off.top-6+"px"}).show();e&&e.css({left:i+8+"px",top:this.data.dnd.off.top-1+"px"}).show();break;case "after":f.css({left:i+"px",top:this.data.dnd.off.top+this.data.core.li_height-
6+"px"}).show();e&&e.css({left:i+8+"px",top:this.data.dnd.off.top+this.data.core.li_height-1+"px"}).show();break;case "inside":f.css({left:i+(m?-4:4)+"px",top:this.data.dnd.off.top+this.data.core.li_height/2-5+"px"}).show();e&&e.hide();break;default:f.hide();e&&e.hide()}return l=k}},dnd_open:function(){this.data.dnd.to2=false;this.open_node(d,c.proxy(this.dnd_prepare,this),true)},dnd_finish:function(i){if(this.data.dnd.foreign){if(this.data.dnd.after||this.data.dnd.before||this.data.dnd.inside)this._get_settings().dnd.drag_finish.call(this,
{o:a,r:d,p:l})}else{this.dnd_prepare();this.move_node(a,d,l,i[this._get_settings().dnd.copy_modifier+"Key"])}d=a=false;f.hide();e&&e.hide()},dnd_enter:function(i){if(this.data.dnd.mto){clearTimeout(this.data.dnd.mto);this.data.dnd.mto=false}var k=this._get_settings().dnd;this.data.dnd.prepared=false;d=this._get_node(i);if(k.check_timeout){this.data.dnd.to1&&clearTimeout(this.data.dnd.to1);this.data.dnd.to1=setTimeout(c.proxy(this.dnd_prepare,this),k.check_timeout)}else this.dnd_prepare();if(k.open_timeout){this.data.dnd.to2&&
clearTimeout(this.data.dnd.to2);if(d&&d.length&&d.hasClass("jstree-closed"))this.data.dnd.to2=setTimeout(c.proxy(this.dnd_open,this),k.open_timeout)}else d&&d.length&&d.hasClass("jstree-closed")&&this.dnd_open()},dnd_leave:function(i){this.data.dnd.after=false;this.data.dnd.before=false;this.data.dnd.inside=false;c.vakata.dnd.helper.children("ins").attr("class","jstree-invalid");f.hide();e&&e.hide();if(d&&d[0]===i.target.parentNode){if(this.data.dnd.to1){clearTimeout(this.data.dnd.to1);this.data.dnd.to1=
false}if(this.data.dnd.to2){clearTimeout(this.data.dnd.to2);this.data.dnd.to2=false}}},start_drag:function(i,k){a=this._get_node(i);if(this.data.ui&&this.is_selected(a))a=this._get_node(null,true);var m=a.length>1?this._get_string("multiple_selection"):this.get_text(a),o=this.get_container();this._get_settings().core.html_titles||(m=m.replace(/</ig,"&lt;").replace(/>/ig,"&gt;"));c.vakata.dnd.drag_start(k,{jstree:true,obj:a},"<ins class='jstree-icon'></ins>"+m);if(this.data.themes){f&&f.attr("class",
"jstree-"+this.data.themes.theme);e&&e.attr("class","jstree-"+this.data.themes.theme);c.vakata.dnd.helper.attr("class","jstree-dnd-helper jstree-"+this.data.themes.theme)}this.data.dnd.cof=o.offset();this.data.dnd.cw=parseInt(o.width(),10);this.data.dnd.ch=parseInt(o.height(),10);this.data.dnd.active=true}}});c(function(){c.vakata.css.add_sheet({str:"#vakata-dragged ins { display:block; text-decoration:none; width:16px; height:16px; margin:0 0 0 0; padding:0; position:absolute; top:4px; left:4px;  -moz-border-radius:4px; border-radius:4px; -webkit-border-radius:4px; } #vakata-dragged .jstree-ok { background:green; } #vakata-dragged .jstree-invalid { background:red; } #jstree-marker { padding:0; margin:0; font-size:12px; overflow:hidden; height:12px; width:8px; position:absolute; top:-30px; z-index:10001; background-repeat:no-repeat; display:none; background-color:transparent; text-shadow:1px 1px 1px white; color:black; line-height:10px; } #jstree-marker-line { padding:0; margin:0; line-height:0%; font-size:1px; overflow:hidden; height:1px; width:100px; position:absolute; top:-30px; z-index:10000; background-repeat:no-repeat; display:none; background-color:#456c43;  cursor:pointer; border:1px solid #eeeeee; border-left:0; -moz-box-shadow: 0px 0px 2px #666; -webkit-box-shadow: 0px 0px 2px #666; box-shadow: 0px 0px 2px #666;  -moz-border-radius:1px; border-radius:1px; -webkit-border-radius:1px; }",
title:"jstree"});f=c("<div />").attr({id:"jstree-marker"}).hide().html("&raquo;").bind("mouseleave mouseenter",function(i){f.hide();e.hide();i.preventDefault();i.stopImmediatePropagation();return false}).appendTo("body");e=c("<div />").attr({id:"jstree-marker-line"}).hide().bind("mouseup",function(i){if(d&&d.length){d.children("a").trigger(i);i.preventDefault();i.stopImmediatePropagation();return false}}).bind("mouseleave",function(i){var k=c(i.relatedTarget);if(k.is(".jstree")||k.closest(".jstree").length===
0)if(d&&d.length){d.children("a").trigger(i);f.hide();e.hide();i.preventDefault();i.stopImmediatePropagation();return false}}).appendTo("body");c(document).bind("drag_start.vakata",function(i,k){if(k.data.jstree){f.show();e&&e.show()}});c(document).bind("drag_stop.vakata",function(i,k){if(k.data.jstree){f.hide();e&&e.hide()}})})})(jQuery);(function(c){c.jstree.plugin("checkbox",{__init:function(){this.data.checkbox.noui=this._get_settings().checkbox.override_ui;if(this.data.ui&&this.data.checkbox.noui){this.select_node=
this.deselect_node=this.deselect_all=c.noop;this.get_selected=this.get_checked}this.get_container().bind("open_node.jstree create_node.jstree clean_node.jstree refresh.jstree",c.proxy(function(a,d){this._prepare_checkboxes(d.rslt.obj)},this)).bind("loaded.jstree",c.proxy(function(){this._prepare_checkboxes()},this)).delegate(this.data.ui&&this.data.checkbox.noui?"a":"ins.jstree-checkbox","click.jstree",c.proxy(function(a){a.preventDefault();this._get_node(a.target).hasClass("jstree-checked")?this.uncheck_node(a.target):
this.check_node(a.target);if(this.data.ui&&this.data.checkbox.noui){this.save_selected();this.data.cookies&&this.save_cookie("select_node")}else{a.stopImmediatePropagation();return false}},this))},defaults:{override_ui:false,two_state:false,real_checkboxes:false,checked_parent_open:true,real_checkboxes_names:function(a){return["check_"+(a[0].id||Math.ceil(Math.random()*1E4)),1]}},__destroy:function(){this.get_container().find("input.jstree-real-checkbox").removeClass("jstree-real-checkbox").end().find("ins.jstree-checkbox").remove()},
_fn:{_checkbox_notify:function(a,d){d.checked&&this.check_node(a,false)},_prepare_checkboxes:function(a){a=!a||a==-1?this.get_container().find("> ul > li"):this._get_node(a);if(a!==false){var d,f=this,e,b=this._get_settings().checkbox.two_state,g=this._get_settings().checkbox.real_checkboxes,h=this._get_settings().checkbox.real_checkboxes_names;a.each(function(){e=c(this);d=e.is("li")&&(e.hasClass("jstree-checked")||g&&e.children(":checked").length)?"jstree-checked":"jstree-unchecked";e.find("li").andSelf().each(function(){var j=
c(this),l;j.children("a"+(f.data.languages?"":":eq(0)")).not(":has(.jstree-checkbox)").prepend("<ins class='jstree-checkbox'>&#160;</ins>").parent().not(".jstree-checked, .jstree-unchecked").addClass(b?"jstree-unchecked":d);if(g){if(j.children(":checkbox").length)j.children(":checkbox").addClass("jstree-real-checkbox");else{l=h.call(f,j);j.prepend("<input type='checkbox' class='jstree-real-checkbox' id='"+l[0]+"' name='"+l[0]+"' value='"+l[1]+"' />")}d==="jstree-checked"&&j.children(":checkbox").attr("checked",
"checked")}d==="jstree-checked"&&!b&&j.find("li").addClass("jstree-checked")})});if(!b){a.length===1&&a.is("li")&&this._repair_state(a);a.is("li")?a.each(function(){f._repair_state(this)}):a.find("> ul > li").each(function(){f._repair_state(this)});a.find(".jstree-checked").parent().parent().each(function(){f._repair_state(this)})}}},change_state:function(a,d){a=this._get_node(a);var f=false,e=this._get_settings().checkbox.real_checkboxes;if(!a||a===-1)return false;d=d===false||d===true?d:a.hasClass("jstree-checked");
if(this._get_settings().checkbox.two_state)if(d){a.removeClass("jstree-checked").addClass("jstree-unchecked");e&&a.children(":checkbox").removeAttr("checked")}else{a.removeClass("jstree-unchecked").addClass("jstree-checked");e&&a.children(":checkbox").attr("checked","checked")}else{if(d){f=a.find("li").andSelf();if(!f.filter(".jstree-checked, .jstree-undetermined").length)return false;f.removeClass("jstree-checked jstree-undetermined").addClass("jstree-unchecked");e&&f.children(":checkbox").removeAttr("checked")}else{f=
a.find("li").andSelf();if(!f.filter(".jstree-unchecked, .jstree-undetermined").length)return false;f.removeClass("jstree-unchecked jstree-undetermined").addClass("jstree-checked");e&&f.children(":checkbox").attr("checked","checked");if(this.data.ui)this.data.ui.last_selected=a;this.data.checkbox.last_selected=a}a.parentsUntil(".jstree","li").each(function(){var b=c(this);if(d)if(b.children("ul").children("li.jstree-checked, li.jstree-undetermined").length){b.parentsUntil(".jstree","li").andSelf().removeClass("jstree-checked jstree-unchecked").addClass("jstree-undetermined");
e&&b.parentsUntil(".jstree","li").andSelf().children(":checkbox").removeAttr("checked");return false}else{b.removeClass("jstree-checked jstree-undetermined").addClass("jstree-unchecked");e&&b.children(":checkbox").removeAttr("checked")}else if(b.children("ul").children("li.jstree-unchecked, li.jstree-undetermined").length){b.parentsUntil(".jstree","li").andSelf().removeClass("jstree-checked jstree-unchecked").addClass("jstree-undetermined");e&&b.parentsUntil(".jstree","li").andSelf().children(":checkbox").removeAttr("checked");
return false}else{b.removeClass("jstree-unchecked jstree-undetermined").addClass("jstree-checked");e&&b.children(":checkbox").attr("checked","checked")}})}if(this.data.ui&&this.data.checkbox.noui)this.data.ui.selected=this.get_checked();this.__callback(a);return true},check_node:function(a){if(this.change_state(a,false)){a=this._get_node(a);if(this._get_settings().checkbox.checked_parent_open){var d=this;a.parents(".jstree-closed").each(function(){d.open_node(this,false,true)})}this.__callback({obj:a})}},
uncheck_node:function(a){this.change_state(a,true)&&this.__callback({obj:this._get_node(a)})},check_all:function(){var a=this;(this._get_settings().checkbox.two_state?this.get_container_ul().find("li"):this.get_container_ul().children("li")).each(function(){a.change_state(this,false)});this.__callback()},uncheck_all:function(){var a=this;(this._get_settings().checkbox.two_state?this.get_container_ul().find("li"):this.get_container_ul().children("li")).each(function(){a.change_state(this,true)});this.__callback()},
is_checked:function(a){a=this._get_node(a);return a.length?a.is(".jstree-checked"):false},get_checked:function(a,d){a=!a||a===-1?this.get_container():this._get_node(a);return d||this._get_settings().checkbox.two_state?a.find(".jstree-checked"):a.find("> ul > .jstree-checked, .jstree-undetermined > ul > .jstree-checked")},get_unchecked:function(a,d){a=!a||a===-1?this.get_container():this._get_node(a);return d||this._get_settings().checkbox.two_state?a.find(".jstree-unchecked"):a.find("> ul > .jstree-unchecked, .jstree-undetermined > ul > .jstree-unchecked")},
show_checkboxes:function(){this.get_container().children("ul").removeClass("jstree-no-checkboxes")},hide_checkboxes:function(){this.get_container().children("ul").addClass("jstree-no-checkboxes")},_repair_state:function(a){a=this._get_node(a);if(a.length){var d=this._get_settings().checkbox.real_checkboxes,f=a.find("> ul > .jstree-checked").length,e=a.find("> ul > .jstree-undetermined").length,b=a.find("> ul > li").length;if(b===0)a.hasClass("jstree-undetermined")&&this.change_state(a,false);else if(f===
0&&e===0)this.change_state(a,true);else if(f===b)this.change_state(a,false);else{a.parentsUntil(".jstree","li").andSelf().removeClass("jstree-checked jstree-unchecked").addClass("jstree-undetermined");d&&a.parentsUntil(".jstree","li").andSelf().children(":checkbox").removeAttr("checked")}}},reselect:function(){if(this.data.ui&&this.data.checkbox.noui){var a=this,d=this.data.ui.to_select;d=c.map(c.makeArray(d),function(f){return"#"+f.toString().replace(/^#/,"").replace(/\\\//g,"/").replace(/\//g,"\\/").replace(/\\\./g,
".").replace(/\./g,"\\.")});this.deselect_all();c.each(d,function(f,e){a.check_node(e)});this.__callback()}else this.__call_old()},save_loaded:function(){var a=this;this.data.core.to_load=[];this.get_container_ul().find("li.jstree-closed.jstree-undetermined").each(function(){this.id&&a.data.core.to_load.push("#"+this.id)})}}});c(function(){c.vakata.css.add_sheet({str:".jstree .jstree-real-checkbox { display:none; } ",title:"jstree"})})})(jQuery);(function(c){c.vakata.xslt=function(d,f,e){var b="",
g;if(document.recalc){g=document.createElement("xml");b=document.createElement("xml");g.innerHTML=d;b.innerHTML=f;c("body").append(g).append(b);setTimeout(function(h,j,l){return function(){l.call(null,h.transformNode(j.XMLDocument));setTimeout(function(i,k){return function(){c(i).remove();c(k).remove()}}(h,j),200)}}(g,b,e),100);return true}if(typeof window.DOMParser!=="undefined"&&typeof window.XMLHttpRequest!=="undefined"&&typeof window.XSLTProcessor==="undefined"){d=(new DOMParser).parseFromString(d,
"text/xml");f=(new DOMParser).parseFromString(f,"text/xml")}if(typeof window.DOMParser!=="undefined"&&typeof window.XMLHttpRequest!=="undefined"&&typeof window.XSLTProcessor!=="undefined"){g=new XSLTProcessor;b=c.isFunction(g.transformDocument)?typeof window.XMLSerializer!=="undefined":true;if(!b)return false;d=(new DOMParser).parseFromString(d,"text/xml");f=(new DOMParser).parseFromString(f,"text/xml");if(c.isFunction(g.transformDocument)){b=document.implementation.createDocument("","",null);g.transformDocument(d,
f,b,null);e.call(null,(new XMLSerializer).serializeToString(b))}else{g.importStylesheet(f);b=g.transformToFragment(d,document);e.call(null,c("<div />").append(b).html())}return true}return false};var a={nest:'<?xml version="1.0" encoding="utf-8" ?><xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" ><xsl:output method="html" encoding="utf-8" omit-xml-declaration="yes" standalone="no" indent="no" media-type="text/html" /><xsl:template match="/">\t<xsl:call-template name="nodes">\t\t<xsl:with-param name="node" select="/root" />\t</xsl:call-template></xsl:template><xsl:template name="nodes">\t<xsl:param name="node" />\t<ul>\t<xsl:for-each select="$node/item">\t\t<xsl:variable name="children" select="count(./item) &gt; 0" />\t\t<li>\t\t\t<xsl:attribute name="class">\t\t\t\t<xsl:if test="position() = last()">jstree-last </xsl:if>\t\t\t\t<xsl:choose>\t\t\t\t\t<xsl:when test="@state = \'open\'">jstree-open </xsl:when>\t\t\t\t\t<xsl:when test="$children or @hasChildren or @state = \'closed\'">jstree-closed </xsl:when>\t\t\t\t\t<xsl:otherwise>jstree-leaf </xsl:otherwise>\t\t\t\t</xsl:choose>\t\t\t\t<xsl:value-of select="@class" />\t\t\t</xsl:attribute>\t\t\t<xsl:for-each select="@*">\t\t\t\t<xsl:if test="name() != \'class\' and name() != \'state\' and name() != \'hasChildren\'">\t\t\t\t\t<xsl:attribute name="{name()}"><xsl:value-of select="." /></xsl:attribute>\t\t\t\t</xsl:if>\t\t\t</xsl:for-each>\t<ins class="jstree-icon"><xsl:text>&#xa0;</xsl:text></ins>\t\t\t<xsl:for-each select="content/name">\t\t\t\t<a>\t\t\t\t<xsl:attribute name="href">\t\t\t\t\t<xsl:choose>\t\t\t\t\t<xsl:when test="@href"><xsl:value-of select="@href" /></xsl:when>\t\t\t\t\t<xsl:otherwise>#</xsl:otherwise>\t\t\t\t\t</xsl:choose>\t\t\t\t</xsl:attribute>\t\t\t\t<xsl:attribute name="class"><xsl:value-of select="@lang" /> <xsl:value-of select="@class" /></xsl:attribute>\t\t\t\t<xsl:attribute name="style"><xsl:value-of select="@style" /></xsl:attribute>\t\t\t\t<xsl:for-each select="@*">\t\t\t\t\t<xsl:if test="name() != \'style\' and name() != \'class\' and name() != \'href\'">\t\t\t\t\t\t<xsl:attribute name="{name()}"><xsl:value-of select="." /></xsl:attribute>\t\t\t\t\t</xsl:if>\t\t\t\t</xsl:for-each>\t\t\t\t\t<ins>\t\t\t\t\t\t<xsl:attribute name="class">jstree-icon \t\t\t\t\t\t\t<xsl:if test="string-length(attribute::icon) > 0 and not(contains(@icon,\'/\'))"><xsl:value-of select="@icon" /></xsl:if>\t\t\t\t\t\t</xsl:attribute>\t\t\t\t\t\t<xsl:if test="string-length(attribute::icon) > 0 and contains(@icon,\'/\')"><xsl:attribute name="style">background:url(<xsl:value-of select="@icon" />) center center no-repeat;</xsl:attribute></xsl:if>\t\t\t\t\t\t<xsl:text>&#xa0;</xsl:text>\t\t\t\t\t</ins>\t\t\t\t\t<xsl:copy-of select="./child::node()" />\t\t\t\t</a>\t\t\t</xsl:for-each>\t\t\t<xsl:if test="$children or @hasChildren"><xsl:call-template name="nodes"><xsl:with-param name="node" select="current()" /></xsl:call-template></xsl:if>\t\t</li>\t</xsl:for-each>\t</ul></xsl:template></xsl:stylesheet>',
flat:'<?xml version="1.0" encoding="utf-8" ?><xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" ><xsl:output method="html" encoding="utf-8" omit-xml-declaration="yes" standalone="no" indent="no" media-type="text/xml" /><xsl:template match="/">\t<ul>\t<xsl:for-each select="//item[not(@parent_id) or @parent_id=0 or not(@parent_id = //item/@id)]">\t\t<xsl:call-template name="nodes">\t\t\t<xsl:with-param name="node" select="." />\t\t\t<xsl:with-param name="is_last" select="number(position() = last())" />\t\t</xsl:call-template>\t</xsl:for-each>\t</ul></xsl:template><xsl:template name="nodes">\t<xsl:param name="node" />\t<xsl:param name="is_last" />\t<xsl:variable name="children" select="count(//item[@parent_id=$node/attribute::id]) &gt; 0" />\t<li>\t<xsl:attribute name="class">\t\t<xsl:if test="$is_last = true()">jstree-last </xsl:if>\t\t<xsl:choose>\t\t\t<xsl:when test="@state = \'open\'">jstree-open </xsl:when>\t\t\t<xsl:when test="$children or @hasChildren or @state = \'closed\'">jstree-closed </xsl:when>\t\t\t<xsl:otherwise>jstree-leaf </xsl:otherwise>\t\t</xsl:choose>\t\t<xsl:value-of select="@class" />\t</xsl:attribute>\t<xsl:for-each select="@*">\t\t<xsl:if test="name() != \'parent_id\' and name() != \'hasChildren\' and name() != \'class\' and name() != \'state\'">\t\t<xsl:attribute name="{name()}"><xsl:value-of select="." /></xsl:attribute>\t\t</xsl:if>\t</xsl:for-each>\t<ins class="jstree-icon"><xsl:text>&#xa0;</xsl:text></ins>\t<xsl:for-each select="content/name">\t\t<a>\t\t<xsl:attribute name="href">\t\t\t<xsl:choose>\t\t\t<xsl:when test="@href"><xsl:value-of select="@href" /></xsl:when>\t\t\t<xsl:otherwise>#</xsl:otherwise>\t\t\t</xsl:choose>\t\t</xsl:attribute>\t\t<xsl:attribute name="class"><xsl:value-of select="@lang" /> <xsl:value-of select="@class" /></xsl:attribute>\t\t<xsl:attribute name="style"><xsl:value-of select="@style" /></xsl:attribute>\t\t<xsl:for-each select="@*">\t\t\t<xsl:if test="name() != \'style\' and name() != \'class\' and name() != \'href\'">\t\t\t\t<xsl:attribute name="{name()}"><xsl:value-of select="." /></xsl:attribute>\t\t\t</xsl:if>\t\t</xsl:for-each>\t\t\t<ins>\t\t\t\t<xsl:attribute name="class">jstree-icon \t\t\t\t\t<xsl:if test="string-length(attribute::icon) > 0 and not(contains(@icon,\'/\'))"><xsl:value-of select="@icon" /></xsl:if>\t\t\t\t</xsl:attribute>\t\t\t\t<xsl:if test="string-length(attribute::icon) > 0 and contains(@icon,\'/\')"><xsl:attribute name="style">background:url(<xsl:value-of select="@icon" />) center center no-repeat;</xsl:attribute></xsl:if>\t\t\t\t<xsl:text>&#xa0;</xsl:text>\t\t\t</ins>\t\t\t<xsl:copy-of select="./child::node()" />\t\t</a>\t</xsl:for-each>\t<xsl:if test="$children">\t\t<ul>\t\t<xsl:for-each select="//item[@parent_id=$node/attribute::id]">\t\t\t<xsl:call-template name="nodes">\t\t\t\t<xsl:with-param name="node" select="." />\t\t\t\t<xsl:with-param name="is_last" select="number(position() = last())" />\t\t\t</xsl:call-template>\t\t</xsl:for-each>\t\t</ul>\t</xsl:if>\t</li></xsl:template></xsl:stylesheet>'};
c.jstree.plugin("xml_data",{defaults:{data:false,ajax:false,xsl:"flat",clean_node:false,correct_state:true,get_skip_empty:false},_fn:{load_node:function(d,f,e){var b=this;this.load_node_xml(d,function(){b.__callback({obj:b._get_node(d)});f.call(this)},e)},_is_loaded:function(d){var f=this._get_settings().xml_data;d=this._get_node(d);return d==-1||!d||!f.ajax&&!c.isFunction(f.data)||d.is(".jstree-open, .jstree-leaf")||d.children("ul").children("li").size()>0},load_node_xml:function(d,f,e){var b=this.get_settings().xml_data,
g=function(){},h=function(){};if((d=this._get_node(d))&&d!==-1)if(d.data("jstree-is-loading"))return;else d.data("jstree-is-loading",true);switch(true){case !b.data&&!b.ajax:throw"Neither data nor ajax settings supplied.";case c.isFunction(b.data):b.data.call(this,d,c.proxy(function(j){this.parse_xml(j,c.proxy(function(l){if(l){l=l.replace(/ ?xmlns="[^"]*"/ig,"");if(l.length>10){l=c(l);if(d===-1||!d)this.get_container().children("ul").empty().append(l.children());else{d.children("a.jstree-loading").removeClass("jstree-loading");
d.append(l);d.removeData("jstree-is-loading")}b.clean_node&&this.clean_node(d);f&&f.call(this)}else if(d&&d!==-1){d.children("a.jstree-loading").removeClass("jstree-loading");d.removeData("jstree-is-loading");if(b.correct_state){this.correct_state(d);f&&f.call(this)}}else if(b.correct_state){this.get_container().children("ul").empty();f&&f.call(this)}}},this))},this));break;case !!b.data&&!b.ajax||!!b.data&&!!b.ajax&&(!d||d===-1):if(!d||d==-1)this.parse_xml(b.data,c.proxy(function(j){if(j){j=j.replace(/ ?xmlns="[^"]*"/ig,
"");if(j.length>10){j=c(j);this.get_container().children("ul").empty().append(j.children());b.clean_node&&this.clean_node(d);f&&f.call(this)}}else if(b.correct_state){this.get_container().children("ul").empty();f&&f.call(this)}},this));break;case !b.data&&!!b.ajax||!!b.data&&!!b.ajax&&d&&d!==-1:g=function(j,l,i){var k=this.get_settings().xml_data.ajax.error;k&&k.call(this,j,l,i);if(d!==-1&&d.length){d.children("a.jstree-loading").removeClass("jstree-loading");d.removeData("jstree-is-loading");l===
"success"&&b.correct_state&&this.correct_state(d)}else l==="success"&&b.correct_state&&this.get_container().children("ul").empty();e&&e.call(this)};h=function(j,l,i){j=i.responseText;var k=this.get_settings().xml_data.ajax.success;if(k)j=k.call(this,j,l,i)||j;if(j===""||j&&j.toString&&j.toString().replace(/^[\s\n]+$/,"")==="")return g.call(this,i,l,"");this.parse_xml(j,c.proxy(function(m){if(m){m=m.replace(/ ?xmlns="[^"]*"/ig,"");if(m.length>10){m=c(m);if(d===-1||!d)this.get_container().children("ul").empty().append(m.children());
else{d.children("a.jstree-loading").removeClass("jstree-loading");d.append(m);d.removeData("jstree-is-loading")}b.clean_node&&this.clean_node(d);f&&f.call(this)}else if(d&&d!==-1){d.children("a.jstree-loading").removeClass("jstree-loading");d.removeData("jstree-is-loading");if(b.correct_state){this.correct_state(d);f&&f.call(this)}}else if(b.correct_state){this.get_container().children("ul").empty();f&&f.call(this)}}},this))};b.ajax.context=this;b.ajax.error=g;b.ajax.success=h;if(!b.ajax.dataType)b.ajax.dataType=
"xml";if(c.isFunction(b.ajax.url))b.ajax.url=b.ajax.url.call(this,d);if(c.isFunction(b.ajax.data))b.ajax.data=b.ajax.data.call(this,d);c.ajax(b.ajax)}},parse_xml:function(d,f){var e=this._get_settings().xml_data;c.vakata.xslt(d,a[e.xsl],f)},get_xml:function(d,f,e,b,g){var h="",j=this._get_settings(),l=this,i,k,m,o,n;d||(d="flat");g||(g=0);f=this._get_node(f);if(!f||f===-1)f=this.get_container().find("> ul > li");e=c.isArray(e)?e:["id","class"];!g&&this.data.types&&c.inArray(j.types.type_attr,e)===
-1&&e.push(j.types.type_attr);b=c.isArray(b)?b:[];g||(h+="<root>");f.each(function(){h+="<item";m=c(this);c.each(e,function(p,q){var s=m.attr(q);if(!j.xml_data.get_skip_empty||typeof s!=="undefined")h+=" "+q+'="'+(" "+(s||"")).replace(/ jstree[^ ]*/ig,"").replace(/\s+$/ig," ").replace(/^ /,"").replace(/ $/,"")+'"'});if(m.hasClass("jstree-open"))h+=' state="open"';if(m.hasClass("jstree-closed"))h+=' state="closed"';if(d==="flat")h+=' parent_id="'+g+'"';h+=">";h+="<content>";o=m.children("a");o.each(function(){i=
c(this);n=false;h+="<name";c.inArray("languages",j.plugins)!==-1&&c.each(j.languages,function(p,q){if(i.hasClass(q)){h+=' lang="'+q+'"';n=q;return false}});b.length&&c.each(b,function(p,q){var s=i.attr(q);if(!j.xml_data.get_skip_empty||typeof s!=="undefined")h+=" "+q+'="'+(" "+s||"").replace(/ jstree[^ ]*/ig,"").replace(/\s+$/ig," ").replace(/^ /,"").replace(/ $/,"")+'"'});if(i.children("ins").get(0).className.replace(/jstree[^ ]*|$/ig,"").replace(/^\s+$/ig,"").length)h+=' icon="'+i.children("ins").get(0).className.replace(/jstree[^ ]*|$/ig,
"").replace(/\s+$/ig," ").replace(/^ /,"").replace(/ $/,"")+'"';if(i.children("ins").get(0).style.backgroundImage.length)h+=' icon="'+i.children("ins").get(0).style.backgroundImage.replace("url(","").replace(")","").replace(/'/ig,"").replace(/"/ig,"")+'"';h+=">";h+="<![CDATA["+l.get_text(i,n)+"]]\>";h+="</name>"});h+="</content>";k=m[0].id||true;m=m.find("> ul > li");k=m.length?l.get_xml(d,m,e,b,k):"";if(d=="nest")h+=k;h+="</item>";if(d=="flat")h+=k});g||(h+="</root>");return h}}})})(jQuery);(function(c){c.expr[":"].jstree_contains=
function(a,d,f){return(a.textContent||a.innerText||"").toLowerCase().indexOf(f[3].toLowerCase())>=0};c.expr[":"].jstree_title_contains=function(a,d,f){return(a.getAttribute("title")||"").toLowerCase().indexOf(f[3].toLowerCase())>=0};c.jstree.plugin("search",{__init:function(){this.data.search.str="";this.data.search.result=c();this._get_settings().search.show_only_matches&&this.get_container().bind("search.jstree",function(a,d){c(this).children("ul").find("li").hide().removeClass("jstree-last");d.rslt.nodes.parentsUntil(".jstree").andSelf().show().filter("ul").each(function(){c(this).children("li:visible").eq(-1).addClass("jstree-last")})}).bind("clear_search.jstree",
function(){c(this).children("ul").find("li").css("display","").end().jstree("clean_node",-1)})},defaults:{ajax:false,search_method:"jstree_contains",show_only_matches:false},_fn:{search:function(a,d){if(c.trim(a)==="")this.clear_search();else{var f=this.get_settings().search,e=this,b=function(){},g=function(){};this.data.search.str=a;if(!d&&f.ajax!==false&&this.get_container_ul().find("li.jstree-closed:not(:has(ul)):eq(0)").length>0){this.search.supress_callback=true;b=function(){};g=function(h,j,
l){var i=this.get_settings().search.ajax.success;if(i)h=i.call(this,h,j,l)||h;this.data.search.to_open=h;this._search_open()};f.ajax.context=this;f.ajax.error=b;f.ajax.success=g;if(c.isFunction(f.ajax.url))f.ajax.url=f.ajax.url.call(this,a);if(c.isFunction(f.ajax.data))f.ajax.data=f.ajax.data.call(this,a);if(!f.ajax.data)f.ajax.data={search_string:a};if(!f.ajax.dataType||/^json/.exec(f.ajax.dataType))f.ajax.dataType="json";c.ajax(f.ajax)}else{this.data.search.result.length&&this.clear_search();this.data.search.result=
this.get_container().find("a"+(this.data.languages?"."+this.get_lang():"")+":"+f.search_method+"("+this.data.search.str+")");this.data.search.result.addClass("jstree-search").parent().parents(".jstree-closed").each(function(){e.open_node(this,false,true)});this.__callback({nodes:this.data.search.result,str:a})}}},clear_search:function(){this.data.search.result.removeClass("jstree-search");this.__callback(this.data.search.result);this.data.search.result=c()},_search_open:function(){var a=this,d=true,
f=[],e=[];if(this.data.search.to_open.length){c.each(this.data.search.to_open,function(b,g){if(g=="#")return true;c(g).length&&c(g).is(".jstree-closed")?f.push(g):e.push(g)});if(f.length){this.data.search.to_open=e;c.each(f,function(b,g){a.open_node(g,function(){a._search_open(true)})});d=false}}d&&this.search(this.data.search.str,true)}}})})(jQuery);(function(c){c.vakata.context={hide_on_mouseleave:false,cnt:c("<div id='vakata-contextmenu' />"),vis:false,tgt:false,par:false,func:false,data:false,
rtl:false,show:function(a,d,f,e,b,g,h){c.vakata.context.rtl=!!h;if(a=c.vakata.context.parse(a)){c.vakata.context.vis=true;c.vakata.context.tgt=d;c.vakata.context.par=g||d||null;c.vakata.context.data=b||null;c.vakata.context.cnt.html(a).css({visibility:"hidden",display:"block",left:0,top:0});c.vakata.context.hide_on_mouseleave&&c.vakata.context.cnt.one("mouseleave",function(){c.vakata.context.hide()});b=c.vakata.context.cnt.height();g=c.vakata.context.cnt.width();if(f+g>c(document).width()){f=c(document).width()-
(g+5);c.vakata.context.cnt.find("li > ul").addClass("right")}if(e+b>c(document).height()){e-=b+d[0].offsetHeight;c.vakata.context.cnt.find("li > ul").addClass("bottom")}c.vakata.context.cnt.css({left:f,top:e}).find("li:has(ul)").bind("mouseenter",function(){var j=c(document).width(),l=c(document).height(),i=c(this).children("ul").show();j!==c(document).width()&&i.toggleClass("right");l!==c(document).height()&&i.toggleClass("bottom")}).bind("mouseleave",function(){c(this).children("ul").hide()}).end().css({visibility:"visible"}).show();
c(document).triggerHandler("context_show.vakata")}},hide:function(){c.vakata.context.vis=false;c.vakata.context.cnt.attr("class","").css({visibility:"hidden"});c(document).triggerHandler("context_hide.vakata")},parse:function(a,d){if(!a)return false;var f="",e=false,b=true;if(!d)c.vakata.context.func={};f+="<ul>";c.each(a,function(g,h){if(!h)return true;c.vakata.context.func[g]=h.action;if(!b&&h.separator_before)f+="<li class='vakata-separator vakata-separator-before'></li>";b=false;f+="<li class='"+
(h._class||"")+(h._disabled?" jstree-contextmenu-disabled ":"")+"'><ins ";if(h.icon&&h.icon.indexOf("/")===-1)f+=" class='"+h.icon+"' ";if(h.icon&&h.icon.indexOf("/")!==-1)f+=" style='background:url("+h.icon+") center center no-repeat;' ";f+=">&#160;</ins><a href='#' rel='"+g+"'>";if(h.submenu)f+="<span style='float:"+(c.vakata.context.rtl?"left":"right")+";'>&raquo;</span>";f+=h.label+"</a>";if(h.submenu)if(e=c.vakata.context.parse(h.submenu,true))f+=e;f+="</li>";if(h.separator_after){f+="<li class='vakata-separator vakata-separator-after'></li>";
b=true}});f=f.replace(/<li class\='vakata-separator vakata-separator-after'\><\/li\>$/,"");f+="</ul>";c(document).triggerHandler("context_parse.vakata");return f.length>10?f:false},exec:function(a){if(c.isFunction(c.vakata.context.func[a])){c.vakata.context.func[a].call(c.vakata.context.data,c.vakata.context.par);return true}else return false}};c(function(){c.vakata.css.add_sheet({str:"#vakata-contextmenu { display:block; visibility:hidden; left:0; top:-200px; position:absolute; margin:0; padding:0; min-width:180px; background:#ebebeb; border:1px solid silver; z-index:10000; *width:180px; } #vakata-contextmenu ul { min-width:180px; *width:180px; } #vakata-contextmenu ul, #vakata-contextmenu li { margin:0; padding:0; list-style-type:none; display:block; } #vakata-contextmenu li { line-height:20px; min-height:20px; position:relative; padding:0px; } #vakata-contextmenu li a { padding:1px 6px; line-height:17px; display:block; text-decoration:none; margin:1px 1px 0 1px; } #vakata-contextmenu li ins { float:left; width:16px; height:16px; text-decoration:none; margin-right:2px; } #vakata-contextmenu li a:hover, #vakata-contextmenu li.vakata-hover > a { background:gray; color:white; } #vakata-contextmenu li ul { display:none; position:absolute; top:-2px; left:100%; background:#ebebeb; border:1px solid gray; } #vakata-contextmenu .right { right:100%; left:auto; } #vakata-contextmenu .bottom { bottom:-1px; top:auto; } #vakata-contextmenu li.vakata-separator { min-height:0; height:1px; line-height:1px; font-size:1px; overflow:hidden; margin:0 2px; background:silver; /* border-top:1px solid #fefefe; */ padding:0; } ",
title:"vakata"});c.vakata.context.cnt.delegate("a","click",function(a){a.preventDefault()}).delegate("a","mouseup",function(){!c(this).parent().hasClass("jstree-contextmenu-disabled")&&c.vakata.context.exec(c(this).attr("rel"))?c.vakata.context.hide():c(this).blur()}).delegate("a","mouseover",function(){c.vakata.context.cnt.find(".vakata-hover").removeClass("vakata-hover")}).appendTo("body");c(document).bind("mousedown",function(a){c.vakata.context.vis&&!c.contains(c.vakata.context.cnt[0],a.target)&&
c.vakata.context.hide()});typeof c.hotkeys!=="undefined"&&c(document).bind("keydown","up",function(a){if(c.vakata.context.vis){var d=c.vakata.context.cnt.find("ul:visible").last().children(".vakata-hover").removeClass("vakata-hover").prevAll("li:not(.vakata-separator)").first();d.length||(d=c.vakata.context.cnt.find("ul:visible").last().children("li:not(.vakata-separator)").last());d.addClass("vakata-hover");a.stopImmediatePropagation();a.preventDefault()}}).bind("keydown","down",function(a){if(c.vakata.context.vis){var d=
c.vakata.context.cnt.find("ul:visible").last().children(".vakata-hover").removeClass("vakata-hover").nextAll("li:not(.vakata-separator)").first();d.length||(d=c.vakata.context.cnt.find("ul:visible").last().children("li:not(.vakata-separator)").first());d.addClass("vakata-hover");a.stopImmediatePropagation();a.preventDefault()}}).bind("keydown","right",function(a){if(c.vakata.context.vis){c.vakata.context.cnt.find(".vakata-hover").children("ul").show().children("li:not(.vakata-separator)").removeClass("vakata-hover").first().addClass("vakata-hover");
a.stopImmediatePropagation();a.preventDefault()}}).bind("keydown","left",function(a){if(c.vakata.context.vis){c.vakata.context.cnt.find(".vakata-hover").children("ul").hide().children(".vakata-separator").removeClass("vakata-hover");a.stopImmediatePropagation();a.preventDefault()}}).bind("keydown","esc",function(a){c.vakata.context.hide();a.preventDefault()}).bind("keydown","space",function(a){c.vakata.context.cnt.find(".vakata-hover").last().children("a").click();a.preventDefault()})});c.jstree.plugin("contextmenu",
{__init:function(){this.get_container().delegate("a","contextmenu.jstree",c.proxy(function(a){a.preventDefault();c(a.currentTarget).hasClass("jstree-loading")||this.show_contextmenu(a.currentTarget,a.pageX,a.pageY)},this)).delegate("a","click.jstree",c.proxy(function(){this.data.contextmenu&&c.vakata.context.hide()},this)).bind("destroy.jstree",c.proxy(function(){this.data.contextmenu&&c.vakata.context.hide()},this));c(document).bind("context_hide.vakata",c.proxy(function(){this.data.contextmenu=
false},this))},defaults:{select_node:false,show_at_node:true,items:{create:{separator_before:false,separator_after:true,label:"Create",action:function(a){this.create(a)}},rename:{separator_before:false,separator_after:false,label:"Rename",action:function(a){this.rename(a)}},remove:{separator_before:false,icon:false,separator_after:false,label:"Delete",action:function(a){this.is_selected(a)?this.remove():this.remove(a)}},ccp:{separator_before:true,icon:false,separator_after:false,label:"Edit",action:false,
submenu:{cut:{separator_before:false,separator_after:false,label:"Cut",action:function(a){this.cut(a)}},copy:{separator_before:false,icon:false,separator_after:false,label:"Copy",action:function(a){this.copy(a)}},paste:{separator_before:false,icon:false,separator_after:false,label:"Paste",action:function(a){this.paste(a)}}}}}},_fn:{show_contextmenu:function(a,d,f){a=this._get_node(a);var e=this.get_settings().contextmenu,b=a.children("a:visible:eq(0)"),g=false;g=false;if(e.select_node&&this.data.ui&&
!this.is_selected(a)){this.deselect_all();this.select_node(a,true)}if(e.show_at_node||typeof d==="undefined"||typeof f==="undefined"){g=b.offset();d=g.left;f=g.top+this.data.core.li_height}g=a.data("jstree")&&a.data("jstree").contextmenu?a.data("jstree").contextmenu:e.items;if(c.isFunction(g))g=g.call(this,a);this.data.contextmenu=true;c.vakata.context.show(g,b,d,f,this,a,this._get_settings().core.rtl);this.data.themes&&c.vakata.context.cnt.attr("class","jstree-"+this.data.themes.theme+"-context")}}})})(jQuery);
(function(c){c.jstree.plugin("types",{__init:function(){var a=this._get_settings().types;this.data.types.attach_to=[];this.get_container().bind("init.jstree",c.proxy(function(){var d=a.type_attr,f="",e=this;c.each(a.types,function(b,g){c.each(g,function(h){/^(max_depth|max_children|icon|valid_children)$/.test(h)||e.data.types.attach_to.push(h)});if(!g.icon)return true;if(g.icon.image||g.icon.position){f+=b=="default"?".jstree-"+e.get_index()+" a > .jstree-icon { ":".jstree-"+e.get_index()+" li["+
d+'="'+b+'"] > a > .jstree-icon { ';if(g.icon.image)f+=" background-image:url("+g.icon.image+"); ";f+=g.icon.position?" background-position:"+g.icon.position+"; ":" background-position:0 0; ";f+="} "}});f!==""&&c.vakata.css.add_sheet({str:f,title:"jstree-types"})},this)).bind("before.jstree",c.proxy(function(d,f){var e,b;if((e=(e=this._get_settings().types.use_data?this._get_node(f.args[0]):false)&&e!==-1&&e.length?e.data("jstree"):false)&&e.types&&e.types[f.func]===false){d.stopImmediatePropagation();
return false}if(c.inArray(f.func,this.data.types.attach_to)!==-1)if(!(!f.args[0]||!f.args[0].tagName&&!f.args[0].jquery)){e=this._get_settings().types.types;b=this._get_type(f.args[0]);if((e[b]&&typeof e[b][f.func]!=="undefined"||e["default"]&&typeof e["default"][f.func]!=="undefined")&&this._check(f.func,f.args[0])===false){d.stopImmediatePropagation();return false}}},this));r&&this.get_container().bind("load_node.jstree set_type.jstree",c.proxy(function(d,f){var e=f&&f.rslt&&f.rslt.obj&&f.rslt.obj!==
-1?this._get_node(f.rslt.obj).parent():this.get_container_ul(),b=false,g=this._get_settings().types;c.each(g.types,function(h,j){if(j.icon&&(j.icon.image||j.icon.position)){b=h==="default"?e.find("li > a > .jstree-icon"):e.find("li["+g.type_attr+"='"+h+"'] > a > .jstree-icon");j.icon.image&&b.css("backgroundImage","url("+j.icon.image+")");b.css("backgroundPosition",j.icon.position||"0 0")}})},this))},defaults:{max_children:-1,max_depth:-1,valid_children:"all",use_data:false,type_attr:"rel",types:{"default":{max_children:-1,
max_depth:-1,valid_children:"all"}}},_fn:{_types_notify:function(a,d){d.type&&this._get_settings().types.use_data&&this.set_type(d.type,a)},_get_type:function(a){a=this._get_node(a);return!a||!a.length?false:a.attr(this._get_settings().types.type_attr)||"default"},set_type:function(a,d){d=this._get_node(d);var f=!d.length||!a?false:d.attr(this._get_settings().types.type_attr,a);f&&this.__callback({obj:d,type:a});return f},_check:function(a,d,f){d=this._get_node(d);var e=false,b=this._get_type(d),
g=0,h=this,j=this._get_settings().types,l=false;if(d===-1)if(j[a])e=j[a];else return;else{if(b===false)return;if((l=j.use_data?d.data("jstree"):false)&&l.types&&typeof l.types[a]!=="undefined")e=l.types[a];else if(j.types[b]&&typeof j.types[b][a]!=="undefined")e=j.types[b][a];else if(j.types["default"]&&typeof j.types["default"][a]!=="undefined")e=j.types["default"][a]}if(c.isFunction(e))e=e.call(this,d);a==="max_depth"&&d!==-1&&f!==false&&j.max_depth!==-2&&e!==0&&d.children("a:eq(0)").parentsUntil(".jstree",
"li").each(function(i){if(j.max_depth!==-1&&j.max_depth-(i+1)<=0){e=0;return false}g=i===0?e:h._check(a,this,false);if(g!==-1&&g-(i+1)<=0){e=0;return false}if(g>=0&&(g-(i+1)<e||e<0))e=g-(i+1);if(j.max_depth>=0&&(j.max_depth-(i+1)<e||e<0))e=j.max_depth-(i+1)});return e},check_move:function(){if(!this.__call_old())return false;var a=this._get_move(),d=a.rt._get_settings().types,f=a.rt._check("max_children",a.cr),e=a.rt._check("max_depth",a.cr),b=a.rt._check("valid_children",a.cr),g=0,h=1;if(b==="none")return false;
if(c.isArray(b)&&a.ot&&a.ot._get_type){a.o.each(function(){if(c.inArray(a.ot._get_type(this),b)===-1)return h=false});if(h===false)return false}if(d.max_children!==-2&&f!==-1){g=a.cr===-1?this.get_container().find("> ul > li").not(a.o).length:a.cr.find("> ul > li").not(a.o).length;if(g+a.o.length>f)return false}if(d.max_depth!==-2&&e!==-1){h=0;if(e===0)return false;if(typeof a.o.d==="undefined"){for(d=a.o;d.length>0;){d=d.find("> ul > li");h++}a.o.d=h}if(e-a.o.d<0)return false}return true},create_node:function(a,
d,f,e,b,g){if(!g&&(b||this._is_loaded(a))){var h=typeof d=="string"&&d.match(/^before|after$/i)&&a!==-1?this._get_parent(a):this._get_node(a),j=this._get_settings().types,l=this._check("max_children",h),i=this._check("max_depth",h),k=this._check("valid_children",h);if(typeof f==="string")f={data:f};f||(f={});if(k==="none")return false;if(c.isArray(k))if(!f.attr||!f.attr[j.type_attr]){if(!f.attr)f.attr={};f.attr[j.type_attr]=k[0]}else if(c.inArray(f.attr[j.type_attr],k)===-1)return false;if(j.max_children!==
-2&&l!==-1){h=h===-1?this.get_container().children("> ul > li").length:h.children("> ul > li").length;if(h+1>l)return false}if(j.max_depth!==-2&&i!==-1&&i-1<0)return false}return this.__call_old(true,a,d,f,e,b,g)}}})})(jQuery);(function(c){c.jstree.plugin("html_data",{__init:function(){this.data.html_data.original_container_html=this.get_container().find(" > ul > li").clone(true);this.data.html_data.original_container_html.find("li").andSelf().contents().filter(function(){return this.nodeType==3}).remove()},
defaults:{data:false,ajax:false,correct_state:true},_fn:{load_node:function(a,d,f){var e=this;this.load_node_html(a,function(){e.__callback({obj:e._get_node(a)});d.call(this)},f)},_is_loaded:function(a){a=this._get_node(a);return a==-1||!a||!this._get_settings().html_data.ajax&&!c.isFunction(this._get_settings().html_data.data)||a.is(".jstree-open, .jstree-leaf")||a.children("ul").children("li").size()>0},load_node_html:function(a,d,f){var e,b=this.get_settings().html_data,g=function(){};e=function(){};
if((a=this._get_node(a))&&a!==-1)if(a.data("jstree-is-loading"))return;else a.data("jstree-is-loading",true);switch(true){case c.isFunction(b.data):b.data.call(this,a,c.proxy(function(h){if(h&&h!==""&&h.toString&&h.toString().replace(/^[\s\n]+$/,"")!==""){h=c(h);h.is("ul")||(h=c("<ul />").append(h));if(a==-1||!a)this.get_container().children("ul").empty().append(h.children()).find("li, a").filter(function(){return!this.firstChild||!this.firstChild.tagName||this.firstChild.tagName!=="INS"}).prepend("<ins class='jstree-icon'>&#160;</ins>").end().filter("a").children("ins:first-child").not(".jstree-icon").addClass("jstree-icon");
else{a.children("a.jstree-loading").removeClass("jstree-loading");a.append(h).children("ul").find("li, a").filter(function(){return!this.firstChild||!this.firstChild.tagName||this.firstChild.tagName!=="INS"}).prepend("<ins class='jstree-icon'>&#160;</ins>").end().filter("a").children("ins:first-child").not(".jstree-icon").addClass("jstree-icon");a.removeData("jstree-is-loading")}this.clean_node(a);d&&d.call(this)}else if(a&&a!==-1){a.children("a.jstree-loading").removeClass("jstree-loading");a.removeData("jstree-is-loading");
if(b.correct_state){this.correct_state(a);d&&d.call(this)}}else if(b.correct_state){this.get_container().children("ul").empty();d&&d.call(this)}},this));break;case !b.data&&!b.ajax:if(!a||a==-1){this.get_container().children("ul").empty().append(this.data.html_data.original_container_html).find("li, a").filter(function(){return!this.firstChild||!this.firstChild.tagName||this.firstChild.tagName!=="INS"}).prepend("<ins class='jstree-icon'>&#160;</ins>").end().filter("a").children("ins:first-child").not(".jstree-icon").addClass("jstree-icon");
this.clean_node()}d&&d.call(this);break;case !!b.data&&!b.ajax||!!b.data&&!!b.ajax&&(!a||a===-1):if(!a||a==-1){e=c(b.data);e.is("ul")||(e=c("<ul />").append(e));this.get_container().children("ul").empty().append(e.children()).find("li, a").filter(function(){return!this.firstChild||!this.firstChild.tagName||this.firstChild.tagName!=="INS"}).prepend("<ins class='jstree-icon'>&#160;</ins>").end().filter("a").children("ins:first-child").not(".jstree-icon").addClass("jstree-icon");this.clean_node()}d&&
d.call(this);break;case !b.data&&!!b.ajax||!!b.data&&!!b.ajax&&a&&a!==-1:a=this._get_node(a);g=function(h,j,l){var i=this.get_settings().html_data.ajax.error;i&&i.call(this,h,j,l);if(a!=-1&&a.length){a.children("a.jstree-loading").removeClass("jstree-loading");a.removeData("jstree-is-loading");j==="success"&&b.correct_state&&this.correct_state(a)}else j==="success"&&b.correct_state&&this.get_container().children("ul").empty();f&&f.call(this)};e=function(h,j,l){var i=this.get_settings().html_data.ajax.success;
if(i)h=i.call(this,h,j,l)||h;if(h===""||h&&h.toString&&h.toString().replace(/^[\s\n]+$/,"")==="")return g.call(this,l,j,"");if(h){h=c(h);h.is("ul")||(h=c("<ul />").append(h));if(a==-1||!a)this.get_container().children("ul").empty().append(h.children()).find("li, a").filter(function(){return!this.firstChild||!this.firstChild.tagName||this.firstChild.tagName!=="INS"}).prepend("<ins class='jstree-icon'>&#160;</ins>").end().filter("a").children("ins:first-child").not(".jstree-icon").addClass("jstree-icon");
else{a.children("a.jstree-loading").removeClass("jstree-loading");a.append(h).children("ul").find("li, a").filter(function(){return!this.firstChild||!this.firstChild.tagName||this.firstChild.tagName!=="INS"}).prepend("<ins class='jstree-icon'>&#160;</ins>").end().filter("a").children("ins:first-child").not(".jstree-icon").addClass("jstree-icon");a.removeData("jstree-is-loading")}this.clean_node(a);d&&d.call(this)}else if(a&&a!==-1){a.children("a.jstree-loading").removeClass("jstree-loading");a.removeData("jstree-is-loading");
if(b.correct_state){this.correct_state(a);d&&d.call(this)}}else if(b.correct_state){this.get_container().children("ul").empty();d&&d.call(this)}};b.ajax.context=this;b.ajax.error=g;b.ajax.success=e;if(!b.ajax.dataType)b.ajax.dataType="html";if(c.isFunction(b.ajax.url))b.ajax.url=b.ajax.url.call(this,a);if(c.isFunction(b.ajax.data))b.ajax.data=b.ajax.data.call(this,a);c.ajax(b.ajax)}}}});c.jstree.defaults.plugins.push("html_data")})(jQuery);(function(c){c.jstree.plugin("themeroller",{__init:function(){var a=
this._get_settings().themeroller;this.get_container().addClass("ui-widget-content").addClass("jstree-themeroller").delegate("a","mouseenter.jstree",function(d){c(d.currentTarget).hasClass("jstree-loading")||c(this).addClass(a.item_h)}).delegate("a","mouseleave.jstree",function(){c(this).removeClass(a.item_h)}).bind("init.jstree",c.proxy(function(d,f){f.inst.get_container().find("> ul > li > .jstree-loading > ins").addClass("ui-icon-refresh");this._themeroller(f.inst.get_container().find("> ul > li"))},
this)).bind("open_node.jstree create_node.jstree",c.proxy(function(d,f){this._themeroller(f.rslt.obj)},this)).bind("loaded.jstree refresh.jstree",c.proxy(function(){this._themeroller()},this)).bind("close_node.jstree",c.proxy(function(d,f){this._themeroller(f.rslt.obj)},this)).bind("delete_node.jstree",c.proxy(function(d,f){this._themeroller(f.rslt.parent)},this)).bind("correct_state.jstree",c.proxy(function(d,f){f.rslt.obj.children("ins.jstree-icon").removeClass(a.opened+" "+a.closed+" ui-icon").end().find("> a > ins.ui-icon").filter(function(){return this.className.toString().replace(a.item_clsd,
"").replace(a.item_open,"").replace(a.item_leaf,"").indexOf("ui-icon-")===-1}).removeClass(a.item_open+" "+a.item_clsd).addClass(a.item_leaf||"jstree-no-icon")},this)).bind("select_node.jstree",c.proxy(function(d,f){f.rslt.obj.children("a").addClass(a.item_a)},this)).bind("deselect_node.jstree deselect_all.jstree",c.proxy(function(){this.get_container().find("a."+a.item_a).removeClass(a.item_a).end().find("a.jstree-clicked").addClass(a.item_a)},this)).bind("dehover_node.jstree",c.proxy(function(d,
f){f.rslt.obj.children("a").removeClass(a.item_h)},this)).bind("hover_node.jstree",c.proxy(function(d,f){this.get_container().find("a."+a.item_h).not(f.rslt.obj).removeClass(a.item_h);f.rslt.obj.children("a").addClass(a.item_h)},this)).bind("move_node.jstree",c.proxy(function(d,f){this._themeroller(f.rslt.o);this._themeroller(f.rslt.op)},this))},__destroy:function(){var a=this._get_settings().themeroller,d=["ui-icon"];c.each(a,function(f,e){e=e.split(" ");if(e.length)d=d.concat(e)});this.get_container().removeClass("ui-widget-content").find("."+
d.join(", .")).removeClass(d.join(" "))},_fn:{_themeroller:function(a){var d=this._get_settings().themeroller;a=!a||a==-1?this.get_container_ul():this._get_node(a).parent();a.find("li.jstree-closed").children("ins.jstree-icon").removeClass(d.opened).addClass("ui-icon "+d.closed).end().children("a").addClass(d.item).children("ins.jstree-icon").addClass("ui-icon").filter(function(){return this.className.toString().replace(d.item_clsd,"").replace(d.item_open,"").replace(d.item_leaf,"").indexOf("ui-icon-")===
-1}).removeClass(d.item_leaf+" "+d.item_open).addClass(d.item_clsd||"jstree-no-icon").end().end().end().end().find("li.jstree-open").children("ins.jstree-icon").removeClass(d.closed).addClass("ui-icon "+d.opened).end().children("a").addClass(d.item).children("ins.jstree-icon").addClass("ui-icon").filter(function(){return this.className.toString().replace(d.item_clsd,"").replace(d.item_open,"").replace(d.item_leaf,"").indexOf("ui-icon-")===-1}).removeClass(d.item_leaf+" "+d.item_clsd).addClass(d.item_open||
"jstree-no-icon").end().end().end().end().find("li.jstree-leaf").children("ins.jstree-icon").removeClass(d.closed+" ui-icon "+d.opened).end().children("a").addClass(d.item).children("ins.jstree-icon").addClass("ui-icon").filter(function(){return this.className.toString().replace(d.item_clsd,"").replace(d.item_open,"").replace(d.item_leaf,"").indexOf("ui-icon-")===-1}).removeClass(d.item_clsd+" "+d.item_open).addClass(d.item_leaf||"jstree-no-icon")}},defaults:{opened:"ui-icon-triangle-1-se",closed:"ui-icon-triangle-1-e",
item:"ui-state-default",item_h:"ui-state-hover",item_a:"ui-state-active",item_open:"ui-icon-folder-open",item_clsd:"ui-icon-folder-collapsed",item_leaf:"ui-icon-document"}});c(function(){c.vakata.css.add_sheet({str:".jstree-themeroller .ui-icon { overflow:visible; } .jstree-themeroller a { padding:0 2px; } .jstree-themeroller .jstree-no-icon { display:none; }",title:"jstree"})})})(jQuery);(function(c){c.jstree.plugin("unique",{__init:function(){this.get_container().bind("before.jstree",c.proxy(function(a,
d){var f=[],e=true,b;if(d.func=="move_node")if(d.args[4]===true)if(d.args[0].o&&d.args[0].o.length){d.args[0].o.children("a").each(function(){f.push(c(this).text().replace(/^\s+/g,""))});e=this._check_unique(f,d.args[0].np.find("> ul > li").not(d.args[0].o),"move_node")}if(d.func=="create_node")if(d.args[4]||this._is_loaded(d.args[0])){e=this._get_node(d.args[0]);if(d.args[1]&&(d.args[1]==="before"||d.args[1]==="after")){e=this._get_parent(d.args[0]);if(!e||e===-1)e=this.get_container()}if(typeof d.args[2]===
"string")f.push(d.args[2]);else!d.args[2]||!d.args[2].data?f.push(this._get_string("new_node")):f.push(d.args[2].data);e=this._check_unique(f,e.find("> ul > li"),"create_node")}if(d.func=="rename_node"){f.push(d.args[1]);b=this._get_node(d.args[0]);e=this._get_parent(b);if(!e||e===-1)e=this.get_container();e=this._check_unique(f,e.find("> ul > li").not(b),"rename_node")}if(!e){a.stopPropagation();return false}},this))},defaults:{error_callback:c.noop},_fn:{_check_unique:function(a,d,f){var e=[];d.children("a").each(function(){e.push(c(this).text().replace(/^\s+/g,
""))});if(!e.length||!a.length)return true;e=e.sort().join(",,").replace(/(,|^)([^,]+)(,,\2)+(,|$)/g,"$1$2$4").replace(/,,+/g,",").replace(/,$/,"").split(",");if(e.length+a.length!=e.concat(a).sort().join(",,").replace(/(,|^)([^,]+)(,,\2)+(,|$)/g,"$1$2$4").replace(/,,+/g,",").replace(/,$/,"").split(",").length){this._get_settings().unique.error_callback.call(null,a,d,f);return false}return true},check_move:function(){if(!this.__call_old())return false;var a=this._get_move(),d=[];if(a.o&&a.o.length){a.o.children("a").each(function(){d.push(c(this).text().replace(/^\s+/g,
""))});return this._check_unique(d,a.np.find("> ul > li").not(a.o),"check_move")}return true}}})})(jQuery);(function(c){c.jstree.plugin("radio",{__init:function(){this.data.radio.noui=this._get_settings().radio.override_ui;if(this.data.ui&&this.data.radio.noui){this.select_node=this.deselect_node=this.deselect_all=c.noop;this.get_selected=this.get_checked}this.get_container().bind("open_node.jstree create_node.jstree clean_node.jstree refresh.jstree",c.proxy(function(a,d){this._prepare_radios(d.rslt.obj)},
this)).bind("loaded.jstree",c.proxy(function(){this._prepare_radios()},this)).delegate(this.data.ui&&this.data.radio.noui?"a":"ins.jstree-radio","click.jstree",c.proxy(function(a){a.preventDefault();this._get_node(a.target).hasClass("jstree-checked")?this.uncheck_node(a.target):this.check_node(a.target);if(this.data.ui&&this.data.radio.noui){this.save_selected();this.data.cookies&&this.save_cookie("select_node")}else{a.stopImmediatePropagation();return false}},this))},defaults:{override_ui:false,
two_state:false,real_radios:false,checked_parent_open:true,real_radios_names:function(a){return["check_"+(a[0].id||Math.ceil(Math.random()*1E4)),1]}},__destroy:function(){this.get_container().find("input.jstree-real-radio").removeClass("jstree-real-radio").end().find("ins.jstree-radio").remove()},_fn:{_radio_notify:function(a,d){d.checked&&this.check_node(a,false)},_prepare_radios:function(a){a=!a||a==-1?this.get_container().find("> ul > li"):this._get_node(a);if(a!==false){var d,f=this,e,b=this._get_settings().radio.two_state,
g=this._get_settings().radio.real_radios,h=this._get_settings().radio.real_radios_names;a.each(function(){e=c(this);d=e.is("li")&&(e.hasClass("jstree-checked")||g&&e.children(":checked").length)?"jstree-checked":"jstree-unchecked";e.find("li").andSelf().each(function(){var j=c(this),l;j.children("a"+(f.data.languages?"":":eq(0)")).not(":has(.jstree-radio)").prepend("<ins class='jstree-radio'>&#160;</ins>").parent().not(".jstree-checked, .jstree-unchecked").addClass(b?"jstree-unchecked":d);if(g){if(j.children(":radio").length)j.children(":radio").addClass("jstree-real-radio");
else{l=h.call(f,j);j.prepend("<input type='radio' class='jstree-real-radio' id='"+l[0]+"' name='"+l[0]+"' value='"+l[1]+"' />")}d==="jstree-checked"&&j.children(":radio").attr("checked","checked")}d==="jstree-checked"&&!b&&j.find("li").addClass("jstree-checked")})});if(!b){a.length===1&&a.is("li")&&this._repair_state(a);a.is("li")?a.each(function(){f._repair_state(this)}):a.find("> ul > li").each(function(){f._repair_state(this)});a.find(".jstree-checked").parent().parent().each(function(){f._repair_state(this)})}}},
change_state:function(a,d){a=this._get_node(a);var f=false,e=this._get_settings().radio.real_radios;if(!a||a===-1)return false;d=d===false||d===true?d:a.hasClass("jstree-checked");if(this._get_settings().radio.two_state)if(d){a.removeClass("jstree-checked").addClass("jstree-unchecked");e&&a.children(":radio").removeAttr("checked")}else{a.removeClass("jstree-unchecked").addClass("jstree-checked");e&&a.children(":radio").attr("checked","checked")}else{if(d){f=a.find("li").andSelf();if(!f.filter(".jstree-checked, .jstree-undetermined").length)return false;
f.removeClass("jstree-checked jstree-undetermined").addClass("jstree-unchecked");e&&f.children(":radio").removeAttr("checked")}else{f=a.find("li").andSelf();if(!f.filter(".jstree-unchecked, .jstree-undetermined").length)return false;f.removeClass("jstree-unchecked jstree-undetermined").addClass("jstree-checked");e&&f.children(":radio").attr("checked","checked");if(this.data.ui)this.data.ui.last_selected=a;this.data.radio.last_selected=a}a.parentsUntil(".jstree","li").each(function(){var b=c(this);
if(d)if(b.children("ul").children("li.jstree-checked, li.jstree-undetermined").length){b.parentsUntil(".jstree","li").andSelf().removeClass("jstree-checked jstree-unchecked").addClass("jstree-undetermined");e&&b.parentsUntil(".jstree","li").andSelf().children(":radio").removeAttr("checked");return false}else{b.removeClass("jstree-checked jstree-undetermined").addClass("jstree-unchecked");e&&b.children(":radio").removeAttr("checked")}else if(b.children("ul").children("li.jstree-unchecked, li.jstree-undetermined").length){b.parentsUntil(".jstree",
"li").andSelf().removeClass("jstree-checked jstree-unchecked").addClass("jstree-undetermined");e&&b.parentsUntil(".jstree","li").andSelf().children(":radio").removeAttr("checked");return false}else{b.removeClass("jstree-unchecked jstree-undetermined").addClass("jstree-checked");e&&b.children(":radio").attr("checked","checked")}})}if(this.data.ui&&this.data.radio.noui)this.data.ui.selected=this.get_checked();this.__callback(a);return true},check_node:function(a){if(this.change_state(a,false)){a=this._get_node(a);
if(this._get_settings().radio.checked_parent_open){var d=this;a.parents(".jstree-closed").each(function(){d.open_node(this,false,true)})}this.__callback({obj:a})}},uncheck_node:function(a){this.change_state(a,true)&&this.__callback({obj:this._get_node(a)})},check_all:function(){var a=this;(this._get_settings().radio.two_state?this.get_container_ul().find("li"):this.get_container_ul().children("li")).each(function(){a.change_state(this,false)});this.__callback()},uncheck_all:function(){var a=this;
(this._get_settings().radio.two_state?this.get_container_ul().find("li"):this.get_container_ul().children("li")).each(function(){a.change_state(this,true)});this.__callback()},is_checked:function(a){a=this._get_node(a);return a.length?a.is(".jstree-checked"):false},get_checked:function(a,d){a=!a||a===-1?this.get_container():this._get_node(a);return d||this._get_settings().radio.two_state?a.find(".jstree-checked"):a.find("> ul > .jstree-checked, .jstree-undetermined > ul > .jstree-checked")},get_unchecked:function(a,
d){a=!a||a===-1?this.get_container():this._get_node(a);return d||this._get_settings().radio.two_state?a.find(".jstree-unchecked"):a.find("> ul > .jstree-unchecked, .jstree-undetermined > ul > .jstree-unchecked")},show_radios:function(){this.get_container().children("ul").removeClass("jstree-no-radios")},hide_radios:function(){this.get_container().children("ul").addClass("jstree-no-radios")},_repair_state:function(a){a=this._get_node(a);if(a.length){var d=this._get_settings().radio.real_radios,f=a.find("> ul > .jstree-checked").length,
e=a.find("> ul > .jstree-undetermined").length,b=a.find("> ul > li").length;if(b===0)a.hasClass("jstree-undetermined")&&this.change_state(a,false);else if(f===0&&e===0)this.change_state(a,true);else if(f===b)this.change_state(a,false);else{a.parentsUntil(".jstree","li").andSelf().removeClass("jstree-checked jstree-unchecked").addClass("jstree-undetermined");d&&a.parentsUntil(".jstree","li").andSelf().children(":radio").removeAttr("checked")}}},reselect:function(){if(this.data.ui&&this.data.radio.noui){var a=
this,d=this.data.ui.to_select;d=c.map(c.makeArray(d),function(f){return"#"+f.toString().replace(/^#/,"").replace(/\\\//g,"/").replace(/\//g,"\\/").replace(/\\\./g,".").replace(/\./g,"\\.")});this.deselect_all();c.each(d,function(f,e){a.check_node(e)});this.__callback()}else this.__call_old()},save_loaded:function(){var a=this;this.data.core.to_load=[];this.get_container_ul().find("li.jstree-closed.jstree-undetermined").each(function(){this.id&&a.data.core.to_load.push("#"+this.id)})}}});c(function(){c.vakata.css.add_sheet({str:".jstree .jstree-real-radio { display:none; } ",
title:"jstree"})})})(jQuery);(function(c){c.jstree.plugin("wholerow",{__init:function(){if(!this.data.ui)throw"jsTree wholerow: jsTree UI plugin not included.";this.data.wholerow.html=false;this.data.wholerow.to=false;this.get_container().bind("init.jstree",c.proxy(function(){this._get_settings().core.animation=0},this)).bind("open_node.jstree create_node.jstree clean_node.jstree loaded.jstree",c.proxy(function(a,d){this._prepare_wholerow_span(d&&d.rslt&&d.rslt.obj?d.rslt.obj:-1)},this)).bind("search.jstree clear_search.jstree reopen.jstree after_open.jstree after_close.jstree create_node.jstree delete_node.jstree clean_node.jstree",
c.proxy(function(a,d){this.data.to&&clearTimeout(this.data.to);this.data.to=setTimeout(function(f,e){return function(){f._prepare_wholerow_ul(e)}}(this,d&&d.rslt&&d.rslt.obj?d.rslt.obj:-1),0)},this)).bind("deselect_all.jstree",c.proxy(function(){this.get_container().find(" > .jstree-wholerow .jstree-clicked").removeClass("jstree-clicked "+(this.data.themeroller?this._get_settings().themeroller.item_a:""))},this)).bind("select_node.jstree deselect_node.jstree ",c.proxy(function(a,d){d.rslt.obj.each(function(){d.inst.get_container().find(" > .jstree-wholerow li:visible:eq("+
parseInt((c(this).offset().top-d.inst.get_container().offset().top+d.inst.get_container()[0].scrollTop)/d.inst.data.core.li_height,10)+")").children("a").attr("class",d.rslt.obj.children("a").attr("class"))})},this)).bind("hover_node.jstree dehover_node.jstree",c.proxy(function(a,d){this.get_container().find(" > .jstree-wholerow .jstree-hovered").removeClass("jstree-hovered "+(this.data.themeroller?this._get_settings().themeroller.item_h:""));a.type==="hover_node"&&this.get_container().find(" > .jstree-wholerow li:visible:eq("+
parseInt((d.rslt.obj.offset().top-this.get_container().offset().top+this.get_container()[0].scrollTop)/this.data.core.li_height,10)+")").children("a").attr("class",d.rslt.obj.children(".jstree-hovered").attr("class"))},this)).delegate(".jstree-wholerow-span, ins.jstree-icon, li","click.jstree",function(a){var d=c(a.currentTarget);if(!(a.target.tagName==="A"||a.target.tagName==="INS"&&d.closest("li").is(".jstree-open, .jstree-closed"))){d.closest("li").children("a:visible:eq(0)").click();a.stopImmediatePropagation()}}).delegate("li",
"mouseover.jstree",c.proxy(function(a){a.stopImmediatePropagation();if(c(a.currentTarget).children(".jstree-hovered, .jstree-clicked").length)return false;this.hover_node(a.currentTarget);return false},this)).delegate("li","mouseleave.jstree",c.proxy(function(a){c(a.currentTarget).children("a").hasClass("jstree-hovered").length||this.dehover_node(a.currentTarget)},this));if(t||r)c.vakata.css.add_sheet({str:".jstree-"+this.get_index()+" { position:relative; } ",title:"jstree"})},defaults:{},__destroy:function(){this.get_container().children(".jstree-wholerow").remove();
this.get_container().find(".jstree-wholerow-span").remove()},_fn:{_prepare_wholerow_span:function(a){a=!a||a==-1?this.get_container().find("> ul > li"):this._get_node(a);a!==false&&a.each(function(){c(this).find("li").andSelf().each(function(){var d=c(this);if(d.children(".jstree-wholerow-span").length)return true;d.prepend("<span class='jstree-wholerow-span' style='width:"+d.parentsUntil(".jstree","li").length*18+"px;'>&#160;</span>")})})},_prepare_wholerow_ul:function(){var a=this.get_container().children("ul").eq(0),
d=a.html();a.addClass("jstree-wholerow-real");if(this.data.wholerow.last_html!==d){this.data.wholerow.last_html=d;this.get_container().children(".jstree-wholerow").remove();this.get_container().append(a.clone().removeClass("jstree-wholerow-real").wrapAll("<div class='jstree-wholerow' />").parent().width(a.parent()[0].scrollWidth).css("top",(a.height()+(t?5:0))*-1).find("li[id]").each(function(){this.removeAttribute("id")}).end())}}}});c(function(){var a=".jstree .jstree-wholerow-real { position:relative; z-index:1; } .jstree .jstree-wholerow-real li { cursor:pointer; } .jstree .jstree-wholerow-real a { border-left-color:transparent !important; border-right-color:transparent !important; } .jstree .jstree-wholerow { position:relative; z-index:0; height:0; } .jstree .jstree-wholerow ul, .jstree .jstree-wholerow li { width:100%; } .jstree .jstree-wholerow, .jstree .jstree-wholerow ul, .jstree .jstree-wholerow li, .jstree .jstree-wholerow a { margin:0 !important; padding:0 !important; } .jstree .jstree-wholerow, .jstree .jstree-wholerow ul, .jstree .jstree-wholerow li { background:transparent !important; }.jstree .jstree-wholerow ins, .jstree .jstree-wholerow span, .jstree .jstree-wholerow input { display:none !important; }.jstree .jstree-wholerow a, .jstree .jstree-wholerow a:hover { text-indent:-9999px; !important; width:100%; padding:0 !important; border-right-width:0px !important; border-left-width:0px !important; } .jstree .jstree-wholerow-span { position:absolute; left:0; margin:0px; padding:0; height:18px; border-width:0; padding:0; z-index:0; }";
if(u)a+=".jstree .jstree-wholerow a { display:block; height:18px; margin:0; padding:0; border:0; } .jstree .jstree-wholerow-real a { border-color:transparent !important; } ";if(t||r)a+=".jstree .jstree-wholerow, .jstree .jstree-wholerow li, .jstree .jstree-wholerow ul, .jstree .jstree-wholerow a { margin:0; padding:0; line-height:18px; } .jstree .jstree-wholerow a { display:block; height:18px; line-height:18px; overflow:hidden; } ";c.vakata.css.add_sheet({str:a,title:"jstree"})})})(jQuery);(function(c){var a=
["getChildren","getChildrenCount","getAttr","getName","getProps"],d=function(f,e){var b=true;f=f||{};e=[].concat(e);c.each(e,function(g,h){if(!c.isFunction(f[h]))return b=false});return b};c.jstree.plugin("model",{__init:function(){if(!this.data.json_data)throw"jsTree model: jsTree json_data plugin not included.";this._get_settings().json_data.data=function(f,e){var b=f==-1?this._get_settings().model.object:f.data("jstree_model");if(!d(b,a))return e.call(null,false);this._get_settings().model.async?
b.getChildren(c.proxy(function(g){this.model_done(g,e)},this)):this.model_done(b.getChildren(),e)}},defaults:{object:false,id_prefix:false,async:false},_fn:{model_done:function(f,e){var b=[],g=this._get_settings(),h=this;c.isArray(f)||(f=[f]);c.each(f,function(j,l){var i=l.getProps()||{};i.attr=l.getAttr()||{};if(l.getChildrenCount())i.state="closed";i.data=l.getName();if(!c.isArray(i.data))i.data=[i.data];if(h.data.types&&c.isFunction(l.getType))i.attr[g.types.type_attr]=l.getType();if(i.attr.id&&
g.model.id_prefix)i.attr.id=g.model.id_prefix+i.attr.id;if(!i.metadata)i.metadata={};i.metadata.jstree_model=l;b.push(i)});e.call(null,b)}}})})(jQuery)}})();

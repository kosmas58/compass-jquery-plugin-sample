(function(c){function f(a){var b=c('meta[name="csrf-token"]').attr("content");b&&a.setRequestHeader("X-CSRF-Token",b)}function h(a,b,d){b=c.Event(b);a.trigger(b,d);return b.result!==!1}function i(a){var b,d,e,g=a.data("type")||c.ajaxSettings&&c.ajaxSettings.dataType;if(h(a,"ajax:before")){if(a.is("form")){b=a.attr("method");d=a.attr("action");e=a.serializeArray();var f=a.data("ujs:submit-button");f&&(e.push(f),a.data("ujs:submit-button",null))}else b=a.data("method"),d=a.attr("href"),e=null;c.ajax({url:d,
type:b||"GET",data:e,dataType:g,beforeSend:function(b,c){c.dataType===void 0&&b.setRequestHeader("accept","*/*;q=0.5, "+c.accepts.script);return h(a,"ajax:beforeSend",[b,c])},success:function(b,c,d){a.trigger("ajax:success",[b,c,d])},complete:function(b,c){a.trigger("ajax:complete",[b,c])},error:function(b,c,d){a.trigger("ajax:error",[b,c,d])}})}}function j(a){a.find("input[data-disable-with], button[data-disable-with]").each(function(){var b=c(this),a=b.is("button")?"html":"val";b.data("ujs:enable-with",
b[a]());b[a](b.data("disable-with"));b.attr("disabled","disabled")})}function k(a){a.find("input[data-disable-with]:disabled, button[data-disable-with]:disabled").each(function(){var a=c(this),d=a.is("button")?"html":"val";if(a.data("ujs:enable-with"))a[d](a.data("ujs:enable-with"));a.removeAttr("disabled")})}function g(a){var b=a.data("confirm");return!b||h(a,"confirm")&&confirm(b)}function l(a){var b=!1;a.find("input[name][required]").each(function(){c(this).val()||(b=!0)});return b}"ajaxPrefilter"in
c?c.ajaxPrefilter(function(a,b,c){f(c)}):c(document).ajaxSend(function(a,b){f(b)});c("a[data-confirm], a[data-method], a[data-remote]").live("click.rails",function(){var a=c(this);if(!g(a))return!1;if(a.data("remote")!=void 0)return i(a),!1;else if(a.data("method")){var b=a.attr("href"),d=a.data("method"),a=c("meta[name=csrf-token]").attr("content"),e=c("meta[name=csrf-param]").attr("content"),b=c('<form method="post" action="'+b+'"></form>'),d='<input name="_method" value="'+d+'" type="hidden" />';
e!==void 0&&a!==void 0&&(d+='<input name="'+e+'" value="'+a+'" type="hidden" />');b.hide().append(d).appendTo("body");b.submit();return!1}});c("form").live("submit.rails",function(){var a=c(this),b=a.data("remote")!=void 0;if(!g(a))return!1;if(l(a))return!b;if(b)return i(a),!1;else setTimeout(function(){j(a)},13)});c("form input[type=submit], form input[type=image], form button[type=submit], form button:not([type])").live("click.rails",function(){var a=c(this);if(!g(a))return!1;var b=a.attr("name"),
b=b?{name:b,value:a.val()}:null;a.closest("form").data("ujs:submit-button",b)});c("form").live("ajax:beforeSend.rails",function(a){this==a.target&&j(c(this))});c("form").live("ajax:complete.rails",function(a){this==a.target&&k(c(this))})})(jQuery);
